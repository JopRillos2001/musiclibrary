var D9=Object.defineProperty,T9=Object.defineProperties,S9=Object.getOwnPropertyDescriptors,EH=Object.getOwnPropertySymbols,I9=Object.prototype.hasOwnProperty,A9=Object.prototype.propertyIsEnumerable,DH=(_t,Ve,J)=>Ve in _t?D9(_t,Ve,{enumerable:!0,configurable:!0,writable:!0,value:J}):_t[Ve]=J,St=(_t,Ve)=>{for(var J in Ve||(Ve={}))I9.call(Ve,J)&&DH(_t,J,Ve[J]);if(EH)for(var J of EH(Ve))A9.call(Ve,J)&&DH(_t,J,Ve[J]);return _t},es=(_t,Ve)=>T9(_t,S9(Ve));(self.webpackChunkMusicLibrary=self.webpackChunkMusicLibrary||[]).push([[179],{7506:(_t,Ve,J)=>{"use strict";J.d(Ve,{hO:()=>De,xv:()=>Ke,Dh:()=>ze,HU:()=>ot,GT:()=>nt,sI:()=>j,on:()=>gt,ss:()=>Re,pX:()=>Oe,yq:()=>Ct});var c=J(2869),B=J(8843);const Pe=new class extends B.v{}(class extends c.o{constructor(Be,We){super(Be,We),this.scheduler=Be,this.work=We}schedule(Be,We=0){return We>0?super.schedule(Be,We):(this.delay=We,this.state=Be,this.scheduler.flush(this),this)}execute(Be,We){return We>0||this.closed?super.execute(Be,We):this._execute(Be,We)}requestAsyncId(Be,We,bt=0){return null!=bt&&bt>0||null==bt&&this.delay>0?super.requestAsyncId(Be,We,bt):Be.flush(this)}});var we=J(2210),Ae=J(7384),Ie=J(5222),Y=J(4763),_e=J(3668),pe=J(7713);function Me(){}_t=J.hmd(_t);class ve{constructor(Be,We=Pe){this.zone=Be,this.delegate=We}now(){return this.delegate.now()}schedule(Be,We,bt){const Je=this.zone;return this.delegate.schedule(function(rt){Je.runGuarded(()=>{Be.apply(this,[rt])})},We,bt)}}class Ge{constructor(Be){this.zone=Be,this.task=null}call(Be,We){const bt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Me,{},Me,Me)),We.pipe((0,Ae.b)({next:bt,complete:bt,error:bt})).subscribe(Be).add(bt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class ot{constructor(Be){this.ngZone=Be,this.outsideAngular=Be.runOutsideAngular(()=>new ve(Zone.current)),this.insideAngular=Be.run(()=>new ve(Zone.current,we.z))}}function Re(ie){return function(We){return(We=We.lift(new Ge(ie.ngZone))).pipe((0,Ie.R)(ie.outsideAngular),(0,Y.Q)(ie.insideAngular))}}const be=["ngOnDestroy"],Oe=(ie,Be,We,bt={})=>new Proxy(ie,{get:(Je,st)=>We.runOutsideAngular(()=>{var rt;if(ie[st])return(null===(rt=null==bt?void 0:bt.spy)||void 0===rt?void 0:rt.get)&&bt.spy.get(st,ie[st]),ie[st];if(be.indexOf(st)>-1)return()=>{};const Ye=Be.toPromise().then(It=>{const Ut=It&&It[st];return"function"==typeof Ut?Ut.bind(It):Ut&&Ut.then?Ut.then(Xt=>We.run(()=>Xt)):We.run(()=>Ut)});return new Proxy(()=>{},{get:(It,Ut)=>Ye[Ut],apply:(It,Ut,Xt)=>Ye.then(Fr=>{var Yn;const tr=Fr&&Fr(...Xt);return(null===(Yn=null==bt?void 0:bt.spy)||void 0===Yn?void 0:Yn.apply)&&bt.spy.apply(st,Xt,tr),tr})})})}),nt=(ie,Be)=>{Be.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(bt=>{Object.defineProperty(ie.prototype,bt,Object.getOwnPropertyDescriptor(We.prototype||We,bt))})})},ze=new _e.OlP("angularfire2.app.options"),Ke=new _e.OlP("angularfire2.app.nameOrConfig"),je=new _e.GfV("6.1.5");function gt(ie,Be,We){const Je="object"==typeof We&&We||{};Je.name=Je.name||"string"==typeof We&&We||"[DEFAULT]";const rt=pe.Z.apps.filter(Ye=>Ye&&Ye.name===Je.name)[0]||Be.runOutsideAngular(()=>pe.Z.initializeApp(ie,Je));try{JSON.stringify(ie)!==JSON.stringify(rt.options)&&ee("error",`${rt.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ye){}return rt}const Ct=()=>{ee("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},ee=(ie,...Be)=>{(0,_e.X6Q)()&&"undefined"!=typeof console&&console[ie](...Be)};function j(ie,Be,We,bt,Je){const[st,...rt]=globalThis.\u0275AngularfireInstanceCache.get(ie)||[];if(st){try{Je.some((Ye,It)=>{const Ut=rt[It];return Ye&&"object"==typeof Ye?JSON.stringify(Ye)!==JSON.stringify(Ut):Ye!==Ut})&&ee("error",`${Be} was already initialized on the ${We.name} Firebase App instance with different settings.${_t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(Ye){}return st}{const Ye=bt();return globalThis.\u0275AngularfireInstanceCache.set(ie,[Ye,...Je]),Ye}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const he={provide:class{},useFactory:gt,deps:[ze,_e.R0b,[new _e.FiY,Ke]]};let De=(()=>{class ie{constructor(We){pe.Z.registerVersion("angularfire",je.full,We.toString()),pe.Z.registerVersion("angular",_e.q4F.full)}static initializeApp(We,bt){return{ngModule:ie,providers:[{provide:ze,useValue:We},{provide:Ke,useValue:bt}]}}}return ie.\u0275fac=function(We){return new(We||ie)(_e.LFG(_e.Lbi))},ie.\u0275mod=_e.oAB({type:ie}),ie.\u0275inj=_e.cJS({providers:[he]}),ie})()},5229:(_t,Ve,J)=>{"use strict";var c=J(417),H=J(8391),B=J(4762),ge=J(8305),Pe=J(6433);function Ue(X){return X&&"object"==typeof X&&"default"in X?X:{default:X}}var Ae,we=Ue(c),Ie=((Ae={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",Ae["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",Ae["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Ae["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Ae["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Ae["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Ae["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Ae["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Ae["recaptcha-error"]="ReCAPTCHA error.",Ae),Y=new ge.ErrorFactory("appCheck","AppCheck",Ie),_e=new Map,pe={activated:!1,tokenObservers:[]},Me={enabled:!1};function ve(X){return _e.get(X)||pe}function Ge(X,te){_e.set(X,te)}function ot(){return Me}var Re="https://content-firebaseappcheck.googleapis.com/v1beta",ze=function(){function X(te,de,Te,$e,et){if(this.operation=te,this.retryPolicy=de,this.getWaitDuration=Te,this.lowerBound=$e,this.upperBound=et,this.pending=null,this.nextErrorWaitInterval=$e,$e>et)throw new Error("Proactive refresh lower bound greater than upper bound!")}return X.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},X.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},X.prototype.isRunning=function(){return!!this.pending},X.prototype.process=function(te){return B.__awaiter(this,void 0,void 0,function(){var de;return B.__generator(this,function(Te){switch(Te.label){case 0:this.stop(),Te.label=1;case 1:return Te.trys.push([1,6,,7]),this.pending=new ge.Deferred,[4,Ke(this.getNextRun(te))];case 2:return Te.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return Te.sent(),this.pending=new ge.Deferred,[4,this.operation()];case 4:return Te.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return Te.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return de=Te.sent(),this.retryPolicy(de)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},X.prototype.getNextRun=function(te){if(te)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var de=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),de},X}();function Ke(X){return new Promise(function(te){setTimeout(te,X)})}function Qe(){return self.grecaptcha}function je(X){if(!ve(X).activated)throw Y.create("use-before-activation",{appName:X.name})}function Ct(X){return ge.base64.encodeString(JSON.stringify(X),!1)}function ee(X,te){var de=X.url,Te=X.body;return B.__awaiter(this,void 0,void 0,function(){var $e,et,vt,en,En,_n,gr,ao,ua,Lr;return B.__generator(this,function(Fo){switch(Fo.label){case 0:$e={"Content-Type":"application/json"},(et=te.getImmediate({optional:!0}))&&($e["X-Firebase-Client"]=et.getPlatformInfoString()),vt={method:"POST",body:JSON.stringify(Te),headers:$e},Fo.label=1;case 1:return Fo.trys.push([1,3,,4]),[4,fetch(de,vt)];case 2:return en=Fo.sent(),[3,4];case 3:throw En=Fo.sent(),Y.create("fetch-network-error",{originalErrorMessage:En.message});case 4:if(200!==en.status)throw Y.create("fetch-status-error",{httpStatus:en.status});Fo.label=5;case 5:return Fo.trys.push([5,7,,8]),[4,en.json()];case 6:return _n=Fo.sent(),[3,8];case 7:throw gr=Fo.sent(),Y.create("fetch-parse-error",{originalErrorMessage:gr.message});case 8:if(!(ao=_n.ttl.match(/^([\d.]+)(s)$/))||!ao[2]||isNaN(Number(ao[1])))throw Y.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+_n.ttl});return ua=1e3*Number(ao[1]),Lr=Date.now(),[2,{token:_n.attestationToken,expireTimeMillis:Lr+ua,issuedAtTimeMillis:Lr}]}})})}function ce(X,te){var de=X.options;return{url:Re+"/projects/"+de.projectId+"/apps/"+de.appId+":exchangeRecaptchaToken?key="+de.apiKey,body:{recaptcha_token:te}}}function j(X,te){var de=X.options;return{url:Re+"/projects/"+de.projectId+"/apps/"+de.appId+":exchangeDebugToken?key="+de.apiKey,body:{debug_token:te}}}var ie="firebase-app-check-store",Be="debug-token",We=null;function bt(){return We||(We=new Promise(function(X,te){try{var de=indexedDB.open("firebase-app-check-database",1);de.onsuccess=function(Te){X(Te.target.result)},de.onerror=function(Te){var $e;te(Y.create("storage-open",{originalErrorMessage:null===($e=Te.target.error)||void 0===$e?void 0:$e.message}))},de.onupgradeneeded=function(Te){0===Te.oldVersion&&Te.target.result.createObjectStore(ie,{keyPath:"compositeKey"})}}catch(Te){te(Y.create("storage-open",{originalErrorMessage:Te.message}))}}))}function Je(X){return Ut(Xt(X))}function It(X,te){return B.__awaiter(this,void 0,void 0,function(){var de,Te,$e,et;return B.__generator(this,function(vt){switch(vt.label){case 0:return[4,bt()];case 1:return de=vt.sent(),Te=de.transaction(ie,"readwrite"),$e=Te.objectStore(ie),et=$e.put({compositeKey:X,value:te}),[2,new Promise(function(en,En){et.onsuccess=function(_n){en()},Te.onerror=function(_n){var gr;En(Y.create("storage-set",{originalErrorMessage:null===(gr=_n.target.error)||void 0===gr?void 0:gr.message}))}})]}})})}function Ut(X){return B.__awaiter(this,void 0,void 0,function(){var te,de,Te,$e;return B.__generator(this,function(et){switch(et.label){case 0:return[4,bt()];case 1:return te=et.sent(),de=te.transaction(ie,"readonly"),Te=de.objectStore(ie),$e=Te.get(X),[2,new Promise(function(vt,en){$e.onsuccess=function(En){var _n=En.target.result;vt(_n?_n.value:void 0)},de.onerror=function(En){var _n;en(Y.create("storage-get",{originalErrorMessage:null===(_n=En.target.error)||void 0===_n?void 0:_n.message}))}})]}})})}function Xt(X){return X.options.appId+"-"+X.name}var Fr=new Pe.Logger("@firebase/app-check");function tr(X,te){return ge.isIndexedDBAvailable()?function(X,te){return It(Xt(X),te)}(X,te).catch(function(de){Fr.warn("Failed to write token to indexeddb. Error: "+de)}):Promise.resolve()}function Ss(){return B.__awaiter(this,void 0,void 0,function(){var X;return B.__generator(this,function(te){if((X=ot()).enabled&&X.token)return[2,X.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var un={error:"UNKNOWN_ERROR"};function $t(X,te,de){return void 0===de&&(de=!1),B.__awaiter(this,void 0,void 0,function(){var Te,$e,et,vt,en,En,_n,gr,ao,ua;return B.__generator(this,function(Lr){switch(Lr.label){case 0:return je(X),Te=ve(X),et=void 0,($e=Te.token)?[3,2]:[4,Te.cachedTokenPromise];case 1:(vt=Lr.sent())&&nr(vt)&&($e=vt,Ge(X,B.__assign(B.__assign({},Te),{token:$e})),hn(X,{token:$e.token})),Lr.label=2;case 2:return!de&&$e&&nr($e)?[2,{token:$e.token}]:ot().enabled?(En=ee,_n=j,gr=[X],[4,Ss()]):[3,6];case 3:return[4,En.apply(void 0,[_n.apply(void 0,gr.concat([Lr.sent()])),te])];case 4:return en=Lr.sent(),[4,tr(X,en)];case 5:return Lr.sent(),Ge(X,B.__assign(B.__assign({},Te),{token:en})),[2,{token:en.token}];case 6:return Lr.trys.push([6,8,,9]),[4,Te.provider.getToken()];case 7:return $e=Lr.sent(),[3,9];case 8:return ao=Lr.sent(),Fr.error(ao),et=ao,[3,9];case 9:return $e?[3,10]:(ua=function(X){return{token:Ct(un),error:X}}(et),[3,12]);case 10:return ua={token:$e.token},Ge(X,B.__assign(B.__assign({},Te),{token:$e})),[4,tr(X,$e)];case 11:Lr.sent(),Lr.label=12;case 12:return hn(X,ua),[2,ua]}})})}function Gr(X,te,de,Te,$e){var et=ve(X),vt={next:Te,error:$e,type:de},en=B.__assign(B.__assign({},et),{tokenObservers:B.__spreadArray(B.__spreadArray([],et.tokenObservers),[vt])});if(!en.tokenRefresher){var En=function(X,te){var de=this;return new ze(function(){return B.__awaiter(de,void 0,void 0,function(){var $e;return B.__generator(this,function(et){switch(et.label){case 0:return ve(X).token?[3,2]:[4,$t(X,te)];case 1:return $e=et.sent(),[3,4];case 2:return[4,$t(X,te,!0)];case 3:$e=et.sent(),et.label=4;case 4:if($e.error)throw $e.error;return[2]}})})},function(){return!0},function(){var Te=ve(X);if(Te.token){var $e=Te.token.issuedAtTimeMillis+.5*(Te.token.expireTimeMillis-Te.token.issuedAtTimeMillis)+3e5;return $e=Math.min($e,Te.token.expireTimeMillis-3e5),Math.max(0,$e-Date.now())}return 0},3e4,96e4)}(X,te);en.tokenRefresher=En}if(!en.tokenRefresher.isRunning()&&et.isTokenAutoRefreshEnabled&&en.tokenRefresher.start(),et.token&&nr(et.token)){var _n=et.token;Promise.resolve().then(function(){return Te({token:_n.token})}).catch(function(){})}else null==et.token&&et.cachedTokenPromise.then(function(gr){gr&&nr(gr)&&Te({token:gr.token})}).catch(function(){});Ge(X,en)}function jn(X,te){var de=ve(X),Te=de.tokenObservers.filter(function($e){return $e.next!==te});0===Te.length&&de.tokenRefresher&&de.tokenRefresher.isRunning()&&de.tokenRefresher.stop(),Ge(X,B.__assign(B.__assign({},de),{tokenObservers:Te}))}function hn(X,te){for(var Te=0,$e=ve(X).tokenObservers;Te<$e.length;Te++){var et=$e[Te];try{"EXTERNAL"===et.type&&null!=te.error?et.error(te.error):et.next(te)}catch(vt){}}}function nr(X){return X.expireTimeMillis-Date.now()>0}function so(X){return B.__awaiter(this,void 0,void 0,function(){var de;return B.__generator(this,function(Te){switch(Te.label){case 0:return je(X),[4,ve(X).reCAPTCHAState.initialized.promise];case 1:return de=Te.sent(),[2,new Promise(function($e,et){var vt=ve(X).reCAPTCHAState;de.ready(function(){$e(de.execute(vt.widgetId,{action:"fire_app_check"}))})})]}})})}function Ar(X,te,de,Te){var $e=de.render(Te,{sitekey:te,size:"invisible"}),et=ve(X);Ge(X,B.__assign(B.__assign({},et),{reCAPTCHAState:B.__assign(B.__assign({},et.reCAPTCHAState),{widgetId:$e})}))}var rr=function(){function X(te){this._siteKey=te}return X.prototype.getToken=function(){return B.__awaiter(this,void 0,void 0,function(){var te;return B.__generator(this,function(de){switch(de.label){case 0:if(!this._app||!this._platformLoggerProvider)throw Y.create("use-before-activation",{appName:""});de.label=1;case 1:return de.trys.push([1,3,,4]),[4,so(this._app)];case 2:return te=de.sent(),[3,4];case 3:throw de.sent(),Y.create("recaptcha-error");case 4:return[2,ee(ce(this._app,te),this._platformLoggerProvider)]}})})},X.prototype.initialize=function(te,de){this._app=te,this._platformLoggerProvider=de,function(X,te){var de=ve(X),Te=new ge.Deferred;Ge(X,B.__assign(B.__assign({},de),{reCAPTCHAState:{initialized:Te}}));var $e="fire_app_check_"+X.name,et=document.createElement("div");et.id=$e,et.style.display="none",document.body.appendChild(et);var vt=Qe();return vt?vt.ready(function(){Ar(X,te,vt,$e),Te.resolve(vt)}):function(X){var te=document.createElement("script");te.src="https://www.google.com/recaptcha/api.js",te.onload=X,document.head.appendChild(te)}(function(){var en=Qe();if(!en)throw new Error("no recaptcha");en.ready(function(){Ar(X,te,en,$e),Te.resolve(en)})}),Te.promise}(te,this._siteKey).catch(function(){})},X}(),yt=function(){function X(te){this._customProviderOptions=te}return X.prototype.getToken=function(){return B.__awaiter(this,void 0,void 0,function(){var te,de,Te;return B.__generator(this,function($e){switch($e.label){case 0:if(!this._app)throw Y.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return te=$e.sent(),de=ge.issuedAtTime(te.token),Te=null!==de&&de<Date.now()&&de>0?1e3*de:Date.now(),[2,B.__assign(B.__assign({},te),{issuedAtTimeMillis:Te})]}})})},X.prototype.initialize=function(te){this._app=te},X}();function In(X,te){return{app:X,activate:function(de,Te){return function(X,te,de,Te){var $e=ve(X);if($e.activated)throw Y.create("already-activated",{appName:X.name});var et=B.__assign(B.__assign({},$e),{activated:!0});et.cachedTokenPromise=function(X){return B.__awaiter(this,void 0,void 0,function(){var te,de;return B.__generator(this,function(Te){switch(Te.label){case 0:if(!ge.isIndexedDBAvailable())return[3,5];te=void 0,Te.label=1;case 1:return Te.trys.push([1,3,,4]),[4,Je(X)];case 2:return te=Te.sent(),[3,4];case 3:return de=Te.sent(),Fr.warn("Failed to read token from indexeddb. Error: "+de),[3,4];case 4:return[2,te];case 5:return[2,void 0]}})})}(X).then(function(vt){return vt&&nr(vt)&&Ge(X,B.__assign(B.__assign({},ve(X)),{token:vt})),vt}),et.provider="string"==typeof te?new rr(te):te instanceof rr||te instanceof yt?te:new yt({getToken:te.getToken}),et.isTokenAutoRefreshEnabled=void 0===Te?X.automaticDataCollectionEnabled:Te,Ge(X,et),et.provider.initialize(X,de)}(X,de,te,Te)},setTokenAutoRefreshEnabled:function(de){return function(X,te){var de=ve(X);de.tokenRefresher&&(!0===te?de.tokenRefresher.start():de.tokenRefresher.stop()),Ge(X,B.__assign(B.__assign({},de),{isTokenAutoRefreshEnabled:te}))}(X,de)},getToken:function(de){return function(X,te,de){return B.__awaiter(this,void 0,void 0,function(){var Te;return B.__generator(this,function($e){switch($e.label){case 0:return[4,$t(X,te,de)];case 1:if((Te=$e.sent()).error)throw Te.error;return[2,{token:Te.token}]}})})}(X,te,de)},onTokenChanged:function(de,Te,$e){return function(X,te,de,Te,$e){var et,vt=function(){};return et=null!=de.next?de.next.bind(de):de,null!=de.error?vt=de.error.bind(de):Te&&(vt=Te),Gr(X,te,"EXTERNAL",et,vt),function(){return jn(X,et)}}(X,te,de,Te)},INTERNAL:{delete:function(){for(var Te=0,$e=ve(X).tokenObservers;Te<$e.length;Te++)jn(X,$e[Te].next);return Promise.resolve()}}}}var X,se="app-check-internal";(X=we.default).INTERNAL.registerComponent(new H.Component("appCheck",function(te){return In(te.getProvider("app").getImmediate(),te.getProvider("platform-logger"))},"PUBLIC").setServiceProps({ReCaptchaV3Provider:rr,CustomProvider:yt}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(te,de,Te){te.getProvider(se).initialize()})),X.INTERNAL.registerComponent(new H.Component(se,function(te){return function(X,te){return{getToken:function(de){return $t(X,te,de)},addTokenListener:function(de){return Gr(X,te,"INTERNAL",de)},removeTokenListener:function(de){return jn(X,de)}}}(te.getProvider("app").getImmediate(),te.getProvider("platform-logger"))},"PUBLIC").setInstantiationMode("EXPLICIT")),X.registerVersion("@firebase/app-check","0.3.2"),function(){var X=ge.getGlobal();if("string"==typeof X.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===X.FIREBASE_APPCHECK_DEBUG_TOKEN){var te=ot();te.enabled=!0;var de=new ge.Deferred;te.token=de,de.resolve("string"==typeof X.FIREBASE_APPCHECK_DEBUG_TOKEN?X.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return B.__awaiter(this,void 0,void 0,function(){var X,te;return B.__generator(this,function(de){switch(de.label){case 0:X=void 0,de.label=1;case 1:return de.trys.push([1,3,,4]),[4,Ut(Be)];case 2:return X=de.sent(),[3,4];case 3:return de.sent(),[3,4];case 4:return X?[2,X]:(te="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(X){var te=16*Math.random()|0;return("x"===X?te:3&te|8).toString(16)}),function(X){return It(Be,X)}(te).catch(function(Te){return Fr.warn("Failed to persist debug token to indexeddb. Error: "+Te)}),console.log("AppCheck debug token: "+te+". You will need to whitelist it in the Firebase console for it to work"),[2,te])}})})}())}}()},417:(_t,Ve,J)=>{"use strict";J.r(Ve),J.d(Ve,{default:()=>st,firebase:()=>Je});var Pe,Ke,c=J(4762),H=J(8305),B=J(8391),ge=J(6433),Ue=((Pe={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Pe["bad-app-name"]="Illegal App name: '{$appName}",Pe["duplicate-app"]="Firebase App named '{$appName}' already exists",Pe["app-deleted"]="Firebase App named '{$appName}' already deleted",Pe["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Pe["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Pe),we=new H.ErrorFactory("app","Firebase",Ue),Ae="@firebase/app",Qe="[DEFAULT]",je=((Ke={})[Ae]="fire-core",Ke["@firebase/analytics"]="fire-analytics",Ke["@firebase/app-check"]="fire-app-check",Ke["@firebase/auth"]="fire-auth",Ke["@firebase/database"]="fire-rtdb",Ke["@firebase/functions"]="fire-fn",Ke["@firebase/installations"]="fire-iid",Ke["@firebase/messaging"]="fire-fcm",Ke["@firebase/performance"]="fire-perf",Ke["@firebase/remote-config"]="fire-rc",Ke["@firebase/storage"]="fire-gcs",Ke["@firebase/firestore"]="fire-fst",Ke["fire-js"]="fire-js",Ke["firebase-wrapper"]="fire-js-all",Ke),gt=new ge.Logger("@firebase/app"),Ct=function(){function rt(Ye,It,Ut){var Xt=this;this.firebase_=Ut,this.isDeleted_=!1,this.name_=It.name,this.automaticDataCollectionEnabled_=It.automaticDataCollectionEnabled||!1,this.options_=(0,H.deepCopy)(Ye),this.container=new B.ComponentContainer(It.name),this._addComponent(new B.Component("app",function(){return Xt},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(Fr){return Xt._addComponent(Fr)})}return Object.defineProperty(rt.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Ye){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Ye},enumerable:!1,configurable:!0}),Object.defineProperty(rt.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(rt.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),rt.prototype.delete=function(){var Ye=this;return new Promise(function(It){Ye.checkDestroyed_(),It()}).then(function(){return Ye.firebase_.INTERNAL.removeApp(Ye.name_),Promise.all(Ye.container.getProviders().map(function(It){return It.delete()}))}).then(function(){Ye.isDeleted_=!0})},rt.prototype._getService=function(Ye,It){var Ut;void 0===It&&(It=Qe),this.checkDestroyed_();var Xt=this.container.getProvider(Ye);return!Xt.isInitialized()&&"EXPLICIT"===(null===(Ut=Xt.getComponent())||void 0===Ut?void 0:Ut.instantiationMode)&&Xt.initialize(),Xt.getImmediate({identifier:It})},rt.prototype._removeServiceInstance=function(Ye,It){void 0===It&&(It=Qe),this.container.getProvider(Ye).clearInstance(It)},rt.prototype._addComponent=function(Ye){try{this.container.addComponent(Ye)}catch(It){gt.debug("Component "+Ye.name+" failed to register with FirebaseApp "+this.name,It)}},rt.prototype._addOrOverwriteComponent=function(Ye){this.container.addOrOverwriteComponent(Ye)},rt.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},rt.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw we.create("app-deleted",{appName:this.name_})},rt}();Ct.prototype.name&&Ct.prototype.options||Ct.prototype.delete||console.log("dc");var he=function j(){var rt=function(rt){var Ye={},It=new Map,Ut={__esModule:!0,initializeApp:function(un,$t){void 0===$t&&($t={}),("object"!=typeof $t||null===$t)&&($t={name:$t});var jn=$t;void 0===jn.name&&(jn.name=Qe);var ft=jn.name;if("string"!=typeof ft||!ft)throw we.create("bad-app-name",{appName:String(ft)});if((0,H.contains)(Ye,ft))throw we.create("duplicate-app",{appName:ft});var hn=new rt(un,jn,Ut);return Ye[ft]=hn,hn},app:Fr,registerVersion:function(un,$t,Gr){var jn,ft=null!==(jn=je[un])&&void 0!==jn?jn:un;Gr&&(ft+="-"+Gr);var hn=ft.match(/\s|\//),nr=$t.match(/\s|\//);if(hn||nr){var Rn=['Unable to register library "'+ft+'" with version "'+$t+'":'];return hn&&Rn.push('library name "'+ft+'" contains illegal characters (whitespace or "/")'),hn&&nr&&Rn.push("and"),nr&&Rn.push('version name "'+$t+'" contains illegal characters (whitespace or "/")'),void gt.warn(Rn.join(" "))}oo(new B.Component(ft+"-version",function(){return{library:ft,version:$t}},"VERSION"))},setLogLevel:ge.setLogLevel,onLog:function(un,$t){if(null!==un&&"function"!=typeof un)throw we.create("invalid-log-argument");(0,ge.setUserLogHandler)(un,$t)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:oo,removeApp:function(un){delete Ye[un]},components:It,useAsService:function(un,$t){return"serverAuth"===$t?null:$t}}};function Fr(un){if(!(0,H.contains)(Ye,un=un||Qe))throw we.create("no-app",{appName:un});return Ye[un]}function oo(un){var $t=un.name;if(It.has($t))return gt.debug("There were multiple attempts to register component "+$t+"."),"PUBLIC"===un.type?Ut[$t]:null;if(It.set($t,un),"PUBLIC"===un.type){var Gr=function(nr){if(void 0===nr&&(nr=Fr()),"function"!=typeof nr[$t])throw we.create("invalid-app-argument",{appName:$t});return nr[$t]()};void 0!==un.serviceProps&&(0,H.deepExtend)(Gr,un.serviceProps),Ut[$t]=Gr,rt.prototype[$t]=function(){for(var nr=[],Rn=0;Rn<arguments.length;Rn++)nr[Rn]=arguments[Rn];return this._getService.bind(this,$t).apply(this,un.multipleInstances?nr:[])}}for(var jn=0,ft=Object.keys(Ye);jn<ft.length;jn++)Ye[ft[jn]]._addComponent(un);return"PUBLIC"===un.type?Ut[$t]:null}return Ut.default=Ut,Object.defineProperty(Ut,"apps",{get:function(){return Object.keys(Ye).map(function(un){return Ye[un]})}}),Fr.App=rt,Ut}(Ct);return rt.INTERNAL=(0,c.__assign)((0,c.__assign)({},rt.INTERNAL),{createFirebaseNamespace:j,extendNamespace:function(It){(0,H.deepExtend)(rt,It)},createSubscribe:H.createSubscribe,ErrorFactory:H.ErrorFactory,deepExtend:H.deepExtend}),rt}(),De=function(){function rt(Ye){this.container=Ye}return rt.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(It){if(function(rt){var Ye=rt.getComponent();return"VERSION"===(null==Ye?void 0:Ye.type)}(It)){var Ut=It.getImmediate();return Ut.library+"/"+Ut.version}return null}).filter(function(It){return It}).join(" ")},rt}();if((0,H.isBrowser)()&&void 0!==self.firebase){gt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var We=self.firebase.SDK_VERSION;We&&We.indexOf("LITE")>=0&&gt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var bt=he.initializeApp;he.initializeApp=function(){for(var rt=[],Ye=0;Ye<arguments.length;Ye++)rt[Ye]=arguments[Ye];return(0,H.isNode)()&&gt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),bt.apply(void 0,rt)};var rt,Je=he;(rt=Je).INTERNAL.registerComponent(new B.Component("platform-logger",function(It){return new De(It)},"PRIVATE")),rt.registerVersion(Ae,"0.6.30",undefined),rt.registerVersion("fire-js","");const st=Je},6779:(_t,Ve,J)=>{"use strict";var c=J(417);(function(){var H,B="function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,w){a!=Array.prototype&&a!=Object.prototype&&(a[f]=w.value)},Pe=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var f=0;f<a.length;++f){var w=a[f];if(w&&w.Math==Math)return w}return globalThis}(this);function we(a){var f=0;return function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}}}function Ae(a){var f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return f?f.call(a):{next:we(a)}}!function(a,f){if(f){var w=Pe;a=a.split(".");for(var S=0;S<a.length-1;S++){var k=a[S];k in w||(w[k]={}),w=w[k]}(f=f(S=w[a=a[a.length-1]]))!=S&&null!=f&&B(w,a,{configurable:!0,writable:!0,value:f})}}("Promise",function(a){function f(G){this.b=0,this.c=void 0,this.a=[];var oe=this.f();try{G(oe.resolve,oe.reject)}catch(Le){oe.reject(Le)}}function w(){this.a=null}function S(G){return G instanceof f?G:new f(function(oe){oe(G)})}if(a)return a;w.prototype.b=function(G){if(null==this.a){this.a=[];var oe=this;this.c(function(){oe.g()})}this.a.push(G)};var k=Pe.setTimeout;w.prototype.c=function(G){k(G,0)},w.prototype.g=function(){for(;this.a&&this.a.length;){var G=this.a;this.a=[];for(var oe=0;oe<G.length;++oe){var Le=G[oe];G[oe]=null;try{Le()}catch(Xe){this.f(Xe)}}}this.a=null},w.prototype.f=function(G){this.c(function(){throw G})},f.prototype.f=function(){function G(Xe){return function(Qt){Le||(Le=!0,Xe.call(oe,Qt))}}var oe=this,Le=!1;return{resolve:G(this.m),reject:G(this.g)}},f.prototype.m=function(G){if(G===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(G instanceof f)this.s(G);else{e:switch(typeof G){case"object":var oe=null!=G;break e;case"function":oe=!0;break e;default:oe=!1}oe?this.v(G):this.h(G)}},f.prototype.v=function(G){var oe=void 0;try{oe=G.then}catch(Le){return void this.g(Le)}"function"==typeof oe?this.u(oe,G):this.h(G)},f.prototype.g=function(G){this.i(2,G)},f.prototype.h=function(G){this.i(1,G)},f.prototype.i=function(G,oe){if(0!=this.b)throw Error("Cannot settle("+G+", "+oe+"): Promise already settled in state"+this.b);this.b=G,this.c=oe,this.l()},f.prototype.l=function(){if(null!=this.a){for(var G=0;G<this.a.length;++G)U.b(this.a[G]);this.a=null}};var U=new w;return f.prototype.s=function(G){var oe=this.f();G.Ra(oe.resolve,oe.reject)},f.prototype.u=function(G,oe){var Le=this.f();try{G.call(oe,Le.resolve,Le.reject)}catch(Xe){Le.reject(Xe)}},f.prototype.then=function(G,oe){function Le(On,ki){return"function"==typeof On?function(ol){try{Xe(On(ol))}catch(Wv){Qt(Wv)}}:ki}var Xe,Qt,Zn=new f(function(On,ki){Xe=On,Qt=ki});return this.Ra(Le(G,Xe),Le(oe,Qt)),Zn},f.prototype.catch=function(G){return this.then(void 0,G)},f.prototype.Ra=function(G,oe){function Le(){switch(Xe.b){case 1:G(Xe.c);break;case 2:oe(Xe.c);break;default:throw Error("Unexpected state: "+Xe.b)}}var Xe=this;null==this.a?U.b(Le):this.a.push(Le)},f.resolve=S,f.reject=function(G){return new f(function(oe,Le){Le(G)})},f.race=function(G){return new f(function(oe,Le){for(var Xe=Ae(G),Qt=Xe.next();!Qt.done;Qt=Xe.next())S(Qt.value).Ra(oe,Le)})},f.all=function(G){var oe=Ae(G),Le=oe.next();return Le.done?S([]):new f(function(Xe,Qt){function Zn(ol){return function(Wv){On[ol]=Wv,0==--ki&&Xe(On)}}var On=[],ki=0;do{On.push(void 0),ki++,S(Le.value).Ra(Zn(On.length-1),Qt),Le=oe.next()}while(!Le.done)})},f});var Ie=Ie||{},Y=this||self,_e=/^[\w+/_-]+[=]{0,2}$/,pe=null;function Me(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&_e.test(a)?a:""}function ve(){}function Ge(a){var f=typeof a;return"object"!=f?f:a?Array.isArray(a)?"array":f:"null"}function ot(a){var f=Ge(a);return"array"==f||"object"==f&&"number"==typeof a.length}function Re(a){return"function"==Ge(a)}function be(a){var f=typeof a;return"object"==f&&null!=a||"function"==f}function Oe(a){return Object.prototype.hasOwnProperty.call(a,nt)&&a[nt]||(a[nt]=++ze)}var nt="closure_uid_"+(1e9*Math.random()>>>0),ze=0;function Ke(a,f,w){return a.call.apply(a.bind,arguments)}function Qe(a,f,w){if(!a)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,S),a.apply(f,k)}}return function(){return a.apply(f,arguments)}}function je(a,f,w){return(je=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ke:Qe).apply(null,arguments)}function gt(a,f){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),a.apply(this,S)}}var Ct=Date.now;function ee(a,f){function w(){}w.prototype=f.prototype,a.bb=f.prototype,a.prototype=new w,a.prototype.constructor=a}function ce(a){return a}function j(a,f,w){this.code=De+a,this.message=f||ie[a]||"",this.a=w||null}function he(a){var f=a&&a.code;return f?new j(f.substring(De.length),a.message,a.serverResponse):null}ee(j,Error),j.prototype.w=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},j.prototype.toJSON=function(){return this.w()};var bt,De="auth/",ie={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Be={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function We(a){for(var f in Be)if(Be[f].id===a)return{firebaseEndpoint:(a=Be[f]).Ua,secureTokenEndpoint:a.$a,identityPlatformEndpoint:a.Xa};return null}function Je(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(f){return!1}}function st(a){if(Error.captureStackTrace)Error.captureStackTrace(this,st);else{var f=Error().stack;f&&(this.stack=f)}a&&(this.message=String(a))}function rt(a,f){for(var w="",S=(a=a.split("%s")).length-1,k=0;k<S;k++)w+=a[k]+(k<f.length?f[k]:"%s");st.call(this,w+a[S])}function Ye(a,f){throw new rt("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function It(a,f){this.c=a,this.f=f,this.b=0,this.a=null}function Ut(a,f){a.f(f),100>a.b&&(a.b++,f.next=a.a,a.a=f)}function Xt(){this.b=this.a=null}bt=We("__EID__")?"__EID__":void 0,ee(st,Error),st.prototype.name="CustomError",ee(rt,st),rt.prototype.name="AssertionError",It.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Fr=new It(function(){return new tr},function(a){a.reset()});function Yn(){var a=$_,f=null;return a.a&&(f=a.a,a.a=a.a.next,a.a||(a.b=null),f.next=null),f}function tr(){this.next=this.b=this.a=null}Xt.prototype.add=function(a,f){var w=Fr.get();w.set(a,f),this.b?this.b.next=w:this.a=w,this.b=w},tr.prototype.set=function(a,f){this.a=a,this.b=f,this.next=null},tr.prototype.reset=function(){this.next=this.b=this.a=null};var oo=Array.prototype.indexOf?function(a,f){return Array.prototype.indexOf.call(a,f,void 0)}:function(a,f){if("string"==typeof a)return"string"!=typeof f||1!=f.length?-1:a.indexOf(f,0);for(var w=0;w<a.length;w++)if(w in a&&a[w]===f)return w;return-1},Un=Array.prototype.forEach?function(a,f,w){Array.prototype.forEach.call(a,f,w)}:function(a,f,w){for(var S=a.length,k="string"==typeof a?a.split(""):a,U=0;U<S;U++)U in k&&f.call(w,k[U],U,a)},Cu=Array.prototype.filter?function(a,f){return Array.prototype.filter.call(a,f,void 0)}:function(a,f){for(var w=a.length,S=[],k=0,U="string"==typeof a?a.split(""):a,G=0;G<w;G++)if(G in U){var oe=U[G];f.call(void 0,oe,G,a)&&(S[k++]=oe)}return S},un=Array.prototype.map?function(a,f){return Array.prototype.map.call(a,f,void 0)}:function(a,f){for(var w=a.length,S=Array(w),k="string"==typeof a?a.split(""):a,U=0;U<w;U++)U in k&&(S[U]=f.call(void 0,k[U],U,a));return S},$t=Array.prototype.some?function(a,f){return Array.prototype.some.call(a,f,void 0)}:function(a,f){for(var w=a.length,S="string"==typeof a?a.split(""):a,k=0;k<w;k++)if(k in S&&f.call(void 0,S[k],k,a))return!0;return!1};function jn(a,f){return 0<=oo(a,f)}function ft(a,f){var w;return(w=0<=(f=oo(a,f)))&&Array.prototype.splice.call(a,f,1),w}function hn(a,f){!function(a,f){for(var w="string"==typeof a?a.split(""):a,S=a.length-1;0<=S;--S)S in w&&f.call(void 0,w[S],S,a)}(a,function(S,k){f.call(void 0,S,k,a)&&Array.prototype.splice.call(a,k,1)})}function nr(a){return Array.prototype.concat.apply([],arguments)}function Rn(a){var f=a.length;if(0<f){for(var w=Array(f),S=0;S<f;S++)w[S]=a[S];return w}return[]}var zr,aa=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},pl=/&/g,so=/</g,Ar=/>/g,wd=/"/g,rr=/'/g,yt=/\x00/g,zt=/[\x00&<>"']/;function Nn(a,f){return-1!=a.indexOf(f)}function Po(a,f){return a<f?-1:a>f?1:0}e:{var In=Y.navigator;if(In){var Yi=In.userAgent;if(Yi){zr=Yi;break e}}zr=""}function Mr(a){return Nn(zr,a)}function kn(a,f){for(var w in a)f.call(void 0,a[w],w,a)}function ue(a){for(var f in a)return!1;return!0}function se(a){var w,f={};for(w in a)f[w]=a[w];return f}var ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(a,f){for(var w,S,k=1;k<arguments.length;k++){for(w in S=arguments[k])a[w]=S[w];for(var U=0;U<ye.length;U++)w=ye[U],Object.prototype.hasOwnProperty.call(S,w)&&(a[w]=S[w])}}function te(a,f){e:{try{var w=a&&a.ownerDocument,S=w&&(w.defaultView||w.parentWindow);if((S=S||Y).Element&&S.Location){var k=S;break e}}catch(G){}k=null}if(k&&void 0!==k[f]&&(!a||!(a instanceof k[f])&&(a instanceof k.Location||a instanceof k.Element))){if(be(a))try{var U=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(G){U="<object could not be stringified>"}else U=void 0===a?"undefined":null===a?"null":typeof a;Ye("Argument is not a %s (or a non-Element, non-Location mock); got: %s",f,U)}}function de(a,f){this.a=a===et&&f||"",this.b=$e}function Te(a){return a instanceof de&&a.constructor===de&&a.b===$e?a.a:(Ye("expected object of type Const, got '"+a+"'"),"type_error:Const")}de.prototype.ta=!0,de.prototype.sa=function(){return this.a},de.prototype.toString=function(){return"Const{"+this.a+"}"};var vt,$e={},et={};function en(){if(void 0===vt){var a=null,f=Y.trustedTypes;if(f&&f.createPolicy){try{a=f.createPolicy("goog#html",{createHTML:ce,createScript:ce,createScriptURL:ce})}catch(w){Y.console&&Y.console.error(w.message)}vt=a}else vt=a}return vt}function En(a,f){this.a=f===Lr?a:""}function _n(a){return a instanceof En&&a.constructor===En?a.a:(Ye("expected object of type TrustedResourceUrl, got '"+a+"' of type "+Ge(a)),"type_error:TrustedResourceUrl")}function gr(a,f){var w=Te(a);if(!ua.test(w))throw Error("Invalid TrustedResourceUrl format: "+w);return function(a){var f=en();return new En(a=f?f.createScriptURL(a):a,Lr)}(a=w.replace(ao,function(S,k){if(!Object.prototype.hasOwnProperty.call(f,k))throw Error('Found marker, "'+k+'", in format string, "'+w+'", but no valid label mapping found in args: '+JSON.stringify(f));return(S=f[k])instanceof de?Te(S):encodeURIComponent(String(S))}))}En.prototype.ta=!0,En.prototype.sa=function(){return this.a.toString()},En.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ao=/%{(\w+)}/g,ua=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Lr={};function Hn(a,f){this.a=f===Gn?a:""}function ts(a){return a instanceof Hn&&a.constructor===Hn?a.a:(Ye("expected object of type SafeUrl, got '"+a+"' of type "+Ge(a)),"type_error:SafeUrl")}Hn.prototype.ta=!0,Hn.prototype.sa=function(){return this.a.toString()},Hn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var uo=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rr=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lo=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function pt(a){if(a instanceof Hn)return a;if(a="object"==typeof a&&a.ta?a.sa():String(a),Lo.test(a))a=new Hn(a,Gn);else{var f=(a=(a=String(a)).replace(/(%0A|%0D)/g,"")).match(Rr);a=f&&uo.test(f[1])?new Hn(a,Gn):null}return a}function ln(a){return a instanceof Hn?a:(a="object"==typeof a&&a.ta?a.sa():String(a),Lo.test(a)||(a="about:invalid#zClosurez"),new Hn(a,Gn))}var Gn={},lo=new Hn("about:invalid#zClosurez",Gn);function Fi(a,f,w){this.a=w===Eu?a:""}Fi.prototype.ta=!0,Fi.prototype.sa=function(){return this.a.toString()},Fi.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Eu={};function Du(a,f,w,S){return a=a instanceof Hn?a:ln(a),f=f||Y,w=w instanceof de?Te(w):w||"",f.open(ts(a),w,S,void 0)}function Tu(a,f){for(var w=a.split("%s"),S="",k=Array.prototype.slice.call(arguments,1);k.length&&1<w.length;)S+=w.shift()+k.shift();return S+w.join("%s")}function Jt(a){return zt.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(pl,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(so,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(Ar,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(wd,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(rr,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(yt,"&#0;"))),a}function gl(a){return gl[" "](a),a}gl[" "]=ve;var Dn,a,gc=Mr("Opera"),li=Mr("Trident")||Mr("MSIE"),Li=Mr("Edge"),Cd=Li||li,Su=Mr("Gecko")&&!(Nn(zr.toLowerCase(),"webkit")&&!Mr("Edge"))&&!(Mr("Trident")||Mr("MSIE"))&&!Mr("Edge"),ns=Nn(zr.toLowerCase(),"webkit")&&!Mr("Edge");function Kn(){var a=Y.document;return a?a.documentMode:void 0}e:{var qt="",Wt=(a=zr,Su?/rv:([^\);]+)(\)|;)/.exec(a):Li?/Edge\/([\d\.]+)/.exec(a):li?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):ns?/WebKit\/(\S+)/.exec(a):gc?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Wt&&(qt=Wt?Wt[1]:""),li){var rs=Kn();if(null!=rs&&rs>parseFloat(qt)){Dn=String(rs);break e}}Dn=qt}var Yt={};function ml(a){return function(a,f){var w=Yt;return Object.prototype.hasOwnProperty.call(w,a)?w[a]:w[a]=f()}(a,function(){for(var f=0,w=aa(String(Dn)).split("."),S=aa(String(a)).split("."),k=Math.max(w.length,S.length),U=0;0==f&&U<k;U++){var G=w[U]||"",oe=S[U]||"";do{if(G=/(\d*)(\D*)(.*)/.exec(G)||["","","",""],oe=/(\d*)(\D*)(.*)/.exec(oe)||["","","",""],0==G[0].length&&0==oe[0].length)break;f=Po(0==G[1].length?0:parseInt(G[1],10),0==oe[1].length?0:parseInt(oe[1],10))||Po(0==G[2].length,0==oe[2].length)||Po(G[2],oe[2]),G=G[3],oe=oe[3]}while(0==f)}return 0<=f})}var Is=Y.document&&li&&(Kn()||parseInt(Dn,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(a){}var Tn=!li||9<=Number(Is);function Ot(a){var f=document;return"string"==typeof a?f.getElementById(a):a}function Ei(a,f){kn(f,function(w,S){w&&"object"==typeof w&&w.ta&&(w=w.sa()),"style"==S?a.style.cssText=w:"class"==S?a.className=w:"for"==S?a.htmlFor=w:mc.hasOwnProperty(S)?a.setAttribute(mc[S],w):0==S.lastIndexOf("aria-",0)||0==S.lastIndexOf("data-",0)?a.setAttribute(S,w):a[S]=w})}var Vo,Lf,mc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function kr(a,f,w){function S(oe){oe&&f.appendChild("string"==typeof oe?a.createTextNode(oe):oe)}for(var k=2;k<w.length;k++){var U=w[k];if(!ot(U)||be(U)&&0<U.nodeType)S(U);else{e:{if(U&&"number"==typeof U.length){if(be(U)){var G="function"==typeof U.item||"string"==typeof U.item;break e}if(Re(U)){G="function"==typeof U.item;break e}}G=!1}Un(G?Rn(U):U,S)}}}function co(a,f){return f=String(f),"application/xhtml+xml"===a.contentType&&(f=f.toLowerCase()),a.createElement(f)}function f0(a){Y.setTimeout(function(){throw a},0)}function La(a,f){Lf||function(){if(Y.Promise&&Y.Promise.resolve){var a=Y.Promise.resolve(void 0);Lf=function(){a.then(Tg)}}else Lf=function(){var f=Tg;!Re(Y.setImmediate)||Y.Window&&Y.Window.prototype&&!Mr("Edge")&&Y.Window.prototype.setImmediate==Y.setImmediate?(Vo||(Vo=function(){var a=Y.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Mr("Presto")&&(a=function(){var k=co(document,"IFRAME");k.style.display="none",document.documentElement.appendChild(k);var U=k.contentWindow;(k=U.document).open(),k.close();var G="callImmediate"+Math.random(),oe="file:"==U.location.protocol?"*":U.location.protocol+"//"+U.location.host;k=je(function(Le){("*"==oe||Le.origin==oe)&&Le.data==G&&this.port1.onmessage()},this),U.addEventListener("message",k,!1),this.port1={},this.port2={postMessage:function(){U.postMessage(G,oe)}}}),void 0!==a&&!Mr("Trident")&&!Mr("MSIE")){var f=new a,w={},S=w;return f.port1.onmessage=function(){if(void 0!==w.next){var k=(w=w.next).Hb;w.Hb=null,k()}},function(k){S.next={Hb:k},S=S.next,f.port2.postMessage(0)}}return function(k){Y.setTimeout(k,0)}}()),Vo(f)):Y.setImmediate(f)}}(),Dg||(Lf(),Dg=!0),$_.add(a,f)}var Dg=!1,$_=new Xt;function Tg(){for(var a;a=Yn();){try{a.a.call(a.b)}catch(f){f0(f)}Ut(Fr,a)}Dg=!1}function vn(a,f){if(this.a=vc,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=ve)try{var w=this;a.call(f,function(S){Uo(w,Nh,S)},function(S){if(!(S instanceof ci))try{throw S instanceof Error?S:Error("Promise rejected.")}catch(k){}Uo(w,Va,S)})}catch(S){Uo(this,Va,S)}}var vc=0,Nh=2,Va=3;function _l(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_l.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var yn=new It(function(){return new _l},function(a){a.reset()});function Ed(a,f,w){var S=yn.get();return S.g=a,S.b=f,S.f=w,S}function Rt(a){if(a instanceof vn)return a;var f=new vn(ve);return Uo(f,Nh,a),f}function ir(a){return new vn(function(f,w){w(a)})}function Bo(a,f,w){Td(a,f,w,null)||La(gt(f,a))}function As(a){return new vn(function(f){var w=a.length,S=[];if(w)for(var k=function(oe,Le,Xe){w--,S[oe]=Le?{Qb:!0,value:Xe}:{Qb:!1,reason:Xe},0==w&&f(S)},U=0;U<a.length;U++)Bo(a[U],gt(k,U,!0),gt(k,U,!1));else f(S)})}function Sg(a,f){if(a.a==vc)if(a.c){var w=a.c;if(w.b){for(var S=0,k=null,U=null,G=w.b;G&&(G.c||(S++,G.a==a&&(k=G),!(k&&1<S)));G=G.next)k||(U=G);k&&(w.a==vc&&1==S?Sg(w,f):(U?((S=U).next==w.f&&(w.f=S),S.next=S.next.next):Sd(w),xh(w,k,Va,f)))}a.c=null}else Uo(a,Va,f)}function Di(a,f){a.b||a.a!=Nh&&a.a!=Va||Vr(a),a.f?a.f.next=f:a.b=f,a.f=f}function Dd(a,f,w,S){var k=Ed(null,null,null);return k.a=new vn(function(U,G){k.g=f?function(oe){try{var Le=f.call(S,oe);U(Le)}catch(Xe){G(Xe)}}:U,k.b=w?function(oe){try{var Le=w.call(S,oe);void 0===Le&&oe instanceof ci?G(oe):U(Le)}catch(Xe){G(Xe)}}:G}),k.a.c=a,Di(a,k),k.a}function Uo(a,f,w){a.a==vc&&(a===w&&(f=Va,w=new TypeError("Promise cannot resolve to itself")),a.a=1,Td(w,a.$c,a.ad,a)||(a.i=w,a.a=f,a.c=null,Vr(a),f!=Va||w instanceof ci||function(a,f){a.g=!0,La(function(){a.g&&Ph.call(null,f)})}(a,w)))}function Td(a,f,w,S){if(a instanceof vn)return Di(a,Ed(f||ve,w||null,S)),!0;if(Je(a))return a.then(f,w,S),!0;if(be(a))try{var k=a.then;if(Re(k))return function(a,f,w,S,k){function U(Le){oe||(oe=!0,S.call(k,Le))}var oe=!1;try{f.call(a,function(Le){oe||(oe=!0,w.call(k,Le))},U)}catch(Le){U(Le)}}(a,k,f,w,S),!0}catch(U){return w.call(S,U),!0}return!1}function Vr(a){a.h||(a.h=!0,La(a.gc,a))}function Sd(a){var f=null;return a.b&&(a.b=(f=a.b).next,f.next=null),a.b||(a.f=null),f}function xh(a,f,w,S){if(w==Va&&f.b&&!f.c)for(;a&&a.g;a=a.c)a.g=!1;if(f.a)f.a.c=null,vl(f,w,S);else try{f.c?f.g.call(f.f):vl(f,w,S)}catch(k){Ph.call(null,k)}Ut(yn,f)}function vl(a,f,w){f==Nh?a.g.call(a.f,w):a.b&&a.b.call(a.f,w)}vn.prototype.then=function(a,f,w){return Dd(this,Re(a)?a:null,Re(f)?f:null,w)},vn.prototype.$goog_Thenable=!0,(H=vn.prototype).oa=function(a,f){return(a=Ed(a,a,f)).c=!0,Di(this,a),this},H.o=function(a,f){return Dd(this,null,a,f)},H.cancel=function(a){if(this.a==vc){var f=new ci(a);La(function(){Sg(this,f)},this)}},H.$c=function(a){this.a=vc,Uo(this,Nh,a)},H.ad=function(a){this.a=vc,Uo(this,Va,a)},H.gc=function(){for(var a;a=Sd(this);)xh(this,a,this.a,this.i);this.h=!1};var Ph=f0;function ci(a){st.call(this,a)}function Fh(){0!=Vf&&(Qn[Oe(this)]=this),this.ya=this.ya,this.pa=this.pa}ee(ci,st),ci.prototype.name="cancel";var Vf=0,Qn={};function Ig(a){if(!a.ya&&(a.ya=!0,a.Da(),0!=Vf)){var f=Oe(a);if(0!=Vf&&a.pa&&0<a.pa.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Qn[f]}}Fh.prototype.ya=!1,Fh.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Bf=Object.freeze||function(a){return a},Id=!li||9<=Number(Is),mr=li&&!ml("9"),yc=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{Y.addEventListener("test",ve,f),Y.removeEventListener("test",ve,f)}catch(w){}return a}();function Ti(a,f){this.type=a,this.b=this.target=f,this.defaultPrevented=!1}function Fn(a,f){if(Ti.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var w=this.type=a.type,S=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=f,f=a.relatedTarget){if(Su){e:{try{gl(f.nodeName);var k=!0;break e}catch(U){}k=!1}k||(f=null)}}else"mouseover"==w?f=a.fromElement:"mouseout"==w&&(f=a.toElement);this.relatedTarget=f,S?(this.clientX=void 0!==S.clientX?S.clientX:S.pageX,this.clientY=void 0!==S.clientY?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:Kt[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}Ti.prototype.preventDefault=function(){this.defaultPrevented=!0},ee(Fn,Ti);var Kt=Bf({2:"touch",3:"pen",4:"mouse"});Fn.prototype.preventDefault=function(){Fn.bb.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,mr)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(f){}},Fn.prototype.g=function(){return this.a};var Iu="closure_listenable_"+(1e6*Math.random()|0),Au=0;function Ki(a,f,w,S,k){this.listener=a,this.proxy=null,this.src=f,this.type=w,this.capture=!!S,this.Wa=k,this.key=++Au,this.wa=this.Qa=!1}function or(a){a.wa=!0,a.listener=null,a.proxy=null,a.src=null,a.Wa=null}function Ba(a){this.src=a,this.a={},this.b=0}function Mu(a,f){var w=f.type;w in a.a&&ft(a.a[w],f)&&(or(f),0==a.a[w].length&&(delete a.a[w],a.b--))}function Si(a,f,w,S){for(var k=0;k<a.length;++k){var U=a[k];if(!U.wa&&U.listener==f&&U.capture==!!w&&U.Wa==S)return k}return-1}Ba.prototype.add=function(a,f,w,S,k){var U=a.toString();(a=this.a[U])||(a=this.a[U]=[],this.b++);var G=Si(a,f,S,k);return-1<G?(f=a[G],w||(f.Qa=!1)):((f=new Ki(f,this.src,U,!!S,k)).Qa=w,a.push(f)),f};var Ms="closure_lm_"+(1e6*Math.random()|0),yl={};function $r(a,f,w,S,k){if(S&&S.once)Pt(a,f,w,S,k);else if(Array.isArray(f))for(var U=0;U<f.length;U++)$r(a,f[U],w,S,k);else w=mn(w),a&&a[Iu]?Cr(a,f,w,be(S)?!!S.capture:!!S,k):Ag(a,f,w,!1,S,k)}function Ag(a,f,w,S,k,U){if(!f)throw Error("Invalid event type");var G=be(k)?!!k.capture:!!k,oe=Ad(a);if(oe||(a[Ms]=oe=new Ba(a)),!(w=oe.add(f,w,S,G,U)).proxy)if(S=function(){var a=Gf,f=Id?function(w){return a.call(f.src,f.listener,w)}:function(w){if(!(w=a.call(f.src,f.listener,w)))return w};return f}(),w.proxy=S,S.src=a,S.listener=w,a.addEventListener)yc||(k=G),void 0===k&&(k=!1),a.addEventListener(f.toString(),S,k);else if(a.attachEvent)a.attachEvent(bc(f.toString()),S);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(S)}}function Pt(a,f,w,S,k){if(Array.isArray(f))for(var U=0;U<f.length;U++)Pt(a,f[U],w,S,k);else w=mn(w),a&&a[Iu]?wc(a,f,w,be(S)?!!S.capture:!!S,k):Ag(a,f,w,!0,S,k)}function jo(a,f,w,S,k){if(Array.isArray(f))for(var U=0;U<f.length;U++)jo(a,f[U],w,S,k);else S=be(S)?!!S.capture:!!S,w=mn(w),a&&a[Iu]?(a=a.v,(f=String(f).toString())in a.a&&-1<(w=Si(U=a.a[f],w,S,k))&&(or(U[w]),Array.prototype.splice.call(U,w,1),0==U.length&&(delete a.a[f],a.b--))):a&&(a=Ad(a))&&(f=a.a[f.toString()],a=-1,f&&(a=Si(f,w,S,k)),(w=-1<a?f[a]:null)&&bl(w))}function bl(a){if("number"!=typeof a&&a&&!a.wa){var f=a.src;if(f&&f[Iu])Mu(f.v,a);else{var w=a.type,S=a.proxy;f.removeEventListener?f.removeEventListener(w,S,a.capture):f.detachEvent?f.detachEvent(bc(w),S):f.addListener&&f.removeListener&&f.removeListener(S),(w=Ad(f))?(Mu(w,a),0==w.b&&(w.src=null,f[Ms]=null)):or(a)}}}function bc(a){return a in yl?yl[a]:yl[a]="on"+a}function wl(a,f,w,S){var k=!0;if((a=Ad(a))&&(f=a.a[f.toString()]))for(f=f.concat(),a=0;a<f.length;a++){var U=f[a];U&&U.capture==w&&!U.wa&&(U=Hf(U,S),k=k&&!1!==U)}return k}function Hf(a,f){var w=a.listener,S=a.Wa||a.src;return a.Qa&&bl(a),w.call(S,f)}function Gf(a,f){if(a.wa)return!0;if(!Id){if(!f)e:{f=["window","event"];for(var w=Y,S=0;S<f.length;S++)if(null==(w=w[f[S]])){f=null;break e}f=w}if(f=new Fn(S=f,this),w=!0,!(0>S.keyCode||null!=S.returnValue)){e:{var k=!1;if(0==S.keyCode)try{S.keyCode=-1;break e}catch(G){k=!0}(k||null==S.returnValue)&&(S.returnValue=!0)}for(S=[],k=f.b;k;k=k.parentNode)S.push(k);for(a=a.type,k=S.length-1;0<=k;k--){f.b=S[k];var U=wl(S[k],a,!0,f);w=w&&U}for(k=0;k<S.length;k++)f.b=S[k],U=wl(S[k],a,!1,f),w=w&&U}return w}return Hf(a,new Fn(f,this))}function Ad(a){return(a=a[Ms])instanceof Ba?a:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(a){return Re(a)?a:(a[Ze]||(a[Ze]=function(f){return a.handleEvent(f)}),a[Ze])}function qr(){Fh.call(this),this.v=new Ba(this),this.bc=this,this.hb=null}function Cr(a,f,w,S,k){a.v.add(String(f),w,!1,S,k)}function wc(a,f,w,S,k){a.v.add(String(f),w,!0,S,k)}function Rs(a,f,w,S){if(!(f=a.v.a[String(f)]))return!0;f=f.concat();for(var k=!0,U=0;U<f.length;++U){var G=f[U];if(G&&!G.wa&&G.capture==w){var oe=G.listener,Le=G.Wa||G.src;G.Qa&&Mu(a.v,G),k=!1!==oe.call(Le,S)&&k}}return k&&!S.defaultPrevented}function Vi(a,f,w){if(Re(a))w&&(a=je(a,w));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=je(a.handleEvent,a)}return 2147483647<Number(f)?-1:Y.setTimeout(a,f||0)}function Ns(a){var f=null;return new vn(function(w,S){-1==(f=Vi(function(){w(void 0)},a))&&S(Error("Failed to schedule timer."))}).o(function(w){throw Y.clearTimeout(f),w})}function Cc(a){if(a.X&&"function"==typeof a.X)return a.X();if("string"==typeof a)return a.split("");if(ot(a)){for(var f=[],w=a.length,S=0;S<w;S++)f.push(a[S]);return f}for(S in f=[],w=0,a)f[w++]=a[S];return f}function Ec(a){if(a.Y&&"function"==typeof a.Y)return a.Y();if(!a.X||"function"!=typeof a.X){if(ot(a)||"string"==typeof a){var f=[];a=a.length;for(var w=0;w<a;w++)f.push(w);return f}for(var S in f=[],w=0,a)f[w++]=S;return f}}function ks(a,f){this.b={},this.a=[],this.c=0;var w=arguments.length;if(1<w){if(w%2)throw Error("Uneven number of arguments");for(var S=0;S<w;S+=2)this.set(arguments[S],arguments[S+1])}else if(a)if(a instanceof ks)for(w=a.Y(),S=0;S<w.length;S++)this.set(w[S],a.get(w[S]));else for(S in a)this.set(S,a[S])}function Dc(a){if(a.c!=a.a.length){for(var f=0,w=0;f<a.a.length;){var S=a.a[f];Br(a.b,S)&&(a.a[w++]=S),f++}a.a.length=w}if(a.c!=a.a.length){var k={};for(w=f=0;f<a.a.length;)Br(k,S=a.a[f])||(a.a[w++]=S,k[S]=1),f++;a.a.length=w}}function Br(a,f){return Object.prototype.hasOwnProperty.call(a,f)}ee(qr,Fh),qr.prototype[Iu]=!0,qr.prototype.addEventListener=function(a,f,w,S){$r(this,a,f,w,S)},qr.prototype.removeEventListener=function(a,f,w,S){jo(this,a,f,w,S)},qr.prototype.dispatchEvent=function(a){var f,w=this.hb;if(w)for(f=[];w;w=w.hb)f.push(w);w=this.bc;var S=a.type||a;if("string"==typeof a)a=new Ti(a,w);else if(a instanceof Ti)a.target=a.target||w;else{var k=a;X(a=new Ti(S,w),k)}if(k=!0,f)for(var U=f.length-1;0<=U;U--){var G=a.b=f[U];k=Rs(G,S,!0,a)&&k}if(k=Rs(G=a.b=w,S,!0,a)&&k,k=Rs(G,S,!1,a)&&k,f)for(U=0;U<f.length;U++)k=Rs(G=a.b=f[U],S,!1,a)&&k;return k},qr.prototype.Da=function(){if(qr.bb.Da.call(this),this.v){var w,a=this.v;for(w in a.a){for(var S=a.a[w],k=0;k<S.length;k++)or(S[k]);delete a.a[w],a.b--}}this.hb=null},(H=ks.prototype).X=function(){Dc(this);for(var a=[],f=0;f<this.a.length;f++)a.push(this.b[this.a[f]]);return a},H.Y=function(){return Dc(this),this.a.concat()},H.clear=function(){this.b={},this.c=this.a.length=0},H.get=function(a,f){return Br(this.b,a)?this.b[a]:f},H.set=function(a,f){Br(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=f},H.forEach=function(a,f){for(var w=this.Y(),S=0;S<w.length;S++){var k=w[S],U=this.get(k);a.call(f,U,k,this)}};var Ho=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function di(a,f){var w;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,a instanceof di?(this.i=void 0!==f?f:a.i,Bi(this,a.c),this.l=a.l,this.a=a.a,Lh(this,a.g),this.f=a.f,Ru(this,vr(a.b)),this.h=a.h):a&&(w=String(a).match(Ho))?(this.i=!!f,Bi(this,w[1]||"",!0),this.l=Sc(w[2]||""),this.a=Sc(w[3]||"",!0),Lh(this,w[4]),this.f=Sc(w[5]||"",!0),Ru(this,w[6]||"",!0),this.h=Sc(w[7]||"")):(this.i=!!f,this.b=new Ua(null,this.i))}function Bi(a,f,w){a.c=w?Sc(f,!0):f,a.c&&(a.c=a.c.replace(/:$/,""))}function Lh(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.g=f}else a.g=null}function Ru(a,f,w){f instanceof Ua?(a.b=f,function(a,f){f&&!a.f&&(fi(a),a.c=null,a.a.forEach(function(w,S){var k=S.toLowerCase();S!=k&&(xs(this,S),ja(this,k,w))},a)),a.f=f}(a.b,a.i)):(w||(f=hi(f,qf)),a.b=new Ua(f,a.i))}function _r(a,f,w){a.b.set(f,w)}function is(a,f){return a.b.get(f)}function Ii(a){return a instanceof di?new di(a):new di(a,void 0)}function Tc(a,f,w,S){var k=new di(null,void 0);return a&&Bi(k,a),f&&(k.a=f),w&&Lh(k,w),S&&(k.f=S),k}function Sc(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function hi(a,f,w){return"string"==typeof a?(a=encodeURI(a).replace(f,$f),w&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function $f(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}di.prototype.toString=function(){var a=[],f=this.c;f&&a.push(hi(f,El,!0),":");var w=this.a;return(w||"file"==f)&&(a.push("//"),(f=this.l)&&a.push(hi(f,El,!0),"@"),a.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(w=this.g)&&a.push(":",String(w))),(w=this.f)&&(this.a&&"/"!=w.charAt(0)&&a.push("/"),a.push(hi(w,"/"==w.charAt(0)?Mg:Dl,!0))),(w=this.b.toString())&&a.push("?",w),(w=this.h)&&a.push("#",hi(w,Md)),a.join("")},di.prototype.resolve=function(a){var f=new di(this),w=!!a.c;w?Bi(f,a.c):w=!!a.l,w?f.l=a.l:w=!!a.a,w?f.a=a.a:w=null!=a.g;var S=a.f;if(w)Lh(f,a.g);else if(w=!!a.f){if("/"!=S.charAt(0))if(this.a&&!this.f)S="/"+S;else{var k=f.f.lastIndexOf("/");-1!=k&&(S=f.f.substr(0,k+1)+S)}if(".."==(k=S)||"."==k)S="";else if(Nn(k,"./")||Nn(k,"/.")){S=0==k.lastIndexOf("/",0),k=k.split("/");for(var U=[],G=0;G<k.length;){var oe=k[G++];"."==oe?S&&G==k.length&&U.push(""):".."==oe?((1<U.length||1==U.length&&""!=U[0])&&U.pop(),S&&G==k.length&&U.push("")):(U.push(oe),S=!0)}S=U.join("/")}else S=k}return w?f.f=S:w=""!==a.b.toString(),w?Ru(f,vr(a.b)):w=!!a.h,w&&(f.h=a.h),f};var El=/[#\/\?@]/g,Dl=/[#\?:]/g,Mg=/[#\?]/g,qf=/[#\?@]/g,Md=/#/g;function Ua(a,f){this.b=this.a=null,this.c=a||null,this.f=!!f}function fi(a){a.a||(a.a=new ks,a.b=0,a.c&&function(a,f){if(a){a=a.split("&");for(var w=0;w<a.length;w++){var S=a[w].indexOf("="),k=null;if(0<=S){var U=a[w].substring(0,S);k=a[w].substring(S+1)}else U=a[w];f(U,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}(a.c,function(f,w){a.add(decodeURIComponent(f.replace(/\+/g," ")),w)}))}function q_(a){var f=Ec(a);if(void 0===f)throw Error("Keys are undefined");var w=new Ua(null,void 0);a=Cc(a);for(var S=0;S<f.length;S++){var k=f[S],U=a[S];Array.isArray(U)?ja(w,k,U):w.add(k,U)}return w}function xs(a,f){fi(a),f=Ha(a,f),Br(a.a.b,f)&&(a.c=null,a.b-=a.a.get(f).length,Br((a=a.a).b,f)&&(delete a.b[f],a.c--,a.a.length>2*a.c&&Dc(a)))}function Ur(a,f){return fi(a),f=Ha(a,f),Br(a.a.b,f)}function ja(a,f,w){xs(a,f),0<w.length&&(a.c=null,a.a.set(Ha(a,f),Rn(w)),a.b+=w.length)}function vr(a){var f=new Ua;return f.c=a.c,a.a&&(f.a=new ks(a.a),f.b=a.b),f}function Ha(a,f){return f=String(f),a.f&&(f=f.toLowerCase()),f}function Wf(a){var f=[];return Ga(new Ic,a,f),f.join("")}function Ic(){}function Ga(a,f,w){if(null==f)w.push("null");else{if("object"==typeof f){if(Array.isArray(f)){var S=f;f=S.length,w.push("[");for(var k="",U=0;U<f;U++)w.push(k),Ga(a,S[U],w),k=",";return void w.push("]")}if(!(f instanceof String||f instanceof Number||f instanceof Boolean)){for(S in w.push("{"),k="",f)Object.prototype.hasOwnProperty.call(f,S)&&"function"!=typeof(U=f[S])&&(w.push(k),Ai(S,w),w.push(":"),Ga(a,U,w),k=",");return void w.push("}")}f=f.valueOf()}switch(typeof f){case"string":Ai(f,w);break;case"number":w.push(isFinite(f)&&!isNaN(f)?String(f):"null");break;case"boolean":w.push(String(f));break;case"function":w.push("null");break;default:throw Error("Unknown type: "+typeof f)}}}(H=Ua.prototype).add=function(a,f){fi(this),this.c=null,a=Ha(this,a);var w=this.a.get(a);return w||this.a.set(a,w=[]),w.push(f),this.b+=1,this},H.clear=function(){this.a=this.c=null,this.b=0},H.forEach=function(a,f){fi(this),this.a.forEach(function(w,S){Un(w,function(k){a.call(f,k,S,this)},this)},this)},H.Y=function(){fi(this);for(var a=this.a.X(),f=this.a.Y(),w=[],S=0;S<f.length;S++)for(var k=a[S],U=0;U<k.length;U++)w.push(f[S]);return w},H.X=function(a){fi(this);var f=[];if("string"==typeof a)Ur(this,a)&&(f=nr(f,this.a.get(Ha(this,a))));else{a=this.a.X();for(var w=0;w<a.length;w++)f=nr(f,a[w])}return f},H.set=function(a,f){return fi(this),this.c=null,Ur(this,a=Ha(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[f]),this.b+=1,this},H.get=function(a,f){return a&&0<(a=this.X(a)).length?String(a[0]):f},H.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],f=this.a.Y(),w=0;w<f.length;w++){var S=f[w],k=encodeURIComponent(String(S));S=this.X(S);for(var U=0;U<S.length;U++){var G=k;""!==S[U]&&(G+="="+encodeURIComponent(String(S[U]))),a.push(G)}}return this.c=a.join("&")};var Ac={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Vh=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Ai(a,f){f.push('"',a.replace(Vh,function(w){var S=Ac[w];return S||(S="\\u"+(65536|w.charCodeAt(0)).toString(16).substr(1),Ac[w]=S),S}),'"')}function ho(){var a=ti();return li&&!!Is&&11==Is||/Edge\/\d+/.test(a)}function Os(){return Y.window&&Y.window.location.href||self&&self.location&&self.location.href||""}function Bh(a,f){f=f||Y.window;var w="about:blank";a&&(w=ts(pt(a)||lo)),f.location.href=w}function Rg(a,f){var S,w=[];for(S in a)S in f?typeof a[S]!=typeof f[S]?w.push(S):"object"==typeof a[S]&&null!=a[S]&&null!=f[S]?0<Rg(a[S],f[S]).length&&w.push(S):a[S]!==f[S]&&w.push(S):w.push(S);for(S in f)S in a||w.push(S);return w}function os(a){return!!((a=(a||ti()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function Nu(a){a=a||Y.window;try{a.close()}catch(f){}}function da(a,f,w){var S=Math.floor(1e9*Math.random()).toString();f=f||500,w=w||600;var k=(window.screen.availHeight-w)/2,U=(window.screen.availWidth-f)/2;for(G in f={width:f,height:w,top:0<k?k:0,left:0<U?U:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},w=ti().toLowerCase(),S&&(f.target=S,Nn(w,"crios/")&&(f.target="_blank")),xc(ti())==Uh&&(a=a||"http://localhost",f.scrollbars=!0),w=a||"",(a=f)||(a={}),S=window,f=w instanceof Hn?w:pt(void 0!==w.href?w.href:String(w))||lo,w=a.target||w.target,k=[],a)switch(G){case"width":case"height":case"top":case"left":k.push(G+"="+a[G]);break;case"target":case"noopener":case"noreferrer":break;default:k.push(G+"="+(a[G]?1:0))}var G=k.join(",");if((Mr("iPhone")&&!Mr("iPod")&&!Mr("iPad")||Mr("iPad")||Mr("iPod"))&&S.navigator&&S.navigator.standalone&&w&&"_self"!=w?(te(G=co(document,"A"),"HTMLAnchorElement"),f=f instanceof Hn?f:ln(f),G.href=ts(f),G.setAttribute("target",w),a.noreferrer&&G.setAttribute("rel","noreferrer"),(a=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,S,1),G.dispatchEvent(a),G={}):a.noreferrer?(G=Du("",S,w,G),a=ts(f),G&&(Cd&&Nn(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),G.opener=null,a='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Jt(a)+'">',a=new Fi(a=(S=en())?S.createHTML(a):a,null,Eu),S=G.document)&&(S.write(function(a){return a instanceof Fi&&a.constructor===Fi?a.a:(Ye("expected object of type SafeHtml, got '"+a+"' of type "+Ge(a)),"type_error:SafeHtml")}(a)),S.close())):(G=Du(f,S,w,G))&&a.noopener&&(G.opener=null),G)try{G.focus()}catch(oe){}return G}var ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W_=/^[^@]+@[^@]+$/;function Rc(){var a=null;return new vn(function(f){"complete"==Y.document.readyState?f():(a=function(){f()},Pt(window,"load",a))}).o(function(f){throw jo(window,"load",a),f})}function za(a){return a=a||ti(),!("file:"!==zn()&&"ionic:"!==zn()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nc(){var a=Y.window;try{return!(!a||a==a.top)}catch(f){return!1}}function ss(){return void 0!==Y.WorkerGlobalScope&&"function"==typeof Y.importScripts}function fo(){return c.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":c.default.INTERNAL.hasOwnProperty("node")?"Node":ss()?"Worker":"Browser"}function kc(){var a=fo();return"ReactNative"===a||"Node"===a}var Uh="Firefox";function xc(a){var f=a.toLowerCase();return Nn(f,"opera/")||Nn(f,"opr/")||Nn(f,"opios/")?"Opera":Nn(f,"iemobile")?"IEMobile":Nn(f,"msie")||Nn(f,"trident/")?"IE":Nn(f,"edge/")?"Edge":Nn(f,"firefox/")?Uh:Nn(f,"silk/")?"Silk":Nn(f,"blackberry")?"Blackberry":Nn(f,"webos")?"Webos":!Nn(f,"safari/")||Nn(f,"chrome/")||Nn(f,"crios/")||Nn(f,"android")?!Nn(f,"chrome/")&&!Nn(f,"crios/")||Nn(f,"edge/")?Nn(f,"android")?"Android":(a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length?a[1]:"Other":"Chrome":"Safari"}var Oc={md:"FirebaseCore-web",od:"FirebaseUI-web"};function xu(a,f){f=f||[];var k,w=[],S={};for(k in Oc)S[Oc[k]]=!0;for(k=0;k<f.length;k++)void 0!==S[f[k]]&&(delete S[f[k]],w.push(f[k]));return w.sort(),(f=w).length||(f=["FirebaseCore-web"]),"Browser"===(w=fo())?w=xc(S=ti()):"Worker"===w&&(w=xc(S=ti())+"-"+w),w+"/JsCore/"+a+"/"+f.join(",")}function ti(){return Y.navigator&&Y.navigator.userAgent||""}function xr(a,f){a=a.split("."),f=f||Y;for(var w=0;w<a.length&&"object"==typeof f&&null!=f;w++)f=f[a[w]];return w!=a.length&&(f=void 0),f}function Yf(){try{var a=Y.localStorage,f=Ln();if(a)return a.setItem(f,"1"),a.removeItem(f),!ho()||!!Y.indexedDB}catch(w){return ss()&&!!Y.indexedDB}return!1}function Ps(){return(Nd()||"chrome-extension:"===zn()||za())&&!kc()&&Yf()&&!ss()}function Nd(){return"http:"===zn()||"https:"===zn()}function zn(){return Y.location&&Y.location.protocol||null}function ni(a){return!(os(a=a||ti())||xc(a)==Uh)}function Et(a){return void 0===a?null:Wf(a)}function on(a){var w,f={};for(w in a)a.hasOwnProperty(w)&&null!=a[w]&&(f[w]=a[w]);return f}function $n(a){if(null!==a)return JSON.parse(a)}function Ln(a){return a||Math.floor(1e9*Math.random()).toString()}function Ng(a){return!("Safari"==xc(a=a||ti())||a.toLowerCase().match(/iphone|ipad|ipod/))}function Kf(){var a=Y.___jsl;if(a&&a.H)for(var f in a.H)if(a.H[f].r=a.H[f].r||[],a.H[f].L=a.H[f].L||[],a.H[f].r=a.H[f].L.concat(),a.CP)for(var w=0;w<a.CP.length;w++)a.CP[w]=null}function ha(a,f){if(a>f)throw Error("Short delay should be less than long delay!");this.a=a,this.c=f,a=ti(),f=fo(),this.b=os(a)||"ReactNative"===f}function Pc(){var a=Y.document;return!a||void 0===a.visibilityState||"visible"==a.visibilityState}function kd(a){try{var f=new Date(parseInt(a,10));if(!isNaN(f.getTime())&&!/[^0-9]/.test(a))return f.toUTCString()}catch(w){}return null}function Sl(){return!(!xr("fireauth.oauthhelper",Y)&&!xr("fireauth.iframe",Y))}ha.prototype.get=function(){var a=Y.navigator;return!a||"boolean"!=typeof a.onLine||!Nd()&&"chrome-extension:"!==zn()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Lc,xd={};function Ou(a){xd[a]||(xd[a]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(a))}try{var qn={};Object.defineProperty(qn,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(qn,"abcd",{configurable:!0,enumerable:!0,value:2}),Lc=2==qn.abcd}catch(a){Lc=!1}function wt(a,f,w){Lc?Object.defineProperty(a,f,{configurable:!0,enumerable:!0,value:w}):a[f]=w}function jr(a,f){if(f)for(var w in f)f.hasOwnProperty(w)&&wt(a,w,f[w])}function as(a){var f={};return jr(f,a),f}function Fs(a){var f=a;if("object"==typeof a&&null!=a)for(var w in f="length"in a?[]:{},a)wt(f,w,Fs(a[w]));return f}function fa(a){var f=a&&(a[Ls]?"phone":null);if(!(f&&a&&a[Zf]))throw new j("internal-error","Internal assert: invalid MultiFactorInfo object");wt(this,"uid",a[Zf]),wt(this,"displayName",a[us]||null);var w=null;a[Go]&&(w=new Date(a[Go]).toUTCString()),wt(this,"enrollmentTime",w),wt(this,"factorId",f)}function Od(a){try{var f=new $a(a)}catch(w){f=null}return f}fa.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var us="displayName",Go="enrolledAt",Zf="mfaEnrollmentId",Ls="phoneInfo";function $a(a){fa.call(this,a),wt(this,"phoneNumber",a[Ls])}function Mi(a){var f={},w=a[pi],S=a[m0],k=a[Uc];if(a=Od(a[Bc]),!k||k!=Al&&k!=Er&&!w||k==Er&&!S||k==sr&&!a)throw Error("Invalid checkActionCode response!");k==Er?(f[zo]=w||null,f[xn]=w||null,f[dr]=S):(f[zo]=S||null,f[xn]=S||null,f[dr]=w||null),f[gi]=a||null,wt(this,Pu,k),wt(this,po,Fs(f))}ee($a,fa),$a.prototype.w=function(){var a=$a.bb.w.call(this);return a.phoneNumber=this.phoneNumber,a};var sr="REVERT_SECOND_FACTOR_ADDITION",Al="EMAIL_SIGNIN",Er="VERIFY_AND_CHANGE_EMAIL",pi="email",Bc="mfaInfo",m0="newEmail",Uc="requestType",dr="email",zo="fromEmail",gi="multiFactorInfo",xn="previousEmail",po="data",Pu="operation";function jh(a){var f=is(a=Ii(a),qa)||null,w=is(a,Ri)||null,S=is(a,yr)||null;if(S=S&&Vs[S]||null,!f||!w||!S)throw new j("argument-error",qa+", "+Ri+"and "+yr+" are required in a valid action code URL.");jr(this,{apiKey:f,operation:S,code:w,continueUrl:is(a,$o)||null,languageCode:is(a,pa)||null,tenantId:is(a,Fu)||null})}var qa="apiKey",Ri="oobCode",$o="continueUrl",pa="languageCode",yr="mode",Fu="tenantId",Vs={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:sr,signIn:Al,verifyAndChangeEmail:Er,verifyEmail:"VERIFY_EMAIL"};function jc(a){try{return new jh(a)}catch(f){return null}}function Lu(a){var f=a[Xf];if(void 0===f)throw new j("missing-continue-uri");if("string"!=typeof f||"string"==typeof f&&!f.length)throw new j("invalid-continue-uri");this.h=f,this.b=this.a=null,this.g=!1;var w=a[Wa];if(w&&"object"==typeof w){f=w[Gh];var S=w[Ya];if(w=w[K_],"string"==typeof f&&f.length){if(this.a=f,void 0!==S&&"boolean"!=typeof S)throw new j("argument-error",Ya+" property must be a boolean when specified.");if(this.g=!!S,void 0!==w&&("string"!=typeof w||"string"==typeof w&&!w.length))throw new j("argument-error",K_+" property must be a non empty string when specified.");this.b=w||null}else{if(void 0!==f)throw new j("argument-error",Gh+" property must be a non empty string when specified.");if(void 0!==S||void 0!==w)throw new j("missing-android-pkg-name")}}else if(void 0!==w)throw new j("argument-error",Wa+" property must be a non null object when specified.");if(this.f=null,(f=a[go])&&"object"==typeof f){if("string"==typeof(f=f[zh])&&f.length)this.f=f;else if(void 0!==f)throw new j("argument-error",zh+" property must be a non empty string when specified.")}else if(void 0!==f)throw new j("argument-error",go+" property must be a non null object when specified.");if(void 0!==(f=a[Hh])&&"boolean"!=typeof f)throw new j("argument-error",Hh+" property must be a boolean when specified.");if(this.c=!!f,void 0!==(a=a[Pd])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new j("argument-error",Pd+" property must be a non empty string when specified.");this.i=a||null}var Wa="android",Pd="dynamicLinkDomain",Hh="handleCodeInApp",go="iOS",Xf="url",Ya="installApp",K_="minimumVersion",Gh="packageName",zh="bundleId";function Ml(a){var f={};for(var w in f.continueUrl=a.h,f.canHandleCodeInApp=a.c,(f.androidPackageName=a.a)&&(f.androidMinimumVersion=a.b,f.androidInstallApp=a.g),f.iOSBundleId=a.f,f.dynamicLinkDomain=a.i,f)null===f[w]&&delete f[w];return f}var ga=null;function ma(a){var f=Ka(a);if(!(f&&f.sub&&f.iss&&f.aud&&f.exp))throw Error("Invalid JWT");this.h=a,this.a=f.exp,this.i=f.sub,a=Date.now()/1e3,this.g=f.iat||(a>this.a?this.a:a),this.b=f.provider_id||f.firebase&&f.firebase.sign_in_provider||null,this.f=f.firebase&&f.firebase.tenant||null,this.c=!!f.is_anonymous||"anonymous"==this.b}function Bs(a){try{return new ma(a)}catch(f){return null}}function Ka(a){if(!a||3!=(a=a.split(".")).length)return null;for(var f=(4-(a=a[1]).length%4)%4,w=0;w<f;w++)a+=".";try{var S=function(a){var f=[];return function(a,f){function w(Le){for(;S<a.length;){var Xe=a.charAt(S++),Qt=ga[Xe];if(null!=Qt)return Qt;if(!/^[\s\xa0]*$/.test(Xe))throw Error("Unknown base64 encoding at char: "+Xe)}return Le}!function(){if(!ga){ga={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),f=["+/=","+/","-_=","-_.","-_"],w=0;5>w;w++)for(var S=a.concat(f[w].split("")),k=0;k<S.length;k++){var U=S[k];void 0===ga[U]&&(ga[U]=k)}}}();for(var S=0;;){var k=w(-1),U=w(0),G=w(64),oe=w(64);if(64===oe&&-1===k)break;f(k<<2|U>>4),64!=G&&(f(U<<4&240|G>>2),64!=oe&&f(G<<6&192|oe))}}(a,function(w){f.push(w)}),f}(a);for(a=[],w=f=0;f<S.length;){var k=S[f++];if(128>k)a[w++]=String.fromCharCode(k);else if(191<k&&224>k){var U=S[f++];a[w++]=String.fromCharCode((31&k)<<6|63&U)}else if(239<k&&365>k){U=S[f++];var G=S[f++],Le=((7&k)<<18|(63&U)<<12|(63&G)<<6|63&S[f++])-65536;a[w++]=String.fromCharCode(55296+(Le>>10)),a[w++]=String.fromCharCode(56320+(1023&Le))}else U=S[f++],G=S[f++],a[w++]=String.fromCharCode((15&k)<<12|(63&U)<<6|63&G)}return JSON.parse(a.join(""))}catch(Xe){}return null}ma.prototype.T=function(){return this.f},ma.prototype.l=function(){return this.c},ma.prototype.toString=function(){return this.h};var Vu="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Us=["client_id","response_type","scope","redirect_uri","state"],Jf={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Us},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Us},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Us},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Vu},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Nl(a){for(var f in Jf)if(Jf[f].fa==a)return Jf[f];return null}function js(a){var f={};f["facebook.com"]=mi,f["google.com"]=ep,f["github.com"]=Vn,f["twitter.com"]=xg;var w=a&&a[Fd];try{if(w)return f[w]?new f[w](a):new mo(a);if(void 0!==a[Hc])return new Bu(a)}catch(S){}return null}var Hc="idToken",Fd="providerId";function Bu(a){var f=a[Fd];if(!f&&a[Hc]){var w=Bs(a[Hc]);w&&w.b&&(f=w.b)}if(!f)throw Error("Invalid additional user info!");("anonymous"==f||"custom"==f)&&(f=null),w=!1,void 0!==a.isNewUser?w=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(w=!0),wt(this,"providerId",f),wt(this,"isNewUser",w)}function mo(a){Bu.call(this,a),wt(this,"profile",Fs((a=$n(a.rawUserInfo||"{}"))||{}))}function mi(a){if(mo.call(this,a),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vn(a){if(mo.call(this,a),"github.com"!=this.providerId)throw Error("Invalid provider ID!");wt(this,"username",this.profile&&this.profile.login||null)}function ep(a){if(mo.call(this,a),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function xg(a){if(mo.call(this,a),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");wt(this,"username",a.screenName||null)}function _a(a){var f=Ii(a),w=is(f,"link"),S=is(Ii(w),"link");return f=is(f,"deep_link_id"),is(Ii(f),"link")||f||S||w||a}function Hs(a,f){if(!a&&!f)throw new j("internal-error","Internal assert: no raw session string available");if(a&&f)throw new j("internal-error","Internal assert: unable to determine the session type");this.a=a||null,this.b=f||null,this.type=this.a?kl:Uu}ee(mo,Bu),ee(mi,mo),ee(Vn,mo),ee(ep,mo),ee(xg,mo);var kl="enroll",Uu="signin";function va(){}function _i(a,f){return a.then(function(w){if(w[Xi]){var S=Bs(w[Xi]);if(!S||f!=S.i)throw new j("user-mismatch");return w}throw new j("user-mismatch")}).o(function(w){throw w&&w.code&&w.code==De+"user-not-found"?new j("user-mismatch"):w})}function vi(a,f){if(!f)throw new j("internal-error","failed to construct a credential");this.a=f,wt(this,"providerId",a),wt(this,"signInMethod",a)}function ya(a){return{pendingToken:a.a,requestUri:"http://localhost"}}function _o(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf("saml.")&&a.pendingToken)try{return new vi(a.providerId,a.pendingToken)}catch(f){}return null}function jt(a,f,w){if(this.a=null,f.idToken||f.accessToken)f.idToken&&wt(this,"idToken",f.idToken),f.accessToken&&wt(this,"accessToken",f.accessToken),f.nonce&&!f.pendingToken&&wt(this,"nonce",f.nonce),f.pendingToken&&(this.a=f.pendingToken);else{if(!f.oauthToken||!f.oauthTokenSecret)throw new j("internal-error","failed to construct a credential");wt(this,"accessToken",f.oauthToken),wt(this,"secret",f.oauthTokenSecret)}wt(this,"providerId",a),wt(this,"signInMethod",w)}function Qa(a){var f={};return a.idToken&&(f.id_token=a.idToken),a.accessToken&&(f.access_token=a.accessToken),a.secret&&(f.oauth_token_secret=a.secret),f.providerId=a.providerId,a.nonce&&!a.a&&(f.nonce=a.nonce),f={postBody:q_(f).toString(),requestUri:"http://localhost"},a.a&&(delete f.postBody,f.pendingToken=a.a),f}function tp(a){if(a&&a.providerId&&a.signInMethod){var f={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new jt(a.providerId,f,a.signInMethod)}catch(w){}}return null}function Wr(a,f){this.Qc=f||[],jr(this,{providerId:a,isOAuthProvider:!0}),this.Jb={},this.qb=(Nl(a)||{}).Ja||null,this.pb=null}function Ld(a){if("string"!=typeof a||0!=a.indexOf("saml."))throw new j("argument-error",'SAML provider IDs must be prefixed with "saml."');Wr.call(this,a,[])}function vo(a){Wr.call(this,a,Us),this.a=[]}function ju(){vo.call(this,"facebook.com")}function xl(a){if(!a)throw new j("argument-error","credential failed: expected 1 argument (the OAuth access token).");var f=a;return be(a)&&(f=a.accessToken),(new ju).credential({accessToken:f})}function Ui(){vo.call(this,"github.com")}function Za(a){if(!a)throw new j("argument-error","credential failed: expected 1 argument (the OAuth access token).");var f=a;return be(a)&&(f=a.accessToken),(new Ui).credential({accessToken:f})}function Hu(){vo.call(this,"google.com"),this.Ca("profile")}function Gc(a,f){var w=a;return be(a)&&(w=a.idToken,f=a.accessToken),(new Hu).credential({idToken:w,accessToken:f})}function ba(){Wr.call(this,"twitter.com",Vu)}function ls(a,f){var w=a;if(be(w)||(w={oauthToken:a,oauthTokenSecret:f}),!w.oauthToken||!w.oauthTokenSecret)throw new j("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new jt("twitter.com",w,"twitter.com")}function Qi(a,f,w){this.a=a,this.f=f,wt(this,"providerId","password"),wt(this,"signInMethod",w===yo.EMAIL_LINK_SIGN_IN_METHOD?yo.EMAIL_LINK_SIGN_IN_METHOD:yo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Og(a){return a&&a.email&&a.password?new Qi(a.email,a.password,a.signInMethod):null}function yo(){jr(this,{providerId:"password",isOAuthProvider:!1})}function Ol(a,f){if(!(f=Vd(f)))throw new j("argument-error","Invalid email link!");return new Qi(a,f.code,yo.EMAIL_LINK_SIGN_IN_METHOD)}function Vd(a){return(a=jc(a=_a(a)))&&a.operation===Al?a:null}function Ni(a){if(!(a.fb&&a.eb||a.La&&a.ea))throw new j("internal-error");this.a=a,wt(this,"providerId","phone"),this.fa="phone",wt(this,"signInMethod","phone")}function Gu(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var f={};return Un(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(w){a[w]&&(f[w]=a[w])}),new Ni(f)}return null}function Bd(a){return a.a.La&&a.a.ea?{temporaryProof:a.a.La,phoneNumber:a.a.ea}:{sessionInfo:a.a.fb,code:a.a.eb}}function ri(a){try{this.a=a||c.default.auth()}catch(f){throw new j("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}jr(this,{providerId:"phone",isOAuthProvider:!1})}function zc(a,f){if(!a)throw new j("missing-verification-id");if(!f)throw new j("missing-verification-code");return new Ni({fb:a,eb:f})}function Ud(a){if(a.temporaryProof&&a.phoneNumber)return new Ni({La:a.temporaryProof,ea:a.phoneNumber});var f=a&&a.providerId;if(!f||"password"===f)return null;var w=a&&a.oauthAccessToken,S=a&&a.oauthTokenSecret,k=a&&a.nonce,U=a&&a.oauthIdToken,G=a&&a.pendingToken;try{switch(f){case"google.com":return Gc(U,w);case"facebook.com":return xl(w);case"github.com":return Za(w);case"twitter.com":return ls(w,S);default:return w||S||U||G?G?0==f.indexOf("saml.")?new vi(f,G):new jt(f,{pendingToken:G,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},f):new vo(f).credential({idToken:U,accessToken:w,rawNonce:k}):null}}catch(oe){return null}}function $h(a){if(!a.isOAuthProvider)throw new j("invalid-oauth-provider")}function ji(a,f,w,S,k,U,G){if(this.c=a,this.b=f||null,this.g=w||null,this.f=S||null,this.i=U||null,this.h=G||null,this.a=k||null,!this.g&&!this.a)throw new j("invalid-auth-event");if(this.g&&this.a)throw new j("invalid-auth-event");if(this.g&&!this.f)throw new j("invalid-auth-event")}function Pl(a){return(a=a||{}).type?new ji(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&he(a.error),a.postBody,a.tenantId):null}function Yr(){this.b=null,this.a=[]}Hs.prototype.Ha=function(){return Rt(this.a?this.a:this.b)},Hs.prototype.w=function(){return this.type==kl?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},va.prototype.ka=function(){},va.prototype.b=function(){},va.prototype.c=function(){},va.prototype.w=function(){},vi.prototype.ka=function(a){return Yu(a,ya(this))},vi.prototype.b=function(a,f){var w=ya(this);return w.idToken=f,eo(a,w)},vi.prototype.c=function(a,f){return _i(gp(a,ya(this)),f)},vi.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},jt.prototype.ka=function(a){return Yu(a,Qa(this))},jt.prototype.b=function(a,f){var w=Qa(this);return w.idToken=f,eo(a,w)},jt.prototype.c=function(a,f){return _i(gp(a,Qa(this)),f)},jt.prototype.w=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},Wr.prototype.Ka=function(a){return this.Jb=se(a),this},ee(Ld,Wr),ee(vo,Wr),vo.prototype.Ca=function(a){return jn(this.a,a)||this.a.push(a),this},vo.prototype.Rb=function(){return Rn(this.a)},vo.prototype.credential=function(a,f){var w;if(!(w=be(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:f||null}).idToken&&!w.accessToken)throw new j("argument-error","credential failed: must provide the ID token and/or the access token.");return new jt(this.providerId,w,this.providerId)},ee(ju,vo),wt(ju,"PROVIDER_ID","facebook.com"),wt(ju,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),ee(Ui,vo),wt(Ui,"PROVIDER_ID","github.com"),wt(Ui,"GITHUB_SIGN_IN_METHOD","github.com"),ee(Hu,vo),wt(Hu,"PROVIDER_ID","google.com"),wt(Hu,"GOOGLE_SIGN_IN_METHOD","google.com"),ee(ba,Wr),wt(ba,"PROVIDER_ID","twitter.com"),wt(ba,"TWITTER_SIGN_IN_METHOD","twitter.com"),Qi.prototype.ka=function(a){return this.signInMethod==yo.EMAIL_LINK_SIGN_IN_METHOD?sn(a,_p,{email:this.a,oobCode:this.f}):sn(a,Xh,{email:this.a,password:this.f})},Qi.prototype.b=function(a,f){return this.signInMethod==yo.EMAIL_LINK_SIGN_IN_METHOD?sn(a,td,{idToken:f,email:this.a,oobCode:this.f}):sn(a,Jg,{idToken:f,email:this.a,password:this.f})},Qi.prototype.c=function(a,f){return _i(this.ka(a),f)},Qi.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},jr(yo,{PROVIDER_ID:"password"}),jr(yo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),jr(yo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ni.prototype.ka=function(a){return a.gb(Bd(this))},Ni.prototype.b=function(a,f){var w=Bd(this);return w.idToken=f,sn(a,Dp,w)},Ni.prototype.c=function(a,f){var w=Bd(this);return w.operation="REAUTH",_i(a=sn(a,eh,w),f)},Ni.prototype.w=function(){var a={providerId:"phone"};return this.a.fb&&(a.verificationId=this.a.fb),this.a.eb&&(a.verificationCode=this.a.eb),this.a.La&&(a.temporaryProof=this.a.La),this.a.ea&&(a.phoneNumber=this.a.ea),a},ri.prototype.gb=function(a,f){var w=this.a.a;return Rt(f.verify()).then(function(S){if("string"!=typeof S)throw new j("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===f.type){var G,k=be(a)?a.session:null,U=be(a)?a.phoneNumber:a;return G=k&&k.type==kl?k.Ha().then(function(oe){return function(a,f){return sn(a,nv,f).then(function(w){return w.phoneSessionInfo.sessionInfo})}(w,{idToken:oe,phoneEnrollmentInfo:{phoneNumber:U,recaptchaToken:S}})}):k&&k.type==Uu?k.Ha().then(function(oe){return function(a,f){return sn(a,rv,f).then(function(w){return w.phoneResponseInfo.sessionInfo})}(w,{mfaPendingCredential:oe,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:S}})}):function(a,f){return sn(a,Qu,f)}(w,{phoneNumber:U,recaptchaToken:S}),G.then(function(oe){return"function"==typeof f.reset&&f.reset(),oe},function(oe){throw"function"==typeof f.reset&&f.reset(),oe})}throw new j("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')})},jr(ri,{PROVIDER_ID:"phone"}),jr(ri,{PHONE_SIGN_IN_METHOD:"phone"}),ji.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join("-")},ji.prototype.T=function(){return this.h},ji.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zu,cs=null;function jd(a){var f="unauthorized-domain",w=void 0,S=Ii(a);a=S.a,"chrome-extension"==(S=S.c)?w=Tu("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==S||"https"==S?w=Tu("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):f="operation-not-supported-in-this-environment",j.call(this,f,w)}function qc(a,f,w){j.call(this,a,w),(a=f||{}).Kb&&wt(this,"email",a.Kb),a.ea&&wt(this,"phoneNumber",a.ea),a.credential&&wt(this,"credential",a.credential),a.$b&&wt(this,"tenantId",a.$b)}function qh(a){if(a.code){var f=a.code||"";0==f.indexOf(De)&&(f=f.substring(De.length));var w={credential:Ud(a),$b:a.tenantId};if(a.email)w.Kb=a.email;else if(a.phoneNumber)w.ea=a.phoneNumber;else if(!w.credential)return new j(f,a.message||void 0);return new qc(f,w,a.message)}return null}function ii(){}function $u(){}function np(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var f=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],w=0;w<f.length;w++){var S=f[w];try{return new ActiveXObject(S),a.f=S}catch(k){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}function Fl(){}function rp(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=je(this.qc,this),this.a.onerror=je(this.Tb,this),this.a.onprogress=je(this.rc,this),this.a.ontimeout=je(this.vc,this)}function Ll(a,f){a.readyState=f,a.onreadystatechange&&a.onreadystatechange()}function Ja(a,f,w){this.reset(a,f,w,void 0,void 0)}function eu(a){this.f=a,this.b=this.c=this.a=null}function Hd(a,f){this.name=a,this.value=f}ee(jd,j),ee(qc,j),qc.prototype.w=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var f=this.credential&&this.credential.w();return f&&X(a,f),a},qc.prototype.toJSON=function(){return this.w()},ii.prototype.c=null,ee($u,ii),$u.prototype.a=function(){var a=np(this);return a?new ActiveXObject(a):new XMLHttpRequest},$u.prototype.b=function(){var a={};return np(this)&&(a[0]=!0,a[1]=!0),a},zu=new $u,ee(Fl,ii),Fl.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new rp;throw Error("Unsupported browser")},Fl.prototype.b=function(){return{}},(H=rp.prototype).open=function(a,f,w){if(null!=w&&!w)throw Error("Only async requests are supported.");this.a.open(a,f)},H.send=function(a){if(a){if("string"!=typeof a)throw Error("Only string data is supported");this.a.send(a)}else this.a.send()},H.abort=function(){this.a.abort()},H.setRequestHeader=function(){},H.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""},H.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ll(this,4)},H.Tb=function(){this.status=500,this.response=this.responseText="",Ll(this,4)},H.vc=function(){this.Tb()},H.rc=function(){this.status=200,Ll(this,1)},H.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ja.prototype.a=null,Ja.prototype.reset=function(a,f,w,S,k){S||Ct(),delete this.a},Hd.prototype.toString=function(){return this.name};var Pg=new Hd("SEVERE",1e3),Fg=new Hd("WARNING",900),Gd=new Hd("CONFIG",700),tu=new Hd("FINE",500);function zd(a){return a.c?a.c:a.a?zd(a.a):(Ye("Root logger has no level set."),null)}eu.prototype.log=function(a,f,w){if(a.value>=zd(this).value)for(Re(f)&&(f=f()),a=new Ja(a,String(f),this.f),w&&(a.a=w),w=this;w;)w=w.a};var qo={},Gs=null;function $d(a){var f;if(Gs||(Gs=new eu(""),qo[""]=Gs,Gs.c=Gd),!(f=qo[a])){f=new eu(a);var w=a.lastIndexOf("."),S=a.substr(w+1);(w=$d(a.substr(0,w))).b||(w.b={}),w.b[S]=f,f.a=w,qo[a]=f}return f}function Zi(a,f){a&&a.log(tu,f,void 0)}function qd(a){this.f=a}function ip(a){qr.call(this),this.u=a,this.h=void 0,this.readyState=Vl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=$d("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}ee(qd,ii),qd.prototype.a=function(){return new ip(this.f)},qd.prototype.b=function(a){return function(){return a}}({}),ee(ip,qr);var Vl=0;function nu(a){a.c.read().then(a.pc.bind(a)).catch(a.Va.bind(a))}function wa(a){a.readyState=4,a.g=null,a.c=null,a.m=null,ru(a)}function ru(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function ds(a){qr.call(this),this.headers=new ks,this.D=a||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=X_,this.u=this.S=!1}(H=ip.prototype).open=function(a,f){if(this.readyState!=Vl)throw this.abort(),Error("Error reopening a connection");this.s=a,this.f=f,this.readyState=1,ru(this)},H.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var f={headers:this.l,method:this.s,credentials:this.h,cache:void 0};a&&(f.body=a),this.u.fetch(new Request(this.f,f)).then(this.uc.bind(this),this.Va.bind(this))},H.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,wa(this)),this.readyState=Vl},H.uc=function(a){this.a&&(this.g=a,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=a.headers,this.readyState=2,ru(this)),this.a&&(this.readyState=3,ru(this),this.a&&("arraybuffer"===this.responseType?a.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==Y.ReadableStream&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.m=new TextDecoder,nu(this)):a.text().then(this.tc.bind(this),this.Va.bind(this)))))},H.pc=function(a){if(this.a){var f=this.m.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});f&&(this.response=this.responseText+=f),a.done?wa(this):ru(this),3==this.readyState&&nu(this)}},H.tc=function(a){this.a&&(this.response=this.responseText=a,wa(this))},H.sc=function(a){this.a&&(this.response=a,wa(this))},H.Va=function(a){var f=this.i;f&&f.log(Fg,"Failed to fetch url "+this.f,a instanceof Error?a:Error(a)),this.a&&wa(this)},H.setRequestHeader=function(a,f){this.l.append(a,f)},H.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.i)&&a.log(Fg,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},H.getAllResponseHeaders=function(){if(!this.b){var a=this.i;return a&&a.log(Fg,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}a=[];for(var f=this.b.entries(),w=f.next();!w.done;)a.push((w=w.value)[0]+": "+w[1]),w=f.next();return a.join("\r\n")},Object.defineProperty(ip.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(a){this.h=a?"include":"same-origin"}}),ee(ds,qr);var X_="";ds.prototype.b=$d("goog.net.XhrIo");var Wc=/^https?$/i,op=["POST","PUT"];function Bg(a){return"content-type"==a.toLowerCase()}function Bl(a,f){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=f,hs(a),zs(a)}function hs(a){a.J||(a.J=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Ul(a){if(a.c&&void 0!==Ie)if(a.C[1]&&4==jl(a)&&2==hr(a))Zi(a.b,bo(a,"Local request error detected and ignored"));else if(a.i&&4==jl(a))Vi(a.Wb,0,a);else if(a.dispatchEvent("readystatechange"),4==jl(a)){Zi(a.b,bo(a,"Request complete")),a.c=!1;try{var S,f=hr(a);e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}if(!(S=w)){var k;if(k=0===f){var U=String(a.l).match(Ho)[1]||null;if(!U&&Y.self&&Y.self.location){var G=Y.self.location.protocol;U=G.substr(0,G.length-1)}k=!Wc.test(U?U.toLowerCase():"")}S=k}if(S)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var oe=2<jl(a)?a.a.statusText:""}catch(Le){Zi(a.b,"Can not get status: "+Le.message),oe=""}a.h=oe+" ["+hr(a)+"]",hs(a)}}finally{zs(a)}}}function zs(a,f){if(a.a){Wh(a);var w=a.a,S=a.C[0]?ve:null;a.a=null,a.C=null,f||a.dispatchEvent("ready");try{w.onreadystatechange=S}catch(k){(a=a.b)&&a.log(Pg,"Problem encountered resetting onreadystatechange: "+k.message,void 0)}}}function Wh(a){a.a&&a.u&&(a.a.ontimeout=null),a.s&&(Y.clearTimeout(a.s),a.s=null)}function jl(a){return a.a?a.a.readyState:0}function hr(a){try{return 2<jl(a)?a.a.status:-1}catch(f){return-1}}function bo(a,f){return f+" ["+a.P+" "+a.l+" "+hr(a)+"]"}function wo(a){var f=Hl;this.g=[],this.u=f,this.s=a||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Yc(a,f,w){a.a=!0,a.c=w,a.f=!f,fs(a)}function oi(a){if(a.a){if(!a.v)throw new Zc(a);a.v=!1}}function Ca(a,f,w,S){a.g.push([f,w,S]),a.a&&fs(a)}function Qc(a){return $t(a.g,function(f){return Re(f[1])})}function fs(a){if(a.h&&a.a&&Qc(a)){var f=a.h,w=Cn[f];w&&(Y.clearTimeout(w.a),delete Cn[f]),a.h=0}a.b&&(a.b.l--,delete a.b),f=a.c;for(var S=w=!1;a.g.length&&!a.i;){var k=a.g.shift(),U=k[0],G=k[1];if(k=k[2],U=a.f?G:U)try{var oe=U.call(k||a.s,f);void 0!==oe&&(a.f=a.f&&(oe==f||oe instanceof Error),a.c=f=oe),(Je(f)||"function"==typeof Y.Promise&&f instanceof Y.Promise)&&(S=!0,a.i=!0)}catch(Le){f=Le,a.f=!0,Qc(a)||(w=!0)}}a.c=f,S&&(oe=je(a.m,a,!0),S=je(a.m,a,!1),f instanceof wo?(Ca(f,oe,S),f.C=!0):f.then(oe,S)),w&&(f=new iu(f),Cn[f.a]=f,a.h=f.a)}function Zc(){st.call(this)}function Wd(){st.call(this)}function iu(a){this.a=Y.setTimeout(je(this.c,this),0),this.b=a}(H=ds.prototype).Ma=function(){void 0!==Ie&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zi(this.b,bo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},H.abort=function(){this.a&&this.c&&(Zi(this.b,bo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),zs(this))},H.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),zs(this,!0)),ds.bb.Da.call(this)},H.Wb=function(){this.ya||(this.N||this.i||this.f?Ul(this):this.Jc())},H.Jc=function(){Ul(this)},H.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case X_:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(Pg,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(f){return Zi(this.b,"Can not get response: "+f.message),null}},wo.prototype.cancel=function(a){if(this.a)this.c instanceof wo&&this.c.cancel();else{if(this.b){var f=this.b;delete this.b,a?f.cancel(a):(f.l--,0>=f.l&&f.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(a=new Wd(this),oi(this),Yc(this,!1,a))}},wo.prototype.m=function(a,f){this.i=!1,Yc(this,a,f)},wo.prototype.then=function(a,f,w){var S,k,U=new vn(function(G,oe){S=G,k=oe});return Ca(this,S,function(G){G instanceof Wd?U.cancel():k(G)}),U.then(a,f,w)},wo.prototype.$goog_Thenable=!0,ee(Zc,st),Zc.prototype.message="Deferred has already fired",Zc.prototype.name="AlreadyCalledError",ee(Wd,st),Wd.prototype.message="Deferred was canceled",Wd.prototype.name="CanceledError",iu.prototype.c=function(){throw delete Cn[this.a],this.b};var Cn={};function Xc(a){var f={},w=f.document||document,S=_n(a).toString(),k=co(document,"SCRIPT"),U={Xb:k,Ma:void 0},G=new wo(U),oe=null,Le=null!=f.timeout?f.timeout:5e3;return 0<Le&&(oe=window.setTimeout(function(){Or(k,!0);var Xe=new up(ap,"Timeout reached for loading script "+S);oi(G),Yc(G,!1,Xe)},Le),U.Ma=oe),k.onload=k.onreadystatechange=function(){k.readyState&&"loaded"!=k.readyState&&"complete"!=k.readyState||(Or(k,f.xd||!1,oe),oi(G),Yc(G,!0,null))},k.onerror=function(){Or(k,!0,oe);var Xe=new up(Yd,"Error while loading script "+S);oi(G),Yc(G,!1,Xe)},X(U=f.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Ei(k,U),function(a,f){te(a,"HTMLScriptElement"),a.src=_n(f),(f=a.ownerDocument&&a.ownerDocument.defaultView)&&f!=Y?f=Me(f.document):(null===pe&&(pe=Me(Y.document)),f=pe),f&&a.setAttribute("nonce",f)}(k,a),function(a){var f;return(f=(a||document).getElementsByTagName("HEAD"))&&0!=f.length?f[0]:a.documentElement}(w).appendChild(k),G}function Hl(){if(this&&this.Xb){var a=this.Xb;a&&"SCRIPT"==a.tagName&&Or(a,!0,this.Ma)}}function Or(a,f,w){null!=w&&Y.clearTimeout(w),a.onload=ve,a.onerror=ve,a.onreadystatechange=ve,f&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}var Yd=0,ap=1;function up(a,f){var w="Jsloader error (code #"+a+")";f&&(w+=": "+f),st.call(this,w),this.code=a}function Kd(a){this.f=a}function Hi(a,f,w){if(this.c=a,this.l=(a=f||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=a.secureTokenTimeout||Jc,this.g=se(a.secureTokenHeaders||Yh),this.h=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=a.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=a.firebaseTimeout||Qd,this.a=se(a.firebaseHeaders||lp),w&&(this.a["X-Client-Version"]=w,this.g["X-Client-Version"]=w),w="Node"==fo(),!(w=Y.XMLHttpRequest||w&&c.default.INTERNAL.node&&c.default.INTERNAL.node.XMLHttpRequest)&&!ss())throw new j("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=ss()?new qd(self):kc()?new Kd(w):new Fl,this.b=null}ee(up,st),ee(Kd,ii),Kd.prototype.a=function(){return new this.f},Kd.prototype.b=function(){return{}};var qu,Xi="idToken",Jc=new ha(3e4,6e4),Yh={"Content-Type":"application/x-www-form-urlencoded"},Qd=new ha(3e4,6e4),lp={"Content-Type":"application/json"};function cp(a,f){f?a.a["X-Firebase-Locale"]=f:delete a.a["X-Firebase-Locale"]}function Ji(a,f){f&&(a.l=ed("https://securetoken.googleapis.com/v1/token",f),a.h=ed("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",f),a.i=ed("https://identitytoolkit.googleapis.com/v2/",f))}function ed(a,f){return a=Ii(a),f=Ii(f.url),a.f=a.a+a.f,Bi(a,f.c),a.a=f.a,Lh(a,f.g),a.toString()}function dp(a,f){f?(a.a["X-Client-Version"]=f,a.g["X-Client-Version"]=f):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}function jg(a,f,w,S,k,U,G){(function(){var a=ti();return!((a="Chrome"!=xc(a)?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a||li&&Is&&!(9<Is))})()||ss()?a=je(a.u,a):(qu||(qu=new vn(function(oe,Le){!function(a,f){((window.gapi||{}).client||{}).request?a():(Y[Kh]=function(){((window.gapi||{}).client||{}).request?a():f(Error("CORS_UNSUPPORTED"))},function(a,f){Ca(a,null,f,void 0)}(Xc(gr(Hg,{onload:Kh})),function(){f(Error("CORS_UNSUPPORTED"))}))}(oe,Le)})),a=je(a.s,a)),a(f,w,S,k,U,G)}Hi.prototype.T=function(){return this.b},Hi.prototype.u=function(a,f,w,S,k,U){if(ss()&&(void 0===Y.fetch||void 0===Y.Headers||void 0===Y.Request))throw new j("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var G=new ds(this.f);if(U){G.g=Math.max(0,U);var oe=setTimeout(function(){G.dispatchEvent("timeout")},U)}Cr(G,"complete",function(){oe&&clearTimeout(oe);var Le=null;try{Le=JSON.parse(function(a){try{return a.a?a.a.responseText:""}catch(f){return Zi(a.b,"Can not get responseText: "+f.message),""}}(this))||null}catch(Xe){Le=null}f&&f(Le)}),wc(G,"ready",function(){oe&&clearTimeout(oe),Ig(this)}),wc(G,"timeout",function(){oe&&clearTimeout(oe),Ig(this),f&&f(null)}),function(a,f,w,S,k){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+f);w=w?w.toUpperCase():"GET",a.l=f,a.h="",a.P=w,a.J=!1,a.c=!0,a.a=a.D?a.D.a():zu.a(),a.C=function(a){return a.c||(a.c=a.b())}(a.D?a.D:zu),a.a.onreadystatechange=je(a.Wb,a);try{Zi(a.b,bo(a,"Opening Xhr")),a.N=!0,a.a.open(w,String(f),!0),a.N=!1}catch(G){return Zi(a.b,bo(a,"Error opening Xhr: "+G.message)),void Bl(a,G)}f=S||"";var U=new ks(a.headers);k&&function(a,f){if(a.forEach&&"function"==typeof a.forEach)a.forEach(f,void 0);else if(ot(a)||"string"==typeof a)Un(a,f,void 0);else for(var w=Ec(a),S=Cc(a),k=S.length,U=0;U<k;U++)f.call(void 0,S[U],w&&w[U],a)}(k,function(G,oe){U.set(oe,G)}),k=function(a){e:{for(var f=Bg,w=a.length,S="string"==typeof a?a.split(""):a,k=0;k<w;k++)if(k in S&&f.call(void 0,S[k],k,a)){f=k;break e}f=-1}return 0>f?null:"string"==typeof a?a.charAt(f):a[f]}(U.Y()),S=Y.FormData&&f instanceof Y.FormData,!jn(op,w)||k||S||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),U.forEach(function(G,oe){this.a.setRequestHeader(oe,G)},a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.S&&(a.a.withCredentials=a.S);try{Wh(a),0<a.g&&(a.u=function(a){return li&&ml(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),Zi(a.b,bo(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.u)),a.u?(a.a.timeout=a.g,a.a.ontimeout=je(a.Ma,a)):a.s=Vi(a.Ma,a.g,a)),Zi(a.b,bo(a,"Sending request")),a.i=!0,a.a.send(f),a.i=!1}catch(G){Zi(a.b,bo(a,"Send error: "+G.message)),Bl(a,G)}}(G,a,w,S,k)};var Hg=new de(et,"https://apis.google.com/js/client.js?onload=%{onload}"),Kh="__fcb"+Math.floor(1e6*Math.random()).toString();function ps(a){if("string"!=typeof(a=a.email)||!W_.test(a))throw new j("invalid-email")}function Xd(a){"email"in a&&ps(a)}function Co(a){if(!a[Xi])throw a.mfaPendingCredential?new j("multi-factor-auth-required",null,se(a)):new j("internal-error")}function hp(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new j("internal-error")}else{if(!a.sessionInfo)throw new j("missing-verification-id");if(!a.code)throw new j("missing-verification-code")}}Hi.prototype.s=function(a,f,w,S,k){var U=this;qu.then(function(){window.gapi.client.setApiKey(U.c);var G=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:w,body:S,headers:k,authType:"none",callback:function(oe){window.gapi.auth.setToken(G),f&&f(oe)}})}).o(function(G){f&&f({error:{message:G&&G.message||"CORS_UNSUPPORTED"}})})},Hi.prototype.Ab=function(){return sn(this,tv,{})},Hi.prototype.Cb=function(a,f){return sn(this,Cp,{idToken:a,email:f})},Hi.prototype.Db=function(a,f){return sn(this,Jg,{idToken:a,password:f})};var Wu={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function $g(a){if(!a.phoneVerificationInfo)throw new j("internal-error");if(!a.phoneVerificationInfo.sessionInfo)throw new j("missing-verification-id");if(!a.phoneVerificationInfo.code)throw new j("missing-verification-code")}function fp(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new j("internal-error")}function pp(a,f){return f.oauthIdToken&&f.providerId&&0==f.providerId.indexOf("oidc.")&&!f.pendingToken&&(a.sessionId?f.nonce=a.sessionId:a.postBody&&Ur(a=new Ua(a.postBody),"nonce")&&(f.nonce=a.get("nonce"))),f}function gs(a){var f=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",f=qh(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",f=qh(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",f=qh(a)):a.errorMessage&&(f=Tp(a.errorMessage)),f)throw f;Co(a)}function Yu(a,f){return f.returnIdpCredential=!0,sn(a,em,f)}function eo(a,f){return f.returnIdpCredential=!0,sn(a,Ep,f)}function gp(a,f){return f.returnIdpCredential=!0,f.autoCreate=!1,sn(a,tm,f)}function Yg(a){if(!a.oobCode)throw new j("invalid-action-code")}(H=Hi.prototype).Eb=function(a,f){var w={idToken:a},S=[];return kn(Wu,function(k,U){var G=f[U];null===G?S.push(k):U in f&&(w[U]=G)}),S.length&&(w.deleteAttribute=S),sn(this,Cp,w)},H.wb=function(a,f){return X(a={requestType:"PASSWORD_RESET",email:a},f),sn(this,Ku,a)},H.xb=function(a,f){return X(a={requestType:"EMAIL_SIGNIN",email:a},f),sn(this,bp,a)},H.vb=function(a,f){return X(a={requestType:"VERIFY_EMAIL",idToken:a},f),sn(this,Xg,a)},H.Fb=function(a,f,w){return X(a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:f},w),sn(this,v0,a)},H.gb=function(a){return sn(this,Jh,a)},H.ob=function(a,f){return sn(this,zl,{oobCode:a,newPassword:f})},H.Sa=function(a){return sn(this,_0,{oobCode:a})},H.kb=function(a){return sn(this,mp,{oobCode:a})};var mp={endpoint:"setAccountInfo",A:Yg,Z:"email",B:!0},_0={endpoint:"resetPassword",A:Yg,G:function(a){var f=a.requestType;if(!f||!a.email&&"EMAIL_SIGNIN"!=f&&"VERIFY_AND_CHANGE_EMAIL"!=f)throw new j("internal-error")},B:!0},Ea={endpoint:"signupNewUser",A:function(a){if(ps(a),!a.password)throw new j("weak-password")},G:Co,V:!0,B:!0},Zh={endpoint:"createAuthUri",B:!0},Kg={endpoint:"deleteAccount",O:["idToken"]},Qg={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(a){if(!Array.isArray(a.deleteProvider))throw new j("internal-error")}},_p={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ps,G:Co,V:!0,B:!0},td={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ps,G:Co,V:!0},vp={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:$g,G:Co,B:!0,Na:!0},Zg={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:$g,G:Co,B:!0,Na:!0},yp={endpoint:"getAccountInfo"},bp={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(a){if("EMAIL_SIGNIN"!=a.requestType)throw new j("internal-error");ps(a)},Z:"email",B:!0},Xg={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new j("internal-error")},Z:"email",B:!0},v0={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(a){if("VERIFY_AND_CHANGE_EMAIL"!=a.requestType)throw new j("internal-error")},Z:"email",B:!0},Ku={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(a){if("PASSWORD_RESET"!=a.requestType)throw new j("internal-error");ps(a)},Z:"email",B:!0},Gl={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},wp={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(a){if(!a.recaptchaSiteKey)throw new j("internal-error")}},zl={endpoint:"resetPassword",A:Yg,Z:"email",B:!0},Qu={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Cp={endpoint:"setAccountInfo",O:["idToken"],A:Xd,V:!0},Jg={endpoint:"setAccountInfo",O:["idToken"],A:function(a){if(Xd(a),!a.password)throw new j("weak-password")},G:Co,V:!0},tv={endpoint:"signupNewUser",G:Co,V:!0,B:!0},nv={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(a){if(!a.phoneEnrollmentInfo)throw new j("internal-error");if(!a.phoneEnrollmentInfo.phoneNumber)throw new j("missing-phone-number");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new j("missing-app-credential")},G:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new j("internal-error")},B:!0,Na:!0},rv={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new j("missing-app-credential")},G:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new j("internal-error")},B:!0,Na:!0},em={endpoint:"verifyAssertion",A:fp,Za:pp,G:gs,V:!0,B:!0},tm={endpoint:"verifyAssertion",A:fp,Za:pp,G:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new j("user-not-found");if(a.errorMessage)throw Tp(a.errorMessage);Co(a)},V:!0,B:!0},Ep={endpoint:"verifyAssertion",A:function(a){if(fp(a),!a.idToken)throw new j("internal-error")},Za:pp,G:gs,V:!0},Gi={endpoint:"verifyCustomToken",A:function(a){if(!a.token)throw new j("invalid-custom-token")},G:Co,V:!0,B:!0},Xh={endpoint:"verifyPassword",A:function(a){if(ps(a),!a.password)throw new j("wrong-password")},G:Co,V:!0,B:!0},Jh={endpoint:"verifyPhoneNumber",A:hp,G:Co,B:!0},Dp={endpoint:"verifyPhoneNumber",A:function(a){if(!a.idToken)throw new j("internal-error");hp(a)},G:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",qh(a);Co(a)}},eh={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:hp,G:Co,B:!0},$l={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(a){if(!!a[Xi]^!!a.refreshToken)throw new j("internal-error")},B:!0,Na:!0};function sn(a,f,w){if(!function(a,f){if(!f||!f.length)return!0;if(!a)return!1;for(var w=0;w<f.length;w++){var S=a[f[w]];if(null==S||""===S)return!1}return!0}(w,f.O))return ir(new j("internal-error"));var U,S=!!f.Na,k=f.Vb||"POST";return Rt(w).then(f.A).then(function(){return f.V&&(w.returnSecureToken=!0),f.B&&a.b&&void 0===w.tenantId&&(w.tenantId=a.b),function(a,f,w,S,k,U,G){var oe=Ii(f+w);_r(oe,"key",a.c),G&&_r(oe,"cb",Date.now().toString());var Le="GET"==S;if(Le)for(var Xe in k)k.hasOwnProperty(Xe)&&_r(oe,Xe,k[Xe]);return new vn(function(Qt,Zn){jg(a,oe.toString(),function(On){On?On.error?Zn(th(On,U||{})):Qt(On):Zn(new j("network-request-failed"))},S,Le?void 0:Wf(on(k)),a.a,a.v.get())})}(a,S?a.i:a.h,f.endpoint,k,w,f.Ib,f.mb||!1)}).then(function(G){return U=G,f.Za?f.Za(w,U):U}).then(f.G).then(function(){if(!f.Z)return U;if(!(f.Z in U))throw new j("internal-error");return U[f.Z]})}function Tp(a){return th({error:{errors:[{message:a}],code:400,message:a}})}function th(a,f){var w=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",S={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(w=S[w]?new j(S[w]):null)return w;for(var k in w=a.error&&a.error.message||"",X(S={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},f||{}),f=(f=w.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<f.length?f[1]:void 0,S)if(0===w.indexOf(k))return new j(S[k],f);return!f&&a&&(f=Et(a)),new j("internal-error",f)}function iv(a){this.b=a,this.a=null,this.sb=function(a){return(N||(N=new vn(function(a,f){function w(){Kf(),xr("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Kf(),f(Error("Network Error"))},timeout:C.get()})}if(xr("gapi.iframes.Iframe"))a();else if(xr("gapi.load"))w();else{var S="__iframefcb"+Math.floor(1e6*Math.random()).toString();Y[S]=function(){xr("gapi.load")?w():f(Error("Network Error"))},Rt(Xc(S=gr(v,{onload:S}))).o(function(){f(Error("Network Error"))})}}).o(function(a){throw N=null,a}))).then(function(){return new vn(function(f,w){xr("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(S){function k(){clearTimeout(U),f()}a.a=S,a.a.restyle({setHideOnLeave:!1});var U=setTimeout(function(){w(Error("Network Error"))},I.get());S.ping(k).then(k,function(){w(Error("Network Error"))})})})})}(this)}var v=new de(et,"https://apis.google.com/js/api.js?onload=%{onload}"),C=new ha(3e4,6e4),I=new ha(5e3,15e3),N=null;function $(a,f,w,S){this.l=a,this.h=f,this.i=w,this.g=S,this.f=null,a=this.g?Tc((a=Ii(this.g.url)).c,a.a,a.g,"/emulator/auth/iframe"):Tc("https",this.l,null,"/__/auth/iframe"),this.a=a,_r(this.a,"apiKey",this.h),_r(this.a,"appName",this.i),this.b=null,this.c=[]}function Q(a,f,w,S,k,U){this.u=a,this.s=f,this.c=w,this.m=S,this.v=U,this.i=this.g=this.l=null,this.a=k,this.h=this.f=null}function re(a){try{return c.default.app(a).auth().Ga()}catch(f){return[]}}function ae(a,f,w,S,k,U){this.s=a,this.g=f,this.b=w,this.f=U,this.c=S||null,this.i=k||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Ee(a){var f=Os();return function(a){return sn(a,Gl,{}).then(function(f){return f.authorizedDomains||[]})}(a).then(function(w){e:{var S=Ii(f),k=S.c;S=S.a;for(var U=0;U<w.length;U++){var G=w[U],oe=S,Le=k;if(0==G.indexOf("chrome-extension://")?oe=Ii(G).a==oe&&"chrome-extension"==Le:"http"!=Le&&"https"!=Le?oe=!1:ku.test(G)?oe=oe==G:(G=G.split(".").join("\\."),oe=new RegExp("^(.+\\."+G+"|"+G+")$","i").test(oe)),oe){w=!0;break e}}w=!1}if(!w)throw new jd(Os())})}function Fe(a){return a.m||(a.m=Rc().then(function(){if(!a.u){var f=a.c,w=a.i,S=re(a.b),k=new $(a.s,a.g,a.b,a.f);k.f=f,k.b=w,k.c=Rn(S||[]),a.u=k.toString()}a.v=new iv(a.u),function(a){if(!a.v)throw Error("IfcHandler must be initialized!");!function(a,f){a.sb.then(function(){a.a.register("authEvent",f,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(a.v,function(f){var w={};if(f&&f.authEvent){var S=!1;for(f=Pl(f.authEvent),w=0;w<a.h.length;w++)S=a.h[w](f)||S;return(w={}).status=S?"ACK":"ERROR",Rt(w)}return w.status="ERROR",Rt(w)})}(a)})),a.m}function tt(a){return a.l||(a.C=a.c?xu(a.c,re(a.b)):null,a.l=new Hi(a.g,We(a.i),a.C),a.f&&Ji(a.l,a.f)),a.l}function dt(a,f,w,S,k,U,G,oe,Le,Xe,Qt,Zn){return(a=new Q(a,f,w,S,k,Zn)).l=U,a.g=G,a.i=oe,a.b=se(Le||null),a.f=Xe,a.zb(Qt).toString()}function tn(a){if(this.a=a||c.default.INTERNAL.reactNative&&c.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new j("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Dr(a){this.b=a,this.a={},this.f=je(this.c,this)}$.prototype.toString=function(){return this.f?_r(this.a,"v",this.f):xs(this.a.b,"v"),this.b?_r(this.a,"eid",this.b):xs(this.a.b,"eid"),this.c.length?_r(this.a,"fw",this.c.join(",")):xs(this.a.b,"fw"),this.a.toString()},Q.prototype.zb=function(a){return this.h=a,this},Q.prototype.toString=function(){if(this.v){var a=Ii(this.v.url);a=Tc(a.c,a.a,a.g,"/emulator/auth/handler")}else a=Tc("https",this.u,null,"/__/auth/handler");if(_r(a,"apiKey",this.s),_r(a,"appName",this.c),_r(a,"authType",this.m),this.a.isOAuthProvider){var f=this.a;try{var w=c.default.app(this.c).auth().la()}catch(oe){w=null}for(var S in f.pb=w,_r(a,"providerId",this.a.providerId),f=on((w=this.a).Jb))f[S]=f[S].toString();S=w.Qc,f=se(f);for(var k=0;k<S.length;k++){var U=S[k];U in f&&delete f[U]}w.qb&&w.pb&&!f[w.qb]&&(f[w.qb]=w.pb),ue(f)||_r(a,"customParameters",Et(f))}if("function"==typeof this.a.Rb&&(w=this.a.Rb()).length&&_r(a,"scopes",w.join(",")),this.l?_r(a,"redirectUrl",this.l):xs(a.b,"redirectUrl"),this.g?_r(a,"eventId",this.g):xs(a.b,"eventId"),this.i?_r(a,"v",this.i):xs(a.b,"v"),this.b)for(var G in this.b)this.b.hasOwnProperty(G)&&!is(a,G)&&_r(a,G,this.b[G]);return this.h?_r(a,"tid",this.h):xs(a.b,"tid"),this.f?_r(a,"eid",this.f):xs(a.b,"eid"),(G=re(this.c)).length&&_r(a,"fw",G.join(",")),a.toString()},(H=ae.prototype).Pb=function(a,f,w){var S=new j("popup-closed-by-user"),k=new j("web-storage-unsupported"),U=this,G=!1;return this.ma().then(function(){(function(a){var f={type:"webStorageSupport"};return Fe(a).then(function(){return function(a,f){return a.sb.then(function(){return new vn(function(w){a.a.send(f.type,f,w,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(a.v,f)}).then(function(w){if(w&&w.length&&void 0!==w[0].webStorageSupport)return w[0].webStorageSupport;throw Error()})})(U).then(function(oe){oe||(a&&Nu(a),f(k),G=!0)})}).o(function(){}).then(function(){if(!G)return function(a){return new vn(function(f){return function w(){Ns(2e3).then(function(){if(a&&!a.closed)return w();f()})}()})}(a)}).then(function(){if(!G)return Ns(w).then(function(){f(S)})})},H.Yb=function(){var a=ti();return!ni(a)&&!Ng(a)},H.Ub=function(){return!1},H.Nb=function(a,f,w,S,k,U,G,oe){if(!a)return ir(new j("popup-blocked"));if(G&&!ni())return this.ma().o(function(Xe){Nu(a),k(Xe)}),S(),Rt();this.a||(this.a=Ee(tt(this)));var Le=this;return this.a.then(function(){var Xe=Le.ma().o(function(Qt){throw Nu(a),k(Qt),Qt});return S(),Xe}).then(function(){$h(w),G||Bh(dt(Le.s,Le.g,Le.b,f,w,null,U,Le.c,void 0,Le.i,oe,Le.f),a)}).o(function(Xe){throw"auth/network-request-failed"==Xe.code&&(Le.a=null),Xe})},H.Ob=function(a,f,w,S){this.a||(this.a=Ee(tt(this)));var k=this;return this.a.then(function(){$h(f),Bh(dt(k.s,k.g,k.b,a,f,Os(),w,k.c,void 0,k.i,S,k.f))}).o(function(U){throw"auth/network-request-failed"==U.code&&(k.a=null),U})},H.ma=function(){var a=this;return Fe(this).then(function(){return a.v.sb}).o(function(){throw a.a=null,new j("network-request-failed")})},H.ac=function(){return!0},H.Ea=function(a){this.h.push(a)},H.Ta=function(a){hn(this.h,function(f){return f==a})},(H=tn.prototype).get=function(a){return Rt(this.a.getItem(a)).then(function(f){return f&&$n(f)})},H.set=function(a,f){return Rt(this.a.setItem(a,Et(f)))},H.U=function(a){return Rt(this.a.removeItem(a))},H.ca=function(){},H.ia=function(){};var ov,ms=[];function rh(a,f,w){ue(a.a)&&a.b.addEventListener("message",a.f),void 0===a.a[f]&&(a.a[f]=[]),a.a[f].push(w)}function ef(a){this.a=a}function Sp(a){this.c=a,this.b=!1,this.a=[]}function y0(a,f,w,S){var k,G,oe,Le,U=w||{},Xe=null;if(a.b)return ir(Error("connection_unavailable"));var Qt=S?800:50,Zn="undefined"!=typeof MessageChannel?new MessageChannel:null;return new vn(function(On,ki){Zn?(k=Math.floor(Math.random()*Math.pow(10,20)).toString(),Zn.port1.start(),oe=setTimeout(function(){ki(Error("unsupported_event"))},Qt),a.a.push(Xe={messageChannel:Zn,onMessage:G=function(ol){ol.data.eventId===k&&("ack"===ol.data.status?(clearTimeout(oe),Le=setTimeout(function(){ki(Error("timeout"))},3e3)):"done"===ol.data.status?(clearTimeout(Le),void 0!==ol.data.response?On(ol.data.response):ki(Error("unknown_error"))):(clearTimeout(oe),clearTimeout(Le),ki(Error("invalid_response"))))}}),Zn.port1.addEventListener("message",G),a.c.postMessage({eventType:f,eventId:k,data:U},[Zn.port2])):ki(Error("connection_unavailable"))}).then(function(On){return si(a,Xe),On}).o(function(On){throw si(a,Xe),On})}function si(a,f){if(f){var w=f.messageChannel;w&&(w.port1.removeEventListener("message",f.onMessage),w.port1.close()),hn(a.a,function(k){return k==f})}}function $s(){if(!sv())throw new j("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=Y.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var a=this;ss()&&self?(this.v=function(){var a=ss()?self:null;if(Un(ms,function(w){w.b==a&&(f=w)}),!f){var f=new Dr(a);ms.push(f)}return f}(),rh(this.v,"keyChanged",function(f,w){return nn(a).then(function(S){return 0<S.length&&Un(a.a,function(k){k(S)}),{keyProcessed:jn(S,w.key)}})}),rh(this.v,"ping",function(){return Rt(["keyChanged"])})):function(){var a=Y.navigator;return a&&a.serviceWorker?Rt().then(function(){return a.serviceWorker.ready}).then(function(f){return f.active||null}).o(function(){return null}):Rt(null)}().then(function(f){(a.h=f)&&(a.g=new Sp(new ef(f)),y0(a.g,"ping",null,!0).then(function(w){w[0].fulfilled&&jn(w[0].value,"keyChanged")&&(a.s=!0)}).o(function(){}))})}function w0(a){return new vn(function(f,w){var S=a.m.open("firebaseLocalStorageDb",1);S.onerror=function(k){try{k.preventDefault()}catch(U){}w(Error(k.target.error))},S.onupgradeneeded=function(k){k=k.target.result;try{k.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(U){w(U)}},S.onsuccess=function(k){(k=k.target.result).objectStoreNames.contains("firebaseLocalStorage")?f(k):function(a){return new vn(function(f,w){var S=a.m.deleteDatabase("firebaseLocalStorageDb");S.onsuccess=function(){f()},S.onerror=function(k){w(Error(k.target.error))}})}(a).then(function(){return w0(a)}).then(function(U){f(U)}).o(function(U){w(U)})}})}function tf(a){return a.i||(a.i=w0(a)),a.i}function rm(a,f){var S=0;return new vn(function w(k,U){tf(a).then(f).then(k).o(function(G){if(!(3<++S))return tf(a).then(function(oe){return oe.close(),a.i=void 0,w(k,U)}).o(function(oe){U(oe)});U(G)})})}function sv(){try{return!!Y.indexedDB}catch(a){return!1}}function ql(a){return a.objectStore("firebaseLocalStorage")}function Ip(a,f){return a.transaction(["firebaseLocalStorage"],f?"readwrite":"readonly")}function ih(a){return new vn(function(f,w){a.onsuccess=function(S){S&&S.target?f(S.target.result):f()},a.onerror=function(S){w(S.target.error)}})}function av(a,f){return a.g&&a.h&&function(){var a=Y.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.h?y0(a.g,"keyChanged",{key:f},a.s).then(function(){}).o(function(){}):Rt()}function nn(a){return tf(a).then(function(f){var w=ql(Ip(f,!1));return w.getAll?ih(w.getAll()):new vn(function(S,k){var U=[],G=w.openCursor();G.onsuccess=function(oe){(oe=oe.target.result)?(U.push(oe.value),oe.continue()):S(U)},G.onerror=function(oe){k(oe.target.error)}})}).then(function(f){var w={},S=[];if(0==a.b){for(S=0;S<f.length;S++)w[f[S].fbase_key]=f[S].value;S=Rg(a.c,w),a.c=w}return S})}function im(a){a.l&&a.l.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function C0(a){var f=this,w=null;this.a=[],this.type="indexedDB",this.c=a,this.b=Rt().then(function(){if(sv()){var S=Ln(),k="__sak"+S;return ov||(ov=new $s),(w=ov).set(k,S).then(function(){return w.get(k)}).then(function(U){if(U!==S)throw Error("indexedDB not supported!");return w.U(k)}).then(function(){return w}).o(function(){return f.c})}return f.c}).then(function(S){return f.type=S.type,S.ca(function(k){Un(f.a,function(U){U(k)})}),S})}function ou(){this.a={},this.type="inMemory"}function to(){if(!function(){var a="Node"==fo();if(!(a=uv()||a&&c.default.INTERNAL.node&&c.default.INTERNAL.node.localStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(f){return!1}}())throw"Node"==fo()?new j("internal-error","The LocalStorage compatibility library was not found."):new j("web-storage-unsupported");this.a=uv()||c.default.INTERNAL.node.localStorage,this.type="localStorage"}function uv(){try{var a=Y.localStorage,f=Ln();return a&&(a.setItem(f,"1"),a.removeItem(f)),a}catch(w){return null}}function nd(){this.type="nullStorage"}function su(){if(!function(){var a="Node"==fo();if(!(a=nf()||a&&c.default.INTERNAL.node&&c.default.INTERNAL.node.sessionStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(f){return!1}}())throw"Node"==fo()?new j("internal-error","The SessionStorage compatibility library was not found."):new j("web-storage-unsupported");this.a=nf()||c.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function nf(){try{var a=Y.sessionStorage,f=Ln();return a&&(a.setItem(f,"1"),a.removeItem(f)),a}catch(w){return null}}function lv(){var a={};a.Browser=dv,a.Node=vT,a.ReactNative=Mp,a.Worker=om,this.a=a[fo()]}Dr.prototype.c=function(a){var f=a.data.eventType,w=a.data.eventId,S=this.a[f];if(S&&0<S.length){a.ports[0].postMessage({status:"ack",eventId:w,eventType:f,response:null});var k=[];Un(S,function(U){k.push(Rt().then(function(){return U(a.origin,a.data.data)}))}),As(k).then(function(U){var G=[];Un(U,function(oe){G.push({fulfilled:oe.Qb,value:oe.value,reason:oe.reason?oe.reason.message:void 0})}),Un(G,function(oe){for(var Le in oe)void 0===oe[Le]&&delete oe[Le]}),a.ports[0].postMessage({status:"done",eventId:w,eventType:f,response:G})})}},ef.prototype.postMessage=function(a,f){this.a.postMessage(a,f)},Sp.prototype.close=function(){for(;0<this.a.length;)si(this,this.a[0]);this.b=!0},(H=$s.prototype).set=function(a,f){var w=this,S=!1;return rm(this,function(k){return ih((k=ql(Ip(k,!0))).get(a))}).then(function(k){return rm(w,function(U){if(U=ql(Ip(U,!0)),k)return k.value=f,ih(U.put(k));w.b++,S=!0;var G={};return G.fbase_key=a,G.value=f,ih(U.add(G))})}).then(function(){return w.c[a]=f,av(w,a)}).oa(function(){S&&w.b--})},H.get=function(a){return rm(this,function(f){return ih(ql(Ip(f,!1)).get(a))}).then(function(f){return f&&f.value})},H.U=function(a){var f=this,w=!1;return rm(this,function(S){return w=!0,f.b++,ih(ql(Ip(S,!0)).delete(a))}).then(function(){return delete f.c[a],av(f,a)}).oa(function(){w&&f.b--})},H.ca=function(a){0==this.a.length&&function(a){im(a),function f(){a.f=setTimeout(function(){a.l=nn(a).then(function(w){0<w.length&&Un(a.a,function(S){S(w)})}).then(function(){f()}).o(function(w){"STOP_EVENT"!=w.message&&f()})},800)}()}(this),this.a.push(a)},H.ia=function(a){hn(this.a,function(f){return f==a}),0==this.a.length&&im(this)},(H=C0.prototype).get=function(a){return this.b.then(function(f){return f.get(a)})},H.set=function(a,f){return this.b.then(function(w){return w.set(a,f)})},H.U=function(a){return this.b.then(function(f){return f.U(a)})},H.ca=function(a){this.a.push(a)},H.ia=function(a){hn(this.a,function(f){return f==a})},(H=ou.prototype).get=function(a){return Rt(this.a[a])},H.set=function(a,f){return this.a[a]=f,Rt()},H.U=function(a){return delete this.a[a],Rt()},H.ca=function(){},H.ia=function(){},(H=to.prototype).get=function(a){var f=this;return Rt().then(function(){return $n(f.a.getItem(a))})},H.set=function(a,f){var w=this;return Rt().then(function(){var S=Et(f);null===S?w.U(a):w.a.setItem(a,S)})},H.U=function(a){var f=this;return Rt().then(function(){f.a.removeItem(a)})},H.ca=function(a){Y.window&&$r(Y.window,"storage",a)},H.ia=function(a){Y.window&&jo(Y.window,"storage",a)},(H=nd.prototype).get=function(){return Rt(null)},H.set=function(){return Rt()},H.U=function(){return Rt()},H.ca=function(){},H.ia=function(){},(H=su.prototype).get=function(a){var f=this;return Rt().then(function(){return $n(f.a.getItem(a))})},H.set=function(a,f){var w=this;return Rt().then(function(){var S=Et(f);null===S?w.U(a):w.a.setItem(a,S)})},H.U=function(a){var f=this;return Rt().then(function(){f.a.removeItem(a)})},H.ca=function(){},H.ia=function(){};var cv,D0,dv={F:to,cb:su},vT={F:to,cb:su},Mp={F:tn,cb:nd},om={F:to,cb:nd},Wl={rd:"local",NONE:"none",td:"session"};function yi(){var a=!(Ng(ti())||!Nc()),f=ni(),w=Yf();this.m=a,this.h=f,this.l=w,this.a={},cv||(cv=new lv),a=cv;try{this.g=!ho()&&Sl()||!Y.indexedDB?new a.a.F:new C0(ss()?new ou:new a.a.F)}catch(S){this.g=new ou,this.h=!0}try{this.i=new a.a.cb}catch(S){this.i=new ou}this.v=new ou,this.f=je(this.Zb,this),this.b={}}function rf(){return D0||(D0=new yi),D0}function oh(a,f){switch(f){case"session":return a.i;case"none":return a.v;default:return a.g}}function sf(a,f){return"firebase:"+a.name+(f?":"+f:"")}function Kl(a,f,w){return w=sf(f,w),"local"==f.F&&(a.b[w]=null),oh(a,f.F).U(w)}function sm(a){a.c&&(clearInterval(a.c),a.c=null)}function Eo(a){this.a=a,this.b=rf()}(H=yi.prototype).get=function(a,f){return oh(this,a.F).get(sf(a,f))},H.set=function(a,f,w){var S=sf(a,w),k=this,U=oh(this,a.F);return U.set(S,f).then(function(){return U.get(S)}).then(function(G){"local"==a.F&&(k.b[S]=G)})},H.addListener=function(a,f,w){a=sf(a,f),this.l&&(this.b[a]=Y.localStorage.getItem(a)),ue(this.a)&&(oh(this,"local").ca(this.f),this.h||(ho()||!Sl())&&Y.indexedDB||!this.l||function(a){sm(a),a.c=setInterval(function(){for(var f in a.a){var w=Y.localStorage.getItem(f),S=a.b[f];w!=S&&(a.b[f]=w,w=new Fn({type:"storage",key:f,target:window,oldValue:S,newValue:w,a:!0}),a.Zb(w))}},1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(w)},H.removeListener=function(a,f,w){a=sf(a,f),this.a[a]&&(hn(this.a[a],function(S){return S==w}),0==this.a[a].length&&delete this.a[a]),ue(this.a)&&(oh(this,"local").ia(this.f),sm(this))},H.Zb=function(a){if(a&&a.g){var f=a.a.key;if(null==f)for(var w in this.a){var S=this.b[w];void 0===S&&(S=null);var k=Y.localStorage.getItem(w);k!==S&&(this.b[w]=k,this.nb(w))}else if(0==f.indexOf("firebase:")&&this.a[f]){if(void 0!==a.a.a?oh(this,"local").ia(this.f):sm(this),this.m)if(w=Y.localStorage.getItem(f),(S=a.a.newValue)!==w)null!==S?Y.localStorage.setItem(f,S):Y.localStorage.removeItem(f);else if(this.b[f]===S&&void 0===a.a.a)return;var U=this;w=function(){(void 0!==a.a.a||U.b[f]!==Y.localStorage.getItem(f))&&(U.b[f]=Y.localStorage.getItem(f),U.nb(f))},li&&Is&&10==Is&&Y.localStorage.getItem(f)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(w,10):w()}}else Un(a,je(this.nb,this))},H.nb=function(a){this.a[a]&&Un(this.a[a],function(f){f()})};var lm,au={name:"authEvent",F:"local"};function yT(){this.a=rf()}function um(a,f){this.b=S0,this.f=Y.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=f,this.l=Y.Int32Array?new Int32Array(64):Array(64),void 0===lm&&(lm=Y.Int32Array?new Int32Array(M0):M0),this.reset()}ee(um,function(){this.b=-1});for(var S0=64,vC=S0-1,I0=[],hv=0;hv<vC;hv++)I0[hv]=0;var A0=nr(128,I0);function af(a){for(var f=a.f,w=a.l,S=0,k=0;k<f.length;)w[S++]=f[k]<<24|f[k+1]<<16|f[k+2]<<8|f[k+3],k=4*S;for(f=16;64>f;f++){var U=(0|w[f-16])+(((k=0|w[f-15])>>>7|k<<25)^(k>>>18|k<<14)^k>>>3)|0,G=(0|w[f-7])+(((S=0|w[f-2])>>>17|S<<15)^(S>>>19|S<<13)^S>>>10)|0;w[f]=U+G|0}S=0|a.a[0],k=0|a.a[1];var oe=0|a.a[2],Le=0|a.a[3],Xe=0|a.a[4],Qt=0|a.a[5],Zn=0|a.a[6];for(U=0|a.a[7],f=0;64>f;f++){var On=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&k^S&oe^k&oe)|0;G=(U=U+((Xe>>>6|Xe<<26)^(Xe>>>11|Xe<<21)^(Xe>>>25|Xe<<7))|0)+((G=(G=Xe&Qt^~Xe&Zn)+(0|lm[f])|0)+(0|w[f])|0)|0,U=Zn,Zn=Qt,Qt=Xe,Xe=Le+G|0,Le=oe,oe=k,k=S,S=G+On|0}a.a[0]=a.a[0]+S|0,a.a[1]=a.a[1]+k|0,a.a[2]=a.a[2]+oe|0,a.a[3]=a.a[3]+Le|0,a.a[4]=a.a[4]+Xe|0,a.a[5]=a.a[5]+Qt|0,a.a[6]=a.a[6]+Zn|0,a.a[7]=a.a[7]+U|0}function fv(a,f,w){void 0===w&&(w=f.length);var S=0,k=a.c;if("string"==typeof f)for(;S<w;)a.f[k++]=f.charCodeAt(S++),k==a.b&&(af(a),k=0);else{if(!ot(f))throw Error("message must be string or array");for(;S<w;){var U=f[S++];if(!("number"==typeof U&&0<=U&&255>=U&&U==(0|U)))throw Error("message must be a byte array");a.f[k++]=U,k==a.b&&(af(a),k=0)}}a.c=k,a.g+=w}um.prototype.reset=function(){this.g=this.c=0,this.a=Y.Int32Array?new Int32Array(this.h):Rn(this.h)};var M0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Zu(){um.call(this,8,cm)}ee(Zu,um);var cm=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function R0(a,f,w,S,k,U){this.v=a,this.i=f,this.l=w,this.m=S||null,this.u=k||null,this.s=U,this.h=f+":"+w,this.C=new yT,this.g=new Eo(this.h),this.f=null,this.b=[],this.a=this.c=null}function uf(a){return new j("invalid-cordova-configuration",a)}function pm(a,f){for(var w=0;w<a.b.length;w++)try{a.b[w](f)}catch(S){}}function Xu(a){return a.f||(a.f=a.ma().then(function(){return new vn(function(f){a.Ea(function w(S){return f(S),a.Ta(w),!1}),function(a){function f(G){S=!0,k&&k.cancel(),Rp(a).then(function(oe){var Le=w;if(oe&&G&&G.url){var Xe=null;-1!=(Le=_a(G.url)).indexOf("/__/auth/callback")&&(Xe=(Xe="object"==typeof(Xe=$n(is(Xe=Ii(Le),"firebaseError")||null))?he(Xe):null)?new ji(oe.c,oe.b,null,null,Xe,null,oe.T()):new ji(oe.c,oe.b,Le,oe.f,null,null,oe.T())),Le=Xe||w}pm(a,Le)})}var w=new ji("unknown",null,null,null,new j("no-auth-event")),S=!1,k=Ns(500).then(function(){return Rp(a).then(function(){S||pm(a,w)})}),U=Y.handleOpenURL;Y.handleOpenURL=function(G){if(0==G.toLowerCase().indexOf(xr("BuildInfo.packageName",Y).toLowerCase()+"://")&&f({url:G}),"function"==typeof U)try{U(G)}catch(oe){console.error(oe)}},cs||(cs=new Yr),function(a){var f=cs;f.a.push(a),f.b||(f.b=function(w){for(var S=0;S<f.a.length;S++)f.a[S](w)},"function"==typeof(a=xr("universalLinks.subscribe",Y))&&a(null,f.b))}(f)}(a)})})),a.f}function Rp(a){var f=null;return function(a){return a.b.get(au,a.a).then(function(f){return Pl(f)})}(a.g).then(function(w){return f=w,Kl((w=a.g).b,au,w.a)}).then(function(){return f})}function Np(a){this.a=a,this.b=rf()}(H=R0.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(za(void 0)?Rc().then(function(){return new vn(function(a,f){var w=Y.document,S=setTimeout(function(){f(Error("Cordova framework is not ready."))},1e3);w.addEventListener("deviceready",function(){clearTimeout(S),a()},!1)})}):ir(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof xr("universalLinks.subscribe",Y))throw uf("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",Y))throw uf("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",Y))throw uf("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",Y))throw uf("cordova-plugin-inappbrowser is not installed")},function(){throw new j("cordova-not-ready")})},H.Pb=function(a,f){return f(new j("operation-not-supported-in-this-environment")),Rt()},H.Nb=function(){return ir(new j("operation-not-supported-in-this-environment"))},H.ac=function(){return!1},H.Yb=function(){return!0},H.Ub=function(){return!0},H.Ob=function(a,f,w,S){if(this.c)return ir(new j("redirect-operation-pending"));var k=this,U=Y.document,G=null,oe=null,Le=null,Xe=null;return this.c=Rt().then(function(){return $h(f),Xu(k)}).then(function(){return function(a,f,w,S,k){var U=function(){for(var a=20,f=[];0<a;)f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return f.join("")}(),G=new ji(f,S,null,U,new j("no-auth-event"),null,k),oe=xr("BuildInfo.packageName",Y);if("string"!=typeof oe)throw new j("invalid-cordova-configuration");var Le=xr("BuildInfo.displayName",Y),Xe={};if(ti().toLowerCase().match(/iphone|ipad|ipod/))Xe.ibi=oe;else{if(!ti().toLowerCase().match(/android/))return ir(new j("operation-not-supported-in-this-environment"));Xe.apn=oe}Le&&(Xe.appDisplayName=Le),U=function(a){var f=new Zu;fv(f,a),a=[];var w=8*f.g;fv(f,A0,56>f.c?56-f.c:f.b-(f.c-56));for(var S=63;56<=S;S--)f.f[S]=255&w,w/=256;for(af(f),S=w=0;S<f.i;S++)for(var k=24;0<=k;k-=8)a[w++]=f.a[S]>>k&255;return function(a){return un(a,function(f){return 1<(f=f.toString(16)).length?f:"0"+f}).join("")}(a)}(U),Xe.sessionId=U;var Qt=dt(a.v,a.i,a.l,f,w,null,S,a.m,Xe,a.u,k,a.s);return a.ma().then(function(){var Zn=a.h;return a.C.a.set(au,G.w(),Zn)}).then(function(){var Zn=xr("cordova.plugins.browsertab.isAvailable",Y);if("function"!=typeof Zn)throw new j("invalid-cordova-configuration");var On=null;Zn(function(ki){if(ki){if("function"!=typeof(On=xr("cordova.plugins.browsertab.openUrl",Y)))throw new j("invalid-cordova-configuration");On(Qt)}else{if("function"!=typeof(On=xr("cordova.InAppBrowser.open",Y)))throw new j("invalid-cordova-configuration");ki=ti(),a.a=On(Qt,ki.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||ki.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(k,a,f,w,S)}).then(function(){return new vn(function(Qt,Zn){oe=function(){var On=xr("cordova.plugins.browsertab.close",Y);return Qt(),"function"==typeof On&&On(),k.a&&"function"==typeof k.a.close&&(k.a.close(),k.a=null),!1},k.Ea(oe),Xe=function(){Pc()&&Le()},U.addEventListener("resume",Le=function(){G||(G=Ns(2e3).then(function(){Zn(new j("redirect-cancelled-by-user"))}))},!1),ti().toLowerCase().match(/android/)||U.addEventListener("visibilitychange",Xe,!1)}).o(function(Qt){return Rp(k).then(function(){throw Qt})})}).oa(function(){Le&&U.removeEventListener("resume",Le,!1),Xe&&U.removeEventListener("visibilitychange",Xe,!1),G&&G.cancel(),oe&&k.Ta(oe),k.c=null})},H.Ea=function(a){this.b.push(a),Xu(this).o(function(f){"auth/invalid-cordova-configuration"===f.code&&(f=new ji("unknown",null,null,null,new j("no-auth-event")),a(f))})},H.Ta=function(a){hn(this.b,function(f){return f==a})};var lf={name:"pendingRedirect",F:"session"};function gm(a){return Kl(a.b,lf,a.a)}function Kr(a,f,w,S){this.i={},this.u=0,this.D=a,this.v=f,this.m=w,this.J=S,this.h=[],this.f=!1,this.l=je(this.s,this),this.b=new x0,this.C=new P0,this.g=new Np(bC(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=_s(this.D,this.v,this.m,bt,this.J)}function _s(a,f,w,S,k){var U=c.default.SDK_VERSION||null;return za()?new R0(a,f,w,U,S,k):new ae(a,f,w,U,S,k)}function kp(a){a.f||(a.f=!0,a.a.Ea(a.l));var f=a.a;return a.a.ma().o(function(w){throw a.a==f&&a.reset(),w})}function cf(a){a.a.Yb()&&kp(a).o(function(f){var w=new ji("unknown",null,null,null,new j("operation-not-supported-in-this-environment"));xp(f)&&a.s(w)}),a.a.Ub()||O0(a.b)}function ah(a,f){jn(a.h,f)||a.h.push(f),a.f||function(a){return a.b.get(lf,a.a).then(function(f){return"pending"==f})}(a.g).then(function(w){w?gm(a.g).then(function(){kp(a).o(function(S){var k=new ji("unknown",null,null,null,new j("operation-not-supported-in-this-environment"));xp(S)&&a.s(k)})}):cf(a)}).o(function(){cf(a)})}function rd(a,f){hn(a.h,function(w){return w==f})}Kr.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=_s(this.D,this.v,this.m,null,this.J),this.i={}},Kr.prototype.s=function(a){if(!a)throw new j("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var f=!1,w=0;w<this.h.length;w++){var S=this.h[w];if(S.Gb(a.c,a.b)){(f=this.c[a.c])&&(f.h(a,S),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.u=Date.now())),f=!0;break}}return O0(this.b),f};var yC=new ha(2e3,1e4),mm=new ha(3e4,6e4);function df(a,f,w,S,k,U,G){return a.a.Nb(f,w,S,function(){a.f||(a.f=!0,a.a.Ea(a.l))},function(){a.reset()},k,U,G)}function xp(a){return!(!a||"auth/cordova-not-ready"!=a.code)}function hf(a,f,w,S,k){var U;return function(a){return a.b.set(lf,"pending",a.a)}(a.g).then(function(){return a.a.Ob(f,w,S,k).o(function(G){if(xp(G))throw new j("operation-not-supported-in-this-environment");return U=G,gm(a.g).then(function(){throw U})}).then(function(){return a.a.ac()?new vn(function(){}):gm(a.g).then(function(){return a.ra()}).then(function(){}).o(function(){})})})}function gv(a,f,w,S,k){return a.a.Pb(S,function(U){f.na(w,null,U,k)},yC.get())}Kr.prototype.ra=function(){return this.b.ra()};var Op={};function bC(a,f,w){return a=a+":"+f,w&&(a=a+":"+w.url),a}function mv(a,f,w,S){var k=bC(f,w,S);return Op[k]||(Op[k]=new Kr(a,f,w,S)),Op[k]}function x0(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function O0(a){a.g||(a.g=!0,Ju(a,!1,null,null))}function _m(a){a.g&&!a.i&&Ju(a,!1,null,null)}function ff(a,f){if(a.b=function(){return Rt(f)},a.f.length)for(var w=0;w<a.f.length;w++)a.f[w](f)}function Ju(a,f,w,S){f?S?function(a,f){if(a.b=function(){return ir(f)},a.c.length)for(var w=0;w<a.c.length;w++)a.c[w](f)}(a,S):ff(a,w):ff(a,{user:null}),a.f=[],a.c=[]}function P0(){}function vm(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(a){this.jb=a},enumerable:!1})}function F0(a,f){this.a=f,wt(this,"verificationId",a)}function ym(a,f,w,S){return new ri(a).gb(f,w).then(function(k){return new F0(k,S)})}function CC(a){var f=Ka(a);if(!(f&&f.exp&&f.auth_time&&f.iat))throw new j("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");jr(this,{token:a,expirationTime:kd(1e3*f.exp),authTime:kd(1e3*f.auth_time),issuedAtTime:kd(1e3*f.iat),signInProvider:f.firebase&&f.firebase.sign_in_provider?f.firebase.sign_in_provider:null,signInSecondFactor:f.firebase&&f.firebase.sign_in_second_factor?f.firebase.sign_in_second_factor:null,claims:f})}function vv(a,f,w){var S=f&&f[yv];if(!S)throw new j("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=a,this.f=se(f),this.g=w,this.c=new Hs(null,S),this.b=[];var k=this;Un(f[Fp]||[],function(U){(U=Od(U))&&k.b.push(U)}),wt(this,"auth",this.a),wt(this,"session",this.c),wt(this,"hints",this.b)}x0.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},x0.prototype.h=function(a,f){if(a){this.reset(),this.g=!0;var w=a.c,S=a.b,k=a.a&&"auth/web-storage-unsupported"==a.a.code,U=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.i=!(!k&&!U),"unknown"!=w||k||U?a.a?(Ju(this,!0,null,a.a),Rt()):f.Fa(w,S)?function(a,f,w){w=w.Fa(f.c,f.b);var S=f.g,k=f.f,U=f.i,G=f.T(),oe=!!f.c.match(/Redirect$/);w(S,k,G,U).then(function(Le){Ju(a,oe,Le,null)}).o(function(Le){Ju(a,oe,null,Le)})}(this,a,f):ir(new j("invalid-auth-event")):(Ju(this,!1,null,null),Rt())}else ir(new j("invalid-auth-event"))},x0.prototype.ra=function(){var a=this;return new vn(function(f,w){a.b?a.b().then(f,w):(a.f.push(f),a.c.push(w),function(a){var f=new j("timeout");a.a&&a.a.cancel(),a.a=Ns(mm.get()).then(function(){a.b||(a.g=!0,Ju(a,!0,null,f))})}(a))})},P0.prototype.h=function(a,f){if(a){var w=a.c,S=a.b;a.a?(f.na(a.c,null,a.a,a.b),Rt()):f.Fa(w,S)?function(a,f){var w=a.b,S=a.c;f.Fa(S,w)(a.g,a.f,a.T(),a.i).then(function(k){f.na(S,k,null,w)}).o(function(k){f.na(S,null,k,w)})}(a,f):ir(new j("invalid-auth-event"))}else ir(new j("invalid-auth-event"))},F0.prototype.confirm=function(a){return a=zc(this.verificationId,a),this.a(a)};var Fp="mfaInfo",yv="mfaPendingCredential";function L0(a,f,w,S){j.call(this,"multi-factor-auth-required",S,f),this.b=new vv(a,f,w),wt(this,"resolver",this.b)}function V0(a,f,w){if(a&&be(a.serverResponse)&&"auth/multi-factor-auth-required"===a.code)try{return new L0(f,a.serverResponse,w,a.message)}catch(S){}return null}function bm(){}function pf(a){wt(this,"factorId",a.fa),this.a=a}function Lp(a){if(pf.call(this,a),this.a.fa!=ri.PROVIDER_ID)throw new j("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Vp(a,f){for(var w in Ti.call(this,a),f)this[w]=f[w]}function id(a,f){this.a=a,this.b=[],this.c=je(this.yc,this),$r(this.a,"userReloaded",this.c);var w=[];f&&f.multiFactor&&f.multiFactor.enrolledFactors&&Un(f.multiFactor.enrolledFactors,function(S){var k=null,U={};if(S){S.uid&&(U[Zf]=S.uid),S.displayName&&(U[us]=S.displayName),S.enrollmentTime&&(U[Go]=new Date(S.enrollmentTime).toISOString()),S.phoneNumber&&(U[Ls]=S.phoneNumber);try{k=new $a(U)}catch(G){}S=k}else S=null;S&&w.push(S)}),Ql(this,w)}function Ql(a,f){a.b=f,wt(a,"enrolledFactors",f)}function To(a,f,w){if(this.h=a,this.i=f,this.g=w,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Up(a,f){a.stop(),a.b=Ns(function(a,f){return f?(a.a=a.c,a.g()):(f=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),f)}(a,f)).then(function(){return function(){var a=Y.document,f=null;return Pc()||!a?Rt():new vn(function(w){f=function(){Pc()&&(a.removeEventListener("visibilitychange",f,!1),w())},a.addEventListener("visibilitychange",f,!1)}).o(function(w){throw a.removeEventListener("visibilitychange",f,!1),w})}()}).then(function(){return a.h()}).then(function(){Up(a,!0)}).o(function(w){a.i(w)&&Up(a,!1)})}function wm(a){this.f=a,this.b=this.a=null,this.c=Date.now()}function wv(a,f){void 0===f&&(f=a.b?(f=a.b).a-f.g:0),a.c=Date.now()+1e3*f}function Cm(a,f){a.b=Bs(f[Xi]||""),a.a=f.refreshToken,wv(a,void 0!==(f=f.expiresIn)?Number(f):void 0)}function uh(a,f){this.a=a||null,this.b=f||null,jr(this,{lastSignInTime:kd(f||null),creationTime:kd(a||null)})}function EC(a,f,w,S,k,U){jr(this,{uid:a,displayName:S||null,photoURL:k||null,email:w||null,phoneNumber:U||null,providerId:f})}function qs(a,f,w){this.N=[],this.l=a.apiKey,this.m=a.appName,this.s=a.authDomain||null;var S=c.default.SDK_VERSION?xu(c.default.SDK_VERSION):null;this.a=new Hi(this.l,We(bt),S),(this.u=a.emulatorConfig||null)&&Ji(this.a,this.u),this.h=new wm(this.a),H0(this,f[Xi]),Cm(this.h,f),wt(this,"refreshToken",this.h.a),Tv(this,w||{}),qr.call(this),this.P=!1,this.s&&Ps()&&(this.b=mv(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(a){return new To(function(){return a.I(!0)},function(f){return!(!f||"auth/network-request-failed"!=f.code)},function(){var f=a.h.c-Date.now()-3e5;return 0<f?f:0})}(this),this.ba=je(this.ib,this);var k=this;this.za=null,this.Pa=function(U){k.xa(U.h)},this.qa=null,this.Ba=function(U){el(k,U.c)},this.$=null,this.aa=[],this.Oa=function(U){gf(k,U.f)},this.ja=null,this.S=new id(this,w),wt(this,"multiFactor",this.S)}function el(a,f){a.u=f,Ji(a.a,f),a.b&&(f=a.b,a.b=mv(a.s,a.l,a.m,a.u),a.P&&(rd(f,a),ah(a.b,a)))}function lh(a,f){a.qa&&jo(a.qa,"languageCodeChanged",a.Pa),(a.qa=f)&&$r(f,"languageCodeChanged",a.Pa)}function Em(a,f){a.$&&jo(a.$,"emulatorConfigChanged",a.Ba),(a.$=f)&&$r(f,"emulatorConfigChanged",a.Ba)}function gf(a,f){a.aa=f,dp(a.a,c.default.SDK_VERSION?xu(c.default.SDK_VERSION,a.aa):null)}function Dm(a,f){a.ja&&jo(a.ja,"frameworkChanged",a.Oa),(a.ja=f)&&$r(f,"frameworkChanged",a.Oa)}function Dv(a){try{return c.default.app(a.m).auth()}catch(f){throw new j("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function j0(a){a.J||a.D.b||(a.D.start(),jo(a,"tokenChanged",a.ba),$r(a,"tokenChanged",a.ba))}function mf(a){jo(a,"tokenChanged",a.ba),a.D.stop()}function H0(a,f){a.Aa=f,wt(a,"_lat",f)}function Zl(a){for(var f=[],w=0;w<a.W.length;w++)f.push(a.W[w](a));return As(f).then(function(){return a})}function _f(a){a.b&&!a.P&&(a.P=!0,ah(a.b,a))}function Tv(a,f){jr(a,{uid:f.uid,displayName:f.displayName||null,photoURL:f.photoURL||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,isAnonymous:f.isAnonymous||!1,tenantId:f.tenantId||null,metadata:new uh(f.createdAt,f.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Tm(){}function Sm(a){return Rt().then(function(){if(a.J)throw new j("app-deleted")})}function tl(a){return un(a.providerData,function(f){return f.providerId})}function ch(a,f){f&&(z0(a,f.providerId),a.providerData.push(f))}function z0(a,f){hn(a.providerData,function(w){return w.providerId==f})}function Xl(a,f,w){("uid"!=f||w)&&a.hasOwnProperty(f)&&wt(a,f,w)}function Sv(a,f){a!=f&&(jr(a,{uid:f.uid,displayName:f.displayName,photoURL:f.photoURL,email:f.email,emailVerified:f.emailVerified,phoneNumber:f.phoneNumber,isAnonymous:f.isAnonymous,tenantId:f.tenantId,providerData:[]}),wt(a,"metadata",f.metadata?function(a){return new uh(a.a,a.b)}(f.metadata):new uh),Un(f.providerData,function(w){ch(a,w)}),function(a,f){a.b=f.b,a.a=f.a,a.c=f.c}(a.h,f.h),wt(a,"refreshToken",a.h.a),Ql(a.S,f.S.b))}function Jl(a){return a.I().then(function(f){var w=a.isAnonymous;return function(a,f){return sn(a.a,yp,{idToken:f}).then(je(a.Kc,a))}(a,f).then(function(){return w||Xl(a,"isAnonymous",!1),f})})}function Da(a,f){f[Xi]&&a.Aa!=f[Xi]&&(Cm(a.h,f),a.dispatchEvent(new Vp("tokenChanged")),H0(a,f[Xi]),Xl(a,"refreshToken",a.h.a))}function Im(a,f){return Jl(a).then(function(){if(jn(tl(a),f))return Zl(a).then(function(){throw new j("provider-already-linked")})})}function ec(a,f,w){return as({user:a,credential:Ud(f),additionalUserInfo:f=js(f),operationType:w})}function Iv(a,f){return Da(a,f),a.reload().then(function(){return a})}function Am(a,f,w,S,k){if(!Ps())return ir(new j("operation-not-supported-in-this-environment"));if(a.i&&!k)return ir(a.i);var U=Nl(w.providerId),G=Ln(a.uid+":::"),oe=null;(!ni()||Nc())&&a.s&&w.isOAuthProvider&&(oe=dt(a.s,a.l,a.m,f,w,null,G,c.default.SDK_VERSION||null,null,null,a.tenantId,a.u));var Le=da(oe,U&&U.va,U&&U.ua);return S=S().then(function(){if(Mm(a),!k)return a.I().then(function(){})}).then(function(){return df(a.b,Le,f,w,G,!!oe,a.tenantId)}).then(function(){return new vn(function(Xe,Qt){a.na(f,null,new j("cancelled-popup-request"),a.g||null),a.f=Xe,a.C=Qt,a.g=G,a.c=gv(a.b,a,f,Le,G)})}).then(function(Xe){return Le&&Nu(Le),Xe?as(Xe):null}).o(function(Xe){throw Le&&Nu(Le),Xe}),Qr(a,S,k)}function Av(a,f,w,S,k){if(!Ps())return ir(new j("operation-not-supported-in-this-environment"));if(a.i&&!k)return ir(a.i);var U=null,G=Ln(a.uid+":::");return S=S().then(function(){if(Mm(a),!k)return a.I().then(function(){})}).then(function(){return a.ga=G,Zl(a)}).then(function(oe){return a.ha&&(oe=(oe=a.ha).b.set(Gp,a.w(),oe.a)),oe}).then(function(){return hf(a.b,f,w,G,a.tenantId)}).o(function(oe){if(U=oe,a.ha)return Rv(a.ha);throw U}).then(function(){if(U)throw U}),Qr(a,S,k)}function Mm(a){if(!a.b||!a.P)throw new j(a.b&&!a.P?"internal-error":"auth-domain-config-required")}function Qr(a,f,w){var S=function(a,f,w){return a.i&&!w?(f.cancel(),ir(a.i)):f.o(function(S){throw!S||"auth/user-disabled"!=S.code&&"auth/user-token-expired"!=S.code||(a.i||a.dispatchEvent(new Vp("userInvalidated")),a.i=S),S})}(a,f,w);return a.N.push(S),S.oa(function(){ft(a.N,S)}),S.o(function(k){var U=null;throw k&&"auth/multi-factor-auth-required"===k.code&&(U=V0(k.w(),Dv(a),je(a.jc,a))),U||k})}function Mv(a){if(!a.apiKey)return null;var f={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName,emulatorConfig:a.emulatorConfig},w={};if(!a.stsTokenManager||!a.stsTokenManager.accessToken)return null;w[Xi]=a.stsTokenManager.accessToken,w.refreshToken=a.stsTokenManager.refreshToken||null;var S=a.stsTokenManager.expirationTime;S&&(w.expiresIn=(S-Date.now())/1e3);var k=new qs(f,w,a);return a.providerData&&Un(a.providerData,function(U){U&&ch(k,as(U))}),a.redirectEventId&&(k.ga=a.redirectEventId),k}function q0(a){this.a=a,this.b=rf()}vv.prototype.Rc=function(a){var f=this;return a.tb(this.a.a,this.c).then(function(w){var S=se(f.f);return delete S[Fp],delete S[yv],X(S,w),f.g(S)})},ee(L0,j),bm.prototype.tb=function(a,f,w){return f.type==kl?function(a,f,w,S){return w.Ha().then(function(k){return k={idToken:k},void 0!==S&&(k.displayName=S),X(k,{phoneVerificationInfo:Bd(a.a)}),sn(f,vp,k)})}(this,a,f,w):function(a,f,w){return w.Ha().then(function(S){return X(S={mfaPendingCredential:S},{phoneVerificationInfo:Bd(a.a)}),sn(f,Zg,S)})}(this,a,f)},ee(pf,bm),ee(Lp,pf),ee(Vp,Ti),(H=id.prototype).yc=function(a){Ql(this,function(a){var f=[];return Un(a.mfaInfo||[],function(w){(w=Od(w))&&f.push(w)}),f}(a.hd))},H.Sb=function(){return this.a.I().then(function(a){return new Hs(a,null)})},H.fc=function(a,f){var w=this,S=this.a.a;return this.Sb().then(function(k){return a.tb(S,k,f)}).then(function(k){return Da(w.a,k),w.a.reload()})},H.bd=function(a){var f=this,w="string"==typeof a?a:a.uid,S=this.a.a;return this.a.I().then(function(k){return sn(S,$l,{idToken:k,mfaEnrollmentId:w})}).then(function(k){var U=Cu(f.b,function(G){return G.uid!=w});return Ql(f,U),Da(f.a,k),f.a.reload().o(function(G){if("auth/user-token-expired"!=G.code)throw G})})},H.w=function(){return{multiFactor:{enrolledFactors:un(this.b,function(a){return a.w()})}}},To.prototype.start=function(){this.a=this.c,Up(this,!0)},To.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wm.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wm.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?ir(new j("user-token-expired")):a||!this.b||Date.now()>this.c-3e4?this.a?function(a,f){return function(a,f){return new vn(function(w,S){"refresh_token"==f.grant_type&&f.refresh_token||"authorization_code"==f.grant_type&&f.code?jg(a,a.l+"?key="+encodeURIComponent(a.c),function(k){k?k.error?S(th(k)):k.access_token&&k.refresh_token?w(k):S(new j("internal-error")):S(new j("network-request-failed"))},"POST",q_(f).toString(),a.g,a.m.get()):S(new j("internal-error"))})}(a.f,f).then(function(w){return a.b=Bs(w.access_token),a.a=w.refresh_token,wv(a,w.expires_in),{accessToken:a.b.toString(),refreshToken:a.a}}).o(function(w){throw"auth/user-token-expired"==w.code&&(a.a=null),w})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Rt(null):Rt({accessToken:this.b.toString(),refreshToken:this.a})},uh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},ee(qs,qr),qs.prototype.xa=function(a){this.za=a,cp(this.a,a)},qs.prototype.la=function(){return this.za},qs.prototype.Ga=function(){return Rn(this.aa)},qs.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},wt(qs.prototype,"providerId","firebase"),(H=qs.prototype).reload=function(){var a=this;return Qr(this,Sm(this).then(function(){return Jl(a).then(function(){return Zl(a)}).then(Tm)}))},H.oc=function(a){return this.I(a).then(function(f){return new CC(f)})},H.I=function(a){var f=this;return Qr(this,Sm(this).then(function(){return f.h.getToken(a)}).then(function(w){if(!w)throw new j("internal-error");return w.accessToken!=f.Aa&&(H0(f,w.accessToken),f.dispatchEvent(new Vp("tokenChanged"))),Xl(f,"refreshToken",w.refreshToken),w.accessToken}))},H.Kc=function(a){if(!(a=a.users)||!a.length)throw new j("internal-error");Tv(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var f=function(a){return(a=a.providerUserInfo)&&a.length?un(a,function(f){return new EC(f.rawId,f.providerId,f.email,f.displayName,f.photoUrl,f.phoneNumber)}):[]}(a),w=0;w<f.length;w++)ch(this,f[w]);Xl(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Vp("userReloaded",{hd:a}))},H.Lc=function(a){return Ou("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(a)},H.ub=function(a){var f=this,w=null;return Qr(this,a.c(this.a,this.uid).then(function(S){return Da(f,S),w=ec(f,S,"reauthenticate"),f.i=null,f.reload()}).then(function(){return w}),!0)},H.Cc=function(a){return Ou("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(a)},H.rb=function(a){var f=this,w=null;return Qr(this,Im(this,a.providerId).then(function(){return f.I()}).then(function(S){return a.b(f.a,S)}).then(function(S){return w=ec(f,S,"link"),Iv(f,S)}).then(function(){return w}))},H.Dc=function(a,f){var w=this;return Qr(this,Im(this,"phone").then(function(){return ym(Dv(w),a,f,je(w.rb,w))}))},H.Mc=function(a,f){var w=this;return Qr(this,Rt().then(function(){return ym(Dv(w),a,f,je(w.ub,w))}),!0)},H.Cb=function(a){var f=this;return Qr(this,this.I().then(function(w){return f.a.Cb(w,a)}).then(function(w){return Da(f,w),f.reload()}))},H.ed=function(a){var f=this;return Qr(this,this.I().then(function(w){return a.b(f.a,w)}).then(function(w){return Da(f,w),f.reload()}))},H.Db=function(a){var f=this;return Qr(this,this.I().then(function(w){return f.a.Db(w,a)}).then(function(w){return Da(f,w),f.reload()}))},H.Eb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return Sm(this);var f=this;return Qr(this,this.I().then(function(w){return f.a.Eb(w,{displayName:a.displayName,photoUrl:a.photoURL})}).then(function(w){return Da(f,w),Xl(f,"displayName",w.displayName||null),Xl(f,"photoURL",w.photoUrl||null),Un(f.providerData,function(S){"password"===S.providerId&&(wt(S,"displayName",f.displayName),wt(S,"photoURL",f.photoURL))}),Zl(f)}).then(Tm))},H.cd=function(a){var f=this;return Qr(this,Jl(this).then(function(w){return jn(tl(f),a)?function(a,f,w){return sn(a,Qg,{idToken:f,deleteProvider:w})}(f.a,w,[a]).then(function(S){var k={};return Un(S.providerUserInfo||[],function(U){k[U.providerId]=!0}),Un(tl(f),function(U){k[U]||z0(f,U)}),k[ri.PROVIDER_ID]||wt(f,"phoneNumber",null),Zl(f)}):Zl(f).then(function(){throw new j("no-such-provider")})}))},H.delete=function(){var a=this;return Qr(this,this.I().then(function(f){return sn(a.a,Kg,{idToken:f})}).then(function(){a.dispatchEvent(new Vp("userDeleted"))})).then(function(){for(var f=0;f<a.N.length;f++)a.N[f].cancel("app-deleted");lh(a,null),Em(a,null),Dm(a,null),a.N=[],a.J=!0,mf(a),wt(a,"refreshToken",null),a.b&&rd(a.b,a)})},H.Gb=function(a,f){return!!("linkViaPopup"==a&&(this.g||null)==f&&this.f||"reauthViaPopup"==a&&(this.g||null)==f&&this.f||"linkViaRedirect"==a&&(this.ga||null)==f||"reauthViaRedirect"==a&&(this.ga||null)==f)},H.na=function(a,f,w,S){"linkViaPopup"!=a&&"reauthViaPopup"!=a||S!=(this.g||null)||(w&&this.C?this.C(w):f&&!w&&this.f&&this.f(f),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},H.Fa=function(a,f){return"linkViaPopup"==a&&f==(this.g||null)?je(this.Lb,this):"reauthViaPopup"==a&&f==(this.g||null)?je(this.Mb,this):"linkViaRedirect"==a&&(this.ga||null)==f?je(this.Lb,this):"reauthViaRedirect"==a&&(this.ga||null)==f?je(this.Mb,this):null},H.Ec=function(a){var f=this;return Am(this,"linkViaPopup",a,function(){return Im(f,a.providerId).then(function(){return Zl(f)})},!1)},H.Nc=function(a){return Am(this,"reauthViaPopup",a,function(){return Rt()},!0)},H.Fc=function(a){var f=this;return Av(this,"linkViaRedirect",a,function(){return Im(f,a.providerId)},!1)},H.Oc=function(a){return Av(this,"reauthViaRedirect",a,function(){return Rt()},!0)},H.Lb=function(a,f,w,S){var k=this;this.c&&(this.c.cancel(),this.c=null);var U=null;return Qr(this,this.I().then(function(G){return eo(k.a,{requestUri:a,postBody:S,sessionId:f,idToken:G})}).then(function(G){return U=ec(k,G,"link"),Iv(k,G)}).then(function(){return U}))},H.Mb=function(a,f,w,S){var k=this;this.c&&(this.c.cancel(),this.c=null);var U=null;return Qr(this,Rt().then(function(){return _i(gp(k.a,{requestUri:a,sessionId:f,postBody:S,tenantId:w}),k.uid)}).then(function(oe){return U=ec(k,oe,"reauthenticate"),Da(k,oe),k.i=null,k.reload()}).then(function(){return U}),!0)},H.vb=function(a){var f=this,w=null;return Qr(this,this.I().then(function(S){return w=S,void 0===a||ue(a)?{}:Ml(new Lu(a))}).then(function(S){return f.a.vb(w,S)}).then(function(S){if(f.email!=S)return f.reload()}).then(function(){}))},H.Fb=function(a,f){var w=this,S=null;return Qr(this,this.I().then(function(k){return S=k,void 0===f||ue(f)?{}:Ml(new Lu(f))}).then(function(k){return w.a.Fb(S,a,k)}).then(function(k){if(w.email!=k)return w.reload()}).then(function(){}))},H.jc=function(a){var f=null,w=this;return Qr(this,a=_i(Rt(a),w.uid).then(function(S){return f=ec(w,S,"reauthenticate"),Da(w,S),w.i=null,w.reload()}).then(function(){return f}),!0)},H.toJSON=function(){return this.w()},H.w=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&X(a,this.metadata.w()),Un(this.providerData,function(f){a.providerData.push(function(a){var w,f={};for(w in a)a.hasOwnProperty(w)&&(f[w]=a[w]);return f}(f))}),X(a,this.S.w()),a};var Gp={name:"redirectUser",F:"session"};function Rv(a){return Kl(a.b,Gp,a.a)}function Rm(a){this.a=a,this.b=rf(),this.c=null,this.f=function(a){var f=nl("local"),w=nl("session"),S=nl("none");return function(a,f,w){var S=sf(f,w),k=oh(a,f.F);return a.get(f,w).then(function(U){var G=null;try{G=$n(Y.localStorage.getItem(S))}catch(oe){}if(G&&!U)return Y.localStorage.removeItem(S),a.set(f,G,w);G&&U&&"localStorage"!=k.type&&Y.localStorage.removeItem(S)})}(a.b,f,a.a).then(function(){return a.b.get(w,a.a)}).then(function(k){return k?w:a.b.get(S,a.a).then(function(U){return U?S:a.b.get(f,a.a).then(function(G){return G?f:a.b.get(zp,a.a).then(function(oe){return oe?nl(oe):f})})})}).then(function(k){return a.c=k,Nv(a,k.F)}).o(function(){a.c||(a.c=f)})}(this),this.b.addListener(nl("local"),this.a,je(this.g,this))}function Nv(a,f){var S,w=[];for(S in Wl)Wl[S]!==f&&w.push(Kl(a.b,nl(Wl[S]),a.a));return w.push(Kl(a.b,zp,a.a)),function(a){return new vn(function(f,w){var S=a.length,k=[];if(S)for(var U=function(Xe,Qt){S--,k[Xe]=Qt,0==S&&f(k)},G=function(Xe){w(Xe)},oe=0;oe<a.length;oe++)Bo(a[oe],gt(U,oe),G);else f(k)})}(w)}Rm.prototype.g=function(){var a=this,f=nl("local");Wo(this,function(){return Rt().then(function(){return a.c&&"local"!=a.c.F?a.b.get(f,a.a):null}).then(function(w){if(w)return Nv(a,"local").then(function(){a.c=f})})})};var zp={name:"persistence",F:"session"};function nl(a){return{name:"authUser",F:a}}function Nm(a,f){return Wo(a,function(){return a.b.set(a.c,f.w(),a.a)})}function ar(a){return Wo(a,function(){return Kl(a.b,a.c,a.a)})}function km(a,f,w){return Wo(a,function(){return a.b.get(a.c,a.a).then(function(S){return S&&f&&(S.authDomain=f),S&&w&&(S.emulatorConfig=w),Mv(S||{})})})}function Wo(a,f){return a.f=a.f.then(f,f),a.f}function Ws(a){if(this.l=!1,wt(this,"settings",new vm),wt(this,"app",a),!ur(this).options||!ur(this).options.apiKey)throw new j("invalid-api-key");a=c.default.SDK_VERSION?xu(c.default.SDK_VERSION):null,this.a=new Hi(ur(this).options&&ur(this).options.apiKey,We(bt),a),this.P=[],this.s=[],this.N=[],this.Pa=c.default.INTERNAL.createSubscribe(je(this.zc,this)),this.W=void 0,this.ib=c.default.INTERNAL.createSubscribe(je(this.Ac,this)),rl(this,null),this.i=new Rm(ur(this).options.apiKey+":"+ur(this).name),this.D=new q0(ur(this).options.apiKey+":"+ur(this).name),this.$=Zr(this,function(a){var f=ur(a).options.authDomain,w=function(a){var f=function(a,f){return a.b.get(Gp,a.a).then(function(w){return w&&f&&(w.authDomain=f),Mv(w||{})})}(a.D,ur(a).options.authDomain).then(function(w){return(a.m=w)&&(w.ha=a.D),Rv(a.D)});return Zr(a,f)}(a).then(function(){return km(a.i,f,a.R)}).then(function(S){return S?(S.ha=a.D,a.m&&(a.m.ga||null)==(S.ga||null)?S:S.reload().then(function(){return Nm(a.i,S).then(function(){return S})}).o(function(k){return"auth/network-request-failed"==k.code?S:ar(a.i)})):null}).then(function(S){rl(a,S||null)});return Zr(a,w)}(this)),this.h=Zr(this,function(a){return a.$.then(function(){return Q0(a)}).o(function(){}).then(function(){if(!a.l)return a.ja()}).o(function(){}).then(function(){if(!a.l){a.ba=!0;var f=a.i;f.b.addListener(nl("local"),f.a,a.ja)}})}(this)),this.ba=!1,this.ja=je(this.Zc,this),this.Ba=je(this.da,this),this.qa=je(this.mc,this),this.za=je(this.wc,this),this.Aa=je(this.xc,this),this.b=null,function(a){var f=ur(a).options.authDomain,w=ur(a).options.apiKey;f&&Ps()&&(a.Oa=a.$.then(function(){if(!a.l){if(a.b=mv(f,w,ur(a).name,a.R),ah(a.b,a),gn(a)&&_f(gn(a)),a.m){_f(a.m);var S=a.m;S.xa(a.la()),lh(S,a),gf(S=a.m,a.J),Dm(S,a),el(S=a.m,a.R),Em(S,a),a.m=null}return a.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=je(this.delete,this),this.INTERNAL.logFramework=je(this.Gc,this),this.u=0,qr.call(this),function(a){Object.defineProperty(a,"lc",{get:function(){return this.la()},set:function(f){this.xa(f)},enumerable:!1}),a.aa=null,Object.defineProperty(a,"ti",{get:function(){return this.T()},set:function(f){this.zb(f)},enumerable:!1}),a.S=null,Object.defineProperty(a,"emulatorConfig",{get:function(){if(this.R){var f=Ii(this.R.url);f=as({protocol:f.c,host:f.a,port:f.g,options:as({disableWarnings:this.R.ec})})}else f=null;return f},enumerable:!1})}(this),this.J=[],this.R=null}function $p(a){Ti.call(this,"languageCodeChanged"),this.h=a}function Y0(a){Ti.call(this,"emulatorConfigChanged"),this.c=a}function K0(a){Ti.call(this,"frameworkChanged"),this.f=a}function Om(a){return a.Oa||ir(new j("auth-domain-config-required"))}function Q0(a){if(!Ps())return ir(new j("operation-not-supported-in-this-environment"));var f=Om(a).then(function(){return a.b.ra()}).then(function(w){return w?as(w):null});return Zr(a,f)}function rl(a,f){gn(a)&&(function(a,f){hn(a.W,function(w){return w==f})}(gn(a),a.Ba),jo(gn(a),"tokenChanged",a.qa),jo(gn(a),"userDeleted",a.za),jo(gn(a),"userInvalidated",a.Aa),mf(gn(a))),f&&(f.W.push(a.Ba),$r(f,"tokenChanged",a.qa),$r(f,"userDeleted",a.za),$r(f,"userInvalidated",a.Aa),0<a.u&&j0(f)),wt(a,"currentUser",f),f&&(f.xa(a.la()),lh(f,a),gf(f,a.J),Dm(f,a),el(f,a.R),Em(f,a))}function hh(a,f){var w=null,S=null;return Zr(a,f.then(function(k){return w=Ud(k),S=js(k),function(a,f){var w={};return w.apiKey=ur(a).options.apiKey,w.authDomain=ur(a).options.authDomain,w.appName=ur(a).name,a.R&&(w.emulatorConfig=a.R),a.$.then(function(){return function(a,f,w,S){var k=new qs(a,f);return w&&(k.ha=w),S&&gf(k,S),k.reload().then(function(){return k})}(w,f,a.D,a.Ga())}).then(function(S){return gn(a)&&S.uid==gn(a).uid?(Sv(gn(a),S),a.da(S)):(rl(a,S),_f(S),a.da(S))}).then(function(){bf(a)})}(a,k)},function(k){var U=null;throw k&&"auth/multi-factor-auth-required"===k.code&&(U=V0(k.w(),a,je(a.kc,a))),U||k}).then(function(){return as({user:gn(a),credential:w,additionalUserInfo:S,operationType:"signIn"})}))}function ur(a){return a.app}function gn(a){return a.currentUser}function Fm(a){return gn(a)&&gn(a)._lat||null}function bf(a){if(a.ba){for(var f=0;f<a.s.length;f++)a.s[f]&&a.s[f](Fm(a));if(a.W!==a.getUid()&&a.N.length)for(a.W=a.getUid(),f=0;f<a.N.length;f++)a.N[f]&&a.N[f](Fm(a))}}function Zr(a,f){return a.P.push(f),f.oa(function(){ft(a.P,f)}),f}function Pv(){}function wf(){this.a={},this.b=1e12}Rm.prototype.yb=function(a){var f=null,w=this;return function(a){var f=new j("invalid-persistence-type"),w=new j("unsupported-persistence-type");e:{for(S in Wl)if(Wl[S]==a){var S=!0;break e}S=!1}if(!S||"string"!=typeof a)throw f;switch(fo()){case"ReactNative":if("session"===a)throw w;break;case"Node":if("none"!==a)throw w;break;case"Worker":if("session"===a||!sv()&&"none"!==a)throw w;break;default:if(!Yf()&&"none"!==a)throw w}}(a),Wo(this,function(){return a!=w.c.F?w.b.get(w.c,w.a).then(function(S){return f=S,Nv(w,a)}).then(function(){if(w.c=nl(a),f)return w.b.set(w.c,f,w.a)}):Rt()})},ee(Ws,qr),ee($p,Ti),ee(Y0,Ti),ee(K0,Ti),(H=Ws.prototype).yb=function(a){return Zr(this,a=this.i.yb(a))},H.xa=function(a){this.aa===a||this.l||(this.aa=a,cp(this.a,this.aa),this.dispatchEvent(new $p(this.la())))},H.la=function(){return this.aa},H.fd=function(){var a=Y.navigator;this.xa(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},H.gd=function(a,f){if(!this.R){if(!/^https?:\/\//.test(a))throw new j("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(a){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),Y.document&&!a&&Rc().then(function(){var f=Y.document.createElement("div");f.innerText="Running in emulator mode. Do not use with production credentials.",f.style.position="fixed",f.style.width="100%",f.style.backgroundColor="#ffffff",f.style.border=".1em solid #000000",f.style.color="#b50000",f.style.bottom="0px",f.style.left="0px",f.style.margin="0px",f.style.zIndex=1e4,f.style.textAlign="center",f.classList.add("firebase-emulator-warning"),Y.document.body.appendChild(f)})})(f=!!f&&!!f.disableWarnings),this.R={url:a,ec:f},this.settings.jb=!0,Ji(this.a,this.R),this.dispatchEvent(new Y0(this.R))}},H.Gc=function(a){this.J.push(a),dp(this.a,c.default.SDK_VERSION?xu(c.default.SDK_VERSION,this.J):null),this.dispatchEvent(new K0(this.J))},H.Ga=function(){return Rn(this.J)},H.zb=function(a){this.S===a||this.l||(this.S=a,this.a.b=this.S)},H.T=function(){return this.S},H.toJSON=function(){return{apiKey:ur(this).options.apiKey,authDomain:ur(this).options.authDomain,appName:ur(this).name,currentUser:gn(this)&&gn(this).w()}},H.Gb=function(a,f){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==f&&!!this.f;default:return!1}},H.na=function(a,f,w,S){"signInViaPopup"==a&&this.g==S&&(w&&this.C?this.C(w):f&&!w&&this.f&&this.f(f),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},H.Fa=function(a,f){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.g==f&&this.f?je(this.ic,this):null},H.ic=function(a,f,w,S){var k=this,U={requestUri:a,postBody:S,sessionId:f,tenantId:w};return this.c&&(this.c.cancel(),this.c=null),k.$.then(function(){return hh(k,Yu(k.a,U))})},H.Xc=function(a){if(!Ps())return ir(new j("operation-not-supported-in-this-environment"));var f=this,w=Nl(a.providerId),S=Ln(),k=null;(!ni()||Nc())&&ur(this).options.authDomain&&a.isOAuthProvider&&(k=dt(ur(this).options.authDomain,ur(this).options.apiKey,ur(this).name,"signInViaPopup",a,null,S,c.default.SDK_VERSION||null,null,null,this.T(),this.R));var U=da(k,w&&w.va,w&&w.ua);return Zr(this,w=Om(this).then(function(G){return df(G,U,"signInViaPopup",a,S,!!k,f.T())}).then(function(){return new vn(function(G,oe){f.na("signInViaPopup",null,new j("cancelled-popup-request"),f.g),f.f=G,f.C=oe,f.g=S,f.c=gv(f.b,f,"signInViaPopup",U,S)})}).then(function(G){return U&&Nu(U),G?as(G):null}).o(function(G){throw U&&Nu(U),G}))},H.Yc=function(a){if(!Ps())return ir(new j("operation-not-supported-in-this-environment"));var f=this,w=Om(this).then(function(){return function(a){return Wo(a,function(){return a.b.set(zp,a.c.F,a.a)})}(f.i)}).then(function(){return hf(f.b,"signInViaRedirect",a,void 0,f.T())});return Zr(this,w)},H.ra=function(){var a=this;return Q0(this).then(function(f){return a.b&&_m(a.b.b),f}).o(function(f){throw a.b&&_m(a.b.b),f})},H.dd=function(a){if(!a)return ir(new j("null-user"));if(this.S!=a.tenantId)return ir(new j("tenant-id-mismatch"));var f=this,w={};w.apiKey=ur(this).options.apiKey,w.authDomain=ur(this).options.authDomain,w.appName=ur(this).name;var S=function(a,f,w,S){var k=a.h,U={};return U[Xi]=k.b&&k.b.toString(),U.refreshToken=k.a,f=new qs(f||{apiKey:a.l,authDomain:a.s,appName:a.m},U),w&&(f.ha=w),S&&gf(f,S),Sv(f,a),f}(a,w,f.D,f.Ga());return Zr(this,this.h.then(function(){if(ur(f).options.apiKey!=a.l)return S.reload()}).then(function(){return gn(f)&&a.uid==gn(f).uid?(Sv(gn(f),a),f.da(a)):(rl(f,S),_f(S),f.da(S))}).then(function(){bf(f)}))},H.Bb=function(){var a=this;return Zr(this,this.h.then(function(){return a.b&&_m(a.b.b),gn(a)?(rl(a,null),ar(a.i).then(function(){bf(a)})):Rt()}))},H.Zc=function(){var a=this;return km(this.i,ur(this).options.authDomain).then(function(f){if(!a.l){var w;if(w=gn(a)&&f){w=gn(a).uid;var S=f.uid;w=null!=w&&""!==w&&null!=S&&""!==S&&w==S}if(w)return Sv(gn(a),f),gn(a).I();(gn(a)||f)&&(rl(a,f),f&&(_f(f),f.ha=a.D),a.b&&ah(a.b,a),bf(a))}})},H.da=function(a){return Nm(this.i,a)},H.mc=function(){bf(this),this.da(gn(this))},H.wc=function(){this.Bb()},H.xc=function(){this.Bb()},H.kc=function(a){var f=this;return this.h.then(function(){return hh(f,Rt(a))})},H.zc=function(a){var f=this;this.addAuthTokenListener(function(){a.next(gn(f))})},H.Ac=function(a){var f=this;!function(a,f){a.N.push(f),Zr(a,a.h.then(function(){!a.l&&jn(a.N,f)&&a.W!==a.getUid()&&(a.W=a.getUid(),f(Fm(a)))}))}(this,function(){a.next(gn(f))})},H.Ic=function(a,f,w){var S=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof a?a(gn(S)):"function"==typeof a.next&&a.next(gn(S))}),this.Pa(a,f,w)},H.Hc=function(a,f,w){var S=this;return this.ba&&Promise.resolve().then(function(){S.W=S.getUid(),"function"==typeof a?a(gn(S)):"function"==typeof a.next&&a.next(gn(S))}),this.ib(a,f,w)},H.nc=function(a){var f=this;return Zr(this,this.h.then(function(){return gn(f)?gn(f).I(a).then(function(S){return{accessToken:S}}):null}))},H.Tc=function(a){var f=this;return this.h.then(function(){return hh(f,sn(f.a,Gi,{token:a}))}).then(function(w){var S=w.user;return Xl(S,"isAnonymous",!1),f.da(S),w})},H.Uc=function(a,f){var w=this;return this.h.then(function(){return hh(w,sn(w.a,Xh,{email:a,password:f}))})},H.dc=function(a,f){var w=this;return this.h.then(function(){return hh(w,sn(w.a,Ea,{email:a,password:f}))})},H.ab=function(a){var f=this;return this.h.then(function(){return hh(f,a.ka(f.a))})},H.Sc=function(a){return Ou("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(a)},H.Ab=function(){var a=this;return this.h.then(function(){var f=gn(a);if(f&&f.isAnonymous){var w=as({providerId:null,isNewUser:!1});return as({user:f,credential:null,additionalUserInfo:w,operationType:"signIn"})}return hh(a,a.a.Ab()).then(function(S){var k=S.user;return Xl(k,"isAnonymous",!0),a.da(k),S})})},H.getUid=function(){return gn(this)&&gn(this).uid||null},H.cc=function(a){this.addAuthTokenListener(a),this.u++,0<this.u&&gn(this)&&j0(gn(this))},H.Pc=function(a){var f=this;Un(this.s,function(w){w==a&&f.u--}),0>this.u&&(this.u=0),0==this.u&&gn(this)&&mf(gn(this)),this.removeAuthTokenListener(a)},H.addAuthTokenListener=function(a){var f=this;this.s.push(a),Zr(this,this.h.then(function(){f.l||jn(f.s,a)&&a(Fm(f))}))},H.removeAuthTokenListener=function(a){hn(this.s,function(f){return f==a})},H.delete=function(){this.l=!0;for(var a=0;a<this.P.length;a++)this.P[a].cancel("app-deleted");return this.P=[],this.i&&(a=this.i).b.removeListener(nl("local"),a.a,this.ja),this.b&&(rd(this.b,this),_m(this.b.b)),Promise.resolve()},H.hc=function(a){return Zr(this,function(a,f){return sn(a,Zh,{identifier:f,continueUri:Nd()?Os():"http://localhost"}).then(function(w){return w.signinMethods||[]})}(this.a,a))},H.Bc=function(a){return!!Vd(a)},H.xb=function(a,f){var w=this;return Zr(this,Rt().then(function(){var S=new Lu(f);if(!S.c)throw new j("argument-error",Hh+" must be true when sending sign in link to email");return Ml(S)}).then(function(S){return w.a.xb(a,S)}).then(function(){}))},H.jd=function(a){return this.Sa(a).then(function(f){return f.data.email})},H.ob=function(a,f){return Zr(this,this.a.ob(a,f).then(function(){}))},H.Sa=function(a){return Zr(this,this.a.Sa(a).then(function(f){return new Mi(f)}))},H.kb=function(a){return Zr(this,this.a.kb(a).then(function(){}))},H.wb=function(a,f){var w=this;return Zr(this,Rt().then(function(){return void 0===f||ue(f)?{}:Ml(new Lu(f))}).then(function(S){return w.a.wb(a,S)}).then(function(){}))},H.Wc=function(a,f){return Zr(this,ym(this,a,f,je(this.ab,this)))},H.Vc=function(a,f){var w=this;return Zr(this,Rt().then(function(){var S=f||Os(),k=Ol(a,S);if(!(S=Vd(S)))throw new j("argument-error","Invalid email link!");if(S.tenantId!==w.T())throw new j("tenant-id-mismatch");return w.ab(k)}))},Pv.prototype.render=function(){},Pv.prototype.reset=function(){},Pv.prototype.getResponse=function(){},Pv.prototype.execute=function(){};var Fv=null;function Lv(a,f){return(f=TC(f))&&a.a[f]||null}function TC(a){return(a=void 0===a?1e12:a)?a.toString():null}function Vv(a,f){this.g=!1,this.c=f,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Ot(a);var w=this;this.i=function(){w.execute()},this.h?this.execute():$r(this.f,"click",this.i)}function qp(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function Bv(){}function Lm(){}wf.prototype.render=function(a,f){return this.a[this.b.toString()]=new Vv(a,f),this.b++},wf.prototype.reset=function(a){var f=Lv(this,a);a=TC(a),f&&a&&(f.delete(),delete this.a[a])},wf.prototype.getResponse=function(a){return(a=Lv(this,a))?a.getResponse():null},wf.prototype.execute=function(a){(a=Lv(this,a))&&a.execute()},Vv.prototype.getResponse=function(){return qp(this),this.b},Vv.prototype.execute=function(){qp(this);var a=this;this.a||(this.a=setTimeout(function(){a.b=function(){for(var a=50,f=[];0<a;)f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return f.join("")}();var f=a.c.callback,w=a.c["expired-callback"];if(f)try{f(a.b)}catch(S){}a.a=setTimeout(function(){if(a.a=null,a.b=null,w)try{w()}catch(S){}a.h&&a.execute()},6e4)},500))},Vv.prototype.delete=function(){qp(this),this.g=!0,clearTimeout(this.a),this.a=null,jo(this.f,"click",this.i)},wt(Bv,"FACTOR_ID","phone"),Lm.prototype.g=function(){return Fv||(Fv=new wf),Rt(Fv)},Lm.prototype.c=function(){};var Vm=null;function fh(){this.b=Y.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var uu=new de(et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ET=new ha(3e4,6e4);fh.prototype.g=function(a){var f=this;return new vn(function(w,S){var k=setTimeout(function(){S(new j("network-request-failed"))},ET.get());!Y.grecaptcha||a!==f.f&&!f.b?(Y[f.a]=function(){if(Y.grecaptcha){f.f=a;var G=Y.grecaptcha.render;Y.grecaptcha.render=function(oe,Le){return oe=G(oe,Le),f.b++,oe},clearTimeout(k),w(Y.grecaptcha)}else clearTimeout(k),S(new j("internal-error"));delete Y[f.a]},Rt(Xc(gr(uu,{onload:f.a,hl:a||""}))).o(function(){clearTimeout(k),S(new j("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(k),w(Y.grecaptcha))})},fh.prototype.c=function(){this.b--};var J0=null;function Bm(a,f,w,S,k,U,G){if(wt(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=f,this.g=null,G?(Vm||(Vm=new Lm),G=Vm):(J0||(J0=new fh),G=J0),this.m=G,this.a=w||{theme:"light",type:"image"},this.h=[],this.a[eb])throw new j("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[DT],!Y.document)throw new j("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Ot(f)||!this.i&&Ot(f).hasChildNodes())throw new j("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Hi(a,U||null,k||null),this.u=S||function(){return null};var oe=this;this.l=[];var Le=this.a[Uv];this.a[Uv]=function(Qt){if(Hv(oe,Qt),"function"==typeof Le)Le(Qt);else if("string"==typeof Le){var Zn=xr(Le,Y);"function"==typeof Zn&&Zn(Qt)}};var Xe=this.a[jv];this.a[jv]=function(){if(Hv(oe,null),"function"==typeof Xe)Xe();else if("string"==typeof Xe){var Qt=xr(Xe,Y);"function"==typeof Qt&&Qt()}}}var Uv="callback",jv="expired-callback",eb="sitekey",DT="size";function Hv(a,f){for(var w=0;w<a.l.length;w++)try{a.l[w](f)}catch(S){}}function zv(a,f){return a.h.push(f),f.oa(function(){ft(a.h,f)}),f}function Cf(a){if(a.J)throw new j("internal-error","RecaptchaVerifier instance has been destroyed.")}function $v(a,f,w){var S=!1;try{this.b=w||c.default.app()}catch(G){throw new j("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new j("invalid-api-key");w=this.b.options.apiKey;var k=this,U=null;try{U=this.b.auth().Ga()}catch(G){}try{S=this.b.auth().settings.appVerificationDisabledForTesting}catch(G){}U=c.default.SDK_VERSION?xu(c.default.SDK_VERSION,U):null,Bm.call(this,w,a,f,function(){try{var G=k.b.auth().la()}catch(oe){G=null}return G},U,We(bt),S)}function tb(a,f,w,S){e:{w=Array.prototype.slice.call(w);for(var k=0,U=!1,G=0;G<f.length;G++)if(f[G].optional)U=!0;else{if(U)throw new j("internal-error","Argument validator encountered a required argument after an optional argument.");k++}if(U=f.length,w.length<k||U<w.length)S="Expected "+(k==U?1==k?"1 argument":k+" arguments":k+"-"+U+" arguments")+" but got "+w.length+".";else{for(k=0;k<w.length;k++)if(U=f[k].optional&&void 0===w[k],!f[k].M(w[k])&&!U){if(f=f[k],0>k||k>=nb.length)throw new j("internal-error","Argument validator received an unsupported number of arguments.");w=nb[k],S=(S?"":w+" argument ")+(f.name?'"'+f.name+'" ':"")+"must be "+f.K+".";break e}S=null}}if(S)throw new j("argument-error",a+" failed: "+S)}(H=Bm.prototype).Ia=function(){var a=this;return this.f?this.f:this.f=zv(this,Rt().then(function(){if(Nd()&&!ss())return Rc();throw new j("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return a.m.g(a.u())}).then(function(f){return a.g=f,sn(a.s,wp,{})}).then(function(f){a.a[eb]=f.recaptchaSiteKey}).o(function(f){throw a.f=null,f}))},H.render=function(){Cf(this);var a=this;return zv(this,this.Ia().then(function(){if(null===a.c){var f=a.v;if(!a.i){var w=Ot(f);f=function(a,f,w){var S=arguments,k=document,U=String(S[0]),G=S[1];if(!Tn&&G&&(G.name||G.type)){if(U=["<",U],G.name&&U.push(' name="',Jt(G.name),'"'),G.type){U.push(' type="',Jt(G.type),'"');var oe={};X(oe,G),delete oe.type,G=oe}U.push(">"),U=U.join("")}return U=co(k,U),G&&("string"==typeof G?U.className=G:Array.isArray(G)?U.className=G.join(" "):Ei(U,G)),2<S.length&&kr(k,U,S),U}("DIV"),w.appendChild(f)}a.c=a.g.render(f,a.a)}return a.c}))},H.verify=function(){Cf(this);var a=this;return zv(this,this.render().then(function(f){return new vn(function(w){var S=a.g.getResponse(f);if(S)w(S);else{var k=function(U){U&&(function(a,f){hn(a.l,function(w){return w==f})}(a,k),w(U))};a.l.push(k),a.i&&a.g.execute(a.c)}})}))},H.reset=function(){Cf(this),null!==this.c&&this.g.reset(this.c)},H.clear=function(){Cf(this),this.J=!0,this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){a=Ot(this.v);for(var f;f=a.firstChild;)a.removeChild(f)}},ee($v,Bm);var nb="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Dt(a,f){return{name:a||"",K:"a valid string",optional:!!f,M:function(w){return"string"==typeof w}}}function qv(a,f){return{name:a||"",K:"a boolean",optional:!!f,M:function(w){return"boolean"==typeof w}}}function bi(a,f){return{name:a||"",K:"a valid object",optional:!!f,M:be}}function tc(a,f){return{name:a||"",K:"a function",optional:!!f,M:function(w){return"function"==typeof w}}}function Yo(a,f){return{name:a||"",K:"null",optional:!!f,M:function(w){return null===w}}}function od(a){return{name:a?a+"Credential":"credential",K:a?"a valid "+a+" credential":"a valid credential",optional:!1,M:function(f){return!!f&&!(!f.ka||a&&f.providerId!==a)}}}function ph(a,f){return be(a)&&"string"==typeof a.type&&a.type===f&&"function"==typeof a.Ha}function no(a){return be(a)&&"string"==typeof a.uid}function Pr(a,f,w,S){return{name:w||"",K:a.K+" or "+f.K,optional:!!S,M:function(k){return a.M(k)||f.M(k)}}}function An(a,f){for(var w in f){var S=f[w].name;a[S]=gh(S,a[w],f[w].j)}}function jm(a,f){for(var w in f){var S=f[w].name;S!==w&&Object.defineProperty(a,S,{get:gt(function(k){return this[k]},w),set:gt(function(k,U,G,oe){tb(k,[G],[oe],!0),this[U]=oe},S,w,f[w].lb),enumerable:!0})}}function br(a,f,w,S){a[f]=gh(f,w,S)}function gh(a,f,w){function S(){var G=Array.prototype.slice.call(arguments);return tb(k,w,G),f.apply(this,G)}if(!w)return f;var U,k=function(a){return(a=a.split("."))[a.length-1]}(a);for(U in f)S[U]=f[U];for(U in f.prototype)S.prototype[U]=f.prototype[U];return S}An(Ws.prototype,{kb:{name:"applyActionCode",j:[Dt("code")]},Sa:{name:"checkActionCode",j:[Dt("code")]},ob:{name:"confirmPasswordReset",j:[Dt("code"),Dt("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Dt("email"),Dt("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Dt("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Dt("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Pr(bi(),tc(),"nextOrObserver"),tc("opt_error",!0),tc("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Pr(bi(),tc(),"nextOrObserver"),tc("opt_error",!0),tc("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Dt("email"),Pr(bi("opt_actionCodeSettings",!0),Yo(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Dt("email"),bi("actionCodeSettings")]},yb:{name:"setPersistence",j:[Dt("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[od()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[od()]},Tc:{name:"signInWithCustomToken",j:[Dt("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Dt("email"),Dt("password")]},Vc:{name:"signInWithEmailLink",j:[Dt("email"),Dt("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Dt("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Pr({name:"user",K:"an instance of Firebase User",optional:!1,M:function(f){return!!(f&&f instanceof qs)}},Yo(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Dt(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Dt("url"),bi("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Dt("code")]}}),jm(Ws.prototype,{lc:{name:"languageCode",lb:Pr(Dt(),Yo(),"languageCode")},ti:{name:"tenantId",lb:Pr(Dt(),Yo(),"tenantId")}}),(Ws.Persistence=Wl).LOCAL="local",Ws.Persistence.SESSION="session",Ws.Persistence.NONE="none",An(qs.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[qv("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qv("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[od()]},rb:{name:"linkWithCredential",j:[od()]},Dc:{name:"linkWithPhoneNumber",j:[Dt("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[od()]},ub:{name:"reauthenticateWithCredential",j:[od()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Dt("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Pr(bi("opt_actionCodeSettings",!0),Yo(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Dt(null,!0)]},cd:{name:"unlink",j:[Dt("provider")]},Cb:{name:"updateEmail",j:[Dt("email")]},Db:{name:"updatePassword",j:[Dt("password")]},ed:{name:"updatePhoneNumber",j:[od("phone")]},Eb:{name:"updateProfile",j:[bi("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Dt("email"),Pr(bi("opt_actionCodeSettings",!0),Yo(null,!0),"opt_actionCodeSettings",!0)]}}),An(wf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),An(Pv.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),An(vn.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),jm(vm.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:qv("appVerificationDisabledForTesting")}}),An(F0.prototype,{confirm:{name:"confirm",j:[Dt("verificationCode")]}}),br(va,"fromJSON",function(a){a="string"==typeof a?JSON.parse(a):a;for(var f,w=[tp,Og,Gu,_o],S=0;S<w.length;S++)if(f=w[S](a))return f;return null},[Pr(Dt(),bi(),"json")]),br(yo,"credential",function(a,f){return new Qi(a,f)},[Dt("email"),Dt("password")]),An(Qi.prototype,{w:{name:"toJSON",j:[Dt(null,!0)]}}),An(ju.prototype,{Ca:{name:"addScope",j:[Dt("scope")]},Ka:{name:"setCustomParameters",j:[bi("customOAuthParameters")]}}),br(ju,"credential",xl,[Pr(Dt(),bi(),"token")]),br(yo,"credentialWithLink",Ol,[Dt("email"),Dt("emailLink")]),An(Ui.prototype,{Ca:{name:"addScope",j:[Dt("scope")]},Ka:{name:"setCustomParameters",j:[bi("customOAuthParameters")]}}),br(Ui,"credential",Za,[Pr(Dt(),bi(),"token")]),An(Hu.prototype,{Ca:{name:"addScope",j:[Dt("scope")]},Ka:{name:"setCustomParameters",j:[bi("customOAuthParameters")]}}),br(Hu,"credential",Gc,[Pr(Dt(),Pr(bi(),Yo()),"idToken"),Pr(Dt(),Yo(),"accessToken",!0)]),An(ba.prototype,{Ka:{name:"setCustomParameters",j:[bi("customOAuthParameters")]}}),br(ba,"credential",ls,[Pr(Dt(),bi(),"token"),Dt("secret",!0)]),An(vo.prototype,{Ca:{name:"addScope",j:[Dt("scope")]},credential:{name:"credential",j:[Pr(Dt(),Pr(bi(),Yo()),"optionsOrIdToken"),Pr(Dt(),Yo(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[bi("customOAuthParameters")]}}),An(jt.prototype,{w:{name:"toJSON",j:[Dt(null,!0)]}}),An(vi.prototype,{w:{name:"toJSON",j:[Dt(null,!0)]}}),br(ri,"credential",zc,[Dt("verificationId"),Dt("verificationCode")]),An(ri.prototype,{gb:{name:"verifyPhoneNumber",j:[Pr(Dt(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(w){return!!w&&(w.session&&w.phoneNumber?ph(w.session,kl)&&"string"==typeof w.phoneNumber:w.session&&w.multiFactorHint?ph(w.session,Uu)&&no(w.multiFactorHint):w.session&&w.multiFactorUid?ph(w.session,Uu)&&"string"==typeof w.multiFactorUid:!!w.phoneNumber&&"string"==typeof w.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]}}),An(Ni.prototype,{w:{name:"toJSON",j:[Dt(null,!0)]}}),An(j.prototype,{toJSON:{name:"toJSON",j:[Dt(null,!0)]}}),An(qc.prototype,{toJSON:{name:"toJSON",j:[Dt(null,!0)]}}),An(jd.prototype,{toJSON:{name:"toJSON",j:[Dt(null,!0)]}}),An(L0.prototype,{toJSON:{name:"toJSON",j:[Dt(null,!0)]}}),An(vv.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(a){return!!a&&!!a.tb}}]}}),An(id.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(a){return!!a&&!!a.tb}},Dt("displayName",!0)]},bd:{name:"unenroll",j:[Pr({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:no},Dt(),"multiFactorInfoIdentifier")]}}),An($v.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),br(jh,"parseLink",jc,[Dt("link")]),br(Bv,"assertion",function(a){return new Lp(a)},[od("phone")]),function(){if(void 0===c.default||!c.default.INTERNAL||!c.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Al,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:sr,VERIFY_AND_CHANGE_EMAIL:Er,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Ws,AuthCredential:va,Error:j};br(a,"EmailAuthProvider",yo,[]),br(a,"FacebookAuthProvider",ju,[]),br(a,"GithubAuthProvider",Ui,[]),br(a,"GoogleAuthProvider",Hu,[]),br(a,"TwitterAuthProvider",ba,[]),br(a,"OAuthProvider",vo,[Dt("providerId")]),br(a,"SAMLAuthProvider",Ld,[Dt("providerId")]),br(a,"PhoneAuthProvider",ri,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(a){return!!(a&&a instanceof Ws)}}]),br(a,"RecaptchaVerifier",$v,[Pr(Dt(),{name:"",K:"an HTML element",optional:!1,M:function(a){return!!(a&&a instanceof Element)}},"recaptchaContainer"),bi("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(a){return!!(a&&a instanceof c.default.app.App)}}]),br(a,"ActionCodeURL",jh,[]),br(a,"PhoneMultiFactorGenerator",Bv,[]),c.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(f){return new Ws(f=f.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(f){f.getProvider("auth-internal").initialize()}}),c.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(f){return{getUid:je((f=f.getProvider("auth").getImmediate()).getUid,f),getToken:je(f.nc,f),addAuthTokenListener:je(f.cc,f),removeAuthTokenListener:je(f.Pc,f)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),c.default.registerVersion("@firebase/auth","0.16.8"),c.default.INTERNAL.extendNamespace({User:qs})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},8391:(_t,Ve,J)=>{"use strict";J.r(Ve),J.d(Ve,{Component:()=>B,ComponentContainer:()=>Ae,Provider:()=>Pe});var c=J(4762),H=J(8305),B=function(){function Ie(Y,_e,pe){this.name=Y,this.instanceFactory=_e,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ie.prototype.setInstantiationMode=function(Y){return this.instantiationMode=Y,this},Ie.prototype.setMultipleInstances=function(Y){return this.multipleInstances=Y,this},Ie.prototype.setServiceProps=function(Y){return this.serviceProps=Y,this},Ie.prototype.setInstanceCreatedCallback=function(Y){return this.onInstanceCreated=Y,this},Ie}(),ge="[DEFAULT]",Pe=function(){function Ie(Y,_e){this.name=Y,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ie.prototype.get=function(Y){var _e=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(_e)){var pe=new H.Deferred;if(this.instancesDeferred.set(_e,pe),this.isInitialized(_e)||this.shouldAutoInitialize())try{var Me=this.getOrInitializeService({instanceIdentifier:_e});Me&&pe.resolve(Me)}catch(ve){}}return this.instancesDeferred.get(_e).promise},Ie.prototype.getImmediate=function(Y){var _e,pe=this.normalizeInstanceIdentifier(null==Y?void 0:Y.identifier),Me=null!==(_e=null==Y?void 0:Y.optional)&&void 0!==_e&&_e;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(Me)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(ve){if(Me)return null;throw ve}},Ie.prototype.getComponent=function(){return this.component},Ie.prototype.setComponent=function(Y){var _e,pe;if(Y.name!==this.name)throw Error("Mismatching Component "+Y.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=Y,this.shouldAutoInitialize()){if(function(Ie){return"EAGER"===Ie.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:ge})}catch(nt){}try{for(var Me=(0,c.__values)(this.instancesDeferred.entries()),ve=Me.next();!ve.done;ve=Me.next()){var Ge=(0,c.__read)(ve.value,2),Re=Ge[1],be=this.normalizeInstanceIdentifier(Ge[0]);try{var Oe=this.getOrInitializeService({instanceIdentifier:be});Re.resolve(Oe)}catch(nt){}}}catch(nt){_e={error:nt}}finally{try{ve&&!ve.done&&(pe=Me.return)&&pe.call(Me)}finally{if(_e)throw _e.error}}}},Ie.prototype.clearInstance=function(Y){void 0===Y&&(Y=ge),this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)},Ie.prototype.delete=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var Y;return(0,c.__generator)(this,function(_e){switch(_e.label){case 0:return Y=Array.from(this.instances.values()),[4,Promise.all((0,c.__spreadArray)((0,c.__spreadArray)([],(0,c.__read)(Y.filter(function(pe){return"INTERNAL"in pe}).map(function(pe){return pe.INTERNAL.delete()}))),(0,c.__read)(Y.filter(function(pe){return"_delete"in pe}).map(function(pe){return pe._delete()}))))];case 1:return _e.sent(),[2]}})})},Ie.prototype.isComponentSet=function(){return null!=this.component},Ie.prototype.isInitialized=function(Y){return void 0===Y&&(Y=ge),this.instances.has(Y)},Ie.prototype.getOptions=function(Y){return void 0===Y&&(Y=ge),this.instancesOptions.get(Y)||{}},Ie.prototype.initialize=function(Y){var _e,pe;void 0===Y&&(Y={});var Me=Y.options,ve=void 0===Me?{}:Me,Ge=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(Ge))throw Error(this.name+"("+Ge+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ot=this.getOrInitializeService({instanceIdentifier:Ge,options:ve});try{for(var Re=(0,c.__values)(this.instancesDeferred.entries()),be=Re.next();!be.done;be=Re.next()){var Oe=(0,c.__read)(be.value,2),ze=Oe[1];Ge===this.normalizeInstanceIdentifier(Oe[0])&&ze.resolve(ot)}}catch(Qe){_e={error:Qe}}finally{try{be&&!be.done&&(pe=Re.return)&&pe.call(Re)}finally{if(_e)throw _e.error}}return ot},Ie.prototype.onInit=function(Y,_e){var pe,Me=this.normalizeInstanceIdentifier(_e),ve=null!==(pe=this.onInitCallbacks.get(Me))&&void 0!==pe?pe:new Set;ve.add(Y),this.onInitCallbacks.set(Me,ve);var Ge=this.instances.get(Me);return Ge&&Y(Ge,Me),function(){ve.delete(Y)}},Ie.prototype.invokeOnInitCallbacks=function(Y,_e){var pe,Me,ve=this.onInitCallbacks.get(_e);if(ve)try{for(var Ge=(0,c.__values)(ve),ot=Ge.next();!ot.done;ot=Ge.next()){var Re=ot.value;try{Re(Y,_e)}catch(be){}}}catch(be){pe={error:be}}finally{try{ot&&!ot.done&&(Me=Ge.return)&&Me.call(Ge)}finally{if(pe)throw pe.error}}},Ie.prototype.getOrInitializeService=function(Y){var _e=Y.instanceIdentifier,pe=Y.options,Me=void 0===pe?{}:pe,ve=this.instances.get(_e);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:Ue(_e),options:Me}),this.instances.set(_e,ve),this.instancesOptions.set(_e,Me),this.invokeOnInitCallbacks(ve,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,ve)}catch(Ge){}return ve||null},Ie.prototype.normalizeInstanceIdentifier=function(Y){return void 0===Y&&(Y=ge),this.component?this.component.multipleInstances?Y:ge:Y},Ie.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Ie}();function Ue(Ie){return Ie===ge?void 0:Ie}var Ae=function(){function Ie(Y){this.name=Y,this.providers=new Map}return Ie.prototype.addComponent=function(Y){var _e=this.getProvider(Y.name);if(_e.isComponentSet())throw new Error("Component "+Y.name+" has already been registered with "+this.name);_e.setComponent(Y)},Ie.prototype.addOrOverwriteComponent=function(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)},Ie.prototype.getProvider=function(Y){if(this.providers.has(Y))return this.providers.get(Y);var _e=new Pe(Y,this);return this.providers.set(Y,_e),_e},Ie.prototype.getProviders=function(){return Array.from(this.providers.values())},Ie}()},6522:(_t,Ve,J)=>{"use strict";var c=J(417),H=J(8391),B=J(8305),ge=J(4762),Pe=J(6433);_t=J.hmd(_t);var Ae="";function Ie(g){Ae=g}var g,Y=function(){function g(p){this.domStorage_=p,this.prefix_="firebase:"}return g.prototype.set=function(p,v){null==v?this.domStorage_.removeItem(this.prefixedName_(p)):this.domStorage_.setItem(this.prefixedName_(p),(0,B.stringify)(v))},g.prototype.get=function(p){var v=this.domStorage_.getItem(this.prefixedName_(p));return null==v?null:(0,B.jsonEval)(v)},g.prototype.remove=function(p){this.domStorage_.removeItem(this.prefixedName_(p))},g.prototype.prefixedName_=function(p){return this.prefix_+p},g.prototype.toString=function(){return this.domStorage_.toString()},g}(),_e=function(){function g(){this.cache_={},this.isInMemoryStorage=!0}return g.prototype.set=function(p,v){null==v?delete this.cache_[p]:this.cache_[p]=v},g.prototype.get=function(p){return(0,B.contains)(this.cache_,p)?this.cache_[p]:null},g.prototype.remove=function(p){delete this.cache_[p]},g}(),pe=function(g){try{if("undefined"!=typeof window&&void 0!==window[g]){var p=window[g];return p.setItem("firebase:sentinel","cache"),p.removeItem("firebase:sentinel"),new Y(p)}}catch(v){}return new _e},Me=pe("localStorage"),ve=pe("sessionStorage"),Ge=new Pe.Logger("@firebase/database"),ot=(g=1,function(){return g++}),Re=function(g){var p=(0,B.stringToByteArray)(g),v=new B.Sha1;v.update(p);var C=v.digest();return B.base64.encodeByteArray(C)},be=function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];for(var v="",C=0;C<g.length;C++){var I=g[C];Array.isArray(I)||I&&"object"==typeof I&&"number"==typeof I.length?v+=be.apply(null,I):v+="object"==typeof I?(0,B.stringify)(I):I,v+=" "}return v},Oe=null,nt=!0,ze=function(g,p){(0,B.assert)(!p||!0===g||!1===g,"Can't turn on custom loggers persistently."),!0===g?(Ge.logLevel=Pe.LogLevel.VERBOSE,Oe=Ge.log.bind(Ge),p&&ve.set("logging_enabled",!0)):"function"==typeof g?Oe=g:(Oe=null,ve.remove("logging_enabled"))},Ke=function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];if(!0===nt&&(nt=!1,null===Oe&&!0===ve.get("logging_enabled")&&ze(!0)),Oe){var v=be.apply(null,g);Oe(v)}},Qe=function(g){return function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];Ke.apply(void 0,(0,ge.__spreadArray)([g],(0,ge.__read)(p)))}},je=function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];var v="FIREBASE INTERNAL ERROR: "+be.apply(void 0,(0,ge.__spreadArray)([],(0,ge.__read)(g)));Ge.error(v)},gt=function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];var v="FIREBASE FATAL ERROR: "+be.apply(void 0,(0,ge.__spreadArray)([],(0,ge.__read)(g)));throw Ge.error(v),new Error(v)},Ct=function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];var v="FIREBASE WARNING: "+be.apply(void 0,(0,ge.__spreadArray)([],(0,ge.__read)(g)));Ge.warn(v)},ce=function(g){return"number"==typeof g&&(g!=g||g===Number.POSITIVE_INFINITY||g===Number.NEGATIVE_INFINITY)},he="[MIN_NAME]",De="[MAX_NAME]",ie=function(g,p){if(g===p)return 0;if(g===he||p===De)return-1;if(p===he||g===De)return 1;var v=tr(g),C=tr(p);return null!==v?null!==C?v-C==0?g.length-p.length:v-C:-1:null!==C?1:g<p?-1:1},Be=function(g,p){return g===p?0:g<p?-1:1},We=function(g,p){if(p&&g in p)return p[g];throw new Error("Missing required key ("+g+") in object: "+(0,B.stringify)(p))},bt=function(g){if("object"!=typeof g||null===g)return(0,B.stringify)(g);var p=[];for(var v in g)p.push(v);p.sort();for(var C="{",I=0;I<p.length;I++)0!==I&&(C+=","),C+=(0,B.stringify)(p[I]),C+=":",C+=bt(g[p[I]]);return C+"}"},Je=function(g,p){var v=g.length;if(v<=p)return[g];for(var C=[],I=0;I<v;I+=p)C.push(g.substring(I,I+p>v?v:I+p));return C};function st(g,p){for(var v in g)g.hasOwnProperty(v)&&p(v,g[v])}var rt=function(g){(0,B.assert)(!ce(g),"Invalid JSON number");var I,N,P,$,Q,C=1023;0===g?(N=0,P=0,I=1/g==-1/0?1:0):(I=g<0,(g=Math.abs(g))>=Math.pow(2,1-C)?(N=($=Math.min(Math.floor(Math.log(g)/Math.LN2),C))+C,P=Math.round(g*Math.pow(2,52-$)-Math.pow(2,52))):(N=0,P=Math.round(g/Math.pow(2,-1074))));var re=[];for(Q=52;Q;Q-=1)re.push(P%2?1:0),P=Math.floor(P/2);for(Q=11;Q;Q-=1)re.push(N%2?1:0),N=Math.floor(N/2);re.push(I?1:0),re.reverse();var ae=re.join(""),Ee="";for(Q=0;Q<64;Q+=8){var Fe=parseInt(ae.substr(Q,8),2).toString(16);1===Fe.length&&(Fe="0"+Fe),Ee+=Fe}return Ee.toLowerCase()},Xt=new RegExp("^-?(0*)\\d{1,10}$"),Fr=-2147483648,Yn=2147483647,tr=function(g){if(Xt.test(g)){var p=Number(g);if(p>=Fr&&p<=Yn)return p}return null},oo=function(g){try{g()}catch(p){setTimeout(function(){throw Ct("Exception was thrown by user callback.",p.stack||""),p},Math.floor(0))}},Ss=function(g,p){var v=setTimeout(g,p);return"object"==typeof v&&v.unref&&v.unref(),v},Cu=function(){function g(p,v){var C=this;this.appName_=p,this.appCheckProvider=v,this.appCheck=null==v?void 0:v.getImmediate({optional:!0}),this.appCheck||null==v||v.get().then(function(I){return C.appCheck=I})}return g.prototype.getToken=function(p){var v=this;return this.appCheck?this.appCheck.getToken(p):new Promise(function(C,I){setTimeout(function(){v.appCheck?v.getToken(p).then(C,I):C(null)},0)})},g.prototype.addTokenChangeListener=function(p){var v;null===(v=this.appCheckProvider)||void 0===v||v.get().then(function(C){return C.addTokenListener(p)})},g.prototype.notifyForInvalidToken=function(){Ct('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},g}(),un=function(){function g(p,v,C){var I=this;this.appName_=p,this.firebaseOptions_=v,this.authProvider_=C,this.auth_=null,this.auth_=C.getImmediate({optional:!0}),this.auth_||C.onInit(function(N){return I.auth_=N})}return g.prototype.getToken=function(p){var v=this;return this.auth_?this.auth_.getToken(p).catch(function(C){return C&&"auth/token-not-initialized"===C.code?(Ke("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(C)}):new Promise(function(C,I){setTimeout(function(){v.auth_?v.getToken(p).then(C,I):C(null)},0)})},g.prototype.addTokenChangeListener=function(p){this.auth_?this.auth_.addAuthTokenListener(p):this.authProvider_.get().then(function(v){return v.addAuthTokenListener(p)})},g.prototype.removeTokenChangeListener=function(p){this.authProvider_.get().then(function(v){return v.removeAuthTokenListener(p)})},g.prototype.notifyForInvalidToken=function(){var p='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';Ct(p+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},g}(),$t=function(){function g(p){this.accessToken=p}return g.prototype.getToken=function(p){return Promise.resolve({accessToken:this.accessToken})},g.prototype.addTokenChangeListener=function(p){p(this.accessToken)},g.prototype.removeTokenChangeListener=function(p){},g.prototype.notifyForInvalidToken=function(){},g.OWNER="owner",g}(),Rn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ar="websocket",wd="long_polling",rr=function(){function g(p,v,C,I,N,P,$){void 0===N&&(N=!1),void 0===P&&(P=""),void 0===$&&($=!1),this.secure=v,this.namespace=C,this.webSocketOnly=I,this.nodeAdmin=N,this.persistenceKey=P,this.includeNamespaceInQueryParams=$,this._host=p.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Me.get("host:"+p)||this._host}return g.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},g.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(g.prototype,"host",{get:function(){return this._host},set:function(p){p!==this.internalHost&&(this.internalHost=p,this.isCacheableHost()&&Me.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),g.prototype.toString=function(){var p=this.toURLString();return this.persistenceKey&&(p+="<"+this.persistenceKey+">"),p},g.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},g}();function zt(g,p,v){var C;if((0,B.assert)("string"==typeof p,"typeof type must == string"),(0,B.assert)("object"==typeof v,"typeof params must == object"),p===Ar)C=(g.secure?"wss://":"ws://")+g.internalHost+"/.ws?";else{if(p!==wd)throw new Error("Unknown connection type: "+p);C=(g.secure?"https://":"http://")+g.internalHost+"/.lp?"}(function(g){return g.host!==g.internalHost||g.isCustomHost()||g.includeNamespaceInQueryParams})(g)&&(v.ns=g.namespace);var I=[];return st(v,function(N,P){I.push(N+"="+P)}),C+I.join("&")}var Nn=function(){function g(){this.counters_={}}return g.prototype.incrementCounter=function(p,v){void 0===v&&(v=1),(0,B.contains)(this.counters_,p)||(this.counters_[p]=0),this.counters_[p]+=v},g.prototype.get=function(){return(0,B.deepCopy)(this.counters_)},g}(),Po={},zr={};function In(g){var p=g.toString();return Po[p]||(Po[p]=new Nn),Po[p]}var Mr=function(){function g(p){this.onMessage_=p,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return g.prototype.closeAfter=function(p,v){this.closeAfterResponse=p,this.onClose=v,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},g.prototype.handleResponse=function(p,v){var C=this;this.pendingResponses[p]=v;for(var I=function(){var $=N.pendingResponses[N.currentResponseNum];delete N.pendingResponses[N.currentResponseNum];for(var Q=function(ae){$[ae]&&oo(function(){C.onMessage_($[ae])})},re=0;re<$.length;++re)Q(re);if(N.currentResponseNum===N.closeAfterResponse)return N.onClose&&(N.onClose(),N.onClose=null),"break";N.currentResponseNum++},N=this;this.pendingResponses[this.currentResponseNum]&&"break"!==I(););},g}(),Lr=function(){function g(p,v,C,I,N,P,$){var Q=this;this.connId=p,this.repoInfo=v,this.applicationId=C,this.appCheckToken=I,this.authToken=N,this.transportSessionId=P,this.lastSessionId=$,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qe(p),this.stats_=In(v),this.urlFn=function(re){return Q.appCheckToken&&(re.ac=Q.appCheckToken),zt(v,wd,re)}}return g.prototype.open=function(p,v){var C=this;this.curSegmentNum=0,this.onDisconnect_=v,this.myPacketOrderer=new Mr(p),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){C.log_("Timed out trying to connect."),C.onClosed_(),C.connectTimeoutTimer_=null},Math.floor(3e4)),function(g){if((0,B.isNodeSdk)()||"complete"===document.readyState)g();else{var p=!1,v=function(){document.body?p||(p=!0,g()):setTimeout(v,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",v,!1),window.addEventListener("load",v,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&v()}),window.attachEvent("onload",v))}}(function(){if(!C.isClosed_){C.scriptTagHolder=new Fo(function(){for(var P=[],$=0;$<arguments.length;$++)P[$]=arguments[$];var Q=(0,ge.__read)(P,5),re=Q[0],ae=Q[1],Ee=Q[2];if(C.incrementIncomingBytes_(P),C.scriptTagHolder)if(C.connectTimeoutTimer_&&(clearTimeout(C.connectTimeoutTimer_),C.connectTimeoutTimer_=null),C.everConnected_=!0,"start"===re)C.id=ae,C.password=Ee;else{if("close"!==re)throw new Error("Unrecognized command received: "+re);ae?(C.scriptTagHolder.sendNewPolls=!1,C.myPacketOrderer.closeAfter(ae,function(){C.onClosed_()})):C.onClosed_()}},function(){for(var P=[],$=0;$<arguments.length;$++)P[$]=arguments[$];var Q=(0,ge.__read)(P,2),re=Q[0],ae=Q[1];C.incrementIncomingBytes_(P),C.myPacketOrderer.handleResponse(re,ae)},function(){C.onClosed_()},C.urlFn);var I={start:"t"};I.ser=Math.floor(1e8*Math.random()),C.scriptTagHolder.uniqueCallbackIdentifier&&(I.cb=C.scriptTagHolder.uniqueCallbackIdentifier),I.v="5",C.transportSessionId&&(I.s=C.transportSessionId),C.lastSessionId&&(I.ls=C.lastSessionId),C.applicationId&&(I.p=C.applicationId),C.appCheckToken&&(I.ac=C.appCheckToken),"undefined"!=typeof location&&location.hostname&&Rn.test(location.hostname)&&(I.r="f");var N=C.urlFn(I);C.log_("Connecting via long-poll to "+N),C.scriptTagHolder.addTag(N,function(){})}})},g.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},g.forceAllow=function(){g.forceAllow_=!0},g.forceDisallow=function(){g.forceDisallow_=!0},g.isAvailable=function(){return!((0,B.isNodeSdk)()||!g.forceAllow_&&(g.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},g.prototype.markConnectionHealthy=function(){},g.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},g.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},g.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},g.prototype.send=function(p){var v=(0,B.stringify)(p);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);for(var C=(0,B.base64Encode)(v),I=Je(C,1840),N=0;N<I.length;N++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[N]),this.curSegmentNum++},g.prototype.addDisconnectPingFrame=function(p,v){if(!(0,B.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var C={dframe:"t"};C.id=p,C.pw=v,this.myDisconnFrame.src=this.urlFn(C),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},g.prototype.incrementIncomingBytes_=function(p){var v=(0,B.stringify)(p).length;this.bytesReceived+=v,this.stats_.incrementCounter("bytes_received",v)},g}(),Fo=function(){function g(p,v,C,I){if(this.onDisconnect=C,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.isNodeSdk)())this.commandCB=p,this.onMessageCB=v;else{this.uniqueCallbackIdentifier=ot(),window["pLPCommand"+this.uniqueCallbackIdentifier]=p,window["pRTLPCB"+this.uniqueCallbackIdentifier]=v,this.myIFrame=g.createIFrame_();var N="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(N='<script>document.domain="'+document.domain+'";<\/script>');var $="<html><body>"+N+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write($),this.myIFrame.doc.close()}catch(Q){Ke("frame writing exception"),Q.stack&&Ke(Q.stack),Ke(Q)}}}return g.createIFrame_=function(){var p=document.createElement("iframe");if(p.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(p);try{p.contentWindow.document||Ke("No IE domain setting required")}catch(I){var C=document.domain;p.src="javascript:void((function(){document.open();document.domain='"+C+"';document.close();})())"}return p.contentDocument?p.doc=p.contentDocument:p.contentWindow?p.doc=p.contentWindow.document:p.document&&(p.doc=p.document),p},g.prototype.close=function(){var p=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==p.myIFrame&&(document.body.removeChild(p.myIFrame),p.myIFrame=null)},Math.floor(0)));var v=this.onDisconnect;v&&(this.onDisconnect=null,v())},g.prototype.startLongPoll=function(p,v){for(this.myID=p,this.myPW=v,this.alive=!0;this.newRequest_(););},g.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var p={};p.id=this.myID,p.pw=this.myPW,p.ser=this.currentSerial;for(var v=this.urlFn(p),C="",I=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+C.length<=1870;){var P=this.pendingSegs.shift();C=C+"&seg"+I+"="+P.seg+"&ts"+I+"="+P.ts+"&d"+I+"="+P.d,I++}return this.addLongPollTag_(v+=C,this.currentSerial),!0}return!1},g.prototype.enqueueSegment=function(p,v,C){this.pendingSegs.push({seg:p,ts:v,d:C}),this.alive&&this.newRequest_()},g.prototype.addLongPollTag_=function(p,v){var C=this;this.outstandingRequests.add(v);var I=function(){C.outstandingRequests.delete(v),C.newRequest_()},N=setTimeout(I,Math.floor(25e3));this.addTag(p,function(){clearTimeout(N),I()})},g.prototype.addTag=function(p,v){var C=this;(0,B.isNodeSdk)()?this.doNodeLongPoll(p,v):setTimeout(function(){try{if(!C.sendNewPolls)return;var I=C.myIFrame.doc.createElement("script");I.type="text/javascript",I.async=!0,I.src=p,I.onload=I.onreadystatechange=function(){var N=I.readyState;(!N||"loaded"===N||"complete"===N)&&(I.onload=I.onreadystatechange=null,I.parentNode&&I.parentNode.removeChild(I),v())},I.onerror=function(){Ke("Long-poll script failed to load: "+p),C.sendNewPolls=!1,C.close()},C.myIFrame.doc.body.appendChild(I)}catch(N){}},Math.floor(1))},g}(),uo=null;"undefined"!=typeof MozWebSocket?uo=MozWebSocket:"undefined"!=typeof WebSocket&&(uo=WebSocket);var Rr=function(){function g(p,v,C,I,N,P,$){this.connId=p,this.applicationId=C,this.appCheckToken=I,this.authToken=N,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qe(this.connId),this.stats_=In(v),this.connURL=g.connectionURL_(v,P,$,I),this.nodeAdmin=v.nodeAdmin}return g.connectionURL_=function(p,v,C,I){var N={v:"5"};return!(0,B.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&Rn.test(location.hostname)&&(N.r="f"),v&&(N.s=v),C&&(N.ls=C),I&&(N.ac=I),zt(p,Ar,N)},g.prototype.open=function(p,v){var C=this;this.onDisconnect=v,this.onMessage=p,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Me.set("previous_websocket_failure",!0);try{if((0,B.isNodeSdk)()){var N={headers:{"User-Agent":"Firebase/5/"+Ae+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(N.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(N.headers["X-Firebase-AppCheck"]=this.appCheckToken);var P=process.env,$=0===this.connURL.indexOf("wss://")?P.HTTPS_PROXY||P.https_proxy:P.HTTP_PROXY||P.http_proxy;$&&(N.proxy={origin:$}),this.mySock=new uo(this.connURL,[],N)}else this.mySock=new uo(this.connURL,[],N={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(re){this.log_("Error instantiating WebSocket.");var Q=re.message||re.data;return Q&&this.log_(Q),void this.onClosed_()}this.mySock.onopen=function(){C.log_("Websocket connected."),C.everConnected_=!0},this.mySock.onclose=function(){C.log_("Websocket connection was disconnected."),C.mySock=null,C.onClosed_()},this.mySock.onmessage=function(re){C.handleIncomingFrame(re)},this.mySock.onerror=function(re){C.log_("WebSocket error.  Closing connection.");var ae=re.message||re.data;ae&&C.log_(ae),C.onClosed_()}},g.prototype.start=function(){},g.forceDisallow=function(){g.forceDisallow_=!0},g.isAvailable=function(){var p=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var C=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);C&&C.length>1&&parseFloat(C[1])<4.4&&(p=!0)}return!p&&null!==uo&&!g.forceDisallow_},g.previouslyFailed=function(){return Me.isInMemoryStorage||!0===Me.get("previous_websocket_failure")},g.prototype.markConnectionHealthy=function(){Me.remove("previous_websocket_failure")},g.prototype.appendFrame_=function(p){if(this.frames.push(p),this.frames.length===this.totalFrames){var v=this.frames.join("");this.frames=null;var C=(0,B.jsonEval)(v);this.onMessage(C)}},g.prototype.handleNewFrameCount_=function(p){this.totalFrames=p,this.frames=[]},g.prototype.extractFrameCount_=function(p){if((0,B.assert)(null===this.frames,"We already have a frame buffer"),p.length<=6){var v=Number(p);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),p},g.prototype.handleIncomingFrame=function(p){if(null!==this.mySock){var v=p.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{var C=this.extractFrameCount_(v);null!==C&&this.appendFrame_(C)}}},g.prototype.send=function(p){this.resetKeepAlive();var v=(0,B.stringify)(p);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);var C=Je(v,16384);C.length>1&&this.sendString_(String(C.length));for(var I=0;I<C.length;I++)this.sendString_(C[I])},g.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},g.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},g.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},g.prototype.resetKeepAlive=function(){var p=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){p.mySock&&p.sendString_("0"),p.resetKeepAlive()},Math.floor(45e3))},g.prototype.sendString_=function(p){try{this.mySock.send(p)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},g.responsesRequiredToBeHealthy=2,g.healthyTimeout=3e4,g}(),Lo=function(){function g(p){this.initTransports_(p)}return Object.defineProperty(g,"ALL_TRANSPORTS",{get:function(){return[Lr,Rr]},enumerable:!1,configurable:!0}),g.prototype.initTransports_=function(p){var v,C,I=Rr&&Rr.isAvailable(),N=I&&!Rr.previouslyFailed();if(p.webSocketOnly&&(I||Ct("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),N=!0),N)this.transports_=[Rr];else{var P=this.transports_=[];try{for(var $=(0,ge.__values)(g.ALL_TRANSPORTS),Q=$.next();!Q.done;Q=$.next()){var re=Q.value;re&&re.isAvailable()&&P.push(re)}}catch(ae){v={error:ae}}finally{try{Q&&!Q.done&&(C=$.return)&&C.call($)}finally{if(v)throw v.error}}}},g.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},g.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},g}(),li=function(){function g(p,v,C,I,N,P,$,Q,re,ae){this.id=p,this.repoInfo_=v,this.applicationId_=C,this.appCheckToken_=I,this.authToken_=N,this.onMessage_=P,this.onReady_=$,this.onDisconnect_=Q,this.onKill_=re,this.lastSessionId=ae,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qe("c:"+this.id+":"),this.transportManager_=new Lo(v),this.log_("Connection created"),this.start_()}return g.prototype.start_=function(){var p=this,v=this.transportManager_.initialTransport();this.conn_=new v(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=v.responsesRequiredToBeHealthy||0;var C=this.connReceiver_(this.conn_),I=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){p.conn_&&p.conn_.open(C,I)},Math.floor(0));var N=v.healthyTimeout||0;N>0&&(this.healthyTimeout_=Ss(function(){p.healthyTimeout_=null,p.isHealthy_||(p.conn_&&p.conn_.bytesReceived>102400?(p.log_("Connection exceeded healthy timeout but has received "+p.conn_.bytesReceived+" bytes.  Marking connection healthy."),p.isHealthy_=!0,p.conn_.markConnectionHealthy()):p.conn_&&p.conn_.bytesSent>10240?p.log_("Connection exceeded healthy timeout but has sent "+p.conn_.bytesSent+" bytes.  Leaving connection alive."):(p.log_("Closing unhealthy connection after timeout."),p.close()))},Math.floor(N)))},g.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},g.prototype.disconnReceiver_=function(p){var v=this;return function(C){p===v.conn_?v.onConnectionLost_(C):p===v.secondaryConn_?(v.log_("Secondary connection lost."),v.onSecondaryConnectionLost_()):v.log_("closing an old connection")}},g.prototype.connReceiver_=function(p){var v=this;return function(C){2!==v.state_&&(p===v.rx_?v.onPrimaryMessageReceived_(C):p===v.secondaryConn_?v.onSecondaryMessageReceived_(C):v.log_("message on old connection"))}},g.prototype.sendRequest=function(p){this.sendData_({t:"d",d:p})},g.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},g.prototype.onSecondaryControl_=function(p){if("t"in p){var v=p.t;"a"===v?this.upgradeIfSecondaryHealthy_():"r"===v?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===v&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},g.prototype.onSecondaryMessageReceived_=function(p){var v=We("t",p),C=We("d",p);if("c"===v)this.onSecondaryControl_(C);else{if("d"!==v)throw new Error("Unknown protocol layer: "+v);this.pendingDataMessages.push(C)}},g.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},g.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},g.prototype.onPrimaryMessageReceived_=function(p){var v=We("t",p),C=We("d",p);"c"===v?this.onControl_(C):"d"===v&&this.onDataMessage_(C)},g.prototype.onDataMessage_=function(p){this.onPrimaryResponse_(),this.onMessage_(p)},g.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},g.prototype.onControl_=function(p){var v=We("t",p);if("d"in p){var C=p.d;if("h"===v)this.onHandshake_(C);else if("n"===v){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===v?this.onConnectionShutdown_(C):"r"===v?this.onReset_(C):"e"===v?je("Server Error: "+C):"o"===v?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):je("Unknown control packet command: "+v)}},g.prototype.onHandshake_=function(p){var v=p.ts,C=p.v,I=p.h;this.sessionId=p.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,v),"5"!==C&&Ct("Protocol version mismatch detected"),this.tryStartUpgrade_())},g.prototype.tryStartUpgrade_=function(){var p=this.transportManager_.upgradeTransport();p&&this.startUpgrade_(p)},g.prototype.startUpgrade_=function(p){var v=this;this.secondaryConn_=new p(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=p.responsesRequiredToBeHealthy||0;var C=this.connReceiver_(this.secondaryConn_),I=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(C,I),Ss(function(){v.secondaryConn_&&(v.log_("Timed out trying to upgrade."),v.secondaryConn_.close())},Math.floor(6e4))},g.prototype.onReset_=function(p){this.log_("Reset packet received.  New host: "+p),this.repoInfo_.host=p,1===this.state_?this.close():(this.closeConnections_(),this.start_())},g.prototype.onConnectionEstablished_=function(p,v){var C=this;this.log_("Realtime connection established."),this.conn_=p,this.state_=1,this.onReady_&&(this.onReady_(v,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ss(function(){C.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},g.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},g.prototype.onSecondaryConnectionLost_=function(){var p=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===p||this.rx_===p)&&this.close()},g.prototype.onConnectionLost_=function(p){this.conn_=null,p||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Me.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},g.prototype.onConnectionShutdown_=function(p){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(p),this.onKill_=null),this.onDisconnect_=null,this.close()},g.prototype.sendData_=function(p){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(p)},g.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},g.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},g}(),Li=function(){function g(){}return g.prototype.put=function(p,v,C,I){},g.prototype.merge=function(p,v,C,I){},g.prototype.refreshAuthToken=function(p){},g.prototype.refreshAppCheckToken=function(p){},g.prototype.onDisconnectPut=function(p,v,C){},g.prototype.onDisconnectMerge=function(p,v,C){},g.prototype.onDisconnectCancel=function(p,v){},g.prototype.reportStats=function(p){},g}(),Cd=function(){function g(p){this.allowedEvents_=p,this.listeners_={},(0,B.assert)(Array.isArray(p)&&p.length>0,"Requires a non-empty array")}return g.prototype.trigger=function(p){for(var v=[],C=1;C<arguments.length;C++)v[C-1]=arguments[C];if(Array.isArray(this.listeners_[p]))for(var I=(0,ge.__spreadArray)([],(0,ge.__read)(this.listeners_[p])),N=0;N<I.length;N++)I[N].callback.apply(I[N].context,v)},g.prototype.on=function(p,v,C){this.validateEventType_(p),this.listeners_[p]=this.listeners_[p]||[],this.listeners_[p].push({callback:v,context:C});var I=this.getInitialEvent(p);I&&v.apply(C,I)},g.prototype.off=function(p,v,C){this.validateEventType_(p);for(var I=this.listeners_[p]||[],N=0;N<I.length;N++)if(I[N].callback===v&&(!C||C===I[N].context))return void I.splice(N,1)},g.prototype.validateEventType_=function(p){(0,B.assert)(this.allowedEvents_.find(function(v){return v===p}),"Unknown event: "+p)},g}(),Su=function(g){function p(){var v=g.call(this,["online"])||this;return v.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,B.isMobileCordova)()&&(window.addEventListener("online",function(){v.online_||(v.online_=!0,v.trigger("online",!0))},!1),window.addEventListener("offline",function(){v.online_&&(v.online_=!1,v.trigger("online",!1))},!1)),v}return(0,ge.__extends)(p,g),p.getInstance=function(){return new p},p.prototype.getInitialEvent=function(v){return(0,B.assert)("online"===v,"Unknown event type: "+v),[this.online_]},p.prototype.currentlyOnline=function(){return this.online_},p}(Cd),Dn=function(){function g(p,v){if(void 0===v){this.pieces_=p.split("/");for(var C=0,I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[C]=this.pieces_[I],C++);this.pieces_.length=C,this.pieceNum_=0}else this.pieces_=p,this.pieceNum_=v}return g.prototype.toString=function(){for(var p="",v=this.pieceNum_;v<this.pieces_.length;v++)""!==this.pieces_[v]&&(p+="/"+this.pieces_[v]);return p||"/"},g}();function qt(){return new Dn("")}function Wt(g){return g.pieceNum_>=g.pieces_.length?null:g.pieces_[g.pieceNum_]}function rs(g){return g.pieces_.length-g.pieceNum_}function Yt(g){var p=g.pieceNum_;return p<g.pieces_.length&&p++,new Dn(g.pieces_,p)}function ml(g){return g.pieceNum_<g.pieces_.length?g.pieces_[g.pieces_.length-1]:null}function wr(g,p){return void 0===p&&(p=0),g.pieces_.slice(g.pieceNum_+p)}function Is(g){if(g.pieceNum_>=g.pieces_.length)return null;for(var p=[],v=g.pieceNum_;v<g.pieces_.length-1;v++)p.push(g.pieces_[v]);return new Dn(p,0)}function Tn(g,p){for(var v=[],C=g.pieceNum_;C<g.pieces_.length;C++)v.push(g.pieces_[C]);if(p instanceof Dn)for(C=p.pieceNum_;C<p.pieces_.length;C++)v.push(p.pieces_[C]);else{var I=p.split("/");for(C=0;C<I.length;C++)I[C].length>0&&v.push(I[C])}return new Dn(v,0)}function Ot(g){return g.pieceNum_>=g.pieces_.length}function Ei(g,p){var v=Wt(g),C=Wt(p);if(null===v)return p;if(v===C)return Ei(Yt(g),Yt(p));throw new Error("INTERNAL ERROR: innerPath ("+p+") is not within outerPath ("+g+")")}function mc(g,p){for(var v=wr(g,0),C=wr(p,0),I=0;I<v.length&&I<C.length;I++){var N=ie(v[I],C[I]);if(0!==N)return N}return v.length===C.length?0:v.length<C.length?-1:1}function _c(g,p){if(rs(g)!==rs(p))return!1;for(var v=g.pieceNum_,C=p.pieceNum_;v<=g.pieces_.length;v++,C++)if(g.pieces_[v]!==p.pieces_[C])return!1;return!0}function kr(g,p){var v=g.pieceNum_,C=p.pieceNum_;if(rs(g)>rs(p))return!1;for(;v<g.pieces_.length;){if(g.pieces_[v]!==p.pieces_[C])return!1;++v,++C}return!0}var co=function(p,v){this.errorPrefix_=v,this.parts_=wr(p,0),this.byteLength_=Math.max(1,this.parts_.length);for(var C=0;C<this.parts_.length;C++)this.byteLength_+=(0,B.stringLength)(this.parts_[C]);Eg(this)};function Eg(g){if(g.byteLength_>768)throw new Error(g.errorPrefix_+"has a key path longer than 768 bytes ("+g.byteLength_+").");if(g.parts_.length>32)throw new Error(g.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+La(g))}function La(g){return 0===g.parts_.length?"":"in property '"+g.parts_.join(".")+"'"}var Rt,Td,Lf=function(g){function p(){var C,I,v=g.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(I="visibilitychange",C="hidden"):void 0!==document.mozHidden?(I="mozvisibilitychange",C="mozHidden"):void 0!==document.msHidden?(I="msvisibilitychange",C="msHidden"):void 0!==document.webkitHidden&&(I="webkitvisibilitychange",C="webkitHidden")),v.visible_=!0,I&&document.addEventListener(I,function(){var N=!document[C];N!==v.visible_&&(v.visible_=N,v.trigger("visible",N))},!1),v}return(0,ge.__extends)(p,g),p.getInstance=function(){return new p},p.prototype.getInitialEvent=function(v){return(0,B.assert)("visible"===v,"Unknown event type: "+v),[this.visible_]},p}(Cd),Rh=1e3,_l=function(g){function p(v,C,I,N,P,$,Q,re){var ae=g.call(this)||this;if(ae.repoInfo_=v,ae.applicationId_=C,ae.onDataUpdate_=I,ae.onConnectStatus_=N,ae.onServerInfoUpdate_=P,ae.authTokenProvider_=$,ae.appCheckTokenProvider_=Q,ae.authOverride_=re,ae.id=p.nextPersistentConnectionId_++,ae.log_=Qe("p:"+ae.id+":"),ae.interruptReasons_={},ae.listens=new Map,ae.outstandingPuts_=[],ae.outstandingGets_=[],ae.outstandingPutCount_=0,ae.outstandingGetCount_=0,ae.onDisconnectRequestQueue_=[],ae.connected_=!1,ae.reconnectDelay_=Rh,ae.maxReconnectDelay_=3e5,ae.securityDebugCallback_=null,ae.lastSessionId=null,ae.establishConnectionTimer_=null,ae.visible_=!1,ae.requestCBHash_={},ae.requestNumber_=0,ae.realtime_=null,ae.authToken_=null,ae.appCheckToken_=null,ae.forceTokenRefresh_=!1,ae.invalidAuthTokenCount_=0,ae.invalidAppCheckTokenCount_=0,ae.firstConnection_=!0,ae.lastConnectionAttemptTime_=null,ae.lastConnectionEstablishedTime_=null,re&&!(0,B.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Lf.getInstance().on("visible",ae.onVisible_,ae),-1===v.host.indexOf("fblocal")&&Su.getInstance().on("online",ae.onOnline_,ae),ae}return(0,ge.__extends)(p,g),p.prototype.sendRequest=function(v,C,I){var N=++this.requestNumber_,P={r:N,a:v,b:C};this.log_((0,B.stringify)(P)),(0,B.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(P),I&&(this.requestCBHash_[N]=I)},p.prototype.get=function(v){var C=this;this.initConnection_();var I=new B.Deferred,N={p:v._path.toString(),q:v._queryObject},P={action:"g",request:N,onComplete:function(Q){var re=Q.d;"ok"===Q.s?(C.onDataUpdate_(N.p,re,!1,null),I.resolve(re)):I.reject(re)}};this.outstandingGets_.push(P),this.outstandingGetCount_++;var $=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var Q=C.outstandingGets_[$];void 0===Q||P!==Q||(delete C.outstandingGets_[$],C.outstandingGetCount_--,0===C.outstandingGetCount_&&(C.outstandingGets_=[]),C.log_("get "+$+" timed out on connection"),I.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_($),I.promise},p.prototype.listen=function(v,C,I,N){this.initConnection_();var P=v._queryIdentifier,$=v._path.toString();this.log_("Listen called for "+$+" "+P),this.listens.has($)||this.listens.set($,new Map),(0,B.assert)(v._queryParams.isDefault()||!v._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.assert)(!this.listens.get($).has(P),"listen() called twice for same path/queryId.");var Q={onComplete:N,hashFn:C,query:v,tag:I};this.listens.get($).set(P,Q),this.connected_&&this.sendListen_(Q)},p.prototype.sendGet_=function(v){var C=this,I=this.outstandingGets_[v];this.sendRequest("g",I.request,function(N){delete C.outstandingGets_[v],C.outstandingGetCount_--,0===C.outstandingGetCount_&&(C.outstandingGets_=[]),I.onComplete&&I.onComplete(N)})},p.prototype.sendListen_=function(v){var C=this,I=v.query,N=I._path.toString(),P=I._queryIdentifier;this.log_("Listen on "+N+" for "+P);var $={p:N};v.tag&&($.q=I._queryObject,$.t=v.tag),$.h=v.hashFn(),this.sendRequest("q",$,function(re){var ae=re.d,Ee=re.s;p.warnOnListenWarnings_(ae,I),(C.listens.get(N)&&C.listens.get(N).get(P))===v&&(C.log_("listen response",re),"ok"!==Ee&&C.removeListen_(N,P),v.onComplete&&v.onComplete(Ee,ae))})},p.warnOnListenWarnings_=function(v,C){if(v&&"object"==typeof v&&(0,B.contains)(v,"w")){var I=(0,B.safeGet)(v,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){var N='".indexOn": "'+C._queryParams.getIndex().toString()+'"',P=C._path.toString();Ct("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+N+" at "+P+" to your security rules for better performance.")}}},p.prototype.refreshAuthToken=function(v){this.authToken_=v,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(v)},p.prototype.reduceReconnectDelayIfAdminCredential_=function(v){(v&&40===v.length||(0,B.isAdmin)(v))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},p.prototype.refreshAppCheckToken=function(v){this.appCheckToken_=v,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},p.prototype.tryAuth=function(){var v=this;if(this.connected_&&this.authToken_){var C=this.authToken_,I=(0,B.isValidFormat)(C)?"auth":"gauth",N={cred:C};null===this.authOverride_?N.noauth=!0:"object"==typeof this.authOverride_&&(N.authvar=this.authOverride_),this.sendRequest(I,N,function(P){var $=P.s,Q=P.d||"error";v.authToken_===C&&("ok"===$?v.invalidAuthTokenCount_=0:v.onAuthRevoked_($,Q))})}},p.prototype.tryAppCheck=function(){var v=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(C){var I=C.s,N=C.d||"error";"ok"===I?v.invalidAppCheckTokenCount_=0:v.onAppCheckRevoked_(I,N)})},p.prototype.unlisten=function(v,C){var I=v._path.toString(),N=v._queryIdentifier;this.log_("Unlisten called for "+I+" "+N),(0,B.assert)(v._queryParams.isDefault()||!v._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,N)&&this.connected_&&this.sendUnlisten_(I,N,v._queryObject,C)},p.prototype.sendUnlisten_=function(v,C,I,N){this.log_("Unlisten on "+v+" for "+C);var P={p:v};N&&(P.q=I,P.t=N),this.sendRequest("n",P)},p.prototype.onDisconnectPut=function(v,C,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",v,C,I):this.onDisconnectRequestQueue_.push({pathString:v,action:"o",data:C,onComplete:I})},p.prototype.onDisconnectMerge=function(v,C,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",v,C,I):this.onDisconnectRequestQueue_.push({pathString:v,action:"om",data:C,onComplete:I})},p.prototype.onDisconnectCancel=function(v,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",v,null,C):this.onDisconnectRequestQueue_.push({pathString:v,action:"oc",data:null,onComplete:C})},p.prototype.sendOnDisconnect_=function(v,C,I,N){var P={p:C,d:I};this.log_("onDisconnect "+v,P),this.sendRequest(v,P,function($){N&&setTimeout(function(){N($.s,$.d)},Math.floor(0))})},p.prototype.put=function(v,C,I,N){this.putInternal("p",v,C,I,N)},p.prototype.merge=function(v,C,I,N){this.putInternal("m",v,C,I,N)},p.prototype.putInternal=function(v,C,I,N,P){this.initConnection_();var $={p:C,d:I};void 0!==P&&($.h=P),this.outstandingPuts_.push({action:v,request:$,onComplete:N}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+C)},p.prototype.sendPut_=function(v){var C=this,I=this.outstandingPuts_[v].action,N=this.outstandingPuts_[v].request,P=this.outstandingPuts_[v].onComplete;this.outstandingPuts_[v].queued=this.connected_,this.sendRequest(I,N,function($){C.log_(I+" response",$),delete C.outstandingPuts_[v],C.outstandingPutCount_--,0===C.outstandingPutCount_&&(C.outstandingPuts_=[]),P&&P($.s,$.d)})},p.prototype.reportStats=function(v){var C=this;if(this.connected_){var I={c:v};this.log_("reportStats",I),this.sendRequest("s",I,function(N){"ok"!==N.s&&C.log_("reportStats","Error sending stats: "+N.d)})}},p.prototype.onDataMessage_=function(v){if("r"in v){this.log_("from server: "+(0,B.stringify)(v));var C=v.r,I=this.requestCBHash_[C];I&&(delete this.requestCBHash_[C],I(v.b))}else{if("error"in v)throw"A server-side error has occurred: "+v.error;"a"in v&&this.onDataPush_(v.a,v.b)}},p.prototype.onDataPush_=function(v,C){this.log_("handleServerMessage",v,C),"d"===v?this.onDataUpdate_(C.p,C.d,!1,C.t):"m"===v?this.onDataUpdate_(C.p,C.d,!0,C.t):"c"===v?this.onListenRevoked_(C.p,C.q):"ac"===v?this.onAuthRevoked_(C.s,C.d):"apc"===v?this.onAppCheckRevoked_(C.s,C.d):"sd"===v?this.onSecurityDebugPacket_(C):je("Unrecognized action received from server: "+(0,B.stringify)(v)+"\nAre you using the latest client?")},p.prototype.onReady_=function(v,C){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(v),this.lastSessionId=C,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},p.prototype.scheduleConnect_=function(v){var C=this;(0,B.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){C.establishConnectionTimer_=null,C.establishConnection_()},Math.floor(v))},p.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},p.prototype.onVisible_=function(v){v&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rh,this.realtime_||this.scheduleConnect_(0)),this.visible_=v},p.prototype.onOnline_=function(v){v?(this.log_("Browser went online."),this.reconnectDelay_=Rh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},p.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var C=(new Date).getTime()-this.lastConnectionAttemptTime_,I=Math.max(0,this.reconnectDelay_-C);I=Math.random()*I,this.log_("Trying to reconnect in "+I+"ms"),this.scheduleConnect_(I),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},p.prototype.establishConnection_=function(){return(0,ge.__awaiter)(this,void 0,void 0,function(){var v,C,I,N,P,$,Q,re,Ee,Fe,tt,dt,Lt,kt=this;return(0,ge.__generator)(this,function(tn){switch(tn.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,v=this.onDataMessage_.bind(this),C=this.onReady_.bind(this),I=this.onRealtimeDisconnect_.bind(this),N=this.id+":"+p.nextConnectionId_++,P=this.lastSessionId,$=!1,Q=null,this.realtime_={close:re=function(){Q?Q.close():($=!0,I())},sendRequest:function(Dr){(0,B.assert)(Q,"sendRequest call when we're not connected not allowed."),Q.sendRequest(Dr)}},Ee=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,tn.label=1;case 1:return tn.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(Ee),this.appCheckTokenProvider_.getToken(Ee)])];case 2:return Fe=ge.__read.apply(void 0,[tn.sent(),2]),tt=Fe[0],dt=Fe[1],$?Ke("getToken() completed but was canceled"):(Ke("getToken() completed. Creating connection."),this.authToken_=tt&&tt.accessToken,this.appCheckToken_=dt&&dt.token,Q=new li(N,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,v,C,I,function(Dr){Ct(Dr+" ("+kt.repoInfo_.toString()+")"),kt.interrupt("server_kill")},P)),[3,4];case 3:return Lt=tn.sent(),this.log_("Failed to get token: "+Lt),$||(this.repoInfo_.nodeAdmin&&Ct(Lt),re()),[3,4];case 4:return[2]}})})},p.prototype.interrupt=function(v){Ke("Interrupting connection for reason: "+v),this.interruptReasons_[v]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},p.prototype.resume=function(v){Ke("Resuming connection for reason: "+v),delete this.interruptReasons_[v],(0,B.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Rh,this.realtime_||this.scheduleConnect_(0))},p.prototype.handleTimestamp_=function(v){var C=v-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:C})},p.prototype.cancelSentTransactions_=function(){for(var v=0;v<this.outstandingPuts_.length;v++){var C=this.outstandingPuts_[v];C&&"h"in C.request&&C.queued&&(C.onComplete&&C.onComplete("disconnect"),delete this.outstandingPuts_[v],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},p.prototype.onListenRevoked_=function(v,C){var I;I=C?C.map(function(P){return bt(P)}).join("$"):"default";var N=this.removeListen_(v,I);N&&N.onComplete&&N.onComplete("permission_denied")},p.prototype.removeListen_=function(v,C){var N,I=new Dn(v).toString();if(this.listens.has(I)){var P=this.listens.get(I);N=P.get(C),P.delete(C),0===P.size&&this.listens.delete(I)}else N=void 0;return N},p.prototype.onAuthRevoked_=function(v,C){Ke("Auth token revoked: "+v+"/"+C),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===v||"permission_denied"===v)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},p.prototype.onAppCheckRevoked_=function(v,C){Ke("App check token revoked: "+v+"/"+C),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===v||"permission_denied"===v)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},p.prototype.onSecurityDebugPacket_=function(v){this.securityDebugCallback_?this.securityDebugCallback_(v):"msg"in v&&console.log("FIREBASE: "+v.msg.replace("\n","\nFIREBASE: "))},p.prototype.restoreState_=function(){var v,C,I,N;this.tryAuth(),this.tryAppCheck();try{for(var P=(0,ge.__values)(this.listens.values()),$=P.next();!$.done;$=P.next()){var Q=$.value;try{for(var re=(I=void 0,(0,ge.__values)(Q.values())),ae=re.next();!ae.done;ae=re.next())this.sendListen_(ae.value)}catch(dt){I={error:dt}}finally{try{ae&&!ae.done&&(N=re.return)&&N.call(re)}finally{if(I)throw I.error}}}}catch(dt){v={error:dt}}finally{try{$&&!$.done&&(C=P.return)&&C.call(P)}finally{if(v)throw v.error}}for(var Fe=0;Fe<this.outstandingPuts_.length;Fe++)this.outstandingPuts_[Fe]&&this.sendPut_(Fe);for(;this.onDisconnectRequestQueue_.length;){var tt=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(tt.action,tt.pathString,tt.data,tt.onComplete)}for(Fe=0;Fe<this.outstandingGets_.length;Fe++)this.outstandingGets_[Fe]&&this.sendGet_(Fe)},p.prototype.sendConnectStats_=function(){var v={},C="js";(0,B.isNodeSdk)()&&(C=this.repoInfo_.nodeAdmin?"admin_node":"node"),v["sdk."+C+"."+Ae.replace(/\./g,"-")]=1,(0,B.isMobileCordova)()?v["framework.cordova"]=1:(0,B.isReactNative)()&&(v["framework.reactnative"]=1),this.reportStats(v)},p.prototype.shouldReconnect_=function(){var v=Su.getInstance().currentlyOnline();return(0,B.isEmpty)(this.interruptReasons_)&&v},p.nextPersistentConnectionId_=0,p.nextConnectionId_=0,p}(Li),yn=function(){function g(p,v){this.name=p,this.node=v}return g.Wrap=function(p,v){return new g(p,v)},g}(),Ed=function(){function g(){}return g.prototype.getCompare=function(){return this.compare.bind(this)},g.prototype.indexedValueChanged=function(p,v){var C=new yn(he,p),I=new yn(he,v);return 0!==this.compare(C,I)},g.prototype.minPost=function(){return yn.MIN},g}(),ir=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return(0,ge.__extends)(p,g),Object.defineProperty(p,"__EMPTY_NODE",{get:function(){return Rt},set:function(v){Rt=v},enumerable:!1,configurable:!0}),p.prototype.compare=function(v,C){return ie(v.name,C.name)},p.prototype.isDefinedOn=function(v){throw(0,B.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},p.prototype.indexedValueChanged=function(v,C){return!1},p.prototype.minPost=function(){return yn.MIN},p.prototype.maxPost=function(){return new yn(De,Rt)},p.prototype.makePost=function(v,C){return(0,B.assert)("string"==typeof v,"KeyIndex indexValue must always be a string."),new yn(v,Rt)},p.prototype.toString=function(){return".key"},p}(Ed),Bo=new ir,kh=function(){function g(p,v,C,I,N){void 0===N&&(N=null),this.isReverse_=I,this.resultGenerator_=N,this.nodeStack_=[];for(var P=1;!p.isEmpty();)if(p=p,P=v?C(p.key,v):1,I&&(P*=-1),P<0)p=this.isReverse_?p.left:p.right;else{if(0===P){this.nodeStack_.push(p);break}this.nodeStack_.push(p),p=this.isReverse_?p.right:p.left}}return g.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var v,p=this.nodeStack_.pop();if(v=this.resultGenerator_?this.resultGenerator_(p.key,p.value):{key:p.key,value:p.value},this.isReverse_)for(p=p.left;!p.isEmpty();)this.nodeStack_.push(p),p=p.right;else for(p=p.right;!p.isEmpty();)this.nodeStack_.push(p),p=p.left;return v},g.prototype.hasNext=function(){return this.nodeStack_.length>0},g.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var p=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(p.key,p.value):{key:p.key,value:p.value}},g}(),As=function(){function g(p,v,C,I,N){this.key=p,this.value=v,this.color=null!=C?C:g.RED,this.left=null!=I?I:Di.EMPTY_NODE,this.right=null!=N?N:Di.EMPTY_NODE}return g.prototype.copy=function(p,v,C,I,N){return new g(null!=p?p:this.key,null!=v?v:this.value,null!=C?C:this.color,null!=I?I:this.left,null!=N?N:this.right)},g.prototype.count=function(){return this.left.count()+1+this.right.count()},g.prototype.isEmpty=function(){return!1},g.prototype.inorderTraversal=function(p){return this.left.inorderTraversal(p)||!!p(this.key,this.value)||this.right.inorderTraversal(p)},g.prototype.reverseTraversal=function(p){return this.right.reverseTraversal(p)||p(this.key,this.value)||this.left.reverseTraversal(p)},g.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},g.prototype.minKey=function(){return this.min_().key},g.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},g.prototype.insert=function(p,v,C){var I=this,N=C(p,I.key);return(I=N<0?I.copy(null,null,null,I.left.insert(p,v,C),null):0===N?I.copy(null,v,null,null,null):I.copy(null,null,null,null,I.right.insert(p,v,C))).fixUp_()},g.prototype.removeMin_=function(){if(this.left.isEmpty())return Di.EMPTY_NODE;var p=this;return!p.left.isRed_()&&!p.left.left.isRed_()&&(p=p.moveRedLeft_()),(p=p.copy(null,null,null,p.left.removeMin_(),null)).fixUp_()},g.prototype.remove=function(p,v){var C,I;if(v(p,(C=this).key)<0)!C.left.isEmpty()&&!C.left.isRed_()&&!C.left.left.isRed_()&&(C=C.moveRedLeft_()),C=C.copy(null,null,null,C.left.remove(p,v),null);else{if(C.left.isRed_()&&(C=C.rotateRight_()),!C.right.isEmpty()&&!C.right.isRed_()&&!C.right.left.isRed_()&&(C=C.moveRedRight_()),0===v(p,C.key)){if(C.right.isEmpty())return Di.EMPTY_NODE;I=C.right.min_(),C=C.copy(I.key,I.value,null,null,C.right.removeMin_())}C=C.copy(null,null,null,null,C.right.remove(p,v))}return C.fixUp_()},g.prototype.isRed_=function(){return this.color},g.prototype.fixUp_=function(){var p=this;return p.right.isRed_()&&!p.left.isRed_()&&(p=p.rotateLeft_()),p.left.isRed_()&&p.left.left.isRed_()&&(p=p.rotateRight_()),p.left.isRed_()&&p.right.isRed_()&&(p=p.colorFlip_()),p},g.prototype.moveRedLeft_=function(){var p=this.colorFlip_();return p.right.left.isRed_()&&(p=(p=(p=p.copy(null,null,null,null,p.right.rotateRight_())).rotateLeft_()).colorFlip_()),p},g.prototype.moveRedRight_=function(){var p=this.colorFlip_();return p.left.left.isRed_()&&(p=(p=p.rotateRight_()).colorFlip_()),p},g.prototype.rotateLeft_=function(){var p=this.copy(null,null,g.RED,null,this.right.left);return this.right.copy(null,null,this.color,p,null)},g.prototype.rotateRight_=function(){var p=this.copy(null,null,g.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,p)},g.prototype.colorFlip_=function(){var p=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,p,v)},g.prototype.checkMaxDepth_=function(){var p=this.check_();return Math.pow(2,p)<=this.count()+1},g.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var p=this.left.check_();if(p!==this.right.check_())throw new Error("Black depths differ");return p+(this.isRed_()?0:1)},g.RED=!0,g.BLACK=!1,g}(),Sg=function(){function g(){}return g.prototype.copy=function(p,v,C,I,N){return this},g.prototype.insert=function(p,v,C){return new As(p,v,null)},g.prototype.remove=function(p,v){return this},g.prototype.count=function(){return 0},g.prototype.isEmpty=function(){return!0},g.prototype.inorderTraversal=function(p){return!1},g.prototype.reverseTraversal=function(p){return!1},g.prototype.minKey=function(){return null},g.prototype.maxKey=function(){return null},g.prototype.check_=function(){return 0},g.prototype.isRed_=function(){return!1},g}(),Di=function(){function g(p,v){void 0===v&&(v=g.EMPTY_NODE),this.comparator_=p,this.root_=v}return g.prototype.insert=function(p,v){return new g(this.comparator_,this.root_.insert(p,v,this.comparator_).copy(null,null,As.BLACK,null,null))},g.prototype.remove=function(p){return new g(this.comparator_,this.root_.remove(p,this.comparator_).copy(null,null,As.BLACK,null,null))},g.prototype.get=function(p){for(var v,C=this.root_;!C.isEmpty();){if(0===(v=this.comparator_(p,C.key)))return C.value;v<0?C=C.left:v>0&&(C=C.right)}return null},g.prototype.getPredecessorKey=function(p){for(var v,C=this.root_,I=null;!C.isEmpty();){if(0===(v=this.comparator_(p,C.key))){if(C.left.isEmpty())return I?I.key:null;for(C=C.left;!C.right.isEmpty();)C=C.right;return C.key}v<0?C=C.left:v>0&&(I=C,C=C.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},g.prototype.isEmpty=function(){return this.root_.isEmpty()},g.prototype.count=function(){return this.root_.count()},g.prototype.minKey=function(){return this.root_.minKey()},g.prototype.maxKey=function(){return this.root_.maxKey()},g.prototype.inorderTraversal=function(p){return this.root_.inorderTraversal(p)},g.prototype.reverseTraversal=function(p){return this.root_.reverseTraversal(p)},g.prototype.getIterator=function(p){return new kh(this.root_,null,this.comparator_,!1,p)},g.prototype.getIteratorFrom=function(p,v){return new kh(this.root_,p,this.comparator_,!1,v)},g.prototype.getReverseIteratorFrom=function(p,v){return new kh(this.root_,p,this.comparator_,!0,v)},g.prototype.getReverseIterator=function(p){return new kh(this.root_,null,this.comparator_,!0,p)},g.EMPTY_NODE=new Sg,g}();function Dd(g,p){return ie(g.name,p.name)}function Uo(g,p){return ie(g,p)}var xh,Oh,Ph,mr,Fn,Vr=function(g){return"number"==typeof g?"number:"+rt(g):"string:"+g},Sd=function(g){if(g.isLeafNode()){var p=g.val();(0,B.assert)("string"==typeof p||"number"==typeof p||"object"==typeof p&&(0,B.contains)(p,".sv"),"Priority must be a string or number.")}else(0,B.assert)(g===Td||g.isEmpty(),"priority of unexpected type.");(0,B.assert)(g===Td||g.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},vl=function(){function g(p,v){void 0===v&&(v=g.__childrenNodeConstructor.EMPTY_NODE),this.value_=p,this.priorityNode_=v,this.lazyHash_=null,(0,B.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Sd(this.priorityNode_)}return Object.defineProperty(g,"__childrenNodeConstructor",{get:function(){return xh},set:function(p){xh=p},enumerable:!1,configurable:!0}),g.prototype.isLeafNode=function(){return!0},g.prototype.getPriority=function(){return this.priorityNode_},g.prototype.updatePriority=function(p){return new g(this.value_,p)},g.prototype.getImmediateChild=function(p){return".priority"===p?this.priorityNode_:g.__childrenNodeConstructor.EMPTY_NODE},g.prototype.getChild=function(p){return Ot(p)?this:".priority"===Wt(p)?this.priorityNode_:g.__childrenNodeConstructor.EMPTY_NODE},g.prototype.hasChild=function(){return!1},g.prototype.getPredecessorChildName=function(p,v){return null},g.prototype.updateImmediateChild=function(p,v){return".priority"===p?this.updatePriority(v):v.isEmpty()&&".priority"!==p?this:g.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(p,v).updatePriority(this.priorityNode_)},g.prototype.updateChild=function(p,v){var C=Wt(p);return null===C?v:v.isEmpty()&&".priority"!==C?this:((0,B.assert)(".priority"!==C||1===rs(p),".priority must be the last token in a path"),this.updateImmediateChild(C,g.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yt(p),v)))},g.prototype.isEmpty=function(){return!1},g.prototype.numChildren=function(){return 0},g.prototype.forEachChild=function(p,v){return!1},g.prototype.val=function(p){return p&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},g.prototype.hash=function(){if(null===this.lazyHash_){var p="";this.priorityNode_.isEmpty()||(p+="priority:"+Vr(this.priorityNode_.val())+":");var v=typeof this.value_;p+=v+":",p+="number"===v?rt(this.value_):this.value_,this.lazyHash_=Re(p)}return this.lazyHash_},g.prototype.getValue=function(){return this.value_},g.prototype.compareTo=function(p){return p===g.__childrenNodeConstructor.EMPTY_NODE?1:p instanceof g.__childrenNodeConstructor?-1:((0,B.assert)(p.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(p))},g.prototype.compareToLeafNode_=function(p){var v=typeof p.value_,C=typeof this.value_,I=g.VALUE_TYPE_ORDER.indexOf(v),N=g.VALUE_TYPE_ORDER.indexOf(C);return(0,B.assert)(I>=0,"Unknown leaf type: "+v),(0,B.assert)(N>=0,"Unknown leaf type: "+C),I===N?"object"===C?0:this.value_<p.value_?-1:this.value_===p.value_?0:1:N-I},g.prototype.withIndex=function(){return this},g.prototype.isIndexed=function(){return!0},g.prototype.equals=function(p){return p===this||!!p.isLeafNode()&&(this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_))},g.VALUE_TYPE_ORDER=["object","boolean","number","string"],g}(),Vf=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return(0,ge.__extends)(p,g),p.prototype.compare=function(v,C){var I=v.node.getPriority(),N=C.node.getPriority(),P=I.compareTo(N);return 0===P?ie(v.name,C.name):P},p.prototype.isDefinedOn=function(v){return!v.getPriority().isEmpty()},p.prototype.indexedValueChanged=function(v,C){return!v.getPriority().equals(C.getPriority())},p.prototype.minPost=function(){return yn.MIN},p.prototype.maxPost=function(){return new yn(De,new vl("[PRIORITY-POST]",Ph))},p.prototype.makePost=function(v,C){var I=Oh(v);return new yn(C,new vl("[PRIORITY-POST]",I))},p.prototype.toString=function(){return".priority"},p}(Ed),Qn=new Vf,Ig=Math.log(2),Bf=function(){function g(p){this.count=parseInt(Math.log(p+1)/Ig,10),this.current_=this.count-1;var I=parseInt(Array(this.count+1).join("1"),2);this.bits_=p+1&I}return g.prototype.nextBitIsOne=function(){var p=!(this.bits_&1<<this.current_);return this.current_--,p},g}(),Id=function(g,p,v,C){g.sort(p);var I=function(Q,re){var Ee,Fe,ae=re-Q;if(0===ae)return null;if(1===ae)return Ee=g[Q],Fe=v?v(Ee):Ee,new As(Fe,Ee.node,As.BLACK,null,null);var tt=parseInt(ae/2,10)+Q,dt=I(Q,tt),Lt=I(tt+1,re);return Ee=g[tt],Fe=v?v(Ee):Ee,new As(Fe,Ee.node,As.BLACK,dt,Lt)},$=function(Q){for(var re=null,ae=null,Ee=g.length,Fe=function(tn,Dr){var ms=Ee-tn,nm=Ee;Ee-=tn;var rh=I(ms+1,nm),ef=g[ms],Sp=v?v(ef):ef;tt(new As(Sp,ef.node,Dr,null,rh))},tt=function(tn){re?(re.left=tn,re=tn):(ae=tn,re=tn)},dt=0;dt<Q.count;++dt){var Lt=Q.nextBitIsOne(),kt=Math.pow(2,Q.count-(dt+1));Lt?Fe(kt,As.BLACK):(Fe(kt,As.BLACK),Fe(kt,As.RED))}return ae}(new Bf(g.length));return new Di(C||p,$)},yc={},Ti=function(){function g(p,v){this.indexes_=p,this.indexSet_=v}return Object.defineProperty(g,"Default",{get:function(){return(0,B.assert)(yc&&Qn,"ChildrenNode.ts has not been loaded"),mr=mr||new g({".priority":yc},{".priority":Qn})},enumerable:!1,configurable:!0}),g.prototype.get=function(p){var v=(0,B.safeGet)(this.indexes_,p);if(!v)throw new Error("No index defined for "+p);return v instanceof Di?v:null},g.prototype.hasIndex=function(p){return(0,B.contains)(this.indexSet_,p.toString())},g.prototype.addIndex=function(p,v){(0,B.assert)(p!==Bo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var C=[],I=!1,N=v.getIterator(yn.Wrap),P=N.getNext();P;)I=I||p.isDefinedOn(P.node),C.push(P),P=N.getNext();var $;$=I?Id(C,p.getCompare()):yc;var Q=p.toString(),re=(0,ge.__assign)({},this.indexSet_);re[Q]=p;var ae=(0,ge.__assign)({},this.indexes_);return ae[Q]=$,new g(ae,re)},g.prototype.addToIndexes=function(p,v){var C=this;return new g((0,B.map)(this.indexes_,function(N,P){var $=(0,B.safeGet)(C.indexSet_,P);if((0,B.assert)($,"Missing index implementation for "+P),N===yc){if($.isDefinedOn(p.node)){for(var Q=[],re=v.getIterator(yn.Wrap),ae=re.getNext();ae;)ae.name!==p.name&&Q.push(ae),ae=re.getNext();return Q.push(p),Id(Q,$.getCompare())}return yc}var Ee=v.get(p.name),Fe=N;return Ee&&(Fe=Fe.remove(new yn(p.name,Ee))),Fe.insert(p,p.node)}),this.indexSet_)},g.prototype.removeFromIndexes=function(p,v){return new g((0,B.map)(this.indexes_,function(I){if(I===yc)return I;var N=v.get(p.name);return N?I.remove(new yn(p.name,N)):I}),this.indexSet_)},g}(),Kt=function(){function g(p,v,C){this.children_=p,this.priorityNode_=v,this.indexMap_=C,this.lazyHash_=null,this.priorityNode_&&Sd(this.priorityNode_),this.children_.isEmpty()&&(0,B.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(g,"EMPTY_NODE",{get:function(){return Fn||(Fn=new g(new Di(Uo),null,Ti.Default))},enumerable:!1,configurable:!0}),g.prototype.isLeafNode=function(){return!1},g.prototype.getPriority=function(){return this.priorityNode_||Fn},g.prototype.updatePriority=function(p){return this.children_.isEmpty()?this:new g(this.children_,p,this.indexMap_)},g.prototype.getImmediateChild=function(p){if(".priority"===p)return this.getPriority();var v=this.children_.get(p);return null===v?Fn:v},g.prototype.getChild=function(p){var v=Wt(p);return null===v?this:this.getImmediateChild(v).getChild(Yt(p))},g.prototype.hasChild=function(p){return null!==this.children_.get(p)},g.prototype.updateImmediateChild=function(p,v){if((0,B.assert)(v,"We should always be passing snapshot nodes"),".priority"===p)return this.updatePriority(v);var C=new yn(p,v),I=void 0,N=void 0;v.isEmpty()?(I=this.children_.remove(p),N=this.indexMap_.removeFromIndexes(C,this.children_)):(I=this.children_.insert(p,v),N=this.indexMap_.addToIndexes(C,this.children_));var P=I.isEmpty()?Fn:this.priorityNode_;return new g(I,P,N)},g.prototype.updateChild=function(p,v){var C=Wt(p);if(null===C)return v;(0,B.assert)(".priority"!==Wt(p)||1===rs(p),".priority must be the last token in a path");var I=this.getImmediateChild(C).updateChild(Yt(p),v);return this.updateImmediateChild(C,I)},g.prototype.isEmpty=function(){return this.children_.isEmpty()},g.prototype.numChildren=function(){return this.children_.count()},g.prototype.val=function(p){if(this.isEmpty())return null;var v={},C=0,I=0,N=!0;if(this.forEachChild(Qn,function(Q,re){v[Q]=re.val(p),C++,N&&g.INTEGER_REGEXP_.test(Q)?I=Math.max(I,Number(Q)):N=!1}),!p&&N&&I<2*C){var P=[];for(var $ in v)P[$]=v[$];return P}return p&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v},g.prototype.hash=function(){if(null===this.lazyHash_){var p="";this.getPriority().isEmpty()||(p+="priority:"+Vr(this.getPriority().val())+":"),this.forEachChild(Qn,function(v,C){var I=C.hash();""!==I&&(p+=":"+v+":"+I)}),this.lazyHash_=""===p?"":Re(p)}return this.lazyHash_},g.prototype.getPredecessorChildName=function(p,v,C){var I=this.resolveIndex_(C);if(I){var N=I.getPredecessorKey(new yn(p,v));return N?N.name:null}return this.children_.getPredecessorKey(p)},g.prototype.getFirstChildName=function(p){var v=this.resolveIndex_(p);if(v){var C=v.minKey();return C&&C.name}return this.children_.minKey()},g.prototype.getFirstChild=function(p){var v=this.getFirstChildName(p);return v?new yn(v,this.children_.get(v)):null},g.prototype.getLastChildName=function(p){var v=this.resolveIndex_(p);if(v){var C=v.maxKey();return C&&C.name}return this.children_.maxKey()},g.prototype.getLastChild=function(p){var v=this.getLastChildName(p);return v?new yn(v,this.children_.get(v)):null},g.prototype.forEachChild=function(p,v){var C=this.resolveIndex_(p);return C?C.inorderTraversal(function(I){return v(I.name,I.node)}):this.children_.inorderTraversal(v)},g.prototype.getIterator=function(p){return this.getIteratorFrom(p.minPost(),p)},g.prototype.getIteratorFrom=function(p,v){var C=this.resolveIndex_(v);if(C)return C.getIteratorFrom(p,function(P){return P});for(var I=this.children_.getIteratorFrom(p.name,yn.Wrap),N=I.peek();null!=N&&v.compare(N,p)<0;)I.getNext(),N=I.peek();return I},g.prototype.getReverseIterator=function(p){return this.getReverseIteratorFrom(p.maxPost(),p)},g.prototype.getReverseIteratorFrom=function(p,v){var C=this.resolveIndex_(v);if(C)return C.getReverseIteratorFrom(p,function(P){return P});for(var I=this.children_.getReverseIteratorFrom(p.name,yn.Wrap),N=I.peek();null!=N&&v.compare(N,p)>0;)I.getNext(),N=I.peek();return I},g.prototype.compareTo=function(p){return this.isEmpty()?p.isEmpty()?0:-1:p.isLeafNode()||p.isEmpty()?1:p===Au?-1:0},g.prototype.withIndex=function(p){if(p===Bo||this.indexMap_.hasIndex(p))return this;var v=this.indexMap_.addIndex(p,this.children_);return new g(this.children_,this.priorityNode_,v)},g.prototype.isIndexed=function(p){return p===Bo||this.indexMap_.hasIndex(p)},g.prototype.equals=function(p){if(p===this)return!0;if(p.isLeafNode())return!1;var v=p;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){for(var C=this.getIterator(Qn),I=v.getIterator(Qn),N=C.getNext(),P=I.getNext();N&&P;){if(N.name!==P.name||!N.node.equals(P.node))return!1;N=C.getNext(),P=I.getNext()}return null===N&&null===P}return!1}return!1},g.prototype.resolveIndex_=function(p){return p===Bo?null:this.indexMap_.get(p.toString())},g.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,g}(),Iu=function(g){function p(){return g.call(this,new Di(Uo),Kt.EMPTY_NODE,Ti.Default)||this}return(0,ge.__extends)(p,g),p.prototype.compareTo=function(v){return v===this?0:1},p.prototype.equals=function(v){return v===this},p.prototype.getPriority=function(){return this},p.prototype.getImmediateChild=function(v){return Kt.EMPTY_NODE},p.prototype.isEmpty=function(){return!1},p}(Kt),Au=new Iu;function or(g,p){if(void 0===p&&(p=null),null===g)return Kt.EMPTY_NODE;if("object"==typeof g&&".priority"in g&&(p=g[".priority"]),(0,B.assert)(null===p||"string"==typeof p||"number"==typeof p||"object"==typeof p&&".sv"in p,"Invalid priority type found: "+typeof p),"object"==typeof g&&".value"in g&&null!==g[".value"]&&(g=g[".value"]),"object"!=typeof g||".sv"in g)return new vl(g,or(p));if(g instanceof Array){var Q=Kt.EMPTY_NODE;return st(g,function(re,ae){if((0,B.contains)(g,re)&&"."!==re.substring(0,1)){var Ee=or(ae);(Ee.isLeafNode()||!Ee.isEmpty())&&(Q=Q.updateImmediateChild(re,Ee))}}),Q.updatePriority(or(p))}var C=[],I=!1;if(st(g,function(re,ae){if("."!==re.substring(0,1)){var Ee=or(ae);Ee.isEmpty()||(I=I||!Ee.getPriority().isEmpty(),C.push(new yn(re,Ee)))}}),0===C.length)return Kt.EMPTY_NODE;var P=Id(C,Dd,function(re){return re.name},Uo);if(I){var $=Id(C,Qn.getCompare());return new Kt(P,or(p),new Ti({".priority":$},{".priority":Qn}))}return new Kt(P,or(p),Ti.Default)}Object.defineProperties(yn,{MIN:{value:new yn(he,Kt.EMPTY_NODE)},MAX:{value:new yn(De,Au)}}),ir.__EMPTY_NODE=Kt.EMPTY_NODE,vl.__childrenNodeConstructor=Kt,function(g){Td=g}(Au),function(g){Ph=g}(Au),function(g){Oh=g}(or);var Ba=function(g){function p(v){var C=g.call(this)||this;return C.indexPath_=v,(0,B.assert)(!Ot(v)&&".priority"!==Wt(v),"Can't create PathIndex with empty path or .priority key"),C}return(0,ge.__extends)(p,g),p.prototype.extractChild=function(v){return v.getChild(this.indexPath_)},p.prototype.isDefinedOn=function(v){return!v.getChild(this.indexPath_).isEmpty()},p.prototype.compare=function(v,C){var I=this.extractChild(v.node),N=this.extractChild(C.node),P=I.compareTo(N);return 0===P?ie(v.name,C.name):P},p.prototype.makePost=function(v,C){var I=or(v),N=Kt.EMPTY_NODE.updateChild(this.indexPath_,I);return new yn(C,N)},p.prototype.maxPost=function(){var v=Kt.EMPTY_NODE.updateChild(this.indexPath_,Au);return new yn(De,v)},p.prototype.toString=function(){return wr(this.indexPath_,0).join("/")},p}(Ed),Mu=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return(0,ge.__extends)(p,g),p.prototype.compare=function(v,C){var I=v.node.compareTo(C.node);return 0===I?ie(v.name,C.name):I},p.prototype.isDefinedOn=function(v){return!0},p.prototype.indexedValueChanged=function(v,C){return!v.equals(C)},p.prototype.minPost=function(){return yn.MIN},p.prototype.maxPost=function(){return yn.MAX},p.prototype.makePost=function(v,C){var I=or(v);return new yn(C,I)},p.prototype.toString=function(){return".value"},p}(Ed),Si=new Mu,Ms="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ag=function(){var g=0,p=[];return function(v){var C=v===g;g=v;var I,N=new Array(8);for(I=7;I>=0;I--)N[I]=Ms.charAt(v%64),v=Math.floor(v/64);(0,B.assert)(0===v,"Cannot push at time == 0");var P=N.join("");if(C){for(I=11;I>=0&&63===p[I];I--)p[I]=0;p[I]++}else for(I=0;I<12;I++)p[I]=Math.floor(64*Math.random());for(I=0;I<12;I++)P+=Ms.charAt(p[I]);return(0,B.assert)(20===P.length,"nextPushId: Length should be 20."),P}}(),jf=function(g){if(g===""+Yn)return"-";var p=tr(g);if(null!=p)return""+(p+1);for(var v=new Array(g.length),C=0;C<v.length;C++)v[C]=g.charAt(C);if(v.length<786)return v.push("-"),v.join("");for(var I=v.length-1;I>=0&&"z"===v[I];)I--;if(-1===I)return De;var P=Ms.charAt(Ms.indexOf(v[I])+1);return v[I]=P,v.slice(0,I+1).join("")},Pt=function(g){if(g===""+Fr)return he;var p=tr(g);if(null!=p)return""+(p-1);for(var v=new Array(g.length),C=0;C<v.length;C++)v[C]=g.charAt(C);return"-"===v[v.length-1]?1===v.length?""+Yn:(delete v[v.length-1],v.join("")):(v[v.length-1]=Ms.charAt(Ms.indexOf(v[v.length-1])-1),v.join("")+"z".repeat(786-v.length))};function jo(g){return{type:"value",snapshotNode:g}}function bl(g,p){return{type:"child_added",snapshotNode:p,childName:g}}function bc(g,p){return{type:"child_removed",snapshotNode:p,childName:g}}function wl(g,p,v){return{type:"child_changed",snapshotNode:p,childName:g,oldSnap:v}}var Gf=function(){function g(p){this.index_=p}return g.prototype.updateChild=function(p,v,C,I,N,P){(0,B.assert)(p.isIndexed(this.index_),"A node must be indexed if only a child is updated");var $=p.getImmediateChild(v);return $.getChild(I).equals(C.getChild(I))&&$.isEmpty()===C.isEmpty()||(null!=P&&(C.isEmpty()?p.hasChild(v)?P.trackChildChange(bc(v,$)):(0,B.assert)(p.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):$.isEmpty()?P.trackChildChange(bl(v,C)):P.trackChildChange(wl(v,C,$))),p.isLeafNode()&&C.isEmpty())?p:p.updateImmediateChild(v,C).withIndex(this.index_)},g.prototype.updateFullNode=function(p,v,C){return null!=C&&(p.isLeafNode()||p.forEachChild(Qn,function(I,N){v.hasChild(I)||C.trackChildChange(bc(I,N))}),v.isLeafNode()||v.forEachChild(Qn,function(I,N){if(p.hasChild(I)){var P=p.getImmediateChild(I);P.equals(N)||C.trackChildChange(wl(I,N,P))}else C.trackChildChange(bl(I,N))})),v.withIndex(this.index_)},g.prototype.updatePriority=function(p,v){return p.isEmpty()?Kt.EMPTY_NODE:p.updatePriority(v)},g.prototype.filtersNodes=function(){return!1},g.prototype.getIndexedFilter=function(){return this},g.prototype.getIndex=function(){return this.index_},g}(),Ad=function(){function g(p){this.indexedFilter_=new Gf(p.getIndex()),this.index_=p.getIndex(),this.startPost_=g.getStartPost_(p),this.endPost_=g.getEndPost_(p)}return g.prototype.getStartPost=function(){return this.startPost_},g.prototype.getEndPost=function(){return this.endPost_},g.prototype.matches=function(p){return this.index_.compare(this.getStartPost(),p)<=0&&this.index_.compare(p,this.getEndPost())<=0},g.prototype.updateChild=function(p,v,C,I,N,P){return this.matches(new yn(v,C))||(C=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(p,v,C,I,N,P)},g.prototype.updateFullNode=function(p,v,C){v.isLeafNode()&&(v=Kt.EMPTY_NODE);var I=v.withIndex(this.index_);I=I.updatePriority(Kt.EMPTY_NODE);var N=this;return v.forEachChild(Qn,function(P,$){N.matches(new yn(P,$))||(I=I.updateImmediateChild(P,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(p,I,C)},g.prototype.updatePriority=function(p,v){return p},g.prototype.filtersNodes=function(){return!0},g.prototype.getIndexedFilter=function(){return this.indexedFilter_},g.prototype.getIndex=function(){return this.index_},g.getStartPost_=function(p){if(p.hasStart()){var v=p.getIndexStartName();return p.getIndex().makePost(p.getIndexStartValue(),v)}return p.getIndex().minPost()},g.getEndPost_=function(p){if(p.hasEnd()){var v=p.getIndexEndName();return p.getIndex().makePost(p.getIndexEndValue(),v)}return p.getIndex().maxPost()},g}(),Ze=function(){function g(p){this.rangedFilter_=new Ad(p),this.index_=p.getIndex(),this.limit_=p.getLimit(),this.reverse_=!p.isViewFromLeft()}return g.prototype.updateChild=function(p,v,C,I,N,P){return this.rangedFilter_.matches(new yn(v,C))||(C=Kt.EMPTY_NODE),p.getImmediateChild(v).equals(C)?p:p.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(p,v,C,I,N,P):this.fullLimitUpdateChild_(p,v,C,N,P)},g.prototype.updateFullNode=function(p,v,C){var I;if(v.isLeafNode()||v.isEmpty())I=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<v.numChildren()&&v.isIndexed(this.index_)){I=Kt.EMPTY_NODE.withIndex(this.index_);var N=void 0;N=this.reverse_?v.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):v.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var P=0;N.hasNext()&&P<this.limit_;){var $=N.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),$)<=0:this.index_.compare($,this.rangedFilter_.getEndPost())<=0))break;I=I.updateImmediateChild($.name,$.node),P++}}else{I=(I=v.withIndex(this.index_)).updatePriority(Kt.EMPTY_NODE);var re=void 0,ae=void 0,Ee=void 0;if(N=void 0,this.reverse_){N=I.getReverseIterator(this.index_),re=this.rangedFilter_.getEndPost(),ae=this.rangedFilter_.getStartPost();var Fe=this.index_.getCompare();Ee=function(kt,tn){return Fe(tn,kt)}}else N=I.getIterator(this.index_),re=this.rangedFilter_.getStartPost(),ae=this.rangedFilter_.getEndPost(),Ee=this.index_.getCompare();P=0;for(var tt=!1;N.hasNext();)$=N.getNext(),!tt&&Ee(re,$)<=0&&(tt=!0),tt&&P<this.limit_&&Ee($,ae)<=0?P++:I=I.updateImmediateChild($.name,Kt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(p,I,C)},g.prototype.updatePriority=function(p,v){return p},g.prototype.filtersNodes=function(){return!0},g.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},g.prototype.getIndex=function(){return this.index_},g.prototype.fullLimitUpdateChild_=function(p,v,C,I,N){var P;if(this.reverse_){var $=this.index_.getCompare();P=function(Dr,ms){return $(ms,Dr)}}else P=this.index_.getCompare();var Q=p;(0,B.assert)(Q.numChildren()===this.limit_,"");var re=new yn(v,C),ae=this.reverse_?Q.getFirstChild(this.index_):Q.getLastChild(this.index_),Ee=this.rangedFilter_.matches(re);if(Q.hasChild(v)){for(var Fe=Q.getImmediateChild(v),tt=I.getChildAfterChild(this.index_,ae,this.reverse_);null!=tt&&(tt.name===v||Q.hasChild(tt.name));)tt=I.getChildAfterChild(this.index_,tt,this.reverse_);var dt=null==tt?1:P(tt,re);if(Ee&&!C.isEmpty()&&dt>=0)return null!=N&&N.trackChildChange(wl(v,C,Fe)),Q.updateImmediateChild(v,C);null!=N&&N.trackChildChange(bc(v,Fe));var kt=Q.updateImmediateChild(v,Kt.EMPTY_NODE);return null!=tt&&this.rangedFilter_.matches(tt)?(null!=N&&N.trackChildChange(bl(tt.name,tt.node)),kt.updateImmediateChild(tt.name,tt.node)):kt}return C.isEmpty()?p:Ee&&P(ae,re)>=0?(null!=N&&(N.trackChildChange(bc(ae.name,ae.node)),N.trackChildChange(bl(v,C))),Q.updateImmediateChild(v,C).updateImmediateChild(ae.name,Kt.EMPTY_NODE)):p},g}(),mn=function(){function g(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qn}return g.prototype.hasStart=function(){return this.startSet_},g.prototype.hasStartAfter=function(){return this.startAfterSet_},g.prototype.hasEndBefore=function(){return this.endBeforeSet_},g.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},g.prototype.getIndexStartValue=function(){return(0,B.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},g.prototype.getIndexStartName=function(){return(0,B.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:he},g.prototype.hasEnd=function(){return this.endSet_},g.prototype.getIndexEndValue=function(){return(0,B.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},g.prototype.getIndexEndName=function(){return(0,B.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:De},g.prototype.hasLimit=function(){return this.limitSet_},g.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},g.prototype.getLimit=function(){return(0,B.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},g.prototype.getIndex=function(){return this.index_},g.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},g.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Qn},g.prototype.copy=function(){var p=new g;return p.limitSet_=this.limitSet_,p.limit_=this.limit_,p.startSet_=this.startSet_,p.indexStartValue_=this.indexStartValue_,p.startNameSet_=this.startNameSet_,p.indexStartName_=this.indexStartName_,p.endSet_=this.endSet_,p.indexEndValue_=this.indexEndValue_,p.endNameSet_=this.endNameSet_,p.indexEndName_=this.indexEndName_,p.index_=this.index_,p.viewFrom_=this.viewFrom_,p},g}();function Rs(g,p,v){var C=g.copy();return C.startSet_=!0,void 0===p&&(p=null),C.indexStartValue_=p,null!=v?(C.startNameSet_=!0,C.indexStartName_=v):(C.startNameSet_=!1,C.indexStartName_=""),C}function Ns(g,p,v){var C=g.copy();return C.endSet_=!0,void 0===p&&(p=null),C.indexEndValue_=p,void 0!==v?(C.endNameSet_=!0,C.indexEndName_=v):(C.endNameSet_=!1,C.indexEndName_=""),C}function Ec(g,p){var v=g.copy();return v.index_=p,v}function zf(g){var v,p={};return g.isDefault()||(g.index_===Qn?v="$priority":g.index_===Si?v="$value":g.index_===Bo?v="$key":((0,B.assert)(g.index_ instanceof Ba,"Unrecognized index type!"),v=g.index_.toString()),p.orderBy=(0,B.stringify)(v),g.startSet_&&(p.startAt=(0,B.stringify)(g.indexStartValue_),g.startNameSet_&&(p.startAt+=","+(0,B.stringify)(g.indexStartName_))),g.endSet_&&(p.endAt=(0,B.stringify)(g.indexEndValue_),g.endNameSet_&&(p.endAt+=","+(0,B.stringify)(g.indexEndName_))),g.limitSet_&&(g.isViewFromLeft()?p.limitToFirst=g.limit_:p.limitToLast=g.limit_)),p}function ks(g){var p={};if(g.startSet_&&(p.sp=g.indexStartValue_,g.startNameSet_&&(p.sn=g.indexStartName_)),g.endSet_&&(p.ep=g.indexEndValue_,g.endNameSet_&&(p.en=g.indexEndName_)),g.limitSet_){p.l=g.limit_;var v=g.viewFrom_;""===v&&(v=g.isViewFromLeft()?"l":"r"),p.vf=v}return g.index_!==Qn&&(p.i=g.index_.toString()),p}var Dc=function(g){function p(v,C,I,N){var P=g.call(this)||this;return P.repoInfo_=v,P.onDataUpdate_=C,P.authTokenProvider_=I,P.appCheckTokenProvider_=N,P.log_=Qe("p:rest:"),P.listens_={},P}return(0,ge.__extends)(p,g),p.prototype.reportStats=function(v){throw new Error("Method not implemented.")},p.getListenId_=function(v,C){return void 0!==C?"tag$"+C:((0,B.assert)(v._queryParams.isDefault(),"should have a tag if it's not a default query."),v._path.toString())},p.prototype.listen=function(v,C,I,N){var P=this,$=v._path.toString();this.log_("Listen called for "+$+" "+v._queryIdentifier);var Q=p.getListenId_(v,I),re={};this.listens_[Q]=re;var ae=zf(v._queryParams);this.restRequest_($+".json",ae,function(Ee,Fe){var tt=Fe;404===Ee&&(tt=null,Ee=null),null===Ee&&P.onDataUpdate_($,tt,!1,I),(0,B.safeGet)(P.listens_,Q)===re&&N(Ee?401===Ee?"permission_denied":"rest_error:"+Ee:"ok",null)})},p.prototype.unlisten=function(v,C){var I=p.getListenId_(v,C);delete this.listens_[I]},p.prototype.get=function(v){var C=this,I=zf(v._queryParams),N=v._path.toString(),P=new B.Deferred;return this.restRequest_(N+".json",I,function($,Q){var re=Q;404===$&&(re=null,$=null),null===$?(C.onDataUpdate_(N,re,!1,null),P.resolve(re)):P.reject(new Error(re))}),P.promise},p.prototype.refreshAuthToken=function(v){},p.prototype.restRequest_=function(v,C,I){var N=this;return void 0===C&&(C={}),C.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(P){var $=(0,ge.__read)(P,2),Q=$[0],re=$[1];Q&&Q.accessToken&&(C.auth=Q.accessToken),re&&re.token&&(C.ac=re.token);var ae=(N.repoInfo_.secure?"https://":"http://")+N.repoInfo_.host+v+"?ns="+N.repoInfo_.namespace+(0,B.querystring)(C);N.log_("Sending REST request for "+ae);var Ee=new XMLHttpRequest;Ee.onreadystatechange=function(){if(I&&4===Ee.readyState){N.log_("REST Response for "+ae+" received. status:",Ee.status,"response:",Ee.responseText);var Fe=null;if(Ee.status>=200&&Ee.status<300){try{Fe=(0,B.jsonEval)(Ee.responseText)}catch(tt){Ct("Failed to parse JSON response for "+ae+": "+Ee.responseText)}I(null,Fe)}else 401!==Ee.status&&404!==Ee.status&&Ct("Got unsuccessful REST response for "+ae+" Status: "+Ee.status),I(Ee.status);I=null}},Ee.open("GET",ae,!0),Ee.send()})},p}(Li),Br=function(){function g(){this.rootNode_=Kt.EMPTY_NODE}return g.prototype.getNode=function(p){return this.rootNode_.getChild(p)},g.prototype.updateSnapshot=function(p,v){this.rootNode_=this.rootNode_.updateChild(p,v)},g}();function Ho(){return{value:null,children:new Map}}function Cl(g,p,v){if(Ot(p))g.value=v,g.children.clear();else if(null!==g.value)g.value=g.value.updateChild(p,v);else{var C=Wt(p);g.children.has(C)||g.children.set(C,Ho()),Cl(g.children.get(C),p=Yt(p),v)}}function di(g,p){if(Ot(p))return g.value=null,g.children.clear(),!0;if(null!==g.value){if(g.value.isLeafNode())return!1;var v=g.value;return g.value=null,v.forEachChild(Qn,function(N,P){Cl(g,new Dn(N),P)}),di(g,p)}if(g.children.size>0){var C=Wt(p);return p=Yt(p),g.children.has(C)&&di(g.children.get(C),p)&&g.children.delete(C),0===g.children.size}return!0}function Bi(g,p,v){null!==g.value?v(p,g.value):function(g,p){g.children.forEach(function(v,C){p(C,v)})}(g,function(C,I){Bi(I,new Dn(p.toString()+"/"+C),v)})}var Ru=function(){function g(p){this.collection_=p,this.last_=null}return g.prototype.get=function(){var p=this.collection_.get(),v=(0,ge.__assign)({},p);return this.last_&&st(this.last_,function(C,I){v[C]=v[C]-I}),this.last_=p,v},g}(),Tc=function(){function g(p,v){this.server_=v,this.statsToReport_={},this.statsListener_=new Ru(p);var C=1e4+2e4*Math.random();Ss(this.reportStats_.bind(this),Math.floor(C))}return g.prototype.reportStats_=function(){var p=this,v=this.statsListener_.get(),C={},I=!1;st(v,function(N,P){P>0&&(0,B.contains)(p.statsToReport_,N)&&(C[N]=P,I=!0)}),I&&this.server_.reportStats(C),Ss(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},g}(),hi=(()=>(function(g){g[g.OVERWRITE=0]="OVERWRITE",g[g.MERGE=1]="MERGE",g[g.ACK_USER_WRITE=2]="ACK_USER_WRITE",g[g.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(hi||(hi={})),hi))();function Dl(g){return{fromUser:!1,fromServer:!0,queryId:g,tagged:!0}}var Mg=function(){function g(p,v,C){this.path=p,this.affectedTree=v,this.revert=C,this.type=hi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return g.prototype.operationForChild=function(p){if(Ot(this.path)){if(null!=this.affectedTree.value)return(0,B.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var v=this.affectedTree.subtree(new Dn(p));return new g(qt(),v,this.revert)}return(0,B.assert)(Wt(this.path)===p,"operationForChild called for unrelated child."),new g(Yt(this.path),this.affectedTree,this.revert)},g}(),qf=function(){function g(p,v){this.source=p,this.path=v,this.type=hi.LISTEN_COMPLETE}return g.prototype.operationForChild=function(p){return Ot(this.path)?new g(this.source,qt()):new g(this.source,Yt(this.path))},g}(),Md=function(){function g(p,v,C){this.source=p,this.path=v,this.snap=C,this.type=hi.OVERWRITE}return g.prototype.operationForChild=function(p){return Ot(this.path)?new g(this.source,qt(),this.snap.getImmediateChild(p)):new g(this.source,Yt(this.path),this.snap)},g}(),Ua=function(){function g(p,v,C){this.source=p,this.path=v,this.children=C,this.type=hi.MERGE}return g.prototype.operationForChild=function(p){if(Ot(this.path)){var v=this.children.subtree(new Dn(p));return v.isEmpty()?null:v.value?new Md(this.source,qt(),v.value):new g(this.source,qt(),v)}return(0,B.assert)(Wt(this.path)===p,"Can't get a merge for a child not on the path of the operation"),new g(this.source,Yt(this.path),this.children)},g.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},g}(),fi=function(){function g(p,v,C){this.node_=p,this.fullyInitialized_=v,this.filtered_=C}return g.prototype.isFullyInitialized=function(){return this.fullyInitialized_},g.prototype.isFiltered=function(){return this.filtered_},g.prototype.isCompleteForPath=function(p){if(Ot(p))return this.isFullyInitialized()&&!this.filtered_;var v=Wt(p);return this.isCompleteForChild(v)},g.prototype.isCompleteForChild=function(p){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(p)},g.prototype.getNode=function(){return this.node_},g}(),q_=function(p){this.query_=p,this.index_=this.query_._queryParams.getIndex()};function Ur(g,p,v,C,I,N){var P=C.filter(function($){return $.type===v});P.sort(function($,Q){return function(g,p,v){if(null==p.childName||null==v.childName)throw(0,B.assertionError)("Should only compare child_ events.");var C=new yn(p.childName,p.snapshotNode),I=new yn(v.childName,v.snapshotNode);return g.index_.compare(C,I)}(g,$,Q)}),P.forEach(function($){var Q=function(g,p,v){return"value"===p.type||"child_removed"===p.type||(p.prevName=v.getPredecessorChildName(p.childName,p.snapshotNode,g.index_)),p}(g,$,N);I.forEach(function(re){re.respondsTo($.type)&&p.push(re.createEvent(Q,g.query_))})})}function Ha(g,p){return{eventCache:g,serverCache:p}}function Rd(g,p,v,C){return Ha(new fi(p,v,C),g.serverCache)}function Wf(g,p,v,C){return Ha(g.eventCache,new fi(p,v,C))}function Ic(g){return g.eventCache.isFullyInitialized()?g.eventCache.getNode():null}function Ga(g){return g.serverCache.isFullyInitialized()?g.serverCache.getNode():null}var Ac,Ai=function(){function g(p,v){void 0===v&&(Ac||(Ac=new Di(Be)),v=Ac),this.value=p,this.children=v}return g.fromObject=function(p){var v=new g(null);return st(p,function(C,I){v=v.set(new Dn(C),I)}),v},g.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},g.prototype.findRootMostMatchingPathAndValue=function(p,v){if(null!=this.value&&v(this.value))return{path:qt(),value:this.value};if(Ot(p))return null;var C=Wt(p),I=this.children.get(C);if(null!==I){var N=I.findRootMostMatchingPathAndValue(Yt(p),v);return null!=N?{path:Tn(new Dn(C),N.path),value:N.value}:null}return null},g.prototype.findRootMostValueAndPath=function(p){return this.findRootMostMatchingPathAndValue(p,function(){return!0})},g.prototype.subtree=function(p){if(Ot(p))return this;var v=Wt(p),C=this.children.get(v);return null!==C?C.subtree(Yt(p)):new g(null)},g.prototype.set=function(p,v){if(Ot(p))return new g(v,this.children);var C=Wt(p),N=(this.children.get(C)||new g(null)).set(Yt(p),v),P=this.children.insert(C,N);return new g(this.value,P)},g.prototype.remove=function(p){if(Ot(p))return this.children.isEmpty()?new g(null):new g(null,this.children);var v=Wt(p),C=this.children.get(v);if(C){var I=C.remove(Yt(p)),N=void 0;return N=I.isEmpty()?this.children.remove(v):this.children.insert(v,I),null===this.value&&N.isEmpty()?new g(null):new g(this.value,N)}return this},g.prototype.get=function(p){if(Ot(p))return this.value;var v=Wt(p),C=this.children.get(v);return C?C.get(Yt(p)):null},g.prototype.setTree=function(p,v){if(Ot(p))return v;var P,C=Wt(p),N=(this.children.get(C)||new g(null)).setTree(Yt(p),v);return P=N.isEmpty()?this.children.remove(C):this.children.insert(C,N),new g(this.value,P)},g.prototype.fold=function(p){return this.fold_(qt(),p)},g.prototype.fold_=function(p,v){var C={};return this.children.inorderTraversal(function(I,N){C[I]=N.fold_(Tn(p,I),v)}),v(p,this.value,C)},g.prototype.findOnPath=function(p,v){return this.findOnPath_(p,qt(),v)},g.prototype.findOnPath_=function(p,v,C){var I=!!this.value&&C(v,this.value);if(I)return I;if(Ot(p))return null;var N=Wt(p),P=this.children.get(N);return P?P.findOnPath_(Yt(p),Tn(v,N),C):null},g.prototype.foreachOnPath=function(p,v){return this.foreachOnPath_(p,qt(),v)},g.prototype.foreachOnPath_=function(p,v,C){if(Ot(p))return this;this.value&&C(v,this.value);var I=Wt(p),N=this.children.get(I);return N?N.foreachOnPath_(Yt(p),Tn(v,I),C):new g(null)},g.prototype.foreach=function(p){this.foreach_(qt(),p)},g.prototype.foreach_=function(p,v){this.children.inorderTraversal(function(C,I){I.foreach_(Tn(p,C),v)}),this.value&&v(p,this.value)},g.prototype.foreachChild=function(p){this.children.inorderTraversal(function(v,C){C.value&&p(v,C.value)})},g}(),ho=function(){function g(p){this.writeTree_=p}return g.empty=function(){return new g(new Ai(null))},g}();function Os(g,p,v){if(Ot(p))return new ho(new Ai(v));var C=g.writeTree_.findRootMostValueAndPath(p);if(null!=C){var I=C.path,N=C.value,P=Ei(I,p);return N=N.updateChild(P,v),new ho(g.writeTree_.set(I,N))}var $=new Ai(v),Q=g.writeTree_.setTree(p,$);return new ho(Q)}function Bh(g,p,v){var C=g;return st(v,function(I,N){C=Os(C,Tn(p,I),N)}),C}function Rg(g,p){if(Ot(p))return ho.empty();var v=g.writeTree_.setTree(p,new Ai(null));return new ho(v)}function ca(g,p){return null!=os(g,p)}function os(g,p){var v=g.writeTree_.findRootMostValueAndPath(p);return null!=v?g.writeTree_.get(v.path).getChild(Ei(v.path,p)):null}function Nu(g){var p=[],v=g.writeTree_.value;return null!=v?v.isLeafNode()||v.forEachChild(Qn,function(C,I){p.push(new yn(C,I))}):g.writeTree_.children.inorderTraversal(function(C,I){null!=I.value&&p.push(new yn(C,I.value))}),p}function da(g,p){if(Ot(p))return g;var v=os(g,p);return new ho(null!=v?new Ai(v):g.writeTree_.subtree(p))}function Mc(g){return g.writeTree_.isEmpty()}function ku(g,p){return W_(qt(),g.writeTree_,p)}function W_(g,p,v){if(null!=p.value)return v.updateChild(g,p.value);var C=null;return p.children.inorderTraversal(function(I,N){".priority"===I?((0,B.assert)(null!==N.value,"Priority writes must always be leaf nodes"),C=N.value):v=W_(Tn(g,I),N,v)}),!v.getChild(g).isEmpty()&&null!==C&&(v=v.updateChild(Tn(g,".priority"),C)),v}function Rc(g,p){return Ln(p,g)}function fo(g,p){if(g.snap)return kr(g.path,p);for(var v in g.children)if(g.children.hasOwnProperty(v)&&kr(Tn(g.path,v),p))return!0;return!1}function Y_(g){return g.visible}function Uh(g,p,v){for(var C=ho.empty(),I=0;I<g.length;++I){var N=g[I];if(p(N)){var P=N.path,$=void 0;if(N.snap)kr(v,P)?C=Os(C,$=Ei(v,P),N.snap):kr(P,v)&&($=Ei(P,v),C=Os(C,qt(),N.snap.getChild($)));else{if(!N.children)throw(0,B.assertionError)("WriteRecord should have .snap or .children");if(kr(v,P))C=Bh(C,$=Ei(v,P),N.children);else if(kr(P,v))if(Ot($=Ei(P,v)))C=Bh(C,qt(),N.children);else{var Q=(0,B.safeGet)(N.children,Wt($));if(Q){var re=Q.getChild(Yt($));C=Os(C,qt(),re)}}}}}return C}function Tl(g,p,v,C,I){if(C||I){var Q=da(g.visibleWrites,p);return!I&&Mc(Q)?v:I||null!=v||ca(Q,qt())?ku(Uh(g.allWrites,function(Fe){return(Fe.visible||I)&&(!C||!~C.indexOf(Fe.writeId))&&(kr(Fe.path,p)||kr(p,Fe.path))},p),v||Kt.EMPTY_NODE):null}var N=os(g.visibleWrites,p);if(null!=N)return N;var P=da(g.visibleWrites,p);return Mc(P)?v:null!=v||ca(P,qt())?ku(P,v||Kt.EMPTY_NODE):null}function Ps(g,p,v,C){return Tl(g.writeTree,g.treePath,p,v,C)}function Nd(g,p){return function(g,p,v){var C=Kt.EMPTY_NODE,I=os(g.visibleWrites,p);if(I)return I.isLeafNode()||I.forEachChild(Qn,function($,Q){C=C.updateImmediateChild($,Q)}),C;if(v){var N=da(g.visibleWrites,p);return v.forEachChild(Qn,function($,Q){var re=ku(da(N,new Dn($)),Q);C=C.updateImmediateChild($,re)}),Nu(N).forEach(function($){C=C.updateImmediateChild($.name,$.node)}),C}return Nu(da(g.visibleWrites,p)).forEach(function($){C=C.updateImmediateChild($.name,$.node)}),C}(g.writeTree,g.treePath,p)}function zn(g,p,v,C){return function(g,p,v,C,I){(0,B.assert)(C||I,"Either existingEventSnap or existingServerSnap must exist");var N=Tn(p,v);if(ca(g.visibleWrites,N))return null;var P=da(g.visibleWrites,N);return Mc(P)?I.getChild(v):ku(P,I.getChild(v))}(g.writeTree,g.treePath,p,v,C)}function ni(g,p){return function(g,p){return os(g.visibleWrites,p)}(g.writeTree,Tn(g.treePath,p))}function on(g,p,v){return function(g,p,v,C){var I=Tn(p,v),N=os(g.visibleWrites,I);return null!=N?N:C.isCompleteForChild(v)?ku(da(g.visibleWrites,I),C.getNode().getImmediateChild(v)):null}(g.writeTree,g.treePath,p,v)}function $n(g,p){return Ln(Tn(g.treePath,p),g.writeTree)}function Ln(g,p){return{treePath:g,writeTree:p}}var Ng=function(){function g(){this.changeMap=new Map}return g.prototype.trackChildChange=function(p){var v=p.type,C=p.childName;(0,B.assert)("child_added"===v||"child_changed"===v||"child_removed"===v,"Only child changes supported for tracking"),(0,B.assert)(".priority"!==C,"Only non-priority child changes can be tracked.");var I=this.changeMap.get(C);if(I){var N=I.type;if("child_added"===v&&"child_removed"===N)this.changeMap.set(C,wl(C,p.snapshotNode,I.snapshotNode));else if("child_removed"===v&&"child_added"===N)this.changeMap.delete(C);else if("child_removed"===v&&"child_changed"===N)this.changeMap.set(C,bc(C,I.oldSnap));else if("child_changed"===v&&"child_added"===N)this.changeMap.set(C,bl(C,p.snapshotNode));else{if("child_changed"!==v||"child_changed"!==N)throw(0,B.assertionError)("Illegal combination of changes: "+p+" occurred after "+I);this.changeMap.set(C,wl(C,p.snapshotNode,I.oldSnap))}}else this.changeMap.set(C,p)},g.prototype.getChanges=function(){return Array.from(this.changeMap.values())},g}(),Kf=function(){function g(){}return g.prototype.getCompleteChild=function(p){return null},g.prototype.getChildAfterChild=function(p,v,C){return null},g}(),ha=new Kf,Pc=function(){function g(p,v,C){void 0===C&&(C=null),this.writes_=p,this.viewCache_=v,this.optCompleteServerCache_=C}return g.prototype.getCompleteChild=function(p){var v=this.viewCache_.eventCache;if(v.isCompleteForChild(p))return v.getNode().getImmediateChild(p);var C=null!=this.optCompleteServerCache_?new fi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return on(this.writes_,p,C)},g.prototype.getChildAfterChild=function(p,v,C){var I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ga(this.viewCache_),N=function(g,p,v,C,I,N){return function(g,p,v,C,I,N,P){var $,Q=da(g.visibleWrites,p),re=os(Q,qt());if(null!=re)$=re;else{if(null==v)return[];$=ku(Q,v)}if(($=$.withIndex(P)).isEmpty()||$.isLeafNode())return[];for(var ae=[],Ee=P.getCompare(),Fe=N?$.getReverseIteratorFrom(C,P):$.getIteratorFrom(C,P),tt=Fe.getNext();tt&&ae.length<I;)0!==Ee(tt,C)&&ae.push(tt),tt=Fe.getNext();return ae}(g.writeTree,g.treePath,p,v,C,I,N)}(this.writes_,I,v,1,C,p);return 0===N.length?null:N[0]},g}();function Fc(g,p,v,C,I,N){var P=p.eventCache;if(null!=ni(C,v))return p;var $=void 0,Q=void 0;if(Ot(v))if((0,B.assert)(p.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),p.serverCache.isFiltered()){var re=Ga(p),Ee=Nd(C,re instanceof Kt?re:Kt.EMPTY_NODE);$=g.filter.updateFullNode(p.eventCache.getNode(),Ee,N)}else{var Fe=Ps(C,Ga(p));$=g.filter.updateFullNode(p.eventCache.getNode(),Fe,N)}else{var tt=Wt(v);if(".priority"===tt){(0,B.assert)(1===rs(v),"Can't have a priority with additional path components");var dt=P.getNode(),Lt=zn(C,v,dt,Q=p.serverCache.getNode());$=null!=Lt?g.filter.updatePriority(dt,Lt):P.getNode()}else{var kt=Yt(v),tn=void 0;if(P.isCompleteForChild(tt)){Q=p.serverCache.getNode();var Dr=zn(C,v,P.getNode(),Q);tn=null!=Dr?P.getNode().getImmediateChild(tt).updateChild(kt,Dr):P.getNode().getImmediateChild(tt)}else tn=on(C,tt,p.serverCache);$=null!=tn?g.filter.updateChild(P.getNode(),tt,tn,kt,I,N):P.getNode()}}return Rd(p,$,P.isFullyInitialized()||Ot(v),g.filter.filtersNodes())}function xd(g,p,v,C,I,N,P,$){var re,Q=p.serverCache,ae=P?g.filter:g.filter.getIndexedFilter();if(Ot(v))re=ae.updateFullNode(Q.getNode(),C,null);else if(ae.filtersNodes()&&!Q.isFiltered()){var Ee=Q.getNode().updateChild(v,C);re=ae.updateFullNode(Q.getNode(),Ee,null)}else{var Fe=Wt(v);if(!Q.isCompleteForPath(v)&&rs(v)>1)return p;var tt=Yt(v),Lt=Q.getNode().getImmediateChild(Fe).updateChild(tt,C);re=".priority"===Fe?ae.updatePriority(Q.getNode(),Lt):ae.updateChild(Q.getNode(),Fe,Lt,tt,ha,null)}var kt=Wf(p,re,Q.isFullyInitialized()||Ot(v),ae.filtersNodes());return Fc(g,kt,v,I,new Pc(I,kt,N),$)}function Ou(g,p,v,C,I,N,P){var Q,re,$=p.eventCache,ae=new Pc(I,p,N);if(Ot(v))re=g.filter.updateFullNode(p.eventCache.getNode(),C,P),Q=Rd(p,re,!0,g.filter.filtersNodes());else{var Ee=Wt(v);if(".priority"===Ee)re=g.filter.updatePriority(p.eventCache.getNode(),C),Q=Rd(p,re,$.isFullyInitialized(),$.isFiltered());else{var Fe=Yt(v),tt=$.getNode().getImmediateChild(Ee),dt=void 0;if(Ot(Fe))dt=C;else{var Lt=ae.getCompleteChild(Ee);dt=null!=Lt?".priority"===ml(Fe)&&Lt.getChild(Is(Fe)).isEmpty()?Lt:Lt.updateChild(Fe,C):Kt.EMPTY_NODE}Q=tt.equals(dt)?p:Rd(p,g.filter.updateChild($.getNode(),Ee,dt,Fe,ae,P),$.isFullyInitialized(),g.filter.filtersNodes())}}return Q}function Lc(g,p){return g.eventCache.isCompleteForChild(p)}function wt(g,p,v){return v.foreach(function(C,I){p=p.updateChild(C,I)}),p}function jr(g,p,v,C,I,N,P,$){if(p.serverCache.getNode().isEmpty()&&!p.serverCache.isFullyInitialized())return p;var re,Q=p;re=Ot(v)?C:new Ai(null).setTree(v,C);var ae=p.serverCache.getNode();return re.children.inorderTraversal(function(Ee,Fe){if(ae.hasChild(Ee)){var dt=wt(0,p.serverCache.getNode().getImmediateChild(Ee),Fe);Q=xd(g,Q,new Dn(Ee),dt,I,N,P,$)}}),re.children.inorderTraversal(function(Ee,Fe){var tt=!p.serverCache.isCompleteForChild(Ee)&&void 0===Fe.value;if(!ae.hasChild(Ee)&&!tt){var Lt=wt(0,p.serverCache.getNode().getImmediateChild(Ee),Fe);Q=xd(g,Q,new Dn(Ee),Lt,I,N,P,$)}}),Q}var Fs=function(){function g(p,v){this.query_=p,this.eventRegistrations_=[];var C=this.query_._queryParams,I=new Gf(C.getIndex()),N=function(g){return g.loadsAllData()?new Gf(g.getIndex()):g.hasLimit()?new Ze(g):new Ad(g)}(C);this.processor_=function(g){return{filter:g}}(N);var P=v.serverCache,$=v.eventCache,Q=I.updateFullNode(Kt.EMPTY_NODE,P.getNode(),null),re=N.updateFullNode(Kt.EMPTY_NODE,$.getNode(),null),ae=new fi(Q,P.isFullyInitialized(),I.filtersNodes()),Ee=new fi(re,$.isFullyInitialized(),N.filtersNodes());this.viewCache_=Ha(Ee,ae),this.eventGenerator_=new q_(this.query_)}return Object.defineProperty(g.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),g}();function us(g,p){var v=Ga(g.viewCache_);return v&&(g.query._queryParams.loadsAllData()||!Ot(p)&&!v.getImmediateChild(Wt(p)).isEmpty())?v.getChild(p):null}function Go(g){return 0===g.eventRegistrations_.length}function Ls(g,p,v){var C=[];if(v){(0,B.assert)(null==p,"A cancel should cancel all event registrations.");var I=g.query._path;g.eventRegistrations_.forEach(function(Q){var re=Q.createCancelEvent(v,I);re&&C.push(re)})}if(p){for(var N=[],P=0;P<g.eventRegistrations_.length;++P){var $=g.eventRegistrations_[P];if($.matches(p)){if(p.hasAnyCallback()){N=N.concat(g.eventRegistrations_.slice(P+1));break}}else N.push($)}g.eventRegistrations_=N}else g.eventRegistrations_=[];return C}function $a(g,p,v,C){p.type===hi.MERGE&&null!==p.source.queryId&&((0,B.assert)(Ga(g.viewCache_),"We should always have a full cache before handling merges"),(0,B.assert)(Ic(g.viewCache_),"Missing event cache, even though we have a server cache"));var I=g.viewCache_,N=function(g,p,v,C,I){var P,$,N=new Ng;if(v.type===hi.OVERWRITE){var Q=v;Q.source.fromUser?P=Ou(g,p,Q.path,Q.snap,C,I,N):((0,B.assert)(Q.source.fromServer,"Unknown source."),$=Q.source.tagged||p.serverCache.isFiltered()&&!Ot(Q.path),P=xd(g,p,Q.path,Q.snap,C,I,$,N))}else if(v.type===hi.MERGE){var re=v;re.source.fromUser?P=function(g,p,v,C,I,N,P){var $=p;return C.foreach(function(Q,re){var ae=Tn(v,Q);Lc(p,Wt(ae))&&($=Ou(g,$,ae,re,I,N,P))}),C.foreach(function(Q,re){var ae=Tn(v,Q);Lc(p,Wt(ae))||($=Ou(g,$,ae,re,I,N,P))}),$}(g,p,re.path,re.children,C,I,N):((0,B.assert)(re.source.fromServer,"Unknown source."),$=re.source.tagged||p.serverCache.isFiltered(),P=jr(g,p,re.path,re.children,C,I,$,N))}else if(v.type===hi.ACK_USER_WRITE){var ae=v;P=ae.revert?function(g,p,v,C,I,N){var P;if(null!=ni(C,v))return p;var $=new Pc(C,p,I),Q=p.eventCache.getNode(),re=void 0;if(Ot(v)||".priority"===Wt(v)){var ae=void 0;if(p.serverCache.isFullyInitialized())ae=Ps(C,Ga(p));else{var Ee=p.serverCache.getNode();(0,B.assert)(Ee instanceof Kt,"serverChildren would be complete if leaf node"),ae=Nd(C,Ee)}re=g.filter.updateFullNode(Q,ae=ae,N)}else{var Fe=Wt(v),tt=on(C,Fe,p.serverCache);null==tt&&p.serverCache.isCompleteForChild(Fe)&&(tt=Q.getImmediateChild(Fe)),(re=null!=tt?g.filter.updateChild(Q,Fe,tt,Yt(v),$,N):p.eventCache.getNode().hasChild(Fe)?g.filter.updateChild(Q,Fe,Kt.EMPTY_NODE,Yt(v),$,N):Q).isEmpty()&&p.serverCache.isFullyInitialized()&&(P=Ps(C,Ga(p))).isLeafNode()&&(re=g.filter.updateFullNode(re,P,N))}return P=p.serverCache.isFullyInitialized()||null!=ni(C,qt()),Rd(p,re,P,g.filter.filtersNodes())}(g,p,ae.path,C,I,N):function(g,p,v,C,I,N,P){if(null!=ni(I,v))return p;var $=p.serverCache.isFiltered(),Q=p.serverCache;if(null!=C.value){if(Ot(v)&&Q.isFullyInitialized()||Q.isCompleteForPath(v))return xd(g,p,v,Q.getNode().getChild(v),I,N,$,P);if(Ot(v)){var re=new Ai(null);return Q.getNode().forEachChild(Bo,function(Ee,Fe){re=re.set(new Dn(Ee),Fe)}),jr(g,p,v,re,I,N,$,P)}return p}var ae=new Ai(null);return C.foreach(function(Ee,Fe){var tt=Tn(v,Ee);Q.isCompleteForPath(tt)&&(ae=ae.set(Ee,Q.getNode().getChild(tt)))}),jr(g,p,v,ae,I,N,$,P)}(g,p,ae.path,ae.affectedTree,C,I,N)}else{if(v.type!==hi.LISTEN_COMPLETE)throw(0,B.assertionError)("Unknown operation type: "+v.type);P=function(g,p,v,C,I){var N=p.serverCache;return Fc(g,Wf(p,N.getNode(),N.isFullyInitialized()||Ot(v),N.isFiltered()),v,C,ha,I)}(g,p,v.path,C,N)}var Ee=N.getChanges();return function(g,p,v){var C=p.eventCache;if(C.isFullyInitialized()){var I=C.getNode().isLeafNode()||C.getNode().isEmpty(),N=Ic(g);(v.length>0||!g.eventCache.isFullyInitialized()||I&&!C.getNode().equals(N)||!C.getNode().getPriority().equals(N.getPriority()))&&v.push(jo(Ic(p)))}}(p,P,Ee),{viewCache:P,changes:Ee}}(g.processor_,I,p,v,C);return function(g,p){(0,B.assert)(p.eventCache.getNode().isIndexed(g.filter.getIndex()),"Event snap not indexed"),(0,B.assert)(p.serverCache.getNode().isIndexed(g.filter.getIndex()),"Server snap not indexed")}(g.processor_,N.viewCache),(0,B.assert)(N.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),g.viewCache_=N.viewCache,sr(g,N.changes,N.viewCache.eventCache.getNode(),null)}function sr(g,p,v,C){return function(g,p,v,C){var I=[],N=[];return p.forEach(function(P){"child_changed"===P.type&&g.index_.indexedValueChanged(P.oldSnap,P.snapshotNode)&&N.push(function(g,p){return{type:"child_moved",snapshotNode:p,childName:g}}(P.childName,P.snapshotNode))}),Ur(g,I,"child_removed",p,C,v),Ur(g,I,"child_added",p,C,v),Ur(g,I,"child_moved",N,C,v),Ur(g,I,"child_changed",p,C,v),Ur(g,I,"value",p,C,v),I}(g.eventGenerator_,p,v,C?[C]:g.eventRegistrations_)}var Al,$o,Er=function(){this.views=new Map};function Uc(g,p,v,C){var I,N,P=p.source.queryId;if(null!==P){var $=g.views.get(P);return(0,B.assert)(null!=$,"SyncTree gave us an op for an invalid query."),$a($,p,v,C)}var Q=[];try{for(var re=(0,ge.__values)(g.views.values()),ae=re.next();!ae.done;ae=re.next())Q=Q.concat($a($=ae.value,p,v,C))}catch(Ee){I={error:Ee}}finally{try{ae&&!ae.done&&(N=re.return)&&N.call(re)}finally{if(I)throw I.error}}return Q}function dr(g,p,v,C,I){var P=g.views.get(p._queryIdentifier);if(!P){var $=Ps(v,I?C:null),Q=!1;$?Q=!0:C instanceof Kt?($=Nd(v,C),Q=!1):($=Kt.EMPTY_NODE,Q=!1);var re=Ha(new fi($,Q,!1),new fi(C,I,!1));return new Fs(p,re)}return P}function xn(g){var p,v,C=[];try{for(var I=(0,ge.__values)(g.views.values()),N=I.next();!N.done;N=I.next()){var P=N.value;P.query._queryParams.loadsAllData()||C.push(P)}}catch($){p={error:$}}finally{try{N&&!N.done&&(v=I.return)&&v.call(I)}finally{if(p)throw p.error}}return C}function po(g,p){var v,C,I=null;try{for(var N=(0,ge.__values)(g.views.values()),P=N.next();!P.done;P=N.next())I=I||us(P.value,p)}catch(Q){v={error:Q}}finally{try{P&&!P.done&&(C=N.return)&&C.call(N)}finally{if(v)throw v.error}}return I}function Pu(g,p){return p._queryParams.loadsAllData()?Ri(g):g.views.get(p._queryIdentifier)}function jh(g,p){return null!=Pu(g,p)}function qa(g){return null!=Ri(g)}function Ri(g){var p,v;try{for(var C=(0,ge.__values)(g.views.values()),I=C.next();!I.done;I=C.next()){var N=I.value;if(N.query._queryParams.loadsAllData())return N}}catch(P){p={error:P}}finally{try{I&&!I.done&&(v=C.return)&&v.call(C)}finally{if(p)throw p.error}}return null}var Fu=1,Vs=function(p){this.listenProvider_=p,this.syncPointTree_=new Ai(null),this.pendingWriteTree_={visibleWrites:ho.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function jc(g,p,v,C,I){return function(g,p,v,C,I){(0,B.assert)(C>g.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),g.allWrites.push({path:p,snap:v,writeId:C,visible:I}),I&&(g.visibleWrites=Os(g.visibleWrites,p,v)),g.lastWriteId=C}(g.pendingWriteTree_,p,v,C,I),I?ga(g,new Md({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},p,v)):[]}function Wa(g,p,v){void 0===v&&(v=!1);var C=function(g,p){for(var v=0;v<g.allWrites.length;v++){var C=g.allWrites[v];if(C.writeId===p)return C}return null}(g.pendingWriteTree_,p);if(function(g,p){var v=g.allWrites.findIndex(function(re){return re.writeId===p});(0,B.assert)(v>=0,"removeWrite called with nonexistent writeId.");var C=g.allWrites[v];g.allWrites.splice(v,1);for(var I=C.visible,N=!1,P=g.allWrites.length-1;I&&P>=0;){var $=g.allWrites[P];$.visible&&(P>=v&&fo($,C.path)?I=!1:kr(C.path,$.path)&&(N=!0)),P--}return!!I&&(N?(function(g){g.visibleWrites=Uh(g.allWrites,Y_,qt()),g.lastWriteId=g.allWrites.length>0?g.allWrites[g.allWrites.length-1].writeId:-1}(g),!0):(C.snap?g.visibleWrites=Rg(g.visibleWrites,C.path):st(C.children,function(re){g.visibleWrites=Rg(g.visibleWrites,Tn(C.path,re))}),!0))}(g.pendingWriteTree_,p)){var N=new Ai(null);return null!=C.snap?N=N.set(qt(),!0):st(C.children,function(P){N=N.set(new Dn(P),!0)}),ga(g,new Mg(C.path,N,v))}return[]}function Pd(g,p,v){return ga(g,new Md({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},p,v))}function Ya(g,p,v,C){var I=p._path,N=g.syncPointTree_.get(I),P=[];if(N&&("default"===p._queryIdentifier||jh(N,p))){var $=function(g,p,v,C){var I,N,P=p._queryIdentifier,$=[],Q=[],re=qa(g);if("default"===P)try{for(var ae=(0,ge.__values)(g.views.entries()),Ee=ae.next();!Ee.done;Ee=ae.next()){var dt,Fe=(0,ge.__read)(Ee.value,2),tt=Fe[0];Q=Q.concat(Ls(dt=Fe[1],v,C)),Go(dt)&&(g.views.delete(tt),dt.query._queryParams.loadsAllData()||$.push(dt.query))}}catch(Lt){I={error:Lt}}finally{try{Ee&&!Ee.done&&(N=ae.return)&&N.call(ae)}finally{if(I)throw I.error}}else(dt=g.views.get(P))&&(Q=Q.concat(Ls(dt,v,C)),Go(dt)&&(g.views.delete(P),dt.query._queryParams.loadsAllData()||$.push(dt.query)));return re&&!qa(g)&&$.push(new((0,B.assert)(Al,"Reference.ts has not been loaded"),Al)(p._repo,p._path)),{removed:$,events:Q}}(N,p,v,C);(function(g){return 0===g.views.size})(N)&&(g.syncPointTree_=g.syncPointTree_.remove(I));var Q=$.removed;P=$.events;var re=-1!==Q.findIndex(function(Dr){return Dr._queryParams.loadsAllData()}),ae=g.syncPointTree_.findOnPath(I,function(Dr,ms){return qa(ms)});if(re&&!ae){var Ee=g.syncPointTree_.subtree(I);if(!Ee.isEmpty())for(var Fe=function(g){return g.fold(function(p,v,C){if(v&&qa(v))return[Ri(v)];var N=[];return v&&(N=xn(v)),st(C,function(P,$){N=N.concat($)}),N})}(Ee),tt=0;tt<Fe.length;++tt){var dt=Fe[tt],Lt=dt.query,kt=cn(g,dt);g.listenProvider_.startListening(Nl(Lt),ma(g,Lt),kt.hashFn,kt.onComplete)}}!ae&&Q.length>0&&!C&&(re?g.listenProvider_.stopListening(Nl(p),null):Q.forEach(function(Dr){var ms=g.queryToTagMap.get(Bs(Dr));g.listenProvider_.stopListening(Nl(Dr),ms)})),function(g,p){for(var v=0;v<p.length;++v){var C=p[v];if(!C._queryParams.loadsAllData()){var I=Bs(C),N=g.queryToTagMap.get(I);g.queryToTagMap.delete(I),g.tagToQueryMap.delete(N)}}}(g,Q)}return P}function zh(g,p,v){var C=p._path,I=null,N=!1;g.syncPointTree_.foreachOnPath(C,function(Lt,kt){var tn=Ei(Lt,C);I=I||po(kt,tn),N=N||qa(kt)});var $,P=g.syncPointTree_.get(C);P?(N=N||qa(P),I=I||po(P,qt())):(P=new Er,g.syncPointTree_=g.syncPointTree_.set(C,P)),null!=I?$=!0:($=!1,I=Kt.EMPTY_NODE,g.syncPointTree_.subtree(C).foreachChild(function(Lt,kt){var tn=po(kt,qt());tn&&(I=I.updateImmediateChild(Lt,tn))}));var re=jh(P,p);if(!re&&!p._queryParams.loadsAllData()){var ae=Bs(p);(0,B.assert)(!g.queryToTagMap.has(ae),"View does not exist, but we have a tag");var Ee=Fu++;g.queryToTagMap.set(ae,Ee),g.tagToQueryMap.set(Ee,ae)}var tt=function(g,p,v,C,I,N){var P=dr(g,p,C,I,N);return g.views.has(p._queryIdentifier)||g.views.set(p._queryIdentifier,P),function(g,p){g.eventRegistrations_.push(p)}(P,v),function(g,p){var v=g.viewCache_.eventCache,C=[];return v.getNode().isLeafNode()||v.getNode().forEachChild(Qn,function(N,P){C.push(bl(N,P))}),v.isFullyInitialized()&&C.push(jo(v.getNode())),sr(g,C,v.getNode(),p)}(P,v)}(P,p,v,Rc(g.pendingWriteTree_,C),I,$);if(!re&&!N){var dt=Pu(P,p);tt=tt.concat(function(g,p,v){var C=p._path,I=ma(g,p),N=cn(g,v),P=g.listenProvider_.startListening(Nl(p),I,N.hashFn,N.onComplete),$=g.syncPointTree_.subtree(C);if(I)(0,B.assert)(!qa($.value),"If we're adding a query, it shouldn't be shadowed");else for(var Q=$.fold(function(Ee,Fe,tt){if(!Ot(Ee)&&Fe&&qa(Fe))return[Ri(Fe).query];var dt=[];return Fe&&(dt=dt.concat(xn(Fe).map(function(Lt){return Lt.query}))),st(tt,function(Lt,kt){dt=dt.concat(kt)}),dt}),re=0;re<Q.length;++re){var ae=Q[re];g.listenProvider_.stopListening(Nl(ae),ma(g,ae))}return P}(g,p,dt))}return tt}function Ml(g,p,v){var I=g.pendingWriteTree_,N=g.syncPointTree_.findOnPath(p,function(P,$){var re=po($,Ei(P,p));if(re)return re});return Tl(I,p,N,v,!0)}function ga(g,p){return kg(p,g.syncPointTree_,null,Rc(g.pendingWriteTree_,qt()))}function kg(g,p,v,C){if(Ot(g.path))return Rl(g,p,v,C);var I=p.get(qt());null==v&&null!=I&&(v=po(I,qt()));var N=[],P=Wt(g.path),$=g.operationForChild(P),Q=p.children.get(P);if(Q&&$){var re=v?v.getImmediateChild(P):null,ae=$n(C,P);N=N.concat(kg($,Q,re,ae))}return I&&(N=N.concat(Uc(I,g,C,v))),N}function Rl(g,p,v,C){var I=p.get(qt());null==v&&null!=I&&(v=po(I,qt()));var N=[];return p.children.inorderTraversal(function(P,$){var Q=v?v.getImmediateChild(P):null,re=$n(C,P),ae=g.operationForChild(P);ae&&(N=N.concat(Rl(ae,$,Q,re)))}),I&&(N=N.concat(Uc(I,g,C,v))),N}function cn(g,p){var v=p.query,C=ma(g,v);return{hashFn:function(){var I=function(g){return g.viewCache_.serverCache.getNode()}(p)||Kt.EMPTY_NODE;return I.hash()},onComplete:function(I){if("ok"===I)return C?function(g,p,v){var C=Ka(g,v);if(C){var I=Vu(C),N=I.path,P=I.queryId,$=Ei(N,p);return Us(g,N,new qf(Dl(P),$))}return[]}(g,v._path,C):function(g,p){return ga(g,new qf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},p))}(g,v._path);var N=function(g,p){var v="Unknown Error";"too_big"===g?v="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===g?v="Client doesn't have permission to access the desired data.":"unavailable"===g&&(v="The service is unavailable");var C=new Error(g+" at "+p._path.toString()+": "+v);return C.code=g.toUpperCase(),C}(I,v);return Ya(g,v,null,N)}}}function ma(g,p){var v=Bs(p);return g.queryToTagMap.get(v)}function Bs(g){return g._path.toString()+"$"+g._queryIdentifier}function Ka(g,p){return g.tagToQueryMap.get(p)}function Vu(g){var p=g.indexOf("$");return(0,B.assert)(-1!==p&&p<g.length-1,"Bad queryKey."),{queryId:g.substr(p+1),path:new Dn(g.substr(0,p))}}function Us(g,p,v){var C=g.syncPointTree_.get(p);return(0,B.assert)(C,"Missing sync point for query tag that we're tracking"),Uc(C,v,Rc(g.pendingWriteTree_,p),null)}function Nl(g){return g._queryParams.loadsAllData()&&!g._queryParams.isDefault()?new((0,B.assert)($o,"Reference.ts has not been loaded"),$o)(g._repo,g._path):g}var Bu=function(){function g(p){this.node_=p}return g.prototype.getImmediateChild=function(p){return new g(this.node_.getImmediateChild(p))},g.prototype.node=function(){return this.node_},g}(),mo=function(){function g(p,v){this.syncTree_=p,this.path_=v}return g.prototype.getImmediateChild=function(p){var v=Tn(this.path_,p);return new g(this.syncTree_,v)},g.prototype.node=function(){return Ml(this.syncTree_,this.path_)},g}(),Vn=function(g,p,v){return g&&"object"==typeof g?((0,B.assert)(".sv"in g,"Unexpected leaf node or priority contents"),"string"==typeof g[".sv"]?ep(g[".sv"],p,v):"object"==typeof g[".sv"]?xg(g[".sv"],p):void(0,B.assert)(!1,"Unexpected server value: "+JSON.stringify(g,null,2))):g},ep=function(g,p,v){if("timestamp"===g)return v.timestamp;(0,B.assert)(!1,"Unexpected server value: "+g)},xg=function(g,p,v){g.hasOwnProperty("increment")||(0,B.assert)(!1,"Unexpected server value: "+JSON.stringify(g,null,2));var C=g.increment;"number"!=typeof C&&(0,B.assert)(!1,"Unexpected increment value: "+C);var I=p.node();if((0,B.assert)(null!=I,"Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return C;var P=I.getValue();return"number"!=typeof P?C:P+C},_a=function(g,p,v,C){return kl(p,new mo(v,g),C)},Hs=function(g,p,v){return kl(g,new Bu(p),v)};function kl(g,p,v){var N,C=g.getPriority().val(),I=Vn(C,p.getImmediateChild(".priority"),v);if(g.isLeafNode()){var P=g,$=Vn(P.getValue(),p,v);return $!==P.getValue()||I!==P.getPriority().val()?new vl($,or(I)):g}var Q=g;return N=Q,I!==Q.getPriority().val()&&(N=N.updatePriority(new vl(I))),Q.forEachChild(Qn,function(re,ae){var Ee=kl(ae,p.getImmediateChild(re),v);Ee!==ae&&(N=N.updateImmediateChild(re,Ee))}),N}var Uu=function(p,v,C){void 0===p&&(p=""),void 0===v&&(v=null),void 0===C&&(C={children:{},childCount:0}),this.name=p,this.parent=v,this.node=C};function va(g,p){for(var v=p instanceof Dn?p:new Dn(p),C=g,I=Wt(v);null!==I;){var N=(0,B.safeGet)(C.node.children,I)||{children:{},childCount:0};C=new Uu(I,C,N),I=Wt(v=Yt(v))}return C}function _i(g){return g.node.value}function vi(g,p){g.node.value=p,Ld(g)}function ya(g){return g.node.childCount>0}function jt(g,p){st(g.node.children,function(v,C){p(new Uu(v,g,C))})}function Qa(g,p,v,C){v&&!C&&p(g),jt(g,function(I){Qa(I,p,!0,C)}),v&&C&&p(g)}function Wr(g){return new Dn(null===g.parent?g.name:Wr(g.parent)+"/"+g.name)}function Ld(g){null!==g.parent&&function(g,p,v){var C=function(g){return void 0===_i(g)&&!ya(g)}(v),I=(0,B.contains)(g.node.children,p);C&&I?(delete g.node.children[p],g.node.childCount--,Ld(g)):!C&&!I&&(g.node.children[p]=v.node,g.node.childCount++,Ld(g))}(g.parent,g.name,g)}var ju=/[\[\].#$\/\u0000-\u001F\u007F]/,xl=/[\[\].#$\u0000-\u001F\u007F]/,Ui=10485760,Za=function(g){return"string"==typeof g&&0!==g.length&&!ju.test(g)},Hu=function(g){return"string"==typeof g&&0!==g.length&&!xl.test(g)},ba=function(g){return null===g||"string"==typeof g||"number"==typeof g&&!ce(g)||g&&"object"==typeof g&&(0,B.contains)(g,".sv")},ls=function(g,p,v,C){C&&void 0===p||Qi((0,B.errorPrefix)(g,"value"),p,v)},Qi=function(g,p,v){var C=v instanceof Dn?new co(v,g):v;if(void 0===p)throw new Error(g+"contains undefined "+La(C));if("function"==typeof p)throw new Error(g+"contains a function "+La(C)+" with contents = "+p.toString());if(ce(p))throw new Error(g+"contains "+p.toString()+" "+La(C));if("string"==typeof p&&p.length>Ui/3&&(0,B.stringLength)(p)>Ui)throw new Error(g+"contains a string greater than "+Ui+" utf8 bytes "+La(C)+" ('"+p.substring(0,50)+"...')");if(p&&"object"==typeof p){var I=!1,N=!1;if(st(p,function(P,$){if(".value"===P)I=!0;else if(".priority"!==P&&".sv"!==P&&(N=!0,!Za(P)))throw new Error(g+" contains an invalid key ("+P+") "+La(C)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(g,p){g.parts_.length>0&&(g.byteLength_+=1),g.parts_.push(p),g.byteLength_+=(0,B.stringLength)(p),Eg(g)})(C,P),Qi(g,$,C),function(g){var p=g.parts_.pop();g.byteLength_-=(0,B.stringLength)(p),g.parts_.length>0&&(g.byteLength_-=1)}(C)}),I&&N)throw new Error(g+' contains ".value" child '+La(C)+" in addition to actual children.")}},yo=function(g,p,v,C){if(!C||void 0!==p){var I=(0,B.errorPrefix)(g,"values");if(!p||"object"!=typeof p||Array.isArray(p))throw new Error(I+" must be an object containing the children to replace.");var N=[];st(p,function(P,$){var Q=new Dn(P);if(Qi(I,$,Tn(v,Q)),".priority"===ml(Q)&&!ba($))throw new Error(I+"contains an invalid value for '"+Q.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");N.push(Q)}),function(g,p){var v,C;for(v=0;v<p.length;v++)for(var I=wr(C=p[v]),N=0;N<I.length;N++)if((".priority"!==I[N]||N!==I.length-1)&&!Za(I[N]))throw new Error(g+"contains an invalid key ("+I[N]+") in path "+C.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');p.sort(mc);var P=null;for(v=0;v<p.length;v++){if(C=p[v],null!==P&&kr(P,C))throw new Error(g+"contains a path "+P.toString()+" that is ancestor of another path "+C.toString());P=C}}(I,N)}},Ol=function(g,p,v){if(!v||void 0!==p){if(ce(p))throw new Error((0,B.errorPrefix)(g,"priority")+"is "+p.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ba(p))throw new Error((0,B.errorPrefix)(g,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vd=function(g,p,v){if(!v||void 0!==p)switch(p){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.errorPrefix)(g,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ni=function(g,p,v,C){if(!(C&&void 0===v||Za(v)))throw new Error((0,B.errorPrefix)(g,p)+'was an invalid key = "'+v+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Gu=function(g,p,v,C){if(!(C&&void 0===v||Hu(v)))throw new Error((0,B.errorPrefix)(g,p)+'was an invalid path = "'+v+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ri=function(g,p){if(".info"===Wt(p))throw new Error(g+" failed = Can't modify data under /.info/")},zc=function(g,p){var v=p.path.toString();if("string"!=typeof p.repoInfo.host||0===p.repoInfo.host.length||!Za(p.repoInfo.namespace)&&"localhost"!==p.repoInfo.host.split(":")[0]||0!==v.length&&!function(g){return g&&(g=g.replace(/^\/*\.info(\/|$)/,"/")),Hu(g)}(v))throw new Error((0,B.errorPrefix)(g,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ud=function(g,p,v,C){if((!C||void 0!==v)&&"boolean"!=typeof v)throw new Error((0,B.errorPrefix)(g,p)+"must be a boolean.")},$h=function(){this.eventLists_=[],this.recursionDepth_=0};function ji(g,p){for(var v=null,C=0;C<p.length;C++){var I=p[C],N=I.getPath();null!==v&&!_c(N,v.path)&&(g.eventLists_.push(v),v=null),null===v&&(v={events:[],path:N}),v.events.push(I)}v&&g.eventLists_.push(v)}function Pl(g,p,v){ji(g,v),cs(g,function(C){return _c(C,p)})}function Yr(g,p,v){ji(g,v),cs(g,function(C){return kr(C,p)||kr(p,C)})}function cs(g,p){g.recursionDepth_++;for(var v=!0,C=0;C<g.eventLists_.length;C++){var I=g.eventLists_[C];I&&(p(I.path)?($c(g.eventLists_[C]),g.eventLists_[C]=null):v=!1)}v&&(g.eventLists_=[]),g.recursionDepth_--}function $c(g){for(var p=0;p<g.events.length;p++){var v=g.events[p];if(null!==v){g.events[p]=null;var C=v.getEventRunner();Oe&&Ke("event: "+v.toString()),oo(C)}}}var jd="repo_interrupt",qh=function(){function g(p,v,C,I){this.repoInfo_=p,this.forceRestClient_=v,this.authTokenProvider_=C,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $h,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ho(),this.transactionQueueTree_=new Uu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return g.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},g}();function Xa(g){var v=g.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+v}function zu(g){return function(g){return(g=g||{}).timestamp=g.timestamp||(new Date).getTime(),g}({timestamp:Xa(g)})}function $u(g,p,v,C,I){g.dataUpdateCount++;var N=new Dn(p);v=g.interceptServerDataCallback_?g.interceptServerDataCallback_(p,v):v;var P=[];if(I)if(C){var $=(0,B.map)(v,function(Fe){return or(Fe)});P=function(g,p,v,C){var I=Ka(g,C);if(I){var N=Vu(I),P=N.path,$=N.queryId,Q=Ei(P,p),re=Ai.fromObject(v);return Us(g,P,new Ua(Dl($),Q,re))}return[]}(g.serverSyncTree_,N,$,I)}else{var Q=or(v);P=function(g,p,v,C){var I=Ka(g,C);if(null!=I){var N=Vu(I),P=N.path,$=N.queryId,Q=Ei(P,p);return Us(g,P,new Md(Dl($),Q,v))}return[]}(g.serverSyncTree_,N,Q,I)}else if(C){var re=(0,B.map)(v,function(Fe){return or(Fe)});P=function(g,p,v){var C=Ai.fromObject(v);return ga(g,new Ua({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},p,C))}(g.serverSyncTree_,N,re)}else{var ae=or(v);P=Pd(g.serverSyncTree_,N,ae)}var Ee=N;P.length>0&&(Ee=Wc(g,N)),Yr(g.eventQueue_,Ee,P)}function Fl(g,p){Ll(g,"connected",p),!1===p&&function(g){Vl(g,"onDisconnectEvents");var p=zu(g),v=Ho();Bi(g.onDisconnect_,qt(),function(I,N){var P=_a(I,N,g.serverSyncTree_,p);Cl(v,I,P)});var C=[];Bi(v,qt(),function(I,N){C=C.concat(Pd(g.serverSyncTree_,I,N));var P=hs(g,I);Wc(g,P)}),g.onDisconnect_=Ho(),Yr(g.eventQueue_,qt(),C)}(g)}function Ll(g,p,v){var C=new Dn("/.info/"+p),I=or(v);g.infoData_.updateSnapshot(C,I);var N=Pd(g.infoSyncTree_,C,I);Yr(g.eventQueue_,C,N)}function Ja(g){return g.nextWriteId_++}function eu(g,p,v,C,I){Vl(g,"set",{path:p.toString(),value:v,priority:C});var N=zu(g),P=or(v,C),$=Ml(g.serverSyncTree_,p),Q=Hs(P,$,N),re=Ja(g),ae=jc(g.serverSyncTree_,p,Q,re,!0);ji(g.eventQueue_,ae),g.server_.put(p.toString(),P.val(!0),function(Fe,tt){var dt="ok"===Fe;dt||Ct("set at "+p+" failed: "+Fe);var Lt=Wa(g.serverSyncTree_,re,!dt);Yr(g.eventQueue_,p,Lt),nu(0,I,Fe,tt)});var Ee=hs(g,p);Wc(g,Ee),Yr(g.eventQueue_,Ee,[])}function Fg(g,p,v){g.server_.onDisconnectCancel(p.toString(),function(C,I){"ok"===C&&di(g.onDisconnect_,p),nu(0,v,C,I)})}function Gd(g,p,v,C){var I=or(v);g.server_.onDisconnectPut(p.toString(),I.val(!0),function(N,P){"ok"===N&&Cl(g.onDisconnect_,p,I),nu(0,C,N,P)})}function Gs(g,p,v){var C;C=".info"===Wt(p._path)?Ya(g.infoSyncTree_,p,v):Ya(g.serverSyncTree_,p,v),Pl(g.eventQueue_,p._path,C)}function $d(g){g.persistentConnection_&&g.persistentConnection_.interrupt(jd)}function Vl(g){for(var p=[],v=1;v<arguments.length;v++)p[v-1]=arguments[v];var C="";g.persistentConnection_&&(C=g.persistentConnection_.id+":"),Ke.apply(void 0,(0,ge.__spreadArray)([C],(0,ge.__read)(p)))}function nu(g,p,v,C){p&&oo(function(){if("ok"===v)p(null);else{var I=(v||"error").toUpperCase(),N=I;C&&(N+=": "+C);var P=new Error(N);P.code=I,p(P)}})}function ru(g,p,v){return Ml(g.serverSyncTree_,p,v)||Kt.EMPTY_NODE}function ds(g,p){if(void 0===p&&(p=g.transactionQueueTree_),p||Bl(g,p),_i(p)){var v=Vg(g,p);(0,B.assert)(v.length>0,"Sending zero length transaction queue"),v.every(function(I){return 0===I.status})&&function(g,p,v){for(var C=v.map(function(Fe){return Fe.currentWriteId}),I=ru(g,p,C),N=I,P=I.hash(),$=0;$<v.length;$++){var Q=v[$];(0,B.assert)(0===Q.status,"tryToSendTransactionQueue_: items in queue should all be run."),Q.status=1,Q.retryCount++;var re=Ei(p,Q.path);N=N.updateChild(re,Q.currentOutputSnapshotRaw)}var ae=N.val(!0),Ee=p;g.server_.put(Ee.toString(),ae,function(Fe){Vl(g,"transaction put response",{path:Ee.toString(),status:Fe});var tt=[];if("ok"===Fe){for(var dt=[],Lt=function(tn){v[tn].status=2,tt=tt.concat(Wa(g.serverSyncTree_,v[tn].currentWriteId)),v[tn].onComplete&&dt.push(function(){return v[tn].onComplete(null,!0,v[tn].currentOutputSnapshotResolved)}),v[tn].unwatcher()},kt=0;kt<v.length;kt++)Lt(kt);for(Bl(g,va(g.transactionQueueTree_,p)),ds(g,g.transactionQueueTree_),Yr(g.eventQueue_,p,tt),kt=0;kt<dt.length;kt++)oo(dt[kt])}else{if("datastale"===Fe)for(kt=0;kt<v.length;kt++)v[kt].status=3===v[kt].status?4:0;else for(Ct("transaction at "+Ee.toString()+" failed: "+Fe),kt=0;kt<v.length;kt++)v[kt].status=4,v[kt].abortReason=Fe;Wc(g,p)}},P)}(g,Wr(p),v)}else ya(p)&&jt(p,function(I){ds(g,I)})}function Wc(g,p){var v=Lg(g,p),C=Wr(v);return function(g,p,v){if(0!==p.length){for(var C=[],I=[],P=p.filter(function(re){return 0===re.status}).map(function(re){return re.currentWriteId}),$=function(re){var tt,ae=p[re],Ee=Ei(v,ae.path),Fe=!1;if((0,B.assert)(null!==Ee,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ae.status)Fe=!0,tt=ae.abortReason,I=I.concat(Wa(g.serverSyncTree_,ae.currentWriteId,!0));else if(0===ae.status)if(ae.retryCount>=25)Fe=!0,tt="maxretry",I=I.concat(Wa(g.serverSyncTree_,ae.currentWriteId,!0));else{var dt=ru(g,ae.path,P);ae.currentInputSnapshot=dt;var Lt=p[re].update(dt.val());if(void 0!==Lt){Qi("transaction failed: Data returned ",Lt,ae.path);var kt=or(Lt);"object"==typeof Lt&&null!=Lt&&(0,B.contains)(Lt,".priority")||(kt=kt.updatePriority(dt.getPriority()));var Dr=ae.currentWriteId,ms=zu(g),nm=Hs(kt,dt,ms);ae.currentOutputSnapshotRaw=kt,ae.currentOutputSnapshotResolved=nm,ae.currentWriteId=Ja(g),P.splice(P.indexOf(Dr),1),I=(I=I.concat(jc(g.serverSyncTree_,ae.path,nm,ae.currentWriteId,ae.applyLocally))).concat(Wa(g.serverSyncTree_,Dr,!0))}else Fe=!0,tt="nodata",I=I.concat(Wa(g.serverSyncTree_,ae.currentWriteId,!0))}Yr(g.eventQueue_,v,I),I=[],Fe&&(p[re].status=2,setTimeout(p[re].unwatcher,Math.floor(0)),p[re].onComplete&&C.push("nodata"===tt?function(){return p[re].onComplete(null,!1,p[re].currentInputSnapshot)}:function(){return p[re].onComplete(new Error(tt),!1,null)}))},Q=0;Q<p.length;Q++)$(Q);for(Bl(g,g.transactionQueueTree_),Q=0;Q<C.length;Q++)oo(C[Q]);ds(g,g.transactionQueueTree_)}}(g,Vg(g,v),C),C}function Lg(g,p){var v,C=g.transactionQueueTree_;for(v=Wt(p);null!==v&&void 0===_i(C);)C=va(C,v),v=Wt(p=Yt(p));return C}function Vg(g,p){var v=[];return Bg(g,p,v),v.sort(function(C,I){return C.order-I.order}),v}function Bg(g,p,v){var C=_i(p);if(C)for(var I=0;I<C.length;I++)v.push(C[I]);jt(p,function(N){Bg(g,N,v)})}function Bl(g,p){var v=_i(p);if(v){for(var C=0,I=0;I<v.length;I++)2!==v[I].status&&(v[C]=v[I],C++);v.length=C,vi(p,v.length>0?v:void 0)}jt(p,function(N){Bl(g,N)})}function hs(g,p){var v=Wr(Lg(g,p)),C=va(g.transactionQueueTree_,p);return function(g,p,v){for(var C=g.parent;null!==C;){if(p(C))return!0;C=C.parent}}(C,function(I){Ul(g,I)}),Ul(g,C),Qa(C,function(I){Ul(g,I)}),v}function Ul(g,p){var v=_i(p);if(v){for(var C=[],I=[],N=-1,P=0;P<v.length;P++)3===v[P].status||(1===v[P].status?((0,B.assert)(N===P-1,"All SENT items should be at beginning of queue."),N=P,v[P].status=3,v[P].abortReason="set"):((0,B.assert)(0===v[P].status,"Unexpected transaction status in abort"),v[P].unwatcher(),I=I.concat(Wa(g.serverSyncTree_,v[P].currentWriteId,!0)),v[P].onComplete&&C.push(v[P].onComplete.bind(null,new Error("set"),!1,null))));for(-1===N?vi(p,void 0):v.length=N+1,Yr(g.eventQueue_,Wr(p),I),P=0;P<C.length;P++)oo(C[P])}}var jl=function(g,p){var v=hr(g),C=v.namespace;return"firebase.com"===v.domain&&gt(v.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!C||"undefined"===C)&&"localhost"!==v.domain&&gt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),v.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ct("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rr(v.host,v.secure,C,p,"ws"===v.scheme||"wss"===v.scheme,"",C!==v.subdomain),path:new Dn(v.pathString)}},hr=function(g){var p="",v="",C="",I="",N="",P=!0,$="https",Q=443;if("string"==typeof g){var re=g.indexOf("//");re>=0&&($=g.substring(0,re-1),g=g.substring(re+2));var ae=g.indexOf("/");-1===ae&&(ae=g.length);var Ee=g.indexOf("?");-1===Ee&&(Ee=g.length),p=g.substring(0,Math.min(ae,Ee)),ae<Ee&&(I=function(g){for(var p="",v=g.split("/"),C=0;C<v.length;C++)if(v[C].length>0){var I=v[C];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch(N){}p+="/"+I}return p}(g.substring(ae,Ee)));var Fe=function(g){var p,v,C={};"?"===g.charAt(0)&&(g=g.substring(1));try{for(var I=(0,ge.__values)(g.split("&")),N=I.next();!N.done;N=I.next()){var P=N.value;if(0!==P.length){var $=P.split("=");2===$.length?C[decodeURIComponent($[0])]=decodeURIComponent($[1]):Ct("Invalid query segment '"+P+"' in query '"+g+"'")}}}catch(Q){p={error:Q}}finally{try{N&&!N.done&&(v=I.return)&&v.call(I)}finally{if(p)throw p.error}}return C}(g.substring(Math.min(g.length,Ee)));(re=p.indexOf(":"))>=0?(P="https"===$||"wss"===$,Q=parseInt(p.substring(re+1),10)):re=p.length;var tt=p.slice(0,re);if("localhost"===tt.toLowerCase())v="localhost";else if(tt.split(".").length<=2)v=tt;else{var dt=p.indexOf(".");C=p.substring(0,dt).toLowerCase(),v=p.substring(dt+1),N=C}"ns"in Fe&&(N=Fe.ns)}return{host:p,port:Q,domain:v,subdomain:C,secure:P,scheme:$,pathString:I,namespace:N}},Ug=function(){function g(p,v,C,I){this.eventType=p,this.eventRegistration=v,this.snapshot=C,this.prevName=I}return g.prototype.getPath=function(){var p=this.snapshot.ref;return"value"===this.eventType?p._path:p.parent._path},g.prototype.getEventType=function(){return this.eventType},g.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},g.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.stringify)(this.snapshot.exportVal())},g}(),bo=function(){function g(p,v,C){this.eventRegistration=p,this.error=v,this.path=C}return g.prototype.getPath=function(){return this.path},g.prototype.getEventType=function(){return"cancel"},g.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},g.prototype.toString=function(){return this.path.toString()+":cancel"},g}(),wo=function(){function g(p,v){this.snapshotCallback=p,this.cancelCallback=v}return g.prototype.onValue=function(p,v){this.snapshotCallback.call(null,p,v)},g.prototype.onCancel=function(p){return(0,B.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,p)},Object.defineProperty(g.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),g.prototype.matches=function(p){return this.snapshotCallback===p.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===p.snapshotCallback.userCallback&&this.snapshotCallback.context===p.snapshotCallback.context},g}(),Yc=function(){function g(p,v){this._repo=p,this._path=v}return g.prototype.cancel=function(){var p=new B.Deferred;return Fg(this._repo,this._path,p.wrapCallback(function(){})),p.promise},g.prototype.remove=function(){ri("OnDisconnect.remove",this._path);var p=new B.Deferred;return Gd(this._repo,this._path,null,p.wrapCallback(function(){})),p.promise},g.prototype.set=function(p){ri("OnDisconnect.set",this._path),ls("OnDisconnect.set",p,this._path,!1);var v=new B.Deferred;return Gd(this._repo,this._path,p,v.wrapCallback(function(){})),v.promise},g.prototype.setWithPriority=function(p,v){ri("OnDisconnect.setWithPriority",this._path),ls("OnDisconnect.setWithPriority",p,this._path,!1),Ol("OnDisconnect.setWithPriority",v,!1);var C=new B.Deferred;return function(g,p,v,C,I){var N=or(v,C);g.server_.onDisconnectPut(p.toString(),N.val(!0),function(P,$){"ok"===P&&Cl(g.onDisconnect_,p,N),nu(0,I,P,$)})}(this._repo,this._path,p,v,C.wrapCallback(function(){})),C.promise},g.prototype.update=function(p){ri("OnDisconnect.update",this._path),yo("OnDisconnect.update",p,this._path,!1);var v=new B.Deferred;return function(g,p,v,C){if((0,B.isEmpty)(v))return Ke("onDisconnect().update() called with empty data.  Don't do anything."),void nu(0,C,"ok",void 0);g.server_.onDisconnectMerge(p.toString(),v,function(I,N){"ok"===I&&st(v,function(P,$){var Q=or($);Cl(g.onDisconnect_,Tn(p,P),Q)}),nu(0,C,I,N)})}(this._repo,this._path,p,v.wrapCallback(function(){})),v.promise},g}(),oi=function(){function g(p,v,C,I){this._repo=p,this._path=v,this._queryParams=C,this._orderByCalled=I}return Object.defineProperty(g.prototype,"key",{get:function(){return Ot(this._path)?null:ml(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"ref",{get:function(){return new fs(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"_queryIdentifier",{get:function(){var p=ks(this._queryParams),v=bt(p);return"{}"===v?"default":v},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"_queryObject",{get:function(){return ks(this._queryParams)},enumerable:!1,configurable:!0}),g.prototype.isEqual=function(p){if(!((p=(0,B.getModularInstance)(p))instanceof g))return!1;var v=this._repo===p._repo,C=_c(this._path,p._path);return v&&C&&this._queryIdentifier===p._queryIdentifier},g.prototype.toJSON=function(){return this.toString()},g.prototype.toString=function(){return this._repo.toString()+function(g){for(var p="",v=g.pieceNum_;v<g.pieces_.length;v++)""!==g.pieces_[v]&&(p+="/"+encodeURIComponent(String(g.pieces_[v])));return p||"/"}(this._path)},g}();function Kc(g,p){if(!0===g._orderByCalled)throw new Error(p+": You can't combine multiple orderBy calls.")}function Ca(g){var p=null,v=null;if(g.hasStart()&&(p=g.getIndexStartValue()),g.hasEnd()&&(v=g.getIndexEndValue()),g.getIndex()===Bo){var C="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",I="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(g.hasStart()){if(g.getIndexStartName()!==he)throw new Error(C);if("string"!=typeof p)throw new Error(I)}if(g.hasEnd()){if(g.getIndexEndName()!==De)throw new Error(C);if("string"!=typeof v)throw new Error(I)}}else if(g.getIndex()===Qn){if(null!=p&&!ba(p)||null!=v&&!ba(v))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.assert)(g.getIndex()instanceof Ba||g.getIndex()===Si,"unknown index type."),null!=p&&"object"==typeof p||null!=v&&"object"==typeof v)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qc(g){if(g.hasStart()&&g.hasEnd()&&g.hasLimit()&&!g.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var fs=function(g){function p(v,C){return g.call(this,v,C,new mn,!1)||this}return(0,ge.__extends)(p,g),Object.defineProperty(p.prototype,"parent",{get:function(){var v=Is(this._path);return null===v?null:new p(this._repo,v)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"root",{get:function(){for(var v=this;null!==v.parent;)v=v.parent;return v},enumerable:!1,configurable:!0}),p}(oi),Zc=function(){function g(p,v,C){this._node=p,this.ref=v,this._index=C}return Object.defineProperty(g.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),g.prototype.child=function(p){var v=new Dn(p),C=Cn(this.ref,p);return new g(this._node.getChild(v),C,Qn)},g.prototype.exists=function(){return!this._node.isEmpty()},g.prototype.exportVal=function(){return this._node.val(!0)},g.prototype.forEach=function(p){var v=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(I,N){return p(new g(N,Cn(v.ref,I),Qn))})},g.prototype.hasChild=function(p){var v=new Dn(p);return!this._node.getChild(v).isEmpty()},g.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},g.prototype.toJSON=function(){return this.exportVal()},g.prototype.val=function(){return this._node.val()},g}();function Wd(g,p){return(g=(0,B.getModularInstance)(g))._checkNotDeleted("ref"),void 0!==p?Cn(g._root,p):g._root}function iu(g,p){(g=(0,B.getModularInstance)(g))._checkNotDeleted("refFromURL");var v=jl(p,g._repo.repoInfo_.nodeAdmin);zc("refFromURL",v);var C=v.repoInfo;return!g._repo.repoInfo_.isCustomHost()&&C.host!==g._repo.repoInfo_.host&&gt("refFromURL: Host name does not match the current database: (found "+C.host+" but expected "+g._repo.repoInfo_.host+")"),Wd(g,v.path.toString())}function Cn(g,p){return null===Wt((g=(0,B.getModularInstance)(g))._path)?(v=p,v&&(v=v.replace(/^\/*\.info(\/|$)/,"/")),Gu("child","path",v,!1)):Gu("child","path",p,!1),new fs(g._repo,Tn(g._path,p));var v}function Xc(g,p){g=(0,B.getModularInstance)(g),ri("push",g._path),ls("push",p,g._path,!0);var P,v=Xa(g._repo),C=Ag(v),I=Cn(g,C),N=Cn(g,C);return P=null!=p?Hl(N,p).then(function(){return N}):Promise.resolve(N),I.then=P.then.bind(P),I.catch=P.then.bind(P,void 0),I}function sp(g){return ri("remove",g._path),Hl(g,null)}function Hl(g,p){g=(0,B.getModularInstance)(g),ri("set",g._path),ls("set",p,g._path,!1);var v=new B.Deferred;return eu(g._repo,g._path,p,null,v.wrapCallback(function(){})),v.promise}function Or(g,p){g=(0,B.getModularInstance)(g),ri("setPriority",g._path),Ol("setPriority",p,!1);var v=new B.Deferred;return eu(g._repo,Tn(g._path,".priority"),p,null,v.wrapCallback(function(){})),v.promise}function Yd(g,p,v){if(ri("setWithPriority",g._path),ls("setWithPriority",p,g._path,!1),Ol("setWithPriority",v,!1),".length"===g.key||".keys"===g.key)throw"setWithPriority failed: "+g.key+" is a read-only object.";var C=new B.Deferred;return eu(g._repo,g._path,p,v,C.wrapCallback(function(){})),C.promise}function ap(g,p){yo("update",p,g._path,!1);var v=new B.Deferred;return function(g,p,v,C){Vl(g,"update",{path:p.toString(),value:v});var I=!0,N=zu(g),P={};if(st(v,function(re,ae){I=!1,P[re]=_a(Tn(p,re),or(ae),g.serverSyncTree_,N)}),I)Ke("update() called with empty data.  Don't do anything."),nu(0,C,"ok",void 0);else{var $=Ja(g),Q=function(g,p,v,C){!function(g,p,v,C){(0,B.assert)(C>g.lastWriteId,"Stacking an older merge on top of newer ones"),g.allWrites.push({path:p,children:v,writeId:C,visible:!0}),g.visibleWrites=Bh(g.visibleWrites,p,v),g.lastWriteId=C}(g.pendingWriteTree_,p,v,C);var I=Ai.fromObject(v);return ga(g,new Ua({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},p,I))}(g.serverSyncTree_,p,P,$);ji(g.eventQueue_,Q),g.server_.merge(p.toString(),v,function(re,ae){var Ee="ok"===re;Ee||Ct("update at "+p+" failed: "+re);var Fe=Wa(g.serverSyncTree_,$,!Ee),tt=Fe.length>0?Wc(g,p):p;Yr(g.eventQueue_,tt,Fe),nu(0,C,re,ae)}),st(v,function(re){var ae=hs(g,Tn(p,re));Wc(g,ae)}),Yr(g.eventQueue_,p,[])}}(g._repo,g._path,p,v.wrapCallback(function(){})),v.promise}function up(g){return function(g,p){var v=function(g,p){var v=p._path,C=null;g.syncPointTree_.foreachOnPath(v,function(re,ae){var Ee=Ei(re,v);C=C||po(ae,Ee)});var I=g.syncPointTree_.get(v);I?C=C||po(I,qt()):(I=new Er,g.syncPointTree_=g.syncPointTree_.set(v,I));var N=null!=C,P=N?new fi(C,!0,!1):null;return function(g){return Ic(g.viewCache_)}(dr(I,p,Rc(g.pendingWriteTree_,p._path),N?P.getNode():Kt.EMPTY_NODE,N))}(g.serverSyncTree_,p);return null!=v?Promise.resolve(v):g.server_.get(p).then(function(C){var I=or(C).withIndex(p._queryParams.getIndex()),N=Pd(g.serverSyncTree_,p._path,I);return Pl(g.eventQueue_,p._path,N),Promise.resolve(I)},function(C){return Vl(g,"get for query "+(0,B.stringify)(p)+" failed: "+C),Promise.reject(new Error(C))})}((g=(0,B.getModularInstance)(g))._repo,g).then(function(p){return new Zc(p,new fs(g._repo,g._path),g._queryParams.getIndex())})}var Kd=function(){function g(p){this.callbackContext=p}return g.prototype.respondsTo=function(p){return"value"===p},g.prototype.createEvent=function(p,v){var C=v._queryParams.getIndex();return new Ug("value",this,new Zc(p.snapshotNode,new fs(v._repo,v._path),C))},g.prototype.getEventRunner=function(p){var v=this;return"cancel"===p.getEventType()?function(){return v.callbackContext.onCancel(p.error)}:function(){return v.callbackContext.onValue(p.snapshot,null)}},g.prototype.createCancelEvent=function(p,v){return this.callbackContext.hasCancelCallback?new bo(this,p,v):null},g.prototype.matches=function(p){return p instanceof g&&(!p.callbackContext||!this.callbackContext||p.callbackContext.matches(this.callbackContext))},g.prototype.hasAnyCallback=function(){return null!==this.callbackContext},g}(),Hi=function(){function g(p,v){this.eventType=p,this.callbackContext=v}return g.prototype.respondsTo=function(p){var v="children_added"===p?"child_added":p;return this.eventType===("children_removed"===v?"child_removed":v)},g.prototype.createCancelEvent=function(p,v){return this.callbackContext.hasCancelCallback?new bo(this,p,v):null},g.prototype.createEvent=function(p,v){(0,B.assert)(null!=p.childName,"Child events should have a childName.");var C=Cn(new fs(v._repo,v._path),p.childName),I=v._queryParams.getIndex();return new Ug(p.type,this,new Zc(p.snapshotNode,C,I),p.prevName)},g.prototype.getEventRunner=function(p){var v=this;return"cancel"===p.getEventType()?function(){return v.callbackContext.onCancel(p.error)}:function(){return v.callbackContext.onValue(p.snapshot,p.prevName)}},g.prototype.matches=function(p){return p instanceof g&&this.eventType===p.eventType&&(!this.callbackContext||!p.callbackContext||this.callbackContext.matches(p.callbackContext))},g.prototype.hasAnyCallback=function(){return!!this.callbackContext},g}();function qu(g,p,v,C,I){var N;if("object"==typeof C&&(N=void 0,I=C),"function"==typeof C&&(N=C),I&&I.onlyOnce){var P=v,$=function(ae,Ee){Gs(g._repo,g,re),P(ae,Ee)};$.userCallback=v.userCallback,$.context=v.context,v=$}var Q=new wo(v,N||void 0),re="value"===p?new Kd(Q):new Hi(p,Q);return function(g,p,v){var C;C=".info"===Wt(p._path)?zh(g.infoSyncTree_,p,v):zh(g.serverSyncTree_,p,v),Pl(g.eventQueue_,p._path,C)}(g._repo,g,re),function(){return Gs(g._repo,g,re)}}function Xi(g,p,v,C){return qu(g,"value",p,v,C)}function Jc(g,p,v,C){return qu(g,"child_added",p,v,C)}function Yh(g,p,v,C){return qu(g,"child_changed",p,v,C)}function Qd(g,p,v,C){return qu(g,"child_moved",p,v,C)}function lp(g,p,v,C){return qu(g,"child_removed",p,v,C)}function cp(g,p,v){var C=null,I=v?new wo(v):null;"value"===p?C=new Kd(I):p&&(C=new Hi(p,I)),Gs(g._repo,g,C)}var Ji=function(){},ed=function(g){function p(v,C){var I=g.call(this)||this;return I._value=v,I._key=C,I}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){ls("endAt",this._value,v._path,!0);var C=Ns(v._queryParams,this._value,this._key);if(Qc(C),Ca(C),v._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oi(v._repo,v._path,C,v._orderByCalled)},p}(Ji);function dp(g,p){return Ni("endAt","key",p,!0),new ed(g,p)}var jg=function(g){function p(v,C){var I=g.call(this)||this;return I._value=v,I._key=C,I}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){ls("endBefore",this._value,v._path,!1);var C=function(g,p,v){var I;return g.index_===Bo?("string"==typeof p&&(p=Pt(p)),I=Ns(g,p,v)):I=Ns(g,p,null==v?he:Pt(v)),I.endBeforeSet_=!0,I}(v._queryParams,this._value,this._key);if(Qc(C),Ca(C),v._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oi(v._repo,v._path,C,v._orderByCalled)},p}(Ji);function Hg(g,p){return Ni("endBefore","key",p,!0),new jg(g,p)}var Kh=function(g){function p(v,C){var I=g.call(this)||this;return I._value=v,I._key=C,I}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){ls("startAt",this._value,v._path,!0);var C=Rs(v._queryParams,this._value,this._key);if(Qc(C),Ca(C),v._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new oi(v._repo,v._path,C,v._orderByCalled)},p}(Ji);function Zd(g,p){return void 0===g&&(g=null),Ni("startAt","key",p,!0),new Kh(g,p)}var Qh=function(g){function p(v,C){var I=g.call(this)||this;return I._value=v,I._key=C,I}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){ls("startAfter",this._value,v._path,!1);var C=function(g,p,v){var C;return g.index_===Bo?("string"==typeof p&&(p=jf(p)),C=Rs(g,p,v)):C=Rs(g,p,null==v?De:jf(v)),C.startAfterSet_=!0,C}(v._queryParams,this._value,this._key);if(Qc(C),Ca(C),v._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new oi(v._repo,v._path,C,v._orderByCalled)},p}(Ji);function Gg(g,p){return Ni("startAfter","key",p,!0),new Qh(g,p)}var ps=function(g){function p(v){var C=g.call(this)||this;return C._limit=v,C}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){if(v._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new oi(v._repo,v._path,function(g,p){var v=g.copy();return v.limitSet_=!0,v.limit_=p,v.viewFrom_="l",v}(v._queryParams,this._limit),v._orderByCalled)},p}(Ji);function Xd(g){if("number"!=typeof g||Math.floor(g)!==g||g<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ps(g)}var J_=function(g){function p(v){var C=g.call(this)||this;return C._limit=v,C}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){if(v._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new oi(v._repo,v._path,function(g,p){var v=g.copy();return v.limitSet_=!0,v.limit_=p,v.viewFrom_="r",v}(v._queryParams,this._limit),v._orderByCalled)},p}(Ji);function Jd(g){if("number"!=typeof g||Math.floor(g)!==g||g<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new J_(g)}var Co=function(g){function p(v){var C=g.call(this)||this;return C._path=v,C}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){Kc(v,"orderByChild");var C=new Dn(this._path);if(Ot(C))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var I=new Ba(C),N=Ec(v._queryParams,I);return Ca(N),new oi(v._repo,v._path,N,!0)},p}(Ji);function hp(g){if("$key"===g)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===g)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===g)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gu("orderByChild","path",g,!1),new Co(g)}var Wu=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){Kc(v,"orderByKey");var C=Ec(v._queryParams,Bo);return Ca(C),new oi(v._repo,v._path,C,!0)},p}(Ji);function zg(){return new Wu}var ev=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){Kc(v,"orderByPriority");var C=Ec(v._queryParams,Qn);return Ca(C),new oi(v._repo,v._path,C,!0)},p}(Ji);function $g(){return new ev}var qg=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){Kc(v,"orderByValue");var C=Ec(v._queryParams,Si);return Ca(C),new oi(v._repo,v._path,C,!0)},p}(Ji);function Wg(){return new qg}var fp=function(g){function p(v,C){var I=g.call(this)||this;return I._value=v,I._key=C,I}return(0,ge.__extends)(p,g),p.prototype._apply=function(v){if(ls("equalTo",this._value,v._path,!1),v._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(v._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ed(this._value,this._key)._apply(new Kh(this._value,this._key)._apply(v))},p}(Ji);function pp(g,p){return Ni("equalTo","key",p,!0),new fp(g,p)}function gs(g){for(var p,v,C=[],I=1;I<arguments.length;I++)C[I-1]=arguments[I];var N=(0,B.getModularInstance)(g);try{for(var P=(0,ge.__values)(C),$=P.next();!$.done;$=P.next()){var Q=$.value;N=Q._apply(N)}}catch(re){p={error:re}}finally{try{$&&!$.done&&(v=P.return)&&v.call(P)}finally{if(p)throw p.error}}return N}(function(g){(0,B.assert)(!Al,"__referenceConstructor has already been defined"),Al=g})(fs),function(g){(0,B.assert)(!$o,"__referenceConstructor has already been defined"),$o=g}(fs);var eo={},gp=!1;function mp(g,p,v,C,I){var N=C||g.options.databaseURL;void 0===N&&(g.options.projectId||gt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ke("Using default host for project ",g.options.projectId),N=g.options.projectId+"-default-rtdb.firebaseio.com");var Q,P=jl(N,I),$=P.repoInfo,re=void 0;"undefined"!=typeof process&&(re=process.env.FIREBASE_DATABASE_EMULATOR_HOST),re?(Q=!0,$=(P=jl(N="http://"+re+"?ns="+$.namespace,I)).repoInfo):Q=!P.repoInfo.secure;var ae=I&&Q?new $t($t.OWNER):new un(g.name,g.options,p);zc("Invalid Firebase Database URL",P),Ot(P.path)||gt("Database URL must point to the root of a Firebase Database (not including a child path).");var Ee=function(g,p,v,C){var I=eo[p.name];I||(eo[p.name]=I={});var N=I[g.toURLString()];return N&&gt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),N=new qh(g,gp,v,C),I[g.toURLString()]=N,N}($,g,ae,new Cu(g.name,v));return new Kg(Ee,g)}var Kg=function(){function g(p,v){this._repoInternal=p,this.app=v,this.type="database",this._instanceStarted=!1}return Object.defineProperty(g.prototype,"_repo",{get:function(){return this._instanceStarted||(function(g,p,v){if(g.stats_=In(g.repoInfo_),g.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)g.server_=new Dc(g.repoInfo_,function(C,I,N,P){$u(g,C,I,N,P)},g.authTokenProvider_,g.appCheckProvider_),setTimeout(function(){return Fl(g,!0)},0);else{if(null!=v){if("object"!=typeof v)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.stringify)(v)}catch(C){throw new Error("Invalid authOverride provided: "+C)}}g.persistentConnection_=new _l(g.repoInfo_,p,function(C,I,N,P){$u(g,C,I,N,P)},function(C){Fl(g,C)},function(C){!function(g,p){st(p,function(v,C){Ll(g,v,C)})}(g,C)},g.authTokenProvider_,g.appCheckProvider_,v),g.server_=g.persistentConnection_}g.authTokenProvider_.addTokenChangeListener(function(C){g.server_.refreshAuthToken(C)}),g.appCheckProvider_.addTokenChangeListener(function(C){g.server_.refreshAppCheckToken(C.token)}),g.statsReporter_=function(g,p){var v=g.toString();return zr[v]||(zr[v]=p()),zr[v]}(g.repoInfo_,function(){return new Tc(g.stats_,g.server_)}),g.infoData_=new Br,g.infoSyncTree_=new Vs({startListening:function(C,I,N,P){var $=[],Q=g.infoData_.getNode(C._path);return Q.isEmpty()||($=Pd(g.infoSyncTree_,C._path,Q),setTimeout(function(){P("ok")},0)),$},stopListening:function(){}}),Ll(g,"connected",!1),g.serverSyncTree_=new Vs({startListening:function(C,I,N,P){return g.server_.listen(C,N,I,function($,Q){var re=P($,Q);Yr(g.eventQueue_,C._path,re)}),[]},stopListening:function(C,I){g.server_.unlisten(C,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new fs(this._repo,qt())),this._rootInternal},enumerable:!1,configurable:!0}),g.prototype._delete=function(){return null!==this._rootInternal&&(function(g,p){var v=eo[p];(!v||v[g.key]!==g)&&gt("Database "+p+"("+g.repoInfo_+") has already been deleted."),$d(g),delete v[g.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},g.prototype._checkNotDeleted=function(p){null===this._rootInternal&&gt("Cannot call "+p+" on a deleted database.")},g}();function _p(g){(g=(0,B.getModularInstance)(g))._checkNotDeleted("goOffline"),$d(g._repo)}function td(g){(g=(0,B.getModularInstance)(g))._checkNotDeleted("goOnline"),function(g){g.persistentConnection_&&g.persistentConnection_.resume(jd)}(g._repo)}var vp={".sv":"timestamp"},bp=function(){function g(p,v){this.committed=p,this.snapshot=v}return g.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},g}();function Xg(g,p,v){var C;if(g=(0,B.getModularInstance)(g),ri("Reference.transaction",g._path),".length"===g.key||".keys"===g.key)throw"Reference.transaction failed: "+g.key+" is a read-only object.";var I=null===(C=null==v?void 0:v.applyLocally)||void 0===C||C,N=new B.Deferred,$=Xi(g,function(){});return function(g,p,v,C,I,N){Vl(g,"transaction on "+p);var P={path:p,update:v,onComplete:C,status:null,order:ot(),applyLocally:N,retryCount:0,unwatcher:I,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},$=ru(g,p,void 0);P.currentInputSnapshot=$;var Q=P.update($.val());if(void 0===Q)P.unwatcher(),P.currentOutputSnapshotRaw=null,P.currentOutputSnapshotResolved=null,P.onComplete&&P.onComplete(null,!1,P.currentInputSnapshot);else{Qi("transaction failed: Data returned ",Q,P.path),P.status=0;var re=va(g.transactionQueueTree_,p),ae=_i(re)||[];ae.push(P),vi(re,ae);var Ee=void 0;"object"==typeof Q&&null!==Q&&(0,B.contains)(Q,".priority")?(Ee=(0,B.safeGet)(Q,".priority"),(0,B.assert)(ba(Ee),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ee=(Ml(g.serverSyncTree_,p)||Kt.EMPTY_NODE).getPriority().val();var tt=zu(g),dt=or(Q,Ee),Lt=Hs(dt,$,tt);P.currentOutputSnapshotRaw=dt,P.currentOutputSnapshotResolved=Lt,P.currentWriteId=Ja(g);var kt=jc(g.serverSyncTree_,p,Lt,P.currentWriteId,P.applyLocally);Yr(g.eventQueue_,p,kt),ds(g,g.transactionQueueTree_)}}(g._repo,g._path,p,function(Q,re,ae){var Ee=null;Q?N.reject(Q):(Ee=new Zc(ae,new fs(g._repo,g._path),Qn),N.resolve(new bp(re,Ee)))},$,I),N.promise}var v0=function(){function g(p){this._delegate=p}return g.prototype.cancel=function(p){(0,B.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,B.validateCallback)("OnDisconnect.cancel","onComplete",p,!0);var v=this._delegate.cancel();return p&&v.then(function(){return p(null)},function(C){return p(C)}),v},g.prototype.remove=function(p){(0,B.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,B.validateCallback)("OnDisconnect.remove","onComplete",p,!0);var v=this._delegate.remove();return p&&v.then(function(){return p(null)},function(C){return p(C)}),v},g.prototype.set=function(p,v){(0,B.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,B.validateCallback)("OnDisconnect.set","onComplete",v,!0);var C=this._delegate.set(p);return v&&C.then(function(){return v(null)},function(I){return v(I)}),C},g.prototype.setWithPriority=function(p,v,C){(0,B.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.validateCallback)("OnDisconnect.setWithPriority","onComplete",C,!0);var I=this._delegate.setWithPriority(p,v);return C&&I.then(function(){return C(null)},function(N){return C(N)}),I},g.prototype.update=function(p,v){if((0,B.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(p)){for(var C={},I=0;I<p.length;++I)C[""+I]=p[I];p=C,Ct("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.validateCallback)("OnDisconnect.update","onComplete",v,!0);var N=this._delegate.update(p);return v&&N.then(function(){return v(null)},function(P){return v(P)}),N},g}(),Ku=function(){function g(p,v){this.committed=p,this.snapshot=v}return g.prototype.toJSON=function(){return(0,B.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},g}(),Gl=function(){function g(p,v){this._database=p,this._delegate=v}return g.prototype.val=function(){return(0,B.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},g.prototype.exportVal=function(){return(0,B.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},g.prototype.toJSON=function(){return(0,B.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},g.prototype.exists=function(){return(0,B.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},g.prototype.child=function(p){return(0,B.validateArgCount)("DataSnapshot.child",0,1,arguments.length),p=String(p),Gu("DataSnapshot.child","path",p,!1),new g(this._database,this._delegate.child(p))},g.prototype.hasChild=function(p){return(0,B.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Gu("DataSnapshot.hasChild","path",p,!1),this._delegate.hasChild(p)},g.prototype.getPriority=function(){return(0,B.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},g.prototype.forEach=function(p){var v=this;return(0,B.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,B.validateCallback)("DataSnapshot.forEach","action",p,!1),this._delegate.forEach(function(C){return p(new g(v._database,C))})},g.prototype.hasChildren=function(){return(0,B.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(g.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),g.prototype.numChildren=function(){return(0,B.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},g.prototype.getRef=function(){return(0,B.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new zl(this._database,this._delegate.ref)},Object.defineProperty(g.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),g}(),wp=function(){function g(p,v){this.database=p,this._delegate=v}return g.prototype.on=function(p,v,C,I){var P,N=this;(0,B.validateArgCount)("Query.on",2,4,arguments.length),(0,B.validateCallback)("Query.on","callback",v,!1);var $=g.getCancelAndContextArgs_("Query.on",C,I),Q=function(ae,Ee){v.call($.context,new Gl(N.database,ae),Ee)};Q.userCallback=v,Q.context=$.context;var re=null===(P=$.cancel)||void 0===P?void 0:P.bind($.context);switch(p){case"value":return Xi(this._delegate,Q,re),v;case"child_added":return Jc(this._delegate,Q,re),v;case"child_removed":return lp(this._delegate,Q,re),v;case"child_changed":return Yh(this._delegate,Q,re),v;case"child_moved":return Qd(this._delegate,Q,re),v;default:throw new Error((0,B.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},g.prototype.off=function(p,v,C){if((0,B.validateArgCount)("Query.off",0,3,arguments.length),Vd("Query.off",p,!0),(0,B.validateCallback)("Query.off","callback",v,!0),(0,B.validateContextObject)("Query.off","context",C,!0),v){var I=function(){};I.userCallback=v,I.context=C,cp(this._delegate,p,I)}else cp(this._delegate,p)},g.prototype.get=function(){var p=this;return up(this._delegate).then(function(v){return new Gl(p.database,v)})},g.prototype.once=function(p,v,C,I){var N=this;(0,B.validateArgCount)("Query.once",1,4,arguments.length),(0,B.validateCallback)("Query.once","callback",v,!0);var P=g.getCancelAndContextArgs_("Query.once",C,I),$=new B.Deferred,Q=function(ae,Ee){var Fe=new Gl(N.database,ae);v&&v.call(P.context,Fe,Ee),$.resolve(Fe)};Q.userCallback=v,Q.context=P.context;var re=function(ae){P.cancel&&P.cancel.call(P.context,ae),$.reject(ae)};switch(p){case"value":Xi(this._delegate,Q,re,{onlyOnce:!0});break;case"child_added":Jc(this._delegate,Q,re,{onlyOnce:!0});break;case"child_removed":lp(this._delegate,Q,re,{onlyOnce:!0});break;case"child_changed":Yh(this._delegate,Q,re,{onlyOnce:!0});break;case"child_moved":Qd(this._delegate,Q,re,{onlyOnce:!0});break;default:throw new Error((0,B.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return $.promise},g.prototype.limitToFirst=function(p){return(0,B.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new g(this.database,gs(this._delegate,Xd(p)))},g.prototype.limitToLast=function(p){return(0,B.validateArgCount)("Query.limitToLast",1,1,arguments.length),new g(this.database,gs(this._delegate,Jd(p)))},g.prototype.orderByChild=function(p){return(0,B.validateArgCount)("Query.orderByChild",1,1,arguments.length),new g(this.database,gs(this._delegate,hp(p)))},g.prototype.orderByKey=function(){return(0,B.validateArgCount)("Query.orderByKey",0,0,arguments.length),new g(this.database,gs(this._delegate,zg()))},g.prototype.orderByPriority=function(){return(0,B.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new g(this.database,gs(this._delegate,$g()))},g.prototype.orderByValue=function(){return(0,B.validateArgCount)("Query.orderByValue",0,0,arguments.length),new g(this.database,gs(this._delegate,Wg()))},g.prototype.startAt=function(p,v){return void 0===p&&(p=null),(0,B.validateArgCount)("Query.startAt",0,2,arguments.length),new g(this.database,gs(this._delegate,Zd(p,v)))},g.prototype.startAfter=function(p,v){return void 0===p&&(p=null),(0,B.validateArgCount)("Query.startAfter",0,2,arguments.length),new g(this.database,gs(this._delegate,Gg(p,v)))},g.prototype.endAt=function(p,v){return void 0===p&&(p=null),(0,B.validateArgCount)("Query.endAt",0,2,arguments.length),new g(this.database,gs(this._delegate,dp(p,v)))},g.prototype.endBefore=function(p,v){return void 0===p&&(p=null),(0,B.validateArgCount)("Query.endBefore",0,2,arguments.length),new g(this.database,gs(this._delegate,Hg(p,v)))},g.prototype.equalTo=function(p,v){return(0,B.validateArgCount)("Query.equalTo",1,2,arguments.length),new g(this.database,gs(this._delegate,pp(p,v)))},g.prototype.toString=function(){return(0,B.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},g.prototype.toJSON=function(){return(0,B.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},g.prototype.isEqual=function(p){if((0,B.validateArgCount)("Query.isEqual",1,1,arguments.length),!(p instanceof g)){var v="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(v)}return this._delegate.isEqual(p._delegate)},g.getCancelAndContextArgs_=function(p,v,C){var I={cancel:void 0,context:void 0};if(v&&C)I.cancel=v,(0,B.validateCallback)(p,"cancel",I.cancel,!0),I.context=C,(0,B.validateContextObject)(p,"context",I.context,!0);else if(v)if("object"==typeof v&&null!==v)I.context=v;else{if("function"!=typeof v)throw new Error((0,B.errorPrefix)(p,"cancelOrContext")+" must either be a cancel callback or a context object.");I.cancel=v}return I},Object.defineProperty(g.prototype,"ref",{get:function(){return new zl(this.database,new fs(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),g}(),zl=function(g){function p(v,C){var I=g.call(this,v,new oi(C._repo,C._path,new mn,!1))||this;return I.database=v,I._delegate=C,I}return(0,ge.__extends)(p,g),p.prototype.getKey=function(){return(0,B.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},p.prototype.child=function(v){return(0,B.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof v&&(v=String(v)),new p(this.database,Cn(this._delegate,v))},p.prototype.getParent=function(){(0,B.validateArgCount)("Reference.parent",0,0,arguments.length);var v=this._delegate.parent;return v?new p(this.database,v):null},p.prototype.getRoot=function(){return(0,B.validateArgCount)("Reference.root",0,0,arguments.length),new p(this.database,this._delegate.root)},p.prototype.set=function(v,C){(0,B.validateArgCount)("Reference.set",1,2,arguments.length),(0,B.validateCallback)("Reference.set","onComplete",C,!0);var I=Hl(this._delegate,v);return C&&I.then(function(){return C(null)},function(N){return C(N)}),I},p.prototype.update=function(v,C){if((0,B.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(v)){for(var I={},N=0;N<v.length;++N)I[""+N]=v[N];v=I,Ct("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ri("Reference.update",this._delegate._path),(0,B.validateCallback)("Reference.update","onComplete",C,!0);var P=ap(this._delegate,v);return C&&P.then(function(){return C(null)},function($){return C($)}),P},p.prototype.setWithPriority=function(v,C,I){(0,B.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,B.validateCallback)("Reference.setWithPriority","onComplete",I,!0);var N=Yd(this._delegate,v,C);return I&&N.then(function(){return I(null)},function(P){return I(P)}),N},p.prototype.remove=function(v){(0,B.validateArgCount)("Reference.remove",0,1,arguments.length),(0,B.validateCallback)("Reference.remove","onComplete",v,!0);var C=sp(this._delegate);return v&&C.then(function(){return v(null)},function(I){return v(I)}),C},p.prototype.transaction=function(v,C,I){var N=this;(0,B.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,B.validateCallback)("Reference.transaction","transactionUpdate",v,!1),(0,B.validateCallback)("Reference.transaction","onComplete",C,!0),Ud("Reference.transaction","applyLocally",I,!0);var P=Xg(this._delegate,v,{applyLocally:I}).then(function($){return new Ku($.committed,new Gl(N.database,$.snapshot))});return C&&P.then(function($){return C(null,$.committed,$.snapshot)},function($){return C($,!1,null)}),P},p.prototype.setPriority=function(v,C){(0,B.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,B.validateCallback)("Reference.setPriority","onComplete",C,!0);var I=Or(this._delegate,v);return C&&I.then(function(){return C(null)},function(N){return C(N)}),I},p.prototype.push=function(v,C){var I=this;(0,B.validateArgCount)("Reference.push",0,2,arguments.length),(0,B.validateCallback)("Reference.push","onComplete",C,!0);var N=Xc(this._delegate,v),P=N.then(function(Q){return new p(I.database,Q)});C&&P.then(function(){return C(null)},function(Q){return C(Q)});var $=new p(this.database,N);return $.then=P.then.bind(P),$.catch=P.catch.bind(P,void 0),$},p.prototype.onDisconnect=function(){return ri("Reference.onDisconnect",this._delegate._path),new v0(new Yc(this._delegate._repo,this._delegate._path))},Object.defineProperty(p.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),p}(wp),Qu=function(){function g(p,v){var C=this;this._delegate=p,this.app=v,this.INTERNAL={delete:function(){return C._delegate._delete()}}}return g.prototype.useEmulator=function(p,v,C){void 0===C&&(C={}),function(g,p,v,C){void 0===C&&(C={}),(g=(0,B.getModularInstance)(g))._checkNotDeleted("useEmulator"),g._instanceStarted&&gt("Cannot call useEmulator() after instance has already been initialized.");var I=g._repoInternal,N=void 0;if(I.repoInfo_.nodeAdmin)C.mockUserToken&&gt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),N=new $t($t.OWNER);else if(C.mockUserToken){var P="string"==typeof C.mockUserToken?C.mockUserToken:(0,B.createMockUserToken)(C.mockUserToken,g.app.options.projectId);N=new $t(P)}!function(g,p,v,C){g.repoInfo_=new rr(p+":"+v,!1,g.repoInfo_.namespace,g.repoInfo_.webSocketOnly,g.repoInfo_.nodeAdmin,g.repoInfo_.persistenceKey,g.repoInfo_.includeNamespaceInQueryParams),C&&(g.authTokenProvider_=C)}(I,p,v,N)}(this._delegate,p,v,C)},g.prototype.ref=function(p){if((0,B.validateArgCount)("database.ref",0,1,arguments.length),p instanceof zl){var v=iu(this._delegate,p.toString());return new zl(this,v)}return v=Wd(this._delegate,p),new zl(this,v)},g.prototype.refFromURL=function(p){var v="database.refFromURL";(0,B.validateArgCount)(v,1,1,arguments.length);var C=iu(this._delegate,p);return new zl(this,C)},g.prototype.goOffline=function(){return(0,B.validateArgCount)("database.goOffline",0,0,arguments.length),_p(this._delegate)},g.prototype.goOnline=function(){return(0,B.validateArgCount)("database.goOnline",0,0,arguments.length),td(this._delegate)},g.ServerValue={TIMESTAMP:vp,increment:function(p){return function(g){return{".sv":{increment:g}}}(p)}},g}(),Xh=Object.freeze({__proto__:null,forceLongPolling:function(){Rr.forceDisallow(),Lr.forceAllow()},forceWebSockets:function(){Lr.forceDisallow()},isWebSocketsAvailable:function(){return Rr.isAvailable()},setSecurityDebugCallback:function(g,p){g._delegate._repo.persistentConnection_.securityDebugCallback_=p},stats:function(g,p){!function(g,p){if(void 0===p&&(p=!1),"undefined"!=typeof console){var v;p?(g.statsListener_||(g.statsListener_=new Ru(g.stats_)),v=g.statsListener_.get()):v=g.stats_.get();var C=Object.keys(v).reduce(function(I,N){return Math.max(N.length,I)},0);st(v,function(I,N){for(var P=I,$=I.length;$<C+2;$++)P+=" ";console.log(P+N)})}}(g._delegate._repo,p)},statsIncrementCounter:function(g,p){!function(g,p){g.stats_.incrementCounter(p),function(g,p){g.statsToReport_[p]=!0}(g.statsReporter_,p)}(g._delegate._repo,p)},dataUpdateCount:function(g){return g._delegate._repo.dataUpdateCount},interceptServerData:function(g,p){return function(g,p){g.interceptServerDataCallback_=p}(g._delegate._repo,p)},initStandalone:function(g){var p=g.app,v=g.url,I=g.customAuthImpl,N=g.namespace,P=g.nodeAdmin,$=void 0!==P&&P;Ie(g.version);var Q=new H.Provider("auth-internal",new H.ComponentContainer("database-standalone"));return Q.setComponent(new H.Component("auth-internal",function(){return I},"PRIVATE")),{instance:new Qu(mp(p,Q,void 0,v,$),p),namespace:N}}}),Jh=_l;_l.prototype.simpleListen=function(g,p){this.sendRequest("q",{p:g},p)},_l.prototype.echo=function(g,p){this.sendRequest("echo",{d:g},p)};var th=Object.freeze({__proto__:null,DataConnection:Jh,RealTimeConnection:li,hijackHash:function(g){var p=_l.prototype.put;return _l.prototype.put=function(v,C,I,N){void 0!==N&&(N=g()),p.call(this,v,C,I,N)},function(){_l.prototype.put=p}},ConnectionTarget:rr,queryIdentifier:function(g){return g._delegate._queryIdentifier},forceRestClient:function(g){!function(g){gp=g}(g)}}),iv=Qu.ServerValue;!function(g){Ie(g.SDK_VERSION);var p=g.INTERNAL.registerComponent(new H.Component("database",function(v,C){var I=C.instanceIdentifier,N=v.getProvider("app").getImmediate(),P=v.getProvider("auth-internal"),$=v.getProvider("app-check-internal");return new Qu(mp(N,P,$,I),N)},"PUBLIC").setServiceProps({Reference:zl,Query:wp,Database:Qu,DataSnapshot:Gl,enableLogging:ze,INTERNAL:Xh,ServerValue:iv,TEST_ACCESS:th}).setMultipleInstances(!0));g.registerVersion("@firebase/database","0.11.0"),(0,B.isNodeSdk)()&&(_t.exports=p)}(c.default)},6433:(_t,Ve,J)=>{"use strict";function c(){for(var pe=0,Me=0,ve=arguments.length;Me<ve;Me++)pe+=arguments[Me].length;var Ge=Array(pe),ot=0;for(Me=0;Me<ve;Me++)for(var Re=arguments[Me],be=0,Oe=Re.length;be<Oe;be++,ot++)Ge[ot]=Re[be];return Ge}J.r(Ve),J.d(Ve,{LogLevel:()=>ge,Logger:()=>Ie,setLogLevel:()=>Y,setUserLogHandler:()=>_e});var H,B=[],ge=(()=>{return(pe=ge||(ge={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",ge;var pe})(),Pe={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},Ue=ge.INFO,we=((H={})[ge.DEBUG]="log",H[ge.VERBOSE]="log",H[ge.INFO]="info",H[ge.WARN]="warn",H[ge.ERROR]="error",H),Ae=function(pe,Me){for(var ve=[],Ge=2;Ge<arguments.length;Ge++)ve[Ge-2]=arguments[Ge];if(!(Me<pe.logLevel)){var ot=(new Date).toISOString(),Re=we[Me];if(!Re)throw new Error("Attempted to log a message with an invalid logType (value: "+Me+")");console[Re].apply(console,c(["["+ot+"]  "+pe.name+":"],ve))}},Ie=function(){function pe(Me){this.name=Me,this._logLevel=Ue,this._logHandler=Ae,this._userLogHandler=null,B.push(this)}return Object.defineProperty(pe.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Me){if(!(Me in ge))throw new TypeError('Invalid value "'+Me+'" assigned to `logLevel`');this._logLevel=Me},enumerable:!1,configurable:!0}),pe.prototype.setLogLevel=function(Me){this._logLevel="string"==typeof Me?Pe[Me]:Me},Object.defineProperty(pe.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Me){if("function"!=typeof Me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Me},enumerable:!1,configurable:!0}),Object.defineProperty(pe.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Me){this._userLogHandler=Me},enumerable:!1,configurable:!0}),pe.prototype.debug=function(){for(var Me=[],ve=0;ve<arguments.length;ve++)Me[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,c([this,ge.DEBUG],Me)),this._logHandler.apply(this,c([this,ge.DEBUG],Me))},pe.prototype.log=function(){for(var Me=[],ve=0;ve<arguments.length;ve++)Me[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,c([this,ge.VERBOSE],Me)),this._logHandler.apply(this,c([this,ge.VERBOSE],Me))},pe.prototype.info=function(){for(var Me=[],ve=0;ve<arguments.length;ve++)Me[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,c([this,ge.INFO],Me)),this._logHandler.apply(this,c([this,ge.INFO],Me))},pe.prototype.warn=function(){for(var Me=[],ve=0;ve<arguments.length;ve++)Me[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,c([this,ge.WARN],Me)),this._logHandler.apply(this,c([this,ge.WARN],Me))},pe.prototype.error=function(){for(var Me=[],ve=0;ve<arguments.length;ve++)Me[ve]=arguments[ve];this._userLogHandler&&this._userLogHandler.apply(this,c([this,ge.ERROR],Me)),this._logHandler.apply(this,c([this,ge.ERROR],Me))},pe}();function Y(pe){B.forEach(function(Me){Me.setLogLevel(pe)})}function _e(pe,Me){for(var ve=function(be){var Oe=null;Me&&Me.level&&(Oe=Pe[Me.level]),be.userLogHandler=null===pe?null:function(nt,ze){for(var Ke=[],Qe=2;Qe<arguments.length;Qe++)Ke[Qe-2]=arguments[Qe];var je=Ke.map(function(gt){if(null==gt)return null;if("string"==typeof gt)return gt;if("number"==typeof gt||"boolean"==typeof gt)return gt.toString();if(gt instanceof Error)return gt.message;try{return JSON.stringify(gt)}catch(Ct){return null}}).filter(function(gt){return gt}).join(" ");ze>=(null!=Oe?Oe:nt.logLevel)&&pe({level:ge[ze].toLowerCase(),message:je,args:Ke,type:nt.name})}},Ge=0,ot=B;Ge<ot.length;Ge++)ve(ot[Ge])}},8305:(_t,Ve,J)=>{"use strict";J.r(Ve),J.d(Ve,{CONSTANTS:()=>H,Deferred:()=>ve,ErrorFactory:()=>Be,FirebaseError:()=>ie,MAX_VALUE_MILLIS:()=>Po,RANDOM_FACTOR:()=>zr,Sha1:()=>Gr,areCookiesEnabled:()=>j,assert:()=>B,assertionError:()=>ge,async:()=>hn,base64:()=>we,base64Decode:()=>Y,base64Encode:()=>Ae,base64urlEncodeWithoutPadding:()=>Ie,calculateBackoffMillis:()=>In,contains:()=>Fr,createMockUserToken:()=>Ge,createSubscribe:()=>jn,decode:()=>rt,deepCopy:()=>_e,deepEqual:()=>Un,deepExtend:()=>pe,errorPrefix:()=>pl,extractQuerystring:()=>$t,getGlobal:()=>he,getModularInstance:()=>kn,getUA:()=>ot,isAdmin:()=>Xt,isBrowser:()=>Oe,isBrowserExtension:()=>nt,isElectron:()=>Ke,isEmpty:()=>tr,isIE:()=>Qe,isIndexedDBAvailable:()=>ee,isMobileCordova:()=>Re,isNode:()=>be,isNodeSdk:()=>gt,isReactNative:()=>ze,isSafari:()=>Ct,isUWP:()=>je,isValidFormat:()=>Ut,isValidTimestamp:()=>Ye,issuedAtTime:()=>It,jsonEval:()=>Je,map:()=>oo,ordinal:()=>Yi,querystring:()=>Cu,querystringDecode:()=>un,safeGet:()=>Yn,stringLength:()=>yt,stringToByteArray:()=>rr,stringify:()=>st,validateArgCount:()=>aa,validateCallback:()=>Ar,validateContextObject:()=>wd,validateIndexedDBOpenable:()=>ce,validateNamespace:()=>so});var c=J(4762),H={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},B=function(ue,se){if(!ue)throw ge(se)},ge=function(ue){return new Error("Firebase Database ("+H.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ue)},Pe=function(ue){for(var se=[],ye=0,X=0;X<ue.length;X++){var te=ue.charCodeAt(X);te<128?se[ye++]=te:te<2048?(se[ye++]=te>>6|192,se[ye++]=63&te|128):55296==(64512&te)&&X+1<ue.length&&56320==(64512&ue.charCodeAt(X+1))?(te=65536+((1023&te)<<10)+(1023&ue.charCodeAt(++X)),se[ye++]=te>>18|240,se[ye++]=te>>12&63|128,se[ye++]=te>>6&63|128,se[ye++]=63&te|128):(se[ye++]=te>>12|224,se[ye++]=te>>6&63|128,se[ye++]=63&te|128)}return se},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(ue,se){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var ye=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,X=[],te=0;te<ue.length;te+=3){var de=ue[te],Te=te+1<ue.length,$e=Te?ue[te+1]:0,et=te+2<ue.length,vt=et?ue[te+2]:0,_n=(15&$e)<<2|vt>>6,gr=63&vt;et||(gr=64,Te||(_n=64)),X.push(ye[de>>2],ye[(3&de)<<4|$e>>4],ye[_n],ye[gr])}return X.join("")},encodeString:function(ue,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(ue):this.encodeByteArray(Pe(ue),se)},decodeString:function(ue,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(ue):function(ue){for(var se=[],ye=0,X=0;ye<ue.length;){var te=ue[ye++];if(te<128)se[X++]=String.fromCharCode(te);else if(te>191&&te<224){var de=ue[ye++];se[X++]=String.fromCharCode((31&te)<<6|63&de)}else if(te>239&&te<365){var et=((7&te)<<18|(63&(de=ue[ye++]))<<12|(63&(Te=ue[ye++]))<<6|63&ue[ye++])-65536;se[X++]=String.fromCharCode(55296+(et>>10)),se[X++]=String.fromCharCode(56320+(1023&et))}else{de=ue[ye++];var Te=ue[ye++];se[X++]=String.fromCharCode((15&te)<<12|(63&de)<<6|63&Te)}}return se.join("")}(this.decodeStringToByteArray(ue,se))},decodeStringToByteArray:function(ue,se){this.init_();for(var ye=se?this.charToByteMapWebSafe_:this.charToByteMap_,X=[],te=0;te<ue.length;){var de=ye[ue.charAt(te++)],$e=te<ue.length?ye[ue.charAt(te)]:0,vt=++te<ue.length?ye[ue.charAt(te)]:64,En=++te<ue.length?ye[ue.charAt(te)]:64;if(++te,null==de||null==$e||null==vt||null==En)throw Error();X.push(de<<2|$e>>4),64!==vt&&(X.push($e<<4&240|vt>>2),64!==En&&X.push(vt<<6&192|En))}return X},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}},Ae=function(ue){var se=Pe(ue);return we.encodeByteArray(se,!0)},Ie=function(ue){return Ae(ue).replace(/\./g,"")},Y=function(ue){try{return we.decodeString(ue,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function _e(ue){return pe(void 0,ue)}function pe(ue,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return se}for(var X in se)!se.hasOwnProperty(X)||!Me(X)||(ue[X]=pe(ue[X],se[X]));return ue}function Me(ue){return"__proto__"!==ue}var ve=function(){function ue(){var se=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(ye,X){se.resolve=ye,se.reject=X})}return ue.prototype.wrapCallback=function(se){var ye=this;return function(X,te){X?ye.reject(X):ye.resolve(te),"function"==typeof se&&(ye.promise.catch(function(){}),1===se.length?se(X):se(X,te))}},ue}();function Ge(ue,se){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var X=se||"demo-project",te=ue.iat||0,de=ue.sub||ue.user_id;if(!de)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Te=(0,c.__assign)({iss:"https://securetoken.google.com/"+X,aud:X,iat:te,exp:te+3600,auth_time:te,sub:de,user_id:de,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[Ie(JSON.stringify({alg:"none",type:"JWT"})),Ie(JSON.stringify(Te)),""].join(".")}function ot(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ue){return!1}}function Oe(){return"object"==typeof self&&self.self===self}function nt(){var ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){return ot().indexOf("Electron/")>=0}function Qe(){var ue=ot();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function je(){return ot().indexOf("MSAppHost/")>=0}function gt(){return!0===H.NODE_CLIENT||!0===H.NODE_ADMIN}function Ct(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"indexedDB"in self&&null!=indexedDB}function ce(){return new Promise(function(ue,se){try{var ye=!0,X="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(X);te.onsuccess=function(){te.result.close(),ye||self.indexedDB.deleteDatabase(X),ue(!0)},te.onupgradeneeded=function(){ye=!1},te.onerror=function(){var de;se((null===(de=te.error)||void 0===de?void 0:de.message)||"")}}catch(de){se(de)}})}function j(){return!(!navigator||!navigator.cookieEnabled)}function he(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var ie=function(ue){function se(ye,X,te){var de=ue.call(this,X)||this;return de.code=ye,de.customData=te,de.name="FirebaseError",Object.setPrototypeOf(de,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(de,Be.prototype.create),de}return(0,c.__extends)(se,ue),se}(Error),Be=function(){function ue(se,ye,X){this.service=se,this.serviceName=ye,this.errors=X}return ue.prototype.create=function(se){for(var ye=[],X=1;X<arguments.length;X++)ye[X-1]=arguments[X];var te=ye[0]||{},de=this.service+"/"+se,Te=this.errors[se],$e=Te?We(Te,te):"Error",et=this.serviceName+": "+$e+" ("+de+").",vt=new ie(de,et,te);return vt},ue}();function We(ue,se){return ue.replace(bt,function(ye,X){var te=se[X];return null!=te?String(te):"<"+X+"?>"})}var bt=/\{\$([^}]+)}/g;function Je(ue){return JSON.parse(ue)}function st(ue){return JSON.stringify(ue)}var rt=function(ue){var se={},ye={},X={},te="";try{var de=ue.split(".");se=Je(Y(de[0])||""),ye=Je(Y(de[1])||""),te=de[2],X=ye.d||{},delete ye.d}catch(Te){}return{header:se,claims:ye,data:X,signature:te}},Ye=function(ue){var se=rt(ue).claims,ye=Math.floor((new Date).getTime()/1e3),X=0,te=0;return"object"==typeof se&&(se.hasOwnProperty("nbf")?X=se.nbf:se.hasOwnProperty("iat")&&(X=se.iat),te=se.hasOwnProperty("exp")?se.exp:X+86400),!!ye&&!!X&&!!te&&ye>=X&&ye<=te},It=function(ue){var se=rt(ue).claims;return"object"==typeof se&&se.hasOwnProperty("iat")?se.iat:null},Ut=function(ue){var ye=rt(ue).claims;return!!ye&&"object"==typeof ye&&ye.hasOwnProperty("iat")},Xt=function(ue){var se=rt(ue).claims;return"object"==typeof se&&!0===se.admin};function Fr(ue,se){return Object.prototype.hasOwnProperty.call(ue,se)}function Yn(ue,se){if(Object.prototype.hasOwnProperty.call(ue,se))return ue[se]}function tr(ue){for(var se in ue)if(Object.prototype.hasOwnProperty.call(ue,se))return!1;return!0}function oo(ue,se,ye){var X={};for(var te in ue)Object.prototype.hasOwnProperty.call(ue,te)&&(X[te]=se.call(ye,ue[te],te,ue));return X}function Un(ue,se){if(ue===se)return!0;for(var ye=Object.keys(ue),X=Object.keys(se),te=0,de=ye;te<de.length;te++){if(!X.includes(Te=de[te]))return!1;var $e=ue[Te],et=se[Te];if(Ss($e)&&Ss(et)){if(!Un($e,et))return!1}else if($e!==et)return!1}for(var vt=0,en=X;vt<en.length;vt++){var Te;if(!ye.includes(Te=en[vt]))return!1}return!0}function Ss(ue){return null!==ue&&"object"==typeof ue}function Cu(ue){for(var se=[],ye=function(et,vt){Array.isArray(vt)?vt.forEach(function(en){se.push(encodeURIComponent(et)+"="+encodeURIComponent(en))}):se.push(encodeURIComponent(et)+"="+encodeURIComponent(vt))},X=0,te=Object.entries(ue);X<te.length;X++){var de=te[X];ye(de[0],de[1])}return se.length?"&"+se.join("&"):""}function un(ue){var se={};return ue.replace(/^\?/,"").split("&").forEach(function(X){if(X){var te=X.split("="),Te=te[1];se[decodeURIComponent(te[0])]=decodeURIComponent(Te)}}),se}function $t(ue){var se=ue.indexOf("?");if(!se)return"";var ye=ue.indexOf("#",se);return ue.substring(se,ye>0?ye:void 0)}var Gr=function(){function ue(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var se=1;se<this.blockSize;++se)this.pad_[se]=0;this.reset()}return ue.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ue.prototype.compress_=function(se,ye){ye||(ye=0);var X=this.W_;if("string"==typeof se)for(var te=0;te<16;te++)X[te]=se.charCodeAt(ye)<<24|se.charCodeAt(ye+1)<<16|se.charCodeAt(ye+2)<<8|se.charCodeAt(ye+3),ye+=4;else for(te=0;te<16;te++)X[te]=se[ye]<<24|se[ye+1]<<16|se[ye+2]<<8|se[ye+3],ye+=4;for(te=16;te<80;te++)X[te]=4294967295&((de=X[te-3]^X[te-8]^X[te-14]^X[te-16])<<1|de>>>31);var En,_n,Te=this.chain_[0],$e=this.chain_[1],et=this.chain_[2],vt=this.chain_[3],en=this.chain_[4];for(te=0;te<80;te++){te<40?te<20?(En=vt^$e&(et^vt),_n=1518500249):(En=$e^et^vt,_n=1859775393):te<60?(En=$e&et|vt&($e|et),_n=2400959708):(En=$e^et^vt,_n=3395469782);var de=(Te<<5|Te>>>27)+En+en+_n+X[te]&4294967295;en=vt,vt=et,et=4294967295&($e<<30|$e>>>2),$e=Te,Te=de}this.chain_[0]=this.chain_[0]+Te&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+et&4294967295,this.chain_[3]=this.chain_[3]+vt&4294967295,this.chain_[4]=this.chain_[4]+en&4294967295},ue.prototype.update=function(se,ye){if(null!=se){void 0===ye&&(ye=se.length);for(var X=ye-this.blockSize,te=0,de=this.buf_,Te=this.inbuf_;te<ye;){if(0===Te)for(;te<=X;)this.compress_(se,te),te+=this.blockSize;if("string"==typeof se){for(;te<ye;)if(de[Te]=se.charCodeAt(te),++te,++Te===this.blockSize){this.compress_(de),Te=0;break}}else for(;te<ye;)if(de[Te]=se[te],++te,++Te===this.blockSize){this.compress_(de),Te=0;break}}this.inbuf_=Te,this.total_+=ye}},ue.prototype.digest=function(){var se=[],ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&ye,ye/=256;this.compress_(this.buf_);var te=0;for(X=0;X<5;X++)for(var de=24;de>=0;de-=8)se[te]=this.chain_[X]>>de&255,++te;return se},ue}();function jn(ue,se){var ye=new ft(ue,se);return ye.subscribe.bind(ye)}var ft=function(){function ue(se,ye){var X=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ye,this.task.then(function(){se(X)}).catch(function(te){X.error(te)})}return ue.prototype.next=function(se){this.forEachObserver(function(ye){ye.next(se)})},ue.prototype.error=function(se){this.forEachObserver(function(ye){ye.error(se)}),this.close(se)},ue.prototype.complete=function(){this.forEachObserver(function(se){se.complete()}),this.close()},ue.prototype.subscribe=function(se,ye,X){var de,te=this;if(void 0===se&&void 0===ye&&void 0===X)throw new Error("Missing Observer.");de=function(ue,se){if("object"!=typeof ue||null===ue)return!1;for(var ye=0,X=["next","error","complete"];ye<X.length;ye++){var te=X[ye];if(te in ue&&"function"==typeof ue[te])return!0}return!1}(se)?se:{next:se,error:ye,complete:X},void 0===de.next&&(de.next=Rn),void 0===de.error&&(de.error=Rn),void 0===de.complete&&(de.complete=Rn);var Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{te.finalError?de.error(te.finalError):de.complete()}catch($e){}}),this.observers.push(de),Te},ue.prototype.unsubscribeOne=function(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ue.prototype.forEachObserver=function(se){if(!this.finalized)for(var ye=0;ye<this.observers.length;ye++)this.sendOne(ye,se)},ue.prototype.sendOne=function(se,ye){var X=this;this.task.then(function(){if(void 0!==X.observers&&void 0!==X.observers[se])try{ye(X.observers[se])}catch(te){"undefined"!=typeof console&&console.error&&console.error(te)}})},ue.prototype.close=function(se){var ye=this;this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(function(){ye.observers=void 0,ye.onNoObservers=void 0}))},ue}();function hn(ue,se){return function(){for(var ye=[],X=0;X<arguments.length;X++)ye[X]=arguments[X];Promise.resolve(!0).then(function(){ue.apply(void 0,ye)}).catch(function(te){se&&se(te)})}}function Rn(){}var aa=function(ue,se,ye,X){var te;if(X<se?te="at least "+se:X>ye&&(te=0===ye?"none":"no more than "+ye),te)throw new Error(ue+" failed: Was called with "+X+(1===X?" argument.":" arguments.")+" Expects "+te+".")};function pl(ue,se){return ue+" failed: "+se+" argument "}function so(ue,se,ye){if((!ye||se)&&"string"!=typeof se)throw new Error(pl(ue,"namespace")+"must be a valid firebase namespace.")}function Ar(ue,se,ye,X){if((!X||ye)&&"function"!=typeof ye)throw new Error(pl(ue,se)+"must be a valid function.")}function wd(ue,se,ye,X){if((!X||ye)&&("object"!=typeof ye||null===ye))throw new Error(pl(ue,se)+"must be a valid context object.")}var rr=function(ue){for(var se=[],ye=0,X=0;X<ue.length;X++){var te=ue.charCodeAt(X);if(te>=55296&&te<=56319){var de=te-55296;X++,B(X<ue.length,"Surrogate pair missing trail surrogate."),te=65536+(de<<10)+(ue.charCodeAt(X)-56320)}te<128?se[ye++]=te:te<2048?(se[ye++]=te>>6|192,se[ye++]=63&te|128):te<65536?(se[ye++]=te>>12|224,se[ye++]=te>>6&63|128,se[ye++]=63&te|128):(se[ye++]=te>>18|240,se[ye++]=te>>12&63|128,se[ye++]=te>>6&63|128,se[ye++]=63&te|128)}return se},yt=function(ue){for(var se=0,ye=0;ye<ue.length;ye++){var X=ue.charCodeAt(ye);X<128?se++:X<2048?se+=2:X>=55296&&X<=56319?(se+=4,ye++):se+=3}return se},Po=144e5,zr=.5;function In(ue,se,ye){void 0===se&&(se=1e3),void 0===ye&&(ye=2);var X=se*Math.pow(ye,ue),te=Math.round(zr*X*(Math.random()-.5)*2);return Math.min(Po,X+te)}function Yi(ue){return Number.isFinite(ue)?ue+function(ue){var se=(ue=Math.abs(ue))%100;if(se>=10&&se<=20)return"th";var ye=ue%10;return 1===ye?"st":2===ye?"nd":3===ye?"rd":"th"}(ue):""+ue}function kn(ue){return ue&&ue._delegate?ue._delegate:ue}},7713:(_t,Ve,J)=>{"use strict";J.d(Ve,{Z:()=>c.default});var c=J(417),B="8.10.0";c.default.registerVersion("firebase",B,"app"),c.default.SDK_VERSION=B},4995:function(_t,Ve){!function(J){"use strict";function c(Re){return Array.prototype.slice.call(Re)}function H(Re){return new Promise(function(be,Oe){Re.onsuccess=function(){be(Re.result)},Re.onerror=function(){Oe(Re.error)}})}function B(Re,be,Oe){var nt,ze=new Promise(function(Ke,Qe){H(nt=Re[be].apply(Re,Oe)).then(Ke,Qe)});return ze.request=nt,ze}function ge(Re,be,Oe){var nt=B(Re,be,Oe);return nt.then(function(ze){if(ze)return new Y(ze,nt.request)})}function Pe(Re,be,Oe){Oe.forEach(function(nt){Object.defineProperty(Re.prototype,nt,{get:function(){return this[be][nt]},set:function(ze){this[be][nt]=ze}})})}function Ue(Re,be,Oe,nt){nt.forEach(function(ze){ze in Oe.prototype&&(Re.prototype[ze]=function(){return B(this[be],ze,arguments)})})}function we(Re,be,Oe,nt){nt.forEach(function(ze){ze in Oe.prototype&&(Re.prototype[ze]=function(){return this[be][ze].apply(this[be],arguments)})})}function Ae(Re,be,Oe,nt){nt.forEach(function(ze){ze in Oe.prototype&&(Re.prototype[ze]=function(){return ge(this[be],ze,arguments)})})}function Ie(Re){this._index=Re}function Y(Re,be){this._cursor=Re,this._request=be}function _e(Re){this._store=Re}function pe(Re){this._tx=Re,this.complete=new Promise(function(be,Oe){Re.oncomplete=function(){be()},Re.onerror=function(){Oe(Re.error)},Re.onabort=function(){Oe(Re.error)}})}function Me(Re,be,Oe){this._db=Re,this.oldVersion=be,this.transaction=new pe(Oe)}function ve(Re){this._db=Re}Pe(Ie,"_index",["name","keyPath","multiEntry","unique"]),Ue(Ie,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Ae(Ie,"_index",IDBIndex,["openCursor","openKeyCursor"]),Pe(Y,"_cursor",["direction","key","primaryKey","value"]),Ue(Y,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Re){Re in IDBCursor.prototype&&(Y.prototype[Re]=function(){var be=this,Oe=arguments;return Promise.resolve().then(function(){return be._cursor[Re].apply(be._cursor,Oe),H(be._request).then(function(nt){if(nt)return new Y(nt,be._request)})})})}),_e.prototype.createIndex=function(){return new Ie(this._store.createIndex.apply(this._store,arguments))},_e.prototype.index=function(){return new Ie(this._store.index.apply(this._store,arguments))},Pe(_e,"_store",["name","keyPath","indexNames","autoIncrement"]),Ue(_e,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Ae(_e,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),we(_e,"_store",IDBObjectStore,["deleteIndex"]),pe.prototype.objectStore=function(){return new _e(this._tx.objectStore.apply(this._tx,arguments))},Pe(pe,"_tx",["objectStoreNames","mode"]),we(pe,"_tx",IDBTransaction,["abort"]),Me.prototype.createObjectStore=function(){return new _e(this._db.createObjectStore.apply(this._db,arguments))},Pe(Me,"_db",["name","version","objectStoreNames"]),we(Me,"_db",IDBDatabase,["deleteObjectStore","close"]),ve.prototype.transaction=function(){return new pe(this._db.transaction.apply(this._db,arguments))},Pe(ve,"_db",["name","version","objectStoreNames"]),we(ve,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Re){[_e,Ie].forEach(function(be){Re in be.prototype&&(be.prototype[Re.replace("open","iterate")]=function(){var Oe=c(arguments),nt=Oe[Oe.length-1],ze=this._store||this._index,Ke=ze[Re].apply(ze,Oe.slice(0,-1));Ke.onsuccess=function(){nt(Ke.result)}})})}),[Ie,_e].forEach(function(Re){Re.prototype.getAll||(Re.prototype.getAll=function(be,Oe){var nt=this,ze=[];return new Promise(function(Ke){nt.iterateCursor(be,function(Qe){Qe?(ze.push(Qe.value),void 0===Oe||ze.length!=Oe?Qe.continue():Ke(ze)):Ke(ze)})})})}),J.openDb=function(Re,be,Oe){var nt=B(indexedDB,"open",[Re,be]),ze=nt.request;return ze&&(ze.onupgradeneeded=function(Ke){Oe&&Oe(new Me(ze.result,Ke.oldVersion,ze.transaction))}),nt.then(function(Ke){return new ve(Ke)})},J.deleteDb=function(Re){return B(indexedDB,"deleteDatabase",[Re])},Object.defineProperty(J,"__esModule",{value:!0})}(Ve)},2047:(_t,Ve,J)=>{"use strict";J.d(Ve,{y:()=>Y});var c=J(584),H=J(7908),B=J(4816),ge=J(4623);var we=J(5367),Ae=J(5044),Ie=J(8706);let Y=(()=>{class ve{constructor(ot){ot&&(this._subscribe=ot)}lift(ot){const Re=new ve;return Re.source=this,Re.operator=ot,Re}subscribe(ot,Re,be){const Oe=function(ve){return ve&&ve instanceof c.Lv||function(ve){return ve&&(0,Ae.m)(ve.next)&&(0,Ae.m)(ve.error)&&(0,Ae.m)(ve.complete)}(ve)&&(0,H.Nn)(ve)}(ot)?ot:new c.Hp(ot,Re,be);return(0,Ie.x)(()=>{const{operator:nt,source:ze}=this;Oe.add(nt?nt.call(Oe,ze):ze?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(ot){try{return this._subscribe(ot)}catch(Re){ot.error(Re)}}forEach(ot,Re){return new(Re=_e(Re))((be,Oe)=>{let nt;nt=this.subscribe(ze=>{try{ot(ze)}catch(Ke){Oe(Ke),null==nt||nt.unsubscribe()}},Oe,be)})}_subscribe(ot){var Re;return null===(Re=this.source)||void 0===Re?void 0:Re.subscribe(ot)}[B.L](){return this}pipe(...ot){return function(ve){return 0===ve.length?ge.y:1===ve.length?ve[0]:function(ot){return ve.reduce((Re,be)=>be(Re),ot)}}(ot)(this)}toPromise(ot){return new(ot=_e(ot))((Re,be)=>{let Oe;this.subscribe(nt=>Oe=nt,nt=>be(nt),()=>Re(Oe))})}}return ve.create=Ge=>new ve(Ge),ve})();function _e(ve){var Ge;return null!==(Ge=null!=ve?ve:we.v.Promise)&&void 0!==Ge?Ge:Promise}},273:(_t,Ve,J)=>{"use strict";J.d(Ve,{x:()=>we});var c=J(2047),H=J(7908);const ge=(0,J(4893).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=J(3980),Ue=J(8706);let we=(()=>{class Ie extends c.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(_e){const pe=new Ae(this,this);return pe.operator=_e,pe}_throwIfClosed(){if(this.closed)throw new ge}next(_e){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const pe=this.observers.slice();for(const Me of pe)Me.next(_e)}})}error(_e){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=_e;const{observers:pe}=this;for(;pe.length;)pe.shift().error(_e)}})}complete(){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:_e}=this;for(;_e.length;)_e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var _e;return(null===(_e=this.observers)||void 0===_e?void 0:_e.length)>0}_trySubscribe(_e){return this._throwIfClosed(),super._trySubscribe(_e)}_subscribe(_e){return this._throwIfClosed(),this._checkFinalizedStatuses(_e),this._innerSubscribe(_e)}_innerSubscribe(_e){const{hasError:pe,isStopped:Me,observers:ve}=this;return pe||Me?H.Lc:(ve.push(_e),new H.w0(()=>(0,Pe.P)(ve,_e)))}_checkFinalizedStatuses(_e){const{hasError:pe,thrownError:Me,isStopped:ve}=this;pe?_e.error(Me):ve&&_e.complete()}asObservable(){const _e=new c.y;return _e.source=this,_e}}return Ie.create=(Y,_e)=>new Ae(Y,_e),Ie})();class Ae extends we{constructor(Y,_e){super(),this.destination=Y,this.source=_e}next(Y){var _e,pe;null===(pe=null===(_e=this.destination)||void 0===_e?void 0:_e.next)||void 0===pe||pe.call(_e,Y)}error(Y){var _e,pe;null===(pe=null===(_e=this.destination)||void 0===_e?void 0:_e.error)||void 0===pe||pe.call(_e,Y)}complete(){var Y,_e;null===(_e=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===_e||_e.call(Y)}_subscribe(Y){var _e,pe;return null!==(pe=null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Y))&&void 0!==pe?pe:H.Lc}}},584:(_t,Ve,J)=>{"use strict";J.d(Ve,{Hp:()=>Me,Lv:()=>pe});var c=J(5044),H=J(7908),B=J(5367),ge=J(5160),Pe=J(6921);const Ue=Ie("C",void 0,void 0);function Ie(be,Oe,nt){return{kind:be,value:Oe,error:nt}}var Y=J(2496),_e=J(8706);class pe extends H.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,H.Nn)(Oe)&&Oe.add(this)):this.destination=Re}static create(Oe,nt,ze){return new Me(Oe,nt,ze)}next(Oe){this.isStopped?ot(Ie("N",Oe,void 0),this):this._next(Oe)}error(Oe){this.isStopped?ot(Ie("E",void 0,Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?ot(Ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Me extends pe{constructor(Oe,nt,ze){let Ke;if(super(),(0,c.m)(Oe))Ke=Oe;else if(Oe){let Qe;({next:Ke,error:nt,complete:ze}=Oe),this&&B.v.useDeprecatedNextContext?(Qe=Object.create(Oe),Qe.unsubscribe=()=>this.unsubscribe()):Qe=Oe,Ke=null==Ke?void 0:Ke.bind(Qe),nt=null==nt?void 0:nt.bind(Qe),ze=null==ze?void 0:ze.bind(Qe)}this.destination={next:Ke?ve(Ke):Pe.Z,error:ve(null!=nt?nt:Ge),complete:ze?ve(ze):Pe.Z}}}function ve(be,Oe){return(...nt)=>{try{be(...nt)}catch(ze){B.v.useDeprecatedSynchronousErrorHandling?(0,_e.O)(ze):(0,ge.h)(ze)}}}function Ge(be){throw be}function ot(be,Oe){const{onStoppedNotification:nt}=B.v;nt&&Y.z.setTimeout(()=>nt(be,Oe))}const Re={closed:!0,next:Pe.Z,error:Ge,complete:Pe.Z}},7908:(_t,Ve,J)=>{"use strict";J.d(Ve,{Lc:()=>Ue,w0:()=>Pe,Nn:()=>we});var c=J(5044);const B=(0,J(4893).d)(Ie=>function(_e){Ie(this),this.message=_e?`${_e.length} errors occurred during unsubscription:\n${_e.map((pe,Me)=>`${Me+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=_e});var ge=J(3980);class Pe{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:_e}=this;if(_e)if(this._parentage=null,Array.isArray(_e))for(const ve of _e)ve.remove(this);else _e.remove(this);const{initialTeardown:pe}=this;if((0,c.m)(pe))try{pe()}catch(ve){Y=ve instanceof B?ve.errors:[ve]}const{_teardowns:Me}=this;if(Me){this._teardowns=null;for(const ve of Me)try{Ae(ve)}catch(Ge){Y=null!=Y?Y:[],Ge instanceof B?Y=[...Y,...Ge.errors]:Y.push(Ge)}}if(Y)throw new B(Y)}}add(Y){var _e;if(Y&&Y!==this)if(this.closed)Ae(Y);else{if(Y instanceof Pe){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._teardowns=null!==(_e=this._teardowns)&&void 0!==_e?_e:[]).push(Y)}}_hasParent(Y){const{_parentage:_e}=this;return _e===Y||Array.isArray(_e)&&_e.includes(Y)}_addParent(Y){const{_parentage:_e}=this;this._parentage=Array.isArray(_e)?(_e.push(Y),_e):_e?[_e,Y]:Y}_removeParent(Y){const{_parentage:_e}=this;_e===Y?this._parentage=null:Array.isArray(_e)&&(0,ge.P)(_e,Y)}remove(Y){const{_teardowns:_e}=this;_e&&(0,ge.P)(_e,Y),Y instanceof Pe&&Y._removeParent(this)}}Pe.EMPTY=(()=>{const Ie=new Pe;return Ie.closed=!0,Ie})();const Ue=Pe.EMPTY;function we(Ie){return Ie instanceof Pe||Ie&&"closed"in Ie&&(0,c.m)(Ie.remove)&&(0,c.m)(Ie.add)&&(0,c.m)(Ie.unsubscribe)}function Ae(Ie){(0,c.m)(Ie)?Ie():Ie.unsubscribe()}},5367:(_t,Ve,J)=>{"use strict";J.d(Ve,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(_t,Ve,J)=>{"use strict";J.d(Ve,{E:()=>H});const H=new(J(2047).y)(Pe=>Pe.complete())},5947:(_t,Ve,J)=>{"use strict";J.d(Ve,{D:()=>Ke});var c=J(9985),H=J(4763),B=J(5222),Ue=J(2047),Ae=J(5497),Ie=J(5044),Y=J(8395);function pe(Qe,je){if(!Qe)throw new Error("Iterable cannot be null");return new Ue.y(gt=>{(0,Y.f)(gt,je,()=>{const Ct=Qe[Symbol.asyncIterator]();(0,Y.f)(gt,je,()=>{Ct.next().then(ee=>{ee.done?gt.complete():gt.next(ee.value)})},0,!0)})})}var Me=J(1073),ve=J(2442),Ge=J(1537),ot=J(2317),Re=J(9908),be=J(3754),Oe=J(7751);function Ke(Qe,je){return je?function(Qe,je){if(null!=Qe){if((0,Me.c)(Qe))return function(Qe,je){return(0,c.Xf)(Qe).pipe((0,B.R)(je),(0,H.Q)(je))}(Qe,je);if((0,Ge.z)(Qe))return function(Qe,je){return new Ue.y(gt=>{let Ct=0;return je.schedule(function(){Ct===Qe.length?gt.complete():(gt.next(Qe[Ct++]),gt.closed||this.schedule())})})}(Qe,je);if((0,ve.t)(Qe))return function(Qe,je){return(0,c.Xf)(Qe).pipe((0,B.R)(je),(0,H.Q)(je))}(Qe,je);if((0,Re.D)(Qe))return pe(Qe,je);if((0,ot.T)(Qe))return function(Qe,je){return new Ue.y(gt=>{let Ct;return(0,Y.f)(gt,je,()=>{Ct=Qe[Ae.h](),(0,Y.f)(gt,je,()=>{let ee,ce;try{({value:ee,done:ce}=Ct.next())}catch(j){return void gt.error(j)}ce?gt.complete():gt.next(ee)},0,!0)}),()=>(0,Ie.m)(null==Ct?void 0:Ct.return)&&Ct.return()})}(Qe,je);if((0,Oe.L)(Qe))return function(Qe,je){return pe((0,Oe.Q)(Qe),je)}(Qe,je)}throw(0,be.z)(Qe)}(Qe,je):(0,c.Xf)(Qe)}},9985:(_t,Ve,J)=>{"use strict";J.d(Ve,{Xf:()=>Me});var c=J(9162),H=J(1537),B=J(2442),ge=J(2047),Pe=J(1073),Ue=J(9908),we=J(3754),Ae=J(2317),Ie=J(7751),Y=J(5044),_e=J(5160),pe=J(4816);function Me(ze){if(ze instanceof ge.y)return ze;if(null!=ze){if((0,Pe.c)(ze))return function(ze){return new ge.y(Ke=>{const Qe=ze[pe.L]();if((0,Y.m)(Qe.subscribe))return Qe.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,H.z)(ze))return function(ze){return new ge.y(Ke=>{for(let Qe=0;Qe<ze.length&&!Ke.closed;Qe++)Ke.next(ze[Qe]);Ke.complete()})}(ze);if((0,B.t)(ze))return function(ze){return new ge.y(Ke=>{ze.then(Qe=>{Ke.closed||(Ke.next(Qe),Ke.complete())},Qe=>Ke.error(Qe)).then(null,_e.h)})}(ze);if((0,Ue.D)(ze))return be(ze);if((0,Ae.T)(ze))return function(ze){return new ge.y(Ke=>{for(const Qe of ze)if(Ke.next(Qe),Ke.closed)return;Ke.complete()})}(ze);if((0,Ie.L)(ze))return function(ze){return be((0,Ie.Q)(ze))}(ze)}throw(0,we.z)(ze)}function be(ze){return new ge.y(Ke=>{(function(ze,Ke){var Qe,je,gt,Ct;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Qe=(0,c.KL)(ze);!(je=yield Qe.next()).done;)if(Ke.next(je.value),Ke.closed)return}catch(ee){gt={error:ee}}finally{try{je&&!je.done&&(Ct=Qe.return)&&(yield Ct.call(Qe))}finally{if(gt)throw gt.error}}Ke.complete()})})(ze,Ke).catch(Qe=>Ke.error(Qe))})}},3719:(_t,Ve,J)=>{"use strict";J.d(Ve,{T:()=>Ue});var c=J(5373),H=J(9985),B=J(5583),ge=J(7613),Pe=J(5947);function Ue(...we){const Ae=(0,ge.yG)(we),Ie=(0,ge._6)(we,1/0),Y=we;return Y.length?1===Y.length?(0,H.Xf)(Y[0]):(0,c.J)(Ie)((0,Pe.D)(Y,Ae)):B.E}},8889:(_t,Ve,J)=>{"use strict";J.d(Ve,{Q:()=>H});var c=J(584);class H extends c.Lv{constructor(ge,Pe,Ue,we,Ae){super(ge),this.onFinalize=Ae,this._next=Pe?function(Ie){try{Pe(Ie)}catch(Y){ge.error(Y)}}:super._next,this._error=we?function(Ie){try{we(Ie)}catch(Y){ge.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=Ue?function(){try{Ue()}catch(Ie){ge.error(Ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}},4753:(_t,Ve,J)=>{"use strict";J.d(Ve,{U:()=>B});var c=J(9947),H=J(8889);function B(ge,Pe){return(0,c.e)((Ue,we)=>{let Ae=0;Ue.subscribe(new H.Q(we,Ie=>{we.next(ge.call(Pe,Ie,Ae++))}))})}},5373:(_t,Ve,J)=>{"use strict";J.d(Ve,{J:()=>B});var c=J(5724),H=J(4623);function B(ge=1/0){return(0,c.z)(H.y,ge)}},5724:(_t,Ve,J)=>{"use strict";J.d(Ve,{z:()=>Ae});var c=J(4753),H=J(9985),B=J(9947),Pe=(J(8395),J(8889)),we=J(5044);function Ae(Ie,Y,_e=1/0){return(0,we.m)(Y)?Ae((pe,Me)=>(0,c.U)((ve,Ge)=>Y(pe,ve,Me,Ge))((0,H.Xf)(Ie(pe,Me))),_e):("number"==typeof Y&&(_e=Y),(0,B.e)((pe,Me)=>function(Ie,Y,_e,pe,Me,ve,Ge,ot){const Re=[];let be=0,Oe=0,nt=!1;const ze=()=>{nt&&!Re.length&&!be&&Y.complete()},Ke=je=>be<pe?Qe(je):Re.push(je),Qe=je=>{be++;let gt=!1;(0,H.Xf)(_e(je,Oe++)).subscribe(new Pe.Q(Y,Ct=>{Y.next(Ct)},()=>{gt=!0},void 0,()=>{if(gt)try{for(be--;Re.length&&be<pe;){const Ct=Re.shift();Qe(Ct)}ze()}catch(Ct){Y.error(Ct)}}))};return Ie.subscribe(new Pe.Q(Y,Ke,()=>{nt=!0,ze()})),()=>{}}(pe,Me,Ie,_e)))}},4763:(_t,Ve,J)=>{"use strict";J.d(Ve,{Q:()=>ge});var c=J(8395),H=J(9947),B=J(8889);function ge(Pe,Ue=0){return(0,H.e)((we,Ae)=>{we.subscribe(new B.Q(Ae,Ie=>(0,c.f)(Ae,Pe,()=>Ae.next(Ie),Ue),()=>(0,c.f)(Ae,Pe,()=>Ae.complete(),Ue),Ie=>(0,c.f)(Ae,Pe,()=>Ae.error(Ie),Ue)))})}},3174:(_t,Ve,J)=>{"use strict";J.d(Ve,{B:()=>Ue});var c=J(5947),H=J(9468),B=J(273),ge=J(584),Pe=J(9947);function Ue(Ae={}){const{connector:Ie=(()=>new B.x),resetOnError:Y=!0,resetOnComplete:_e=!0,resetOnRefCountZero:pe=!0}=Ae;return Me=>{let ve=null,Ge=null,ot=null,Re=0,be=!1,Oe=!1;const nt=()=>{null==Ge||Ge.unsubscribe(),Ge=null},ze=()=>{nt(),ve=ot=null,be=Oe=!1},Ke=()=>{const Qe=ve;ze(),null==Qe||Qe.unsubscribe()};return(0,Pe.e)((Qe,je)=>{Re++,!Oe&&!be&&nt();const gt=ot=null!=ot?ot:Ie();je.add(()=>{Re--,0===Re&&!Oe&&!be&&(Ge=we(Ke,pe))}),gt.subscribe(je),ve||(ve=new ge.Hp({next:Ct=>gt.next(Ct),error:Ct=>{Oe=!0,nt(),Ge=we(ze,Y,Ct),gt.error(Ct)},complete:()=>{be=!0,nt(),Ge=we(ze,_e),gt.complete()}}),(0,c.D)(Qe).subscribe(ve))})(Me)}}function we(Ae,Ie,...Y){return!0===Ie?(Ae(),null):!1===Ie?null:Ie(...Y).pipe((0,H.q)(1)).subscribe(()=>Ae())}},5222:(_t,Ve,J)=>{"use strict";J.d(Ve,{R:()=>H});var c=J(9947);function H(B,ge=0){return(0,c.e)((Pe,Ue)=>{Ue.add(B.schedule(()=>Pe.subscribe(Ue),ge))})}},9468:(_t,Ve,J)=>{"use strict";J.d(Ve,{q:()=>ge});var c=J(5583),H=J(9947),B=J(8889);function ge(Pe){return Pe<=0?()=>c.E:(0,H.e)((Ue,we)=>{let Ae=0;Ue.subscribe(new B.Q(we,Ie=>{++Ae<=Pe&&(we.next(Ie),Pe<=Ae&&we.complete())}))})}},7384:(_t,Ve,J)=>{"use strict";J.d(Ve,{b:()=>Pe});var c=J(5044),H=J(9947),B=J(8889),ge=J(4623);function Pe(Ue,we,Ae){const Ie=(0,c.m)(Ue)||we||Ae?{next:Ue,error:we,complete:Ae}:Ue;return Ie?(0,H.e)((Y,_e)=>{var pe;null===(pe=Ie.subscribe)||void 0===pe||pe.call(Ie);let Me=!0;Y.subscribe(new B.Q(_e,ve=>{var Ge;null===(Ge=Ie.next)||void 0===Ge||Ge.call(Ie,ve),_e.next(ve)},()=>{var ve;Me=!1,null===(ve=Ie.complete)||void 0===ve||ve.call(Ie),_e.complete()},ve=>{var Ge;Me=!1,null===(Ge=Ie.error)||void 0===Ge||Ge.call(Ie,ve),_e.error(ve)},()=>{var ve,Ge;Me&&(null===(ve=Ie.unsubscribe)||void 0===ve||ve.call(Ie)),null===(Ge=Ie.finalize)||void 0===Ge||Ge.call(Ie)}))}):ge.y}},2869:(_t,Ve,J)=>{"use strict";J.d(Ve,{o:()=>Pe});var c=J(7908);class H extends c.w0{constructor(we,Ae){super()}schedule(we,Ae=0){return this}}const B={setInterval(...Ue){const{delegate:we}=B;return((null==we?void 0:we.setInterval)||setInterval)(...Ue)},clearInterval(Ue){const{delegate:we}=B;return((null==we?void 0:we.clearInterval)||clearInterval)(Ue)},delegate:void 0};var ge=J(3980);class Pe extends H{constructor(we,Ae){super(we,Ae),this.scheduler=we,this.work=Ae,this.pending=!1}schedule(we,Ae=0){if(this.closed)return this;this.state=we;const Ie=this.id,Y=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Y,Ie,Ae)),this.pending=!0,this.delay=Ae,this.id=this.id||this.requestAsyncId(Y,this.id,Ae),this}requestAsyncId(we,Ae,Ie=0){return B.setInterval(we.flush.bind(we,this),Ie)}recycleAsyncId(we,Ae,Ie=0){if(null!=Ie&&this.delay===Ie&&!1===this.pending)return Ae;B.clearInterval(Ae)}execute(we,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(we,Ae);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,Ae){let Y,Ie=!1;try{this.work(we)}catch(_e){Ie=!0,Y=_e||new Error("Scheduled action threw falsy error")}if(Ie)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:we,scheduler:Ae}=this,{actions:Ie}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.P)(Ie,this),null!=we&&(this.id=this.recycleAsyncId(Ae,we,null)),this.delay=null,super.unsubscribe()}}}},8843:(_t,Ve,J)=>{"use strict";J.d(Ve,{v:()=>B});var c=J(1733);class H{constructor(Pe,Ue=H.now){this.schedulerActionCtor=Pe,this.now=Ue}schedule(Pe,Ue=0,we){return new this.schedulerActionCtor(this,Pe).schedule(we,Ue)}}H.now=c.l.now;class B extends H{constructor(Pe,Ue=H.now){super(Pe,Ue),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Pe){const{actions:Ue}=this;if(this._active)return void Ue.push(Pe);let we;this._active=!0;do{if(we=Pe.execute(Pe.state,Pe.delay))break}while(Pe=Ue.shift());if(this._active=!1,we){for(;Pe=Ue.shift();)Pe.unsubscribe();throw we}}}},2210:(_t,Ve,J)=>{"use strict";J.d(Ve,{z:()=>B,P:()=>ge});var c=J(2869);const B=new(J(8843).v)(c.o),ge=B},1733:(_t,Ve,J)=>{"use strict";J.d(Ve,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},2496:(_t,Ve,J)=>{"use strict";J.d(Ve,{z:()=>c});const c={setTimeout(...H){const{delegate:B}=c;return((null==B?void 0:B.setTimeout)||setTimeout)(...H)},clearTimeout(H){const{delegate:B}=c;return((null==B?void 0:B.clearTimeout)||clearTimeout)(H)},delegate:void 0}},5497:(_t,Ve,J)=>{"use strict";J.d(Ve,{h:()=>H});const H="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(_t,Ve,J)=>{"use strict";J.d(Ve,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(_t,Ve,J)=>{"use strict";J.d(Ve,{jO:()=>ge,yG:()=>Pe,_6:()=>Ue});var c=J(5044),H=J(7398);function B(we){return we[we.length-1]}function ge(we){return(0,c.m)(B(we))?we.pop():void 0}function Pe(we){return(0,H.K)(B(we))?we.pop():void 0}function Ue(we,Ae){return"number"==typeof B(we)?we.pop():Ae}},3980:(_t,Ve,J)=>{"use strict";function c(H,B){if(H){const ge=H.indexOf(B);0<=ge&&H.splice(ge,1)}}J.d(Ve,{P:()=>c})},4893:(_t,Ve,J)=>{"use strict";function c(H){const ge=H(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}J.d(Ve,{d:()=>c})},8706:(_t,Ve,J)=>{"use strict";J.d(Ve,{x:()=>B,O:()=>ge});var c=J(5367);let H=null;function B(Pe){if(c.v.useDeprecatedSynchronousErrorHandling){const Ue=!H;if(Ue&&(H={errorThrown:!1,error:null}),Pe(),Ue){const{errorThrown:we,error:Ae}=H;if(H=null,we)throw Ae}}else Pe()}function ge(Pe){c.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=Pe)}},8395:(_t,Ve,J)=>{"use strict";function c(H,B,ge,Pe=0,Ue=!1){const we=B.schedule(function(){ge(),Ue?H.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(H.add(we),!Ue)return we}J.d(Ve,{f:()=>c})},4623:(_t,Ve,J)=>{"use strict";function c(H){return H}J.d(Ve,{y:()=>c})},1537:(_t,Ve,J)=>{"use strict";J.d(Ve,{z:()=>c});const c=H=>H&&"number"==typeof H.length&&"function"!=typeof H},9908:(_t,Ve,J)=>{"use strict";J.d(Ve,{D:()=>H});var c=J(5044);function H(B){return Symbol.asyncIterator&&(0,c.m)(null==B?void 0:B[Symbol.asyncIterator])}},5044:(_t,Ve,J)=>{"use strict";function c(H){return"function"==typeof H}J.d(Ve,{m:()=>c})},1073:(_t,Ve,J)=>{"use strict";J.d(Ve,{c:()=>B});var c=J(4816),H=J(5044);function B(ge){return(0,H.m)(ge[c.L])}},2317:(_t,Ve,J)=>{"use strict";J.d(Ve,{T:()=>B});var c=J(5497),H=J(5044);function B(ge){return(0,H.m)(null==ge?void 0:ge[c.h])}},2442:(_t,Ve,J)=>{"use strict";J.d(Ve,{t:()=>H});var c=J(5044);function H(B){return(0,c.m)(null==B?void 0:B.then)}},7751:(_t,Ve,J)=>{"use strict";J.d(Ve,{Q:()=>B,L:()=>ge});var c=J(9162),H=J(5044);function B(Pe){return(0,c.FC)(this,arguments,function*(){const we=Pe.getReader();try{for(;;){const{value:Ae,done:Ie}=yield(0,c.qq)(we.read());if(Ie)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Ae)}}finally{we.releaseLock()}})}function ge(Pe){return(0,H.m)(null==Pe?void 0:Pe.getReader)}},7398:(_t,Ve,J)=>{"use strict";J.d(Ve,{K:()=>H});var c=J(5044);function H(B){return B&&(0,c.m)(B.schedule)}},9947:(_t,Ve,J)=>{"use strict";J.d(Ve,{A:()=>H,e:()=>B});var c=J(5044);function H(ge){return(0,c.m)(null==ge?void 0:ge.lift)}function B(ge){return Pe=>{if(H(Pe))return Pe.lift(function(Ue){try{return ge(Ue,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(_t,Ve,J)=>{"use strict";function c(){}J.d(Ve,{Z:()=>c})},5160:(_t,Ve,J)=>{"use strict";J.d(Ve,{h:()=>B});var c=J(5367),H=J(2496);function B(ge){H.z.setTimeout(()=>{const{onUnhandledError:Pe}=c.v;if(!Pe)throw ge;Pe(ge)})}},3754:(_t,Ve,J)=>{"use strict";function c(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}J.d(Ve,{z:()=>c})},6321:(_t,Ve,J)=>{"use strict";var c=J(3668);let H=null;function B(){return H}const we=new c.OlP("DocumentToken");let Ae=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.LFG)(_e)},providedIn:"platform"}),n})();const Y=new c.OlP("Location Initialized");let _e=(()=>{class n extends Ae{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(e){const r=B().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=B().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){pe()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){pe()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new _e((0,c.LFG)(we))},providedIn:"platform"}),n})();function pe(){return!!window.history.pushState}function ve(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ge(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ot(n){return n&&"?"!==n[0]?"?"+n:n}let Re=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function(n){const t=(0,c.LFG)(we).location;return new nt((0,c.LFG)(Ae),t&&t.origin||"")}()},providedIn:"root"}),n})();const Oe=new c.OlP("appBaseHref");let nt=(()=>{class n extends Re{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ve(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+ot(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,u){const h=this.prepareExternalUrl(i+ot(u));this._platformLocation.pushState(e,r,h)}replaceState(e,r,i,u){const h=this.prepareExternalUrl(i+ot(u));this._platformLocation.replaceState(e,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ae),c.LFG(Oe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n extends Re{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=ve(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,u){let h=this.prepareExternalUrl(i+ot(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(e,r,h)}replaceState(e,r,i,u){let h=this.prepareExternalUrl(i+ot(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ae),c.LFG(Oe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ke=(()=>{class n{constructor(e,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ge(gt(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+ot(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,gt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ot(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ot(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=ot,n.joinWithSlash=ve,n.stripTrailingSlash=Ge,n.\u0275fac=function(e){return new(e||n)(c.LFG(Re),c.LFG(Ae))},n.\u0275prov=c.Yz7({token:n,factory:function(){return new Ke((0,c.LFG)(Re),(0,c.LFG)(Ae))},providedIn:"root"}),n})();function gt(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))();const un=c.kL8;class gc{}let Li=(()=>{class n extends gc{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(un(r||this.locale)(e)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.soG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Yt=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new ml,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){la("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){la("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ml{constructor(){this.$implicit=null,this.ngIf=null}}function la(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(t)}'.`)}let Vr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:gc,useClass:Li}]}),n})();const Sd="browser";function ci(n){return"server"===n}let Ig=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Bf((0,c.LFG)(we),window)}),n})();class Bf{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const h=u.getElementById(t)||u.querySelector(`[name="${t}"]`);if(h)return h}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Id(this.window.history)||Id(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Id(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Kt extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Kt,H||(H=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Iu=Iu||document.querySelector("base"),Iu?Iu.getAttribute("href"):null);return null==e?null:function(n){Ki=Ki||document.createElement("a"),Ki.setAttribute("href",n);const t=Ki.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,u]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(u)}return null}(document.cookie,t)}}let Ki,Iu=null;const Ba=new c.OlP("TRANSITION_ID"),Si=[{provide:c.ip1,useFactory:function(n,t,e){return()=>{e.get(c.CZH).donePromise.then(()=>{const r=B(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Ba,we,c.zs3],multi:!0}];class Ms{static init(){(0,c.VLi)(new Ms)}addToWindow(t){c.dqk.getAngularTestability=(r,i=!0)=>{const u=t.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let u=i.length,h=!1;const _=function(b){h=h||b,u--,0==u&&r(h)};i.forEach(function(b){b.whenStable(_)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?B().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let yl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const qr=new c.OlP("EventManagerPlugins");let Cr=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const h=i[u];if(h.supports(e))return this._eventNameToPlugin.set(e,h),h}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(qr),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class wc{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=B().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Rs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Vi=(()=>{class n extends Rs{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,i.push(r.appendChild(h))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(Ns),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Ns))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ns(n){B().remove(n)}const Cc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ec=/%COMP%/g;function di(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?di(n,i,e):(i=i.replace(Ec,n),e.push(i))}return e}function Bi(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ru=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _r(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Tc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case c.ifc.ShadowDom:return new Sc(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=di(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Cr),c.LFG(Vi),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class _r{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Cc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const u=Cc[i];u?t.setAttributeNS(u,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Cc[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(c.JOm.DashCase|c.JOm.Important)?t.style.setProperty(e,r,i&c.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&c.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Bi(r)):this.eventManager.addEventListener(t,e,Bi(r))}}class Tc extends _r{constructor(t,e,r,i){super(t),this.component=r;const u=di(i+"-"+r.id,r.styles,[]);e.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(Ec,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Ec,n)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Sc extends _r{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=di(i.id,i.styles,[]);for(let h=0;h<u.length;h++){const _=document.createElement("style");_.textContent=u[h],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let hi=(()=>{class n extends wc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const xs=["alt","control","meta","shift"],ja={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ha={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rd=(()=>{class n extends wc{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(e,u.domEventName,h))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let h="";if(xs.forEach(b=>{const D=r.indexOf(b);D>-1&&(r.splice(D,1),h+=b+".")}),h+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=h,_}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&vr.hasOwnProperty(t)&&(t=vr[t]))}return ja[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),xs.forEach(u=>{u!=i&&Ha[u](e)&&(r+=u+".")}),r+=i,r}static eventCallback(e,r,i){return u=>{n.getEventFullKey(u)===e&&i.runGuarded(()=>r(u))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const os=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Sd},{provide:c.g9A,useValue:function(){Kt.makeCurrent(),Ms.init()},multi:!0},{provide:we,useFactory:function(){return(0,c.RDi)(document),document},deps:[]}]),Nu=[[],{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function(){return new c.qLn},deps:[]},{provide:qr,useClass:hi,multi:!0,deps:[we,c.R0b,c.Lbi]},{provide:qr,useClass:Rd,multi:!0,deps:[we]},[],{provide:Ru,useClass:Ru,deps:[Cr,Vi,c.AFp]},{provide:c.FYo,useExisting:Ru},{provide:Rs,useExisting:Vi},{provide:Vi,useClass:Vi,deps:[we]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Cr,useClass:Cr,deps:[qr,c.R0b]},{provide:class{},useClass:yl,deps:[]},[]];let da=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:c.AFp,useValue:e.appId},{provide:Ba,useExisting:c.AFp},Si]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Nu,imports:[Vr,c.hGG]}),n})();"undefined"!=typeof window&&window;var zn=J(5947),ni=J(7613);function Et(...n){const t=(0,ni.yG)(n);return(0,zn.D)(n,t)}var on=J(273);class $n extends on.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}var Ln=J(2047);const{isArray:Ng}=Array,{getPrototypeOf:Kf,prototype:ha,keys:Pc}=Object;var Sl=J(4623),Nt=J(4753);const{isArray:Fc}=Array;function Ou(n){return(0,Nt.U)(t=>function(n,t){return Fc(t)?n(...t):n(t)}(n,t))}var qn=J(8889),wt=J(8395);function jr(...n){const t=(0,ni.yG)(n),e=(0,ni.jO)(n),{args:r,keys:i}=function(n){if(1===n.length){const t=n[0];if(Ng(t))return{args:t,keys:null};if(function(n){return n&&"object"==typeof n&&Kf(n)===ha}(t)){const e=Pc(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,zn.D)([],t);const u=new Ln.y(function(n,t,e=Sl.y){return r=>{Il(t,()=>{const{length:i}=n,u=new Array(i);let h=i,_=i;for(let b=0;b<i;b++)Il(t,()=>{const D=(0,zn.D)(n[b],t);let M=!1;D.subscribe(new qn.Q(r,x=>{u[b]=x,M||(M=!0,_--),_||r.next(e(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,t,i?h=>function(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}(i,h):Sl.y));return e?u.pipe(Ou(e)):u}function Il(n,t,e){n?(0,wt.f)(e,n,t):t()}const Fs=(0,J(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var fa=J(5373);function us(...n){return(0,fa.J)(1)((0,zn.D)(n,(0,ni.yG)(n)))}var Go=J(9985);function Zf(n){return new Ln.y(t=>{(0,Go.Xf)(n()).subscribe(t)})}var Ls=J(5583),$a=J(7908),Mi=J(9947);function sr(){return(0,Mi.e)((n,t)=>{let e=null;n._refCount++;const r=new qn.Q(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,u=e;e=null,i&&(!u||i===u)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class Al extends Ln.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Mi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new $a.w0;const e=this.getSubject();t.add(this.source.subscribe(new qn.Q(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=$a.w0.EMPTY)}return t}refCount(){return sr()(this)}}function Er(n,t){return(0,Mi.e)((e,r)=>{let i=null,u=0,h=!1;const _=()=>h&&!i&&r.complete();e.subscribe(new qn.Q(r,b=>{null==i||i.unsubscribe();let D=0;const M=u++;(0,Go.Xf)(n(b,M)).subscribe(i=new qn.Q(r,x=>r.next(t?t(b,x,M,D++):x),()=>{i=null,_()}))},()=>{h=!0,_()}))})}var pi=J(9468);function Bc(...n){const t=(0,ni.yG)(n);return(0,Mi.e)((e,r)=>{(t?us(n,e,t):us(n,e)).subscribe(r)})}function m0(n,t,e,r,i){return(u,h)=>{let _=e,b=t,D=0;u.subscribe(new qn.Q(h,M=>{const x=D++;b=_?n(b,M,x):(_=!0,M),r&&h.next(b)},i&&(()=>{_&&h.next(b),h.complete()})))}}function Uc(n,t){return(0,Mi.e)(m0(n,t,arguments.length>=2,!0))}function dr(n,t){return(0,Mi.e)((e,r)=>{let i=0;e.subscribe(new qn.Q(r,u=>n.call(t,u,i++)&&r.next(u)))})}function zo(n){return(0,Mi.e)((t,e)=>{let u,r=null,i=!1;r=t.subscribe(new qn.Q(e,void 0,void 0,h=>{u=(0,Go.Xf)(n(h,zo(n)(t))),r?(r.unsubscribe(),r=null,u.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(e))})}var gi=J(5724),xn=J(5044);function po(n,t){return(0,xn.m)(t)?(0,gi.z)(n,t,1):(0,gi.z)(n,1)}function Pu(n){return n<=0?()=>Ls.E:(0,Mi.e)((t,e)=>{let r=[];t.subscribe(new qn.Q(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function jh(n=qa){return(0,Mi.e)((t,e)=>{let r=!1;t.subscribe(new qn.Q(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function qa(){return new Fs}function Ri(n){return(0,Mi.e)((t,e)=>{let r=!1;t.subscribe(new qn.Q(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function pa(n,t){const e=arguments.length>=2;return r=>r.pipe(n?dr((i,u)=>n(i,u,r)):Sl.y,(0,pi.q)(1),e?Ri(t):jh(()=>new Fs))}var yr=J(7384);class Vs{constructor(t,e){this.id=t,this.url=e}}class jc extends Vs{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lu extends Vs{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wa extends Vs{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pd extends Vs{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hh extends Vs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go extends Vs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xf extends Vs{constructor(t,e,r,i,u){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ya extends Vs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K_ extends Vs{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gh{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zh{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ml{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q_{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ga{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kg{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rl{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const cn="primary";class ma{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Bs(n){return new ma(n)}const Ka="ngNavigationCancelingError";function Vu(n){const t=Error("NavigationCancelingError: "+n);return t[Ka]=!0,t}function Jf(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const h=r[u],_=n[u];if(h.startsWith(":"))i[h.substring(1)]=_;else if(h!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function js(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let u=0;u<e.length;u++)if(i=e[u],!Hc(n[i],t[i]))return!1;return!0}function Hc(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,u)=>r[u]===i)}return n===t}function Fd(n){return Array.prototype.concat.apply([],n)}function Bu(n){return n.length>0?n[n.length-1]:null}function mi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Vn(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,zn.D)(Promise.resolve(n)):Et(n)}const xg={exact:function Uu(n,t,e){if(!Wr(n.segments,t.segments)||!ya(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!Uu(n.children[r],t.children[r],e))return!1;return!0},subset:_i},_a={exact:function(n,t){return js(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Hc(n[e],t[e]))},ignored:()=>!0};function Hs(n,t,e){return xg[e.paths](n.root,t.root,e.matrixParams)&&_a[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function _i(n,t,e){return vi(n,t,t.segments,e)}function vi(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Wr(i,e)||t.hasChildren()||!ya(i,e,r))}if(n.segments.length===e.length){if(!Wr(n.segments,e)||!ya(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!_i(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),u=e.slice(n.segments.length);return!!(Wr(n.segments,i)&&ya(n.segments,i,r)&&n.children[cn])&&vi(n.children[cn],t,u,r)}}function ya(n,t,e){return t.every((r,i)=>_a[e](n[i].parameters,r.parameters))}class _o{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bs(this.queryParams)),this._queryParamMap}toString(){return xl.serialize(this)}}class jt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,mi(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ui(this)}}class Qa{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Bs(this.parameters)),this._parameterMap}toString(){return yo(this)}}function Wr(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class vo{}class ju{parse(t){const e=new $h(t);return new _o(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Za(t.root,!0)}`,r=function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${Gc(e)}=${Gc(i)}`).join("&"):`${Gc(e)}=${Gc(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);var n;return`${e}${r}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const xl=new ju;function Ui(n){return n.segments.map(t=>yo(t)).join("/")}function Za(n,t){if(!n.hasChildren())return Ui(n);if(t){const e=n.children[cn]?Za(n.children[cn],!1):"",r=[];return mi(n.children,(i,u)=>{u!==cn&&r.push(`${u}:${Za(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return mi(n.children,(r,i)=>{i===cn&&(e=e.concat(t(r,i)))}),mi(n.children,(r,i)=>{i!==cn&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===cn?[Za(n.children[cn],!1)]:[`${i}:${Za(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[cn]?`${Ui(n)}/${e[0]}`:`${Ui(n)}/(${e.join("//")})`}}function Hu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gc(n){return Hu(n).replace(/%3B/gi,";")}function ls(n){return Hu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qi(n){return decodeURIComponent(n)}function Og(n){return Qi(n.replace(/\+/g,"%20"))}function yo(n){return`${ls(n.path)}${function(n){return Object.keys(n).map(t=>`;${ls(t)}=${ls(n[t])}`).join("")}(n.parameters)}`}const Ni=/^[^\/()?;=#]+/;function Gu(n){const t=n.match(Ni);return t?t[0]:""}const Bd=/^[^=?&#]+/,zc=/^[^&#]+/;class $h{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[cn]=new jt(t,e)),r}parseSegment(){const t=Gu(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Qa(Qi(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Gu(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Gu(this.remaining);i&&(r=i,this.capture(r))}t[Qi(e)]=Qi(r)}parseQueryParam(t){const e=function(n){const t=n.match(Bd);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const h=function(n){const t=n.match(zc);return t?t[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const i=Og(e),u=Og(r);if(t.hasOwnProperty(i)){let h=t[i];Array.isArray(h)||(h=[h],t[i]=h),h.push(u)}else t[i]=u}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):t&&(u=cn);const h=this.parseChildren();e[u]=1===Object.keys(h).length?h[cn]:new jt([],h),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ji{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Pl(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Pl(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Yr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Yr(t,this._root).map(e=>e.value)}}function Pl(n,t){if(n===t.value)return t;for(const e of t.children){const r=Pl(n,e);if(r)return r}return null}function Yr(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Yr(n,e);if(r.length)return r.unshift(t),r}return[]}class cs{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function $c(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class jd extends ji{constructor(t,e){super(t),this.snapshot=e,Fl(this,t)}toString(){return this.snapshot.toString()}}function qc(n,t){const e=function(n,t){const h=new $u([],{},{},"",{},cn,t,null,n.root,-1,{});return new np("",new cs(h,[]))}(n,t),r=new $n([new Qa("",{})]),i=new $n({}),u=new $n({}),h=new $n({}),_=new $n(""),b=new ii(r,i,h,_,u,cn,t,e.root);return b.snapshot=e.root,new jd(new cs(b,[]),e)}class ii{constructor(t,e,r,i,u,h,_,b){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=h,this.component=_,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Nt.U)(t=>Bs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Nt.U)(t=>Bs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xa(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],u=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:St(St({},t.params),e.params),data:St(St({},t.data),e.data),resolve:St(St({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class $u{constructor(t,e,r,i,u,h,_,b,D,M,x){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=h,this.component=_,this.routeConfig=b,this._urlSegment=D,this._lastPathIndex=M,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class np extends ji{constructor(t,e){super(e),this.url=t,Fl(this,e)}toString(){return rp(this._root)}}function Fl(n,t){t.value._routerState=n,t.children.forEach(e=>Fl(n,e))}function rp(n){const t=n.children.length>0?` { ${n.children.map(rp).join(", ")} } `:"";return`${n.value}${t}`}function Ll(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,js(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),js(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!js(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),js(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ja(n,t){const e=js(n.params,t.params)&&function(n,t){return Wr(n,t)&&n.every((e,r)=>js(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Ja(n.parent,t.parent))}function eu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return eu(n,r,i);return eu(n,r)})}(n,t,e);return new cs(r,i)}{if(n.shouldAttach(t.value)){const u=n.retrieve(t.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=t.value,h.children=t.children.map(_=>eu(n,_)),h}}const r=function(n){return new ii(new $n(n.url),new $n(n.params),new $n(n.queryParams),new $n(n.fragment),new $n(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(u=>eu(n,u));return new cs(r,i)}}function Gd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function tu(n){return"object"==typeof n&&null!=n&&n.outlets}function zd(n,t,e,r,i){let u={};return r&&mi(r,(h,_)=>{u[_]=Array.isArray(h)?h.map(b=>`${b}`):`${h}`}),new _o(e.root===n?t:qo(e.root,n,t),u,i)}function qo(n,t,e){const r={};return mi(n.children,(i,u)=>{r[u]=i===t?e:qo(i,t,e)}),new jt(n.segments,r)}class Gs{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Gd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(tu);if(i&&i!==Bu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zi{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function nu(n,t,e){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return wa(n,t,e);const r=function(n,t,e){let r=0,i=t;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return u;const h=n.segments[i],_=e[r];if(tu(_))break;const b=`${_}`,D=r<e.length-1?e[r+1]:null;if(i>0&&void 0===b)break;if(b&&D&&"object"==typeof D&&void 0===D.outlets){if(!op(b,D,h))return u;r+=2}else{if(!op(b,{},h))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new jt(n.segments.slice(0,r.pathIndex),{});return u.children[cn]=new jt(n.segments.slice(r.pathIndex),n.children),wa(u,0,i)}return r.match&&0===i.length?new jt(n.segments,{}):r.match&&!n.hasChildren()?ds(n,t,e):r.match?wa(n,0,i):ds(n,t,e)}function wa(n,t,e){if(0===e.length)return new jt(n.segments,{});{const r=function(n){return tu(n[0])?n[0].outlets:{[cn]:n}}(e),i={};return mi(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[h]=nu(n.children[h],t,u))}),mi(n.children,(u,h)=>{void 0===r[h]&&(i[h]=u)}),new jt(n.segments,i)}}function ds(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const u=e[i];if(tu(u)){const b=X_(u.outlets);return new jt(r,b)}if(0===i&&Gd(e[0])){r.push(new Qa(n.segments[t].path,Wc(e[0]))),i++;continue}const h=tu(u)?u.outlets[cn]:`${u}`,_=i<e.length-1?e[i+1]:null;h&&_&&Gd(_)?(r.push(new Qa(h,Wc(_))),i+=2):(r.push(new Qa(h,{})),i++)}return new jt(r,{})}function X_(n){const t={};return mi(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=ds(new jt([],{}),0,e))}),t}function Wc(n){const t={};return mi(n,(e,r)=>t[r]=`${e}`),t}function op(n,t,e){return n==e.path&&js(t,e.parameters)}class Vg{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Ll(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=$c(e);t.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,i[h],r),delete i[h]}),mi(i,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(t,e,r){const i=t.value,u=e?e.value:null;if(i===u)if(i.component){const h=r.getContext(i.outlet);h&&this.deactivateChildRoutes(t,e,h.children)}else this.deactivateChildRoutes(t,e,r);else u&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,u=$c(t);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],i);if(r&&r.outlet){const h=r.outlet.detach(),_=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:h,route:t,contexts:_})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,u=$c(t);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=$c(e);t.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new kg(u.value.snapshot))}),t.children.length&&this.forwardEvent(new Q_(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,u=e?e.value:null;if(Ll(i),i===u)if(i.component){const h=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,h.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const h=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const _=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),h.children.onOutletReAttached(_.contexts),h.attachRef=_.componentRef,h.route=_.route.value,h.outlet&&h.outlet.attach(_.componentRef,_.route.value),Ll(_.route.value),this.activateChildRoutes(t,null,h.children)}else{const _=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),b=_?_.module.componentFactoryResolver:null;h.attachRef=null,h.route=i,h.resolver=b,h.outlet&&h.outlet.activateWith(i,b),this.activateChildRoutes(t,null,h.children)}}else this.activateChildRoutes(t,null,r)}}class Bl{constructor(t,e){this.routes=t,this.module=e}}function hs(n){return"function"==typeof n}function zs(n){return n instanceof _o}const bo=Symbol("INITIAL_VALUE");function wo(){return Er(n=>jr(n.map(t=>t.pipe((0,pi.q)(1),Bc(bo)))).pipe(Uc((t,e)=>{let r=!1;return e.reduce((i,u,h)=>i!==bo?i:(u===bo&&(r=!0),r||!1!==u&&h!==e.length-1&&!zs(u)?i:u),t)},bo),dr(t=>t!==bo),(0,Nt.U)(t=>zs(t)?t:!0===t),(0,pi.q)(1)))}class Yc{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new oi,this.attachRef=null}}class oi{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Yc,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Kc=(()=>{class n{constructor(e,r,i,u,h){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||cn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const h=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,b=new Ca(e,_,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(oi),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Ca{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===ii?this.route:t===oi?this.childContexts:this.parent.get(t,e)}}let Qc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&c._UZ(0,"router-outlet")},directives:[Kc],encapsulation:2}),n})();function fs(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];Zc(r,Wd(t,r))}}function Zc(n,t){n.children&&fs(n.children,t)}function Wd(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function iu(n){const t=n.children&&n.children.map(iu),e=t?es(St({},n),{children:t}):St({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==cn&&(e.component=Qc),e}function Cn(n){return n.outlet||cn}function Xc(n,t){const e=n.filter(r=>Cn(r)===t);return e.push(...n.filter(r=>Cn(r)!==t)),e}const sp={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Hl(n,t,e){var _;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?St({},sp):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||Jf)(e,n,t);if(!i)return St({},sp);const u={};mi(i.posParams,(b,D)=>{u[D]=b.path});const h=i.consumed.length>0?St(St({},u),i.consumed[i.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:h,positionalParamSegments:null!=(_=i.posParams)?_:{}}}function Or(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Hi(n,t,r)&&Cn(r)!==cn)}(n,e,r)){const h=new jt(t,function(n,t,e,r){const i={};i[cn]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const u of e)if(""===u.path&&Cn(u)!==cn){const h=new jt([],{});h._sourceSegment=n,h._segmentIndexShift=t.length,i[Cn(u)]=h}return i}(n,t,r,new jt(e,n.children)));return h._sourceSegment=n,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Hi(n,t,r))}(n,e,r)){const h=new jt(n.segments,function(n,t,e,r,i,u){const h={};for(const _ of r)if(Hi(n,e,_)&&!i[Cn(_)]){const b=new jt([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===u?n.segments.length:t.length,h[Cn(_)]=b}return St(St({},i),h)}(n,t,e,r,n.children,i));return h._sourceSegment=n,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:e}}const u=new jt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}function Hi(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function qu(n,t,e,r){return!!(Cn(n)===r||r!==cn&&Hi(t,e,n))&&("**"===n.path||Hl(t,n,e).matched)}function Xi(n,t,e){return 0===t.length&&!n.children[e]}class Jc{constructor(t){this.segmentGroup=t||null}}class Yh{constructor(t){this.urlTree=t}}function Qd(n){return new Ln.y(t=>t.error(new Jc(n)))}function lp(n){return new Ln.y(t=>t.error(new Yh(n)))}function cp(n){return new Ln.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class dp{constructor(t,e,r,i,u){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=t.get(c.h0i)}apply(){const t=Or(this.urlTree.root,[],[],this.config).segmentGroup,e=new jt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,cn).pipe((0,Nt.U)(u=>this.createUrlTree(Hg(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zo(u=>{if(u instanceof Yh)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Jc?this.noMatchError(u):u}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,cn).pipe((0,Nt.U)(i=>this.createUrlTree(Hg(i),t.queryParams,t.fragment))).pipe(zo(i=>{throw i instanceof Jc?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new jt([],{[cn]:t}):t;return new _o(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,Nt.U)(u=>new jt([],u))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,zn.D)(i).pipe(po(u=>{const h=r.children[u],_=Xc(e,u);return this.expandSegmentGroup(t,_,h,u).pipe((0,Nt.U)(b=>({segment:b,outlet:u})))}),Uc((u,h)=>(u[h.outlet]=h.segment,u),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?dr((i,u)=>n(i,u,r)):Sl.y,Pu(1),e?Ri(t):jh(()=>new Fs))}())}expandSegment(t,e,r,i,u,h){return(0,zn.D)(r).pipe(po(_=>this.expandSegmentAgainstRoute(t,e,r,_,i,u,h).pipe(zo(D=>{if(D instanceof Jc)return Et(null);throw D}))),pa(_=>!!_),zo((_,b)=>{if(_ instanceof Fs||"EmptyError"===_.name){if(Xi(e,i,u))return Et(new jt([],{}));throw new Jc(e)}throw _}))}expandSegmentAgainstRoute(t,e,r,i,u,h,_){return qu(i,e,u,h)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,u,h):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,u,h):Qd(e):Qd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,u,h){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,h):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?lp(u):this.lineralizeSegments(r,u).pipe((0,gi.z)(h=>{const _=new jt(h,{});return this.expandSegment(t,_,e,h,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,u,h){const{matched:_,consumedSegments:b,lastChild:D,positionalParamSegments:M}=Hl(e,i,u);if(!_)return Qd(e);const x=this.applyRedirectCommands(b,i.redirectTo,M);return i.redirectTo.startsWith("/")?lp(x):this.lineralizeSegments(i,x).pipe((0,gi.z)(L=>this.expandSegment(t,e,r,L.concat(u.slice(D)),h,!1)))}matchSegmentAgainstRoute(t,e,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Et(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,Nt.U)(L=>(r._loadedConfig=L,new jt(i,{})))):Et(new jt(i,{}));const{matched:h,consumedSegments:_,lastChild:b}=Hl(e,r,i);if(!h)return Qd(e);const D=i.slice(b);return this.getChildConfig(t,r,i).pipe((0,gi.z)(x=>{const L=x.module,z=x.routes,{segmentGroup:W,slicedSegments:ne}=Or(e,_,D,z),fe=new jt(W.segments,W.children);if(0===ne.length&&fe.hasChildren())return this.expandChildren(L,z,fe).pipe((0,Nt.U)(ct=>new jt(_,ct)));if(0===z.length&&0===ne.length)return Et(new jt(_,{}));const Se=Cn(r)===u;return this.expandSegment(L,fe,z,ne,Se?cn:u,!0).pipe((0,Nt.U)(qe=>new jt(_.concat(qe.segments),qe.children)))}))}getChildConfig(t,e,r){return e.children?Et(new Bl(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Et(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,gi.z)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,Nt.U)(u=>(e._loadedConfig=u,u))):(n=e,new Ln.y(t=>t.error(Vu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):Et(new Bl([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;return i&&0!==i.length?Et(i.map(h=>{const _=t.get(h);let b;if((n=_)&&hs(n.canLoad))b=_.canLoad(e,r);else{if(!hs(_))throw new Error("Invalid CanLoad guard");b=_(e,r)}var n;return Vn(b)})).pipe(wo(),(0,yr.b)(h=>{if(!zs(h))return;const _=Vu(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw _.url=h,_}),(0,Nt.U)(h=>!0===h)):Et(!0)}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Et(r);if(i.numberOfChildren>1||!i.children[cn])return cp(t.redirectTo);i=i.children[cn]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const u=this.createSegmentGroup(t,e.root,r,i);return new _o(u,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return mi(t,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const _=i.substring(1);r[u]=e[_]}else r[u]=i}),r}createSegmentGroup(t,e,r,i){const u=this.createSegments(t,e.segments,r,i);let h={};return mi(e.children,(_,b)=>{h[b]=this.createSegmentGroup(t,_,r,i)}),new jt(u,h)}createSegments(t,e,r,i){return e.map(u=>u.path.startsWith(":")?this.findPosParam(t,u,i):this.findOrReturn(u,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function Hg(n){const t={};for(const r of Object.keys(n.children)){const u=Hg(n.children[r]);(u.segments.length>0||u.hasChildren())&&(t[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[cn]){const t=n.children[cn];return new jt(n.segments.concat(t.segments),t.children)}return n}(new jt(n.segments,t))}class Zd{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Qh{constructor(t,e){this.component=t,this.route=e}}function Gg(n,t,e){const r=n._root;return Jd(r,t?t._root:null,e,[r.value])}function Xd(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function Jd(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=$c(t);return n.children.forEach(h=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=t?t.value:null,_=e?e.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const b=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Wr(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Wr(n.url,t.url)||!js(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ja(n,t)||!js(n.queryParams,t.queryParams);default:return!Ja(n,t)}}(h,u,u.routeConfig.runGuardsAndResolvers);b?i.canActivateChecks.push(new Zd(r)):(u.data=h.data,u._resolvedData=h._resolvedData),Jd(n,t,u.component?_?_.children:null:e,r,i),b&&_&&_.outlet&&_.outlet.isActivated&&i.canDeactivateChecks.push(new Qh(_.outlet.component,h))}else h&&Wu(t,_,i),i.canActivateChecks.push(new Zd(r)),Jd(n,null,u.component?_?_.children:null:e,r,i)})(h,u[h.value.outlet],e,r.concat([h.value]),i),delete u[h.value.outlet]}),mi(u,(h,_)=>Wu(h,e.getContext(_),i)),i}function Wu(n,t,e){const r=$c(n),i=n.value;mi(r,(u,h)=>{Wu(u,i.component?t?t.children.getContext(h):null:t,e)}),e.canDeactivateChecks.push(new Qh(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class Yu{}function eo(n){return new Ln.y(t=>t.error(n))}class Yg{constructor(t,e,r,i,u,h){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const t=Or(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,cn);if(null===e)return null;const r=new $u([],Object.freeze({}),Object.freeze(St({},this.urlTree.queryParams)),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new cs(r,e),u=new np(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(t){const e=t.value,r=Xa(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const u of Object.keys(e.children)){const h=e.children[u],_=Xc(t,u),b=this.processSegmentGroup(_,h,u);if(null===b)return null;r.push(...b)}const i=Zh(r);return i.sort((t,e)=>t.value.outlet===cn?-1:e.value.outlet===cn?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const u of t){const h=this.processSegmentAgainstRoute(u,e,r,i);if(null!==h)return h}return Xi(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!qu(t,e,r,i))return null;let u,h=[],_=[];if("**"===t.path){const z=r.length>0?Bu(r).parameters:{};u=new $u(r,z,Object.freeze(St({},this.urlTree.queryParams)),this.urlTree.fragment,td(t),Cn(t),t.component,t,Qg(e),_p(e)+r.length,vp(t))}else{const z=Hl(e,t,r);if(!z.matched)return null;h=z.consumedSegments,_=r.slice(z.lastChild),u=new $u(h,z.parameters,Object.freeze(St({},this.urlTree.queryParams)),this.urlTree.fragment,td(t),Cn(t),t.component,t,Qg(e),_p(e)+h.length,vp(t))}const b=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:D,slicedSegments:M}=Or(e,h,_,b.filter(z=>void 0===z.redirectTo),this.relativeLinkResolution);var n;if(0===M.length&&D.hasChildren()){const z=this.processChildren(b,D);return null===z?null:[new cs(u,z)]}if(0===b.length&&0===M.length)return[new cs(u,[])];const x=Cn(t)===i,L=this.processSegment(b,D,M,x?cn:i);return null===L?null:[new cs(u,L)]}}function Ea(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Zh(n){const t=[],e=new Set;for(const r of n){if(!Ea(r)){t.push(r);continue}const i=t.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=Zh(r.children);t.push(new cs(r.value,i))}return t.filter(r=>!e.has(r))}function Qg(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function _p(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function td(n){return n.data||{}}function vp(n){return n.resolve||{}}function Ku(n){return Er(t=>{const e=n(t);return e?(0,zn.D)(e).pipe((0,Nt.U)(()=>t)):Et(t)})}class zl extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Qu=new c.OlP("ROUTES");class Cp{constructor(t,e,r,i){this.injector=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,Nt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(e);const h=u.create(t);return new Bl(Fd(h.injector.get(Qu,void 0,c.XFs.Self|c.XFs.Optional)).map(iu),h)}),zo(u=>{throw e._loader$=void 0,u}));return e._loader$=new Al(i,()=>new on.x).pipe(sr()),e._loader$}loadModuleFactory(t){return Vn(t()).pipe((0,gi.z)(e=>e instanceof c.YKP?Et(e):(0,zn.D)(this.compiler.compileModuleAsync(e))))}}class tv{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function nv(n){throw n}function rv(n,t,e){return t.parse("/")}function em(n,t){return Et(null)}const tm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ep={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gi=(()=>{class n{constructor(e,r,i,u,h,_,b){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new on.x,this.errorHandler=nv,this.malformedUriErrorHandler=rv,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:em,afterPreactivation:em},this.urlHandlingStrategy=new tv,this.routeReuseStrategy=new zl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(c.h0i),this.console=h.get(c.c2e);const x=h.get(c.R0b);this.isNgZoneEnabled=x instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new _o(new jt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Cp(h,_,L=>this.triggerEvent(new Gh(L)),L=>this.triggerEvent(new zh(L))),this.routerState=qc(this.currentUrlTree,this.rootComponentType),this.transitions=new $n({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null==(e=this.location.getState())?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(dr(i=>0!==i.id),(0,Nt.U)(i=>es(St({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Er(i=>{let u=!1,h=!1;return Et(i).pipe((0,yr.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?es(St({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Er(_=>{const b=this.browserUrlTree.toString(),D=!this.navigated||_.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return Jh(_.source)&&(this.browserUrlTree=_.extractedUrl),Et(_).pipe(Er(x=>{const L=this.transitions.getValue();return r.next(new jc(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions.getValue()?Ls.E:Promise.resolve(x)}),function(n,t,e,r){return Er(i=>function(n,t,e,r,i){return new dp(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,Nt.U)(u=>es(St({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,yr.b)(x=>{this.currentNavigation=es(St({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,t,e,r,i){return(0,gi.z)(u=>function(n,t,e,r,i="emptyOnly",u="legacy"){try{const h=new Yg(n,t,e,r,i,u).recognize();return null===h?eo(new Yu):Et(h)}catch(h){return eo(h)}}(n,t,u.urlAfterRedirects,e(u.urlAfterRedirects),r,i).pipe((0,Nt.U)(h=>es(St({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yr.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(z,x)}this.browserUrlTree=x.urlAfterRedirects}const L=new Hh(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(L)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:z,source:W,restoredState:ne,extras:fe}=_,Se=new jc(L,this.serializeUrl(z),W,ne);r.next(Se);const xe=qc(z,this.rootComponentType).snapshot;return Et(es(St({},_),{targetSnapshot:xe,urlAfterRedirects:z,extras:es(St({},fe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,_.resolve(null),Ls.E}),Ku(_=>{const{targetSnapshot:b,id:D,extractedUrl:M,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:z}}=_;return this.hooks.beforePreactivation(b,{navigationId:D,appliedUrlTree:M,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!z})}),(0,yr.b)(_=>{const b=new go(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),(0,Nt.U)(_=>es(St({},_),{guards:Gg(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,t){return(0,gi.z)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:h}}=e;return 0===h.length&&0===u.length?Et(es(St({},e),{guardsResult:!0})):function(n,t,e,r){return(0,zn.D)(n).pipe((0,gi.z)(i=>function(n,t,e,r,i){const u=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return u&&0!==u.length?Et(u.map(_=>{const b=Xd(_,t,i);let D;if(function(n){return n&&hs(n.canDeactivate)}(b))D=Vn(b.canDeactivate(n,t,e,r));else{if(!hs(b))throw new Error("Invalid CanDeactivate guard");D=Vn(b(n,t,e,r))}return D.pipe(pa())})).pipe(wo()):Et(!0)}(i.component,i.route,e,t,r)),pa(i=>!0!==i,!0))}(h,r,i,n).pipe((0,gi.z)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,t,e,r){return(0,zn.D)(t).pipe(po(i=>us(function(n,t){return null!==n&&t&&t(new Ml(n)),Et(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new ga(n)),Et(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],u=t.slice(0,t.length-1).reverse().map(h=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(h)).filter(h=>null!==h).map(h=>Zf(()=>Et(h.guards.map(b=>{const D=Xd(b,h.node,e);let M;if(function(n){return n&&hs(n.canActivateChild)}(D))M=Vn(D.canActivateChild(r,n));else{if(!hs(D))throw new Error("Invalid CanActivateChild guard");M=Vn(D(r,n))}return M.pipe(pa())})).pipe(wo())));return Et(u).pipe(wo())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Et(!0);const i=r.map(u=>Zf(()=>{const h=Xd(u,t,e);let _;if(function(n){return n&&hs(n.canActivate)}(h))_=Vn(h.canActivate(t,n));else{if(!hs(h))throw new Error("Invalid CanActivate guard");_=Vn(h(t,n))}return _.pipe(pa())}));return Et(i).pipe(wo())}(n,i.route,e))),pa(i=>!0!==i,!0))}(r,u,n,t):Et(_)),(0,Nt.U)(_=>es(St({},e),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,yr.b)(_=>{if(zs(_.guardsResult)){const D=Vu(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw D.url=_.guardsResult,D}const b=new Xf(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(b)}),dr(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),Ku(_=>{if(_.guards.canActivateChecks.length)return Et(_).pipe((0,yr.b)(b=>{const D=new Ya(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(D)}),Er(b=>{let D=!1;return Et(b).pipe(function(n,t){return(0,gi.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Et(e);let u=0;return(0,zn.D)(i).pipe(po(h=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return Et({});const u={};return(0,zn.D)(i).pipe((0,gi.z)(h=>function(n,t,e,r){const i=Xd(n,t,r);return Vn(i.resolve?i.resolve(t,e):i(t,e))}(n[h],t,e,r).pipe((0,yr.b)(_=>{u[h]=_}))),Pu(1),(0,gi.z)(()=>Object.keys(u).length===i.length?Et(u):Ls.E))}(n._resolve,n,t,r).pipe((0,Nt.U)(u=>(n._resolvedData=u,n.data=St(St({},n.data),Xa(n,e).resolve),null)))}(h.route,r,n,t)),(0,yr.b)(()=>u++),Pu(1),(0,gi.z)(h=>u===i.length?Et(e):Ls.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,yr.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,yr.b)(b=>{const D=new K_(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(D)}))}),Ku(_=>{const{targetSnapshot:b,id:D,extractedUrl:M,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:z}}=_;return this.hooks.afterPreactivation(b,{navigationId:D,appliedUrlTree:M,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!z})}),(0,Nt.U)(_=>{const b=function(n,t,e){const r=eu(n,t._root,e?e._root:void 0);return new jd(r,t)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return es(St({},_),{targetRouterState:b})}),(0,yr.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,t,e)=>(0,Nt.U)(r=>(new Vg(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,yr.b)({next(){u=!0},complete(){u=!0}}),function(n){return(0,Mi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}(()=>{var _;u||h||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(_=this.currentNavigation)?void 0:_.id)===i.id&&(this.currentNavigation=null)}),zo(_=>{if(h=!0,function(n){return n&&n[Ka]}(_)){const b=zs(_.url);b||(this.navigated=!0,this.restoreHistory(i,!0));const D=new Wa(i.id,this.serializeUrl(i.extractedUrl),_.message);r.next(D),b?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Jh(i.source)};this.scheduleNavigation(M,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const b=new Pd(i.id,this.serializeUrl(i.extractedUrl),_);r.next(b);try{i.resolve(this.errorHandler(_))}catch(D){i.reject(D)}}return Ls.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(St(St({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var _;const i={replaceUrl:!0},u=(null==(_=e.state)?void 0:_.navigationId)?e.state:null;if(u){const b=St({},u);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(i.state=b)}const h=this.parseUrl(e.url);this.scheduleNavigation(h,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){fs(e),this.config=e.map(iu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:u,fragment:h,queryParamsHandling:_,preserveFragment:b}=r,D=i||this.routerState.root,M=b?this.currentUrlTree.fragment:h;let x=null;switch(_){case"merge":x=St(St({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,t,e,r,i){if(0===e.length)return zd(t.root,t.root,t,r,i);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Gs(!0,0,n);let t=0,e=!1;const r=n.reduce((i,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const _={};return mi(u.outlets,(b,D)=>{_[D]="string"==typeof b?b.split("/"):b}),[...i,{outlets:_}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===h?(u.split("/").forEach((_,b)=>{0==b&&"."===_||(0==b&&""===_?e=!0:".."===_?t++:""!=_&&i.push(_))}),i):[...i,u]},[]);return new Gs(e,t,r)}(e);if(u.toRoot())return zd(t.root,new jt([],{}),t,r,i);const h=function(n,t,e){if(n.isAbsolute)return new Zi(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const u=e.snapshot._urlSegment;return new Zi(u,u===t.root,0)}const r=Gd(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,u=e;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Zi(r,!1,i-u)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,t,n),_=h.processChildren?wa(h.segmentGroup,h.index,u.commands):nu(h.segmentGroup,h.index,u.commands);return zd(h.segmentGroup,_,t,r,i)}(D,this.currentUrlTree,e,x,null!=M?M:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=zs(e)?e:this.parseUrl(e),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?St({},tm):!1===r?St({},Ep):r,zs(e))return Hs(this.currentUrlTree,e,i);const u=this.parseUrl(e);return Hs(this.currentUrlTree,u,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const u=e[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Lu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,u,h){var Se,xe,qe;if(this.disposed)return Promise.resolve(!1);const _=this.transitions.value,b=Jh(r)&&_&&!Jh(_.source),D=_.rawUrl.toString()===e.toString(),M=_.id===(null==(Se=this.currentNavigation)?void 0:Se.id);if(b&&D&&M)return Promise.resolve(!0);let L,z,W;h?(L=h.resolve,z=h.reject,W=h.promise):W=new Promise((ct,ut)=>{L=ct,z=ut});const ne=++this.navigationId;let fe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),fe=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!=(xe=this.browserPageId)?xe:0:(null!=(qe=this.browserPageId)?qe:0)+1):fe=0,this.setTransition({id:ne,targetPageId:fe,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:u,resolve:L,reject:z,promise:W,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),W.catch(ct=>Promise.reject(ct))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),u=St(St({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(e,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===h?this.currentUrlTree===(null==(u=this.currentNavigation)?void 0:u.finalUrl)&&0===h&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Wa(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Jh(n){return"imperative"!==n}let eh=(()=>{class n{constructor(e,r,i){this.router=e,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new on.x,this.subscription=e.events.subscribe(u=>{u instanceof Lu&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,r,i,u,h){if(0!==e||r||i||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const _={skipLocationChange:$l(this.skipLocationChange),replaceUrl:$l(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$l(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Gi),c.Y36(ii),c.Y36(Re))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&e&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function $l(n){return""===n||!!n}class th{}class nh{preload(t,e){return Et(null)}}let g=(()=>{class n{constructor(e,r,i,u){this.router=e,this.injector=i,this.preloadingStrategy=u,this.loader=new Cp(i,r,b=>e.triggerEvent(new Gh(b)),b=>e.triggerEvent(new zh(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(dr(e=>e instanceof Lu),po(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(c.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;i.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(e,u)):u.children&&i.push(this.processRoutes(e,u.children));return(0,zn.D)(i).pipe((0,fa.J)(),(0,Nt.U)(u=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Et(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,gi.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Gi),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(th))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),p=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof jc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Lu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Rl&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new Rl(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const C=new c.OlP("ROUTER_CONFIGURATION"),I=new c.OlP("ROUTER_FORROOT_GUARD"),N=[Ke,{provide:vo,useClass:ju},{provide:Gi,useFactory:function(n,t,e,r,i,u,h={},_,b){const D=new Gi(null,n,t,e,r,i,Fd(u));return _&&(D.urlHandlingStrategy=_),b&&(D.routeReuseStrategy=b),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(h,D),h.enableTracing&&D.events.subscribe(M=>{var x,L;null==(x=console.group)||x.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null==(L=console.groupEnd)||L.call(console)}),D},deps:[vo,oi,Ke,c.zs3,c.Sil,Qu,C,[class{},new c.FiY],[class{},new c.FiY]]},oi,{provide:ii,useFactory:function(n){return n.routerState.root},deps:[Gi]},g,nh,class{preload(t,e){return e().pipe(zo(()=>Et(null)))}},{provide:C,useValue:{enableTracing:!1}}];function P(){return new c.PXZ("Router",Gi)}let $=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[N,Ee(e),{provide:I,useFactory:ae,deps:[[Gi,new c.FiY,new c.tp0]]},{provide:C,useValue:r||{}},{provide:Re,useFactory:re,deps:[Ae,[new c.tBr(Oe),new c.FiY],C]},{provide:p,useFactory:Q,deps:[Gi,Ig,C]},{provide:th,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nh},{provide:c.PXZ,multi:!0,useFactory:P},[Lt,{provide:c.ip1,multi:!0,useFactory:kt,deps:[Lt]},{provide:Dr,useFactory:tn,deps:[Lt]},{provide:c.tb,multi:!0,useExisting:Dr}]]}}static forChild(e){return{ngModule:n,providers:[Ee(e)]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(I,8),c.LFG(Gi,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Q(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new p(n,t,e)}function re(n,t,e={}){return e.useHash?new ze(n,t):new nt(n,t)}function ae(n){return"guarded"}function Ee(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Qu,multi:!0,useValue:n}]}let Lt=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new on.x}appInitializer(){return this.injector.get(Y,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(_=>r=_),u=this.injector.get(Gi),h=this.injector.get(C);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(C),i=this.injector.get(g),u=this.injector.get(p),h=this.injector.get(Gi),_=this.injector.get(c.z2F);e===_.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),i.setUpPreloading(),u.init(),h.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function kt(n){return n.appInitializer.bind(n)}function tn(n){return n.bootstrapListener.bind(n)}const Dr=new c.OlP("Router Initializer");var rh=J(1537);const ef=["addListener","removeListener"],Sp=["addEventListener","removeEventListener"],y0=["on","off"];function si(n,t,e,r){if((0,xn.m)(e)&&(r=e,e=void 0),r)return si(n,t,e).pipe(Ou(r));const[i,u]=function(n){return(0,xn.m)(n.addEventListener)&&(0,xn.m)(n.removeEventListener)}(n)?Sp.map(h=>_=>n[h](t,_,e)):function(n){return(0,xn.m)(n.addListener)&&(0,xn.m)(n.removeListener)}(n)?ef.map($s(n,t)):function(n){return(0,xn.m)(n.on)&&(0,xn.m)(n.off)}(n)?y0.map($s(n,t)):[];if(!i&&(0,rh.z)(n))return(0,gi.z)(h=>si(h,t,e))((0,Go.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Ln.y(h=>{const _=(...b)=>h.next(1<b.length?b:b[0]);return i(_),()=>u(_)})}function $s(n,t){return e=>r=>n[e](t,r)}var tf=J(2210),rm=J(7398);function ql(n=0,t,e=tf.P){let r=-1;return null!=t&&((0,rm.K)(t)?e=t:r=t),new Ln.y(i=>{let u=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;u<0&&(u=0);let h=0;return e.schedule(function(){i.closed||(i.next(h++),0<=r?this.schedule(void 0,r):i.complete())},u)})}const{isArray:Ip}=Array;function ih(n){return 1===n.length&&Ip(n[0])?n[0]:n}function av(...n){return 1===(n=ih(n)).length?(0,Go.Xf)(n[0]):new Ln.y(function(n){return t=>{let e=[];for(let r=0;e&&!t.closed&&r<n.length;r++)e.push((0,Go.Xf)(n[r]).subscribe(new qn.Q(t,i=>{if(e){for(let u=0;u<e.length;u++)u!==r&&e[u].unsubscribe();e=null}t.next(i)})))}}(n))}var Ap=J(6921);function ou(...n){const t=(0,ni.jO)(n),e=ih(n);return e.length?new Ln.y(r=>{let i=e.map(()=>[]),u=e.map(()=>!1);r.add(()=>{i=u=null});for(let h=0;!r.closed&&h<e.length;h++)(0,Go.Xf)(e[h]).subscribe(new qn.Q(r,_=>{if(i[h].push(_),i.every(b=>b.length)){const b=i.map(D=>D.shift());r.next(t?t(...b):b),i.some((D,M)=>!D.length&&u[M])&&r.complete()}},()=>{u[h]=!0,!i[h].length&&r.complete()}));return()=>{i=u=null}}):Ls.E}new Ln.y(Ap.Z);var to=J(3719);function fr(n){return(0,Mi.e)((t,e)=>{(0,Go.Xf)(n).subscribe(new qn.Q(e,()=>e.complete(),Ap.Z)),!e.closed&&t.subscribe(e)})}function su(n,t){return n===t}function nf(...n){const t=(0,ni.jO)(n);return(0,Mi.e)((e,r)=>{const i=n.length,u=new Array(i);let h=n.map(()=>!1),_=!1;for(let b=0;b<i;b++)(0,Go.Xf)(n[b]).subscribe(new qn.Q(r,D=>{u[b]=D,!_&&!h[b]&&(h[b]=!0,(_=h.every(Sl.y))&&(h=null))},Ap.Z));e.subscribe(new qn.Q(r,b=>{if(_){const D=[b,...u];r.next(t?t(...D):D)}}))})}function cv(n,t){return t?e=>us(t.pipe((0,pi.q)(1),(0,Mi.e)((n,t)=>{n.subscribe(new qn.Q(t,Ap.Z))})),e.pipe(cv(n))):(0,gi.z)((e,r)=>n(e,r).pipe((0,pi.q)(1),function(n){return(0,Nt.U)(()=>n)}(e)))}function dv(n,t=tf.z){const e=ql(n,t);return cv(()=>e)}var Mp=J(3174);let ch=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),Fm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ch]]}),n})(),bf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Fm]}),n})();const fh=["*"],gh=["dialog"];function Yp(n){return null!=n}function $m(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const xC={animation:!0,transitionTimerDelayMs:5};let Qo=(()=>{class n{constructor(){this.animation=xC.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const PC=()=>{},{transitionTimerDelayMs:LT}=xC,Kp=new Map,zi=(n,t,e,r)=>{let i=r.context||{};const u=Kp.get(t);if(u)switch(r.runningTransition){case"continue":return Ls.E;case"stop":n.run(()=>u.transition$.complete()),i=Object.assign(u.context,i),Kp.delete(t)}const h=e(t,r.animation,i)||PC;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>h()),Et(void 0).pipe(function(n){return t=>new Ln.y(e=>t.subscribe(h=>n.run(()=>e.next(h)),h=>n.run(()=>e.error(h)),()=>n.run(()=>e.complete())))}(n));const _=new on.x,b=new on.x,D=_.pipe(function(...n){return t=>us(t,Et(...n))}(!0));Kp.set(t,{transition$:_,complete:()=>{b.next(),b.complete()},context:i});const M=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const x=si(t,"transitionend").pipe(fr(D),dr(({target:z})=>z===t));av(ql(M+LT).pipe(fr(D)),x,b).pipe(fr(D)).subscribe(()=>{Kp.delete(t),n.run(()=>{h(),_.next(),_.complete()})})}),_.asObservable()};let db=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),GT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),WT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),gb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();var bn=(()=>{return(n=bn||(bn={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",bn;var n})();const wb=(n,t)=>!!t&&t.some(e=>e.contains(n)),s1=(n,t)=>!t||null!=function(n,t){return t&&void 0!==n.closest?n.closest(t):null}(n,t),qM="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const a1=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function u1(n){const t=Array.from(n.querySelectorAll(a1)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}const KM=/\s+/,c1=new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const u=this.offsetParent(t);r=this.offset(t,!1),u!==document.documentElement&&(i=this.offset(u,!1)),i.top+=u.clientTop,i.left+=u.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let u={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(u.height=Math.round(u.height),u.width=Math.round(u.width),u.top=Math.round(u.top),u.bottom=Math.round(u.bottom),u.left=Math.round(u.left),u.right=Math.round(u.right)),u}positionElements(t,e,r,i){const[u="top",h="center"]=r.split("-"),_=i?this.offset(t,!1):this.position(t,!1),b=this.getAllStyles(e),D=parseFloat(b.marginTop),M=parseFloat(b.marginBottom),x=parseFloat(b.marginLeft),L=parseFloat(b.marginRight);let z=0,W=0;switch(u){case"top":z=_.top-(e.offsetHeight+D+M);break;case"bottom":z=_.top+_.height;break;case"left":W=_.left-(e.offsetWidth+x+L);break;case"right":W=_.left+_.width}switch(h){case"top":z=_.top;break;case"bottom":z=_.top+_.height-e.offsetHeight;break;case"left":W=_.left;break;case"right":W=_.left+_.width-e.offsetWidth;break;case"center":"top"===u||"bottom"===u?W=_.left+_.width/2-e.offsetWidth/2:z=_.top+_.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(W)}px, ${Math.round(z)}px)`;const ne=e.getBoundingClientRect(),fe=document.documentElement,Se=window.innerHeight||fe.clientHeight,xe=window.innerWidth||fe.clientWidth;return ne.left>=0&&ne.top>=0&&ne.right<=xe&&ne.bottom<=Se}};new Date(1882,10,12),new Date(2174,10,25);let YC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr,bf]]}),n})(),Tb=(()=>{class n{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),KC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),y1=(()=>{class n{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,r){2&e&&c.ekj("disabled",r.disabled)},inputs:{disabled:"disabled"}}),n})(),Sb=(()=>{class n{constructor(e,r){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(c.Y36((0,c.Gpc)(()=>iy)),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,r,i){if(1&e&&c.Suo(i,y1,4),2&e){let u;c.iGM(u=c.CRH())&&(r.menuItems=u)}},hostVars:5,hostBindings:function(e,r){1&e&&c.NdJ("keydown.ArrowUp",function(u){return r.dropdown.onKeyDown(u)})("keydown.ArrowDown",function(u){return r.dropdown.onKeyDown(u)})("keydown.Home",function(u){return r.dropdown.onKeyDown(u)})("keydown.End",function(u){return r.dropdown.onKeyDown(u)})("keydown.Enter",function(u){return r.dropdown.onKeyDown(u)})("keydown.Space",function(u){return r.dropdown.onKeyDown(u)})("keydown.Tab",function(u){return r.dropdown.onKeyDown(u)})("keydown.Shift.Tab",function(u){return r.dropdown.onKeyDown(u)}),2&e&&(c.uIk("x-placement",r.placement),c.ekj("dropdown-menu",!0)("show",r.dropdown.isOpen()))}}),n})(),Tf=(()=>{class n{constructor(e,r){this.dropdown=e,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(c.Y36((0,c.Gpc)(()=>iy)),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,r){2&e&&c.uIk("aria-expanded",r.dropdown.isOpen())}}),n})(),b1=(()=>{class n extends Tf{constructor(e,r){super(e,r)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36((0,c.Gpc)(()=>iy)),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,r){1&e&&c.NdJ("click",function(){return r.dropdown.toggle()})("keydown.ArrowUp",function(u){return r.dropdown.onKeyDown(u)})("keydown.ArrowDown",function(u){return r.dropdown.onKeyDown(u)})("keydown.Home",function(u){return r.dropdown.onKeyDown(u)})("keydown.End",function(u){return r.dropdown.onKeyDown(u)})("keydown.Tab",function(u){return r.dropdown.onKeyDown(u)})("keydown.Shift.Tab",function(u){return r.dropdown.onKeyDown(u)}),2&e&&c.uIk("aria-expanded",r.dropdown.isOpen())},features:[c._Bn([{provide:Tf,useExisting:(0,c.Gpc)(()=>n)}]),c.qOj]}),n})(),iy=(()=>{class n{constructor(e,r,i,u,h,_,b){this._changeDetector=e,this._document=i,this._ngZone=u,this._elementRef=h,this._renderer=_,this._closed$=new on.x,this._bodyContainer=null,this._open=!1,this.openChange=new c.vpe,this.placement=r.placement,this.container=r.container,this.autoClose=r.autoClose,this.display=b?"static":"dynamic",this._zoneSubscription=u.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe((0,pi.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.isFirstChange&&this._applyPlacementClasses(),e.dropdownClass){const{currentValue:r,previousValue:i}=e.dropdownClass;this._applyCustomDropdownClass(r,i)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){!function(n,t,e,r,i,u,h,_){e&&n.runOutsideAngular((n=>qM?()=>setTimeout(()=>n(),100):n)(()=>{const D=si(t,"keydown").pipe(fr(i),dr(L=>L.which===bn.Escape),(0,yr.b)(L=>L.preventDefault())),M=si(t,"mousedown").pipe((0,Nt.U)(L=>{const z=L.target;return 2!==L.button&&!wb(z,h)&&("inside"===e?wb(z,u)&&s1(z,_):"outside"===e?!wb(z,u):s1(z,_)||!wb(z,u))}),fr(i)),x=si(t,"mouseup").pipe(nf(M),dr(([L,z])=>z),dv(0),fr(i));av([D.pipe((0,Nt.U)(L=>0)),x.pipe((0,Nt.U)(L=>1))]).subscribe(L=>n.run(()=>r(L)))}))}(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const r=e.which,i=this._getMenuElements();let u=-1,h=null;const _=this._isEventFromToggle(e);if(!_&&i.length&&i.forEach((b,D)=>{b.contains(e.target)&&(h=b),b===this._document.activeElement&&(u=D)}),r!==bn.Space&&r!==bn.Enter){if(r!==bn.Tab){if(_||h){if(this.open(),i.length){switch(r){case bn.ArrowDown:u=Math.min(u+1,i.length-1);break;case bn.ArrowUp:if(this._isDropup()&&-1===u){u=i.length-1;break}u=Math.max(u-1,0);break;case bn.Home:u=0;break;case bn.End:u=i.length-1}i[u].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const b=this._menu.nativeElement.querySelectorAll(a1);e.shiftKey&&e.target===b[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===b[b.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else si(e.target,"focusout").pipe((0,pi.q)(1)).subscribe(({relatedTarget:b})=>{this._elementRef.nativeElement.contains(b)||this.close()})}}else h&&(!0===this.autoClose||"inside"===this.autoClose)&&si(h,"click").pipe((0,pi.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(r=>!r.disabled).map(r=>r.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&this._applyPlacementClasses("dynamic"===this.display?function(n,t,e,r,i){let u=Array.isArray(e)?e:e.split(KM);const h=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],_=t.classList,b=z=>{const[W,ne]=z.split("-"),fe=[];return i&&(fe.push(`${i}-${W}`),ne&&fe.push(`${i}-${W}-${ne}`),fe.forEach(Se=>{_.add(Se)})),fe};i&&h.forEach(z=>{_.remove(`${i}-${z}`)});let D=u.findIndex(z=>"auto"===z);D>=0&&h.forEach(function(z){null==u.find(W=>-1!==W.search("^"+z))&&u.splice(D++,1,z)});const M=t.style;M.position="absolute",M.top="0",M.left="0",M["will-change"]="transform";let x=null,L=!1;for(x of u){let z=b(x);if(c1.positionElements(n,t,x,r)){L=!0;break}i&&z.forEach(W=>{_.remove(W)})}return L||(x=u[0],b(x),c1.positionElements(n,t,x,r)),x}(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;if(this._menu){const i=this._menu.nativeElement;e.appendChild(this._elementRef.nativeElement,i),e.removeStyle(i,"position"),e.removeStyle(i,"transform")}this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const r=this._renderer,i=this._menu.nativeElement,u=this._bodyContainer=this._bodyContainer||r.createElement("div");r.setStyle(u,"position","absolute"),r.setStyle(i,"position","static"),r.setStyle(u,"z-index","1050"),r.appendChild(u,i),r.appendChild(this._document.body,u)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,r){const i="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;i&&(r&&this._renderer.removeClass(i,r),e&&this._renderer.addClass(i,e))}_applyPlacementClasses(e){const r=this._menu;if(r){e||(e=this._getFirstPlacement(this.placement));const i=this._renderer,u=this._elementRef.nativeElement;i.removeClass(u,"dropup"),i.removeClass(u,"dropdown"),r.placement="static"===this.display?null:e;const h=-1!==e.search("^top")?"dropup":"dropdown";i.addClass(u,h);const _=this._bodyContainer;_&&(i.removeClass(_,"dropup"),i.removeClass(_,"dropdown"),i.addClass(_,h))}}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.sBO),c.Y36(Tb),c.Y36(we),c.Y36(c.R0b),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(KC,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngbDropdown",""]],contentQueries:function(e,r,i){if(1&e&&(c.Suo(i,Sb,5),c.Suo(i,Tf,5)),2&e){let u;c.iGM(u=c.CRH())&&(r._menu=u.first),c.iGM(u=c.CRH())&&(r._anchor=u.first)}},hostVars:2,hostBindings:function(e,r){2&e&&c.ekj("show",r.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display",dropdownClass:"dropdownClass"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[c.TTD]}),n})(),w1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),C1=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Qo))},n.\u0275prov=c.Yz7({factory:function(){return new n(c.LFG(Qo))},token:n,providedIn:"root"}),n})();class Sf{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const gR=()=>{};let E1=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):gR}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,u=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${u+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we))},n.\u0275prov=c.Yz7({factory:function(){return new n(c.LFG(we))},token:n,providedIn:"root"}),n})(),D1=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,pi.q)(1)).subscribe(()=>{zi(this._zone,this._el.nativeElement,(e,r)=>{r&&$m(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return zi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(c.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),c.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class T1{close(t){}dismiss(t){}}class S1{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new on.x,this._dismissed=new on.x,this._hidden=new on.x,t.instance.dismissEvent.subscribe(u=>{this.dismiss(u)}),this.result=new Promise((u,h)=>{this._resolve=u,this._reject=h}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(fr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(fr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Et(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ou(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var sy=(()=>{return(n=sy||(sy={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",sy;var n})();let I1=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new on.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new c.vpe,this.shown=new on.x,this.hidden=new on.x}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,pi.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},h=ou(zi(this._zone,e,()=>e.classList.remove("show"),r),zi(this._zone,this._dialogEl.nativeElement,()=>{},r));return h.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),h}_show(){const e={animation:this.animation,runningTransition:"continue"};ou(zi(this._zone,this._elRef.nativeElement,(u,h)=>{h&&$m(u),u.classList.add("show")},e),zi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{si(e,"keydown").pipe(fr(this._closed$),dr(i=>i.which===bn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(sy.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;si(this._dialogEl.nativeElement,"mousedown").pipe(fr(this._closed$),(0,yr.b)(()=>r=!1),Er(()=>si(e,"mouseup").pipe(fr(this._closed$),(0,pi.q)(1))),dr(({target:i})=>e===i)).subscribe(()=>{r=!0}),si(e,"click").pipe(fr(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(sy.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=u1(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&zi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(we),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&c.Gf(gh,7),2&e){let i;c.iGM(i=c.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(c.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),c.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),c.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:fh,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(c.F$t(),c.TgZ(0,"div",0,1),c.TgZ(2,"div",2),c.Hsn(3),c.qZA(),c.qZA()),2&e&&c.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),A1=(()=>{class n{constructor(e,r,i,u,h,_){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=u,this._rendererFactory=h,this._ngZone=_,this._activeWindowCmptHasChanged=new on.x,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new c.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const b=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=si(t,"focusin").pipe(fr(e),(0,Nt.U)(u=>u.target));si(t,"keydown").pipe(fr(e),dr(u=>u.which===bn.Tab),nf(i)).subscribe(([u,h])=>{const[_,b]=u1(t);(h===_||h===t)&&u.shiftKey&&(b.focus(),u.preventDefault()),h===b&&!u.shiftKey&&(_.focus(),u.preventDefault())}),r&&si(t,"click").pipe(fr(e),nf(i),(0,Nt.U)(u=>u[1])).subscribe(u=>u.focus())})})(this._ngZone,b.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(b.location.nativeElement)}})}open(e,r,i,u){const h=u.container instanceof HTMLElement?u.container:Yp(u.container)?this._document.querySelector(u.container):this._document.body,_=this._rendererFactory.createRenderer(null,null),b=this._scrollBar.compensate(),D=()=>{this._modalRefs.length||(_.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!h)throw new Error(`The specified modal container "${u.container||"body"}" was not found in the DOM.`);const M=new T1,x=this._getContentRef(e,u.injector||r,i,M,u);let L=!1!==u.backdrop?this._attachBackdrop(e,h):void 0,z=this._attachWindowComponent(e,h,x),W=new S1(z,x,L,u.beforeDismiss);return this._registerModalRef(W),this._registerWindowCmpt(z),W.result.then(b,b),W.result.then(D,D),M.close=ne=>{W.close(ne)},M.dismiss=ne=>{W.dismiss(ne)},this._applyWindowOptions(z.instance,u),1===this._modalRefs.length&&_.addClass(this._document.body,"modal-open"),L&&L.instance&&(this._applyBackdropOptions(L.instance,u),L.changeDetectorRef.detectChanges()),z.changeDetectorRef.detectChanges(),W}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let u=e.resolveComponentFactory(D1).create(this._injector);return this._applicationRef.attachView(u.hostView),r.appendChild(u.location.nativeElement),u}_attachWindowComponent(e,r,i){let h=e.resolveComponentFactory(I1).create(this._injector,i.nodes);return this._applicationRef.attachView(h.hostView),r.appendChild(h.location.nativeElement),h}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{Yp(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{Yp(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,u,h){return i?i instanceof c.Rgc?this._createFromTemplateRef(i,u):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,u,h):new Sf([])}_createFromTemplateRef(e,r){const u=e.createEmbeddedView({$implicit:r,close(h){r.close(h)},dismiss(h){r.dismiss(h)}});return this._applicationRef.attachView(u),new Sf([u.rootNodes],u)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new Sf([[r]])}_createFromComponent(e,r,i,u,h){const _=e.resolveComponentFactory(i),b=c.zs3.create({providers:[{provide:T1,useValue:u}],parent:r}),D=_.create(b),M=D.location.nativeElement;return h.scrollable&&M.classList.add("component-host-scrollable"),this._applicationRef.attachView(D.hostView),new Sf([[M]],D.hostView,D)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.z2F),c.LFG(c.zs3),c.LFG(we),c.LFG(E1),c.LFG(c.FYo),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({factory:function(){return new n(c.LFG(c.z2F),c.LFG(c.gxx),c.LFG(we),c.LFG(E1),c.LFG(c.FYo),c.LFG(c.R0b))},token:n,providedIn:"root"}),n})(),ZC=(()=>{class n{constructor(e,r,i,u){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=u}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(A1),c.LFG(C1))},n.\u0275prov=c.Yz7({factory:function(){return new n(c.LFG(c._Vd),c.LFG(c.gxx),c.LFG(A1),c.LFG(C1))},token:n,providedIn:"root"}),n})(),M1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ZC]}),n})(),k1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),Ab=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),SR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),AR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),U1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),kR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),Rb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),hE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();new c.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let If=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})();const $1=[db,UC,GT,WT,gb,YC,w1,M1,k1,Ab,SR,AR,U1,kR,Rb,hE,If];let Xm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$1,db,UC,GT,WT,gb,YC,w1,M1,k1,Ab,SR,AR,U1,kR,Rb,hE,If]}),n})();class jR{}const _h="*";function HR(n,t=null){return{type:2,steps:n,options:t}}function Wn(n){return{type:6,styles:n,offset:null}}function Y1(n){Promise.resolve(null).then(n)}class Jm{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Y1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class K1{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const u=this.players.length;0==u?Y1(()=>this._onFinish()):this.players.forEach(h=>{h.onDone(()=>{++e==u&&this._onFinish()}),h.onDestroy(()=>{++r==u&&this._onDestroy()}),h.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((h,_)=>Math.max(h,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}function e_(){return"undefined"!=typeof window&&void 0!==window.document}function xb(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function yh(n){switch(n.length){case 0:return new Jm;case 1:return n[0];default:return new K1(n)}}function gE(n,t,e,r,i={},u={}){const h=[],_=[];let b=-1,D=null;if(r.forEach(M=>{const x=M.offset,L=x==b,z=L&&D||{};Object.keys(M).forEach(W=>{let ne=W,fe=M[W];if("offset"!==W)switch(ne=t.normalizePropertyName(ne,h),fe){case"!":fe=i[W];break;case _h:fe=u[W];break;default:fe=t.normalizeStyleValue(W,ne,fe,h)}z[ne]=fe}),L||_.push(z),D=z,b=x}),h.length){const M="\n - ";throw new Error(`Unable to animate due to the following errors:${M}${h.join(M)}`)}return _}function Ob(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&Pb(e,"start",n)));break;case"done":n.onDone(()=>r(e&&Pb(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&Pb(e,"destroy",n)))}}function Pb(n,t,e){const r=e.totalTime,u=Fb(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==r?n.totalTime:r,!!e.disabled),h=n._data;return null!=h&&(u._data=h),u}function Fb(n,t,e,r,i="",u=0,h){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:u,disabled:!!h}}function cu(n,t,e){let r;return n instanceof Map?(r=n.get(t),r||n.set(t,r=e)):(r=n[t],r||(r=n[t]=e)),r}function mE(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let _E=(n,t)=>!1,vE=(n,t)=>!1,Q1=(n,t,e)=>[];const Z1=xb();(Z1||"undefined"!=typeof Element)&&(_E=e_()?(n,t)=>{for(;t&&t!==document.documentElement;){if(t===n)return!0;t=t.parentNode||t.host}return!1}:(n,t)=>n.contains(t),vE=(()=>{if(Z1||Element.prototype.matches)return(n,t)=>n.matches(t);{const n=Element.prototype,t=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return t?(e,r)=>t.apply(e,[r]):vE}})(),Q1=(n,t,e)=>{let r=[];if(e){const i=n.querySelectorAll(t);for(let u=0;u<i.length;u++)r.push(i[u])}else{const i=n.querySelector(t);i&&r.push(i)}return r});let rg=null,Lb=!1;function sl(n){rg||(rg=("undefined"!=typeof document?document.body:null)||{},Lb=!!rg.style&&"WebkitAppearance"in rg.style);let t=!0;return rg.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in rg.style,!t&&Lb&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in rg.style)),t}const t_=vE,yE=_E,X1=Q1;function J1(n){const t={};return Object.keys(n).forEach(e=>{const r=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=n[e]}),t}let n_=(()=>{class n{validateStyleProperty(e){return sl(e)}matchesElement(e,r){return t_(e,r)}containsElement(e,r){return yE(e,r)}query(e,r,i){return X1(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,u,h,_=[],b){return new Jm(i,u)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),bE=(()=>{class n{}return n.NOOP=new n_,n})();const wE="ng-enter",CE="ng-leave",Bb="ng-trigger",Ub=".ng-trigger",DE="ng-animating",jb=".ng-animating";function bh(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Hb(parseFloat(t[1]),t[2])}function Hb(n,t){return"s"===t?1e3*n:n}function Gb(n,t,e){return n.hasOwnProperty("duration")?n:function(n,t,e){let i,u=0,h="";if("string"==typeof n){const _=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return t.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=Hb(parseFloat(_[1]),_[2]);const b=_[3];null!=b&&(u=Hb(parseFloat(b),_[4]));const D=_[5];D&&(h=D)}else i=n;if(!e){let _=!1,b=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),_=!0),u<0&&(t.push("Delay values below 0 are not allowed for this animation step."),_=!0),_&&t.splice(b,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:u,easing:h}}(n,t,e)}function dy(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function ld(n,t,e={}){if(t)for(let r in n)e[r]=n[r];else dy(n,e);return e}function TE(n,t,e){return e?t+":"+e+";":""}function $b(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=TE(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=TE(0,nS(e),n.style[e]));n.setAttribute("style",t)}function al(n,t,e){n.style&&(Object.keys(t).forEach(r=>{const i=qb(r);e&&!e.hasOwnProperty(r)&&(e[r]=n.style[i]),n.style[i]=t[r]}),xb()&&$b(n))}function ig(n,t){n.style&&(Object.keys(t).forEach(e=>{const r=qb(e);n.style[r]=""}),xb()&&$b(n))}function hy(n){return Array.isArray(n)?1==n.length?n[0]:HR(n):n}const SE=new RegExp("{{\\s*(.+?)\\s*}}","g");function IE(n){let t=[];if("string"==typeof n){let e;for(;e=SE.exec(n);)t.push(e[1]);SE.lastIndex=0}return t}function r_(n,t,e){const r=n.toString(),i=r.replace(SE,(u,h)=>{let _=t[h];return t.hasOwnProperty(h)||(e.push(`Please provide a value for the animation param ${h}`),_=""),_.toString()});return i==r?n:i}function fy(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const tS=/-+([a-z0-9])/g;function qb(n){return n.replace(tS,(...t)=>t[1].toUpperCase())}function nS(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function rS(n,t){return 0===n||0===t}function AE(n,t,e){const r=Object.keys(e);if(r.length&&t.length){let u=t[0],h=[];if(r.forEach(_=>{u.hasOwnProperty(_)||h.push(_),u[_]=e[_]}),h.length)for(var i=1;i<t.length;i++){let _=t[i];h.forEach(function(b){_[b]=ME(n,b)})}}return t}function Sa(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function ME(n,t){return window.getComputedStyle(n)[t]}function iS(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,t,e){if(":"==n[0]){const b=function(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,e);if("function"==typeof b)return void t.push(b);n=b}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(`The provided transition expression "${n}" is not supported`),t;const i=r[1],u=r[2],h=r[3];t.push(KR(i,h));"<"==u[0]&&!("*"==i&&"*"==h)&&t.push(KR(h,i))}(r,e,t)):e.push(n),e}const Wb=new Set(["true","1"]),Yb=new Set(["false","0"]);function KR(n,t){const e=Wb.has(n)||Yb.has(n),r=Wb.has(t)||Yb.has(t);return(i,u)=>{let h="*"==n||n==i,_="*"==t||t==u;return!h&&e&&"boolean"==typeof i&&(h=i?Wb.has(n):Yb.has(n)),!_&&r&&"boolean"==typeof u&&(_=u?Wb.has(t):Yb.has(t)),h&&_}}const QR=new RegExp("s*:selfs*,?","g");function gy(n,t,e){return new sS(n).build(t,e)}class sS{constructor(t){this._driver=t}build(t,e){const r=new RE(e);return this._resetContextStyleTimingState(r),Sa(this,hy(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const u=[],h=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(_=>{if(this._resetContextStyleTimingState(e),0==_.type){const b=_,D=b.name;D.toString().split(/\s*,\s*/).forEach(M=>{b.name=M,u.push(this.visitState(b,e))}),b.name=D}else if(1==_.type){const b=this.visitTransition(_,e);r+=b.queryCount,i+=b.depCount,h.push(b)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:u,transitions:h,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const u=new Set,h=i||{};if(r.styles.forEach(_=>{if(my(_)){const b=_;Object.keys(b).forEach(D=>{IE(b[D]).forEach(M=>{h.hasOwnProperty(M)||u.add(M)})})}}),u.size){const _=fy(u.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${_.join(", ")}`)}}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=Sa(this,hy(t.animation),e);return{type:1,matchers:iS(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:wh(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>Sa(this,r,e)),options:wh(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const u=t.steps.map(h=>{e.currentTime=r;const _=Sa(this,h,e);return i=Math.max(i,e.currentTime),_});return e.currentTime=i,{type:3,steps:u,options:wh(t.options)}}visitAnimate(t,e){const r=function(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return uS(Gb(n,t).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=uS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return e=e||Gb(r,t),uS(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,u=t.styles?t.styles:Wn({});if(5==u.type)i=this.visitKeyframes(u,e);else{let h=t.styles,_=!1;if(!h){_=!0;const D={};r.easing&&(D.easing=r.easing),h=Wn(D)}e.currentTime+=r.duration+r.delay;const b=this.visitStyle(h,e);b.isEmptyStep=_,i=b}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[];Array.isArray(t.styles)?t.styles.forEach(h=>{"string"==typeof h?h==_h?r.push(h):e.errors.push(`The provided style string value ${h} is not allowed.`):r.push(h)}):r.push(t.styles);let i=!1,u=null;return r.forEach(h=>{if(my(h)){const _=h,b=_.easing;if(b&&(u=b,delete _.easing),!i)for(let D in _)if(_[D].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,u=e.currentTime;r&&u>0&&(u-=r.duration+r.delay),t.styles.forEach(h=>{"string"!=typeof h&&Object.keys(h).forEach(_=>{if(!this._driver.validateStyleProperty(_))return void e.errors.push(`The provided animation property "${_}" is not a supported CSS property for animations`);const b=e.collectedStyles[e.currentQuerySelector],D=b[_];let M=!0;D&&(u!=i&&u>=D.startTime&&i<=D.endTime&&(e.errors.push(`The CSS property "${_}" that exists between the times of "${D.startTime}ms" and "${D.endTime}ms" is also being animated in a parallel animation between the times of "${u}ms" and "${i}ms"`),M=!1),u=D.startTime),M&&(b[_]={startTime:u,endTime:i}),e.options&&function(n,t,e){const r=t.params||{},i=IE(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||e.push(`Unable to resolve the local animation param ${u} in the given list of values`)})}(h[_],e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;let u=0;const h=[];let _=!1,b=!1,D=0;const M=t.steps.map(Se=>{const xe=this._makeStyleAst(Se,e);let qe=null!=xe.offset?xe.offset:function(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(my(e)&&e.hasOwnProperty("offset")){const r=e;t=parseFloat(r.offset),delete r.offset}});else if(my(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(xe.styles),ct=0;return null!=qe&&(u++,ct=xe.offset=qe),b=b||ct<0||ct>1,_=_||ct<D,D=ct,h.push(ct),xe});b&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),_&&e.errors.push("Please ensure that all keyframe offsets are in order");const x=t.steps.length;let L=0;u>0&&u<x?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==u&&(L=1/(x-1));const z=x-1,W=e.currentTime,ne=e.currentAnimateTimings,fe=ne.duration;return M.forEach((Se,xe)=>{const qe=L>0?xe==z?1:L*xe:h[xe],ct=qe*fe;e.currentTime=W+ne.delay+ct,ne.duration=ct,this._validateStyleAst(Se,e),Se.offset=qe,r.styles.push(Se)}),r}visitReference(t,e){return{type:8,animation:Sa(this,hy(t.animation),e),options:wh(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:wh(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:wh(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[u,h]=function(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(QR,"")),n=n.replace(/@\*/g,Ub).replace(/@\w+/g,e=>Ub+"-"+e.substr(1)).replace(/:animating/g,jb),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+u:u,cu(e.collectedStyles,e.currentQuerySelector,{});const _=Sa(this,hy(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:h,animation:_,originalSelector:t.selector,options:wh(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Gb(t.timings,e.errors,!0);return{type:12,animation:Sa(this,hy(t.animation),e),timings:r,options:null}}}class RE{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function my(n){return!Array.isArray(n)&&"object"==typeof n}function wh(n){return n?(n=dy(n)).params&&(n.params=function(n){return n?dy(n):null}(n.params)):n={},n}function uS(n,t,e){return{duration:n,delay:t,easing:e}}function Qb(n,t,e,r,i,u,h=null,_=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:h,subTimeline:_}}class Zb{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const cS=new RegExp(":enter","g"),NE=new RegExp(":leave","g");function _y(n,t,e,r,i,u={},h={},_,b,D=[]){return(new eN).buildKeyframes(n,t,e,r,i,u,h,_,b,D)}class eN{buildKeyframes(t,e,r,i,u,h,_,b,D,M=[]){D=D||new Zb;const x=new ew(t,e,D,i,u,M,[]);x.options=b,x.currentTimeline.setStyles([h],null,x.errors,b),Sa(this,r,x);const L=x.timelines.filter(z=>z.containsAnimation());if(L.length&&Object.keys(_).length){const z=L[L.length-1];z.allowOnlyTimelineStyles()||z.setStyles([_],null,x.errors,b)}return L.length?L.map(z=>z.buildKeyframes()):[Qb(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.consume(e.element);if(r){const i=e.createSubContext(t.options),u=e.currentTimeline.currentTime,h=this._visitSubInstructions(r,i,i.options);u!=h&&e.transformIntoNewTimeline(h)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,r){let u=e.currentTimeline.currentTime;const h=null!=r.duration?bh(r.duration):null,_=null!=r.delay?bh(r.delay):null;return 0!==h&&t.forEach(b=>{const D=e.appendInstructionToTimeline(b,h,_);u=Math.max(u,D.duration+D.delay)}),u}visitReference(t,e){e.updateOptions(t.options,!0),Sa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const u=t.options;if(u&&(u.params||u.delay)&&(i=e.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Jb);const h=bh(u.delay);i.delayNextStep(h)}t.steps.length&&(t.steps.forEach(h=>Sa(this,h,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const u=t.options&&t.options.delay?bh(t.options.delay):0;t.steps.forEach(h=>{const _=e.createSubContext(t.options);u&&_.delayNextStep(u),Sa(this,h,_),i=Math.max(i,_.currentTimeline.currentTime),r.push(_.currentTimeline)}),r.forEach(h=>e.currentTimeline.mergeTimelineCollectedStyles(h)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Gb(e.params?r_(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const u=t.style;5==u.type?this.visitKeyframes(u,e):(e.incrementTime(r.duration),this.visitStyle(u,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(u):r.setStyles(t.styles,u,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,u=r.duration,_=e.createSubContext().currentTimeline;_.easing=r.easing,t.styles.forEach(b=>{_.forwardTime((b.offset||0)*u),_.setStyles(b.styles,b.easing,e.errors,e.options),_.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(_),e.transformIntoNewTimeline(i+u),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},u=i.delay?bh(i.delay):0;u&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Jb);let h=r;const _=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=_.length;let b=null;_.forEach((D,M)=>{e.currentQueryIndex=M;const x=e.createSubContext(t.options,D);u&&x.delayNextStep(u),D===e.element&&(b=x.currentTimeline),Sa(this,t.animation,x),x.currentTimeline.applyStylesToKeyframe(),h=Math.max(h,x.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(h),b&&(e.currentTimeline.mergeTimelineCollectedStyles(b),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,u=t.timings,h=Math.abs(u.duration),_=h*(e.currentQueryTotal-1);let b=h*e.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":b=_-b;break;case"full":b=r.currentStaggerTime}const M=e.currentTimeline;b&&M.delayNextStep(b);const x=M.currentTime;Sa(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const Jb={};class ew{constructor(t,e,r,i,u,h,_,b){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=h,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Jb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=b||new vy(this._driver,e,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=bh(r.duration)),null!=r.delay&&(i.delay=bh(r.delay));const u=r.params;if(u){let h=i.params;h||(h=this.options.params={}),Object.keys(u).forEach(_=>{(!e||!h.hasOwnProperty(_))&&(h[_]=r_(u[_],h,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,u=new ew(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(t),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(t){return this.previousNode=Jb,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},u=new dS(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,u,h){let _=[];if(i&&_.push(this.element),t.length>0){t=(t=t.replace(cS,"."+this._enterClassName)).replace(NE,"."+this._leaveClassName);let D=this._driver.query(this.element,t,1!=r);0!==r&&(D=r<0?D.slice(D.length+r,D.length):D.slice(0,r)),_.push(...D)}return!u&&0==_.length&&h.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),_}}class vy{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new vy(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||_h,this._currentKeyframe[e]=_h}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&(this._previousKeyframe.easing=e);const u=i&&i.params||{},h=function(n,t){const e={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(t),r.forEach(u=>{e[u]=_h})):ld(i,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(h).forEach(_=>{const b=r_(h[_],u,r);this._pendingStyles[_]=b,this._localTimelineStyles.hasOwnProperty(_)||(this._backFill[_]=this._globalTimelineStyles.hasOwnProperty(_)?this._globalTimelineStyles[_]:_h),this._updateStyle(_,b)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const r=this._styleSummary[e],i=t._styleSummary[e];(!r||i.time>r.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((_,b)=>{const D=ld(_,!0);Object.keys(D).forEach(M=>{const x=D[M];"!"==x?t.add(M):x==_h&&e.add(M)}),r||(D.offset=b/this.duration),i.push(D)});const u=t.size?fy(t.values()):[],h=e.size?fy(e.values()):[];if(r){const _=i[0],b=dy(_);_.offset=0,b.offset=1,i=[_,b]}return Qb(this.element,i,u,h,this.duration,this.startTime,this.easing,!1)}}class dS extends vy{constructor(t,e,r,i,u,h,_=!1){super(t,e,h.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=_,this.timings={duration:h.duration,delay:h.delay,easing:h.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const u=[],h=r+e,_=e/h,b=ld(t[0],!1);b.offset=0,u.push(b);const D=ld(t[0],!1);D.offset=hS(_),u.push(D);const M=t.length-1;for(let x=1;x<=M;x++){let L=ld(t[x],!1);L.offset=hS((e+L.offset*r)/h),u.push(L)}r=h,e=0,i="",t=u}return Qb(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function hS(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class kE{}class pS extends kE{normalizePropertyName(t,e){return qb(t)}normalizeStyleValue(t,e,r,i){let u="";const h=r.toString().trim();if(nN[e]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const _=r.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&i.push(`Please provide a CSS unit value for ${t}:${r}`)}return h+u}}const nN=(()=>function(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function xE(n,t,e,r,i,u,h,_,b,D,M,x,L){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:u,toState:r,toStyles:h,timelines:_,queriedElements:b,preStyleProps:D,postStyleProps:M,totalTime:x,errors:L}}const tw={};class OE{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function(n,t,e,r,i){return n.some(u=>u(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){const i=this._stateStyles["*"],u=this._stateStyles[t],h=i?i.buildStyles(e,r):{};return u?u.buildStyles(e,r):h}build(t,e,r,i,u,h,_,b,D,M){const x=[],L=this.ast.options&&this.ast.options.params||tw,W=this.buildStyles(r,_&&_.params||tw,x),ne=b&&b.params||tw,fe=this.buildStyles(i,ne,x),Se=new Set,xe=new Map,qe=new Map,ct="void"===i,ut={params:St(St({},L),ne)},Bt=M?[]:_y(t,e,this.ast.animation,u,h,W,fe,ut,D,x);let wn=0;if(Bt.forEach(Hr=>{wn=Math.max(Hr.duration+Hr.delay,wn)}),x.length)return xE(e,this._triggerName,r,i,ct,W,fe,[],[],xe,qe,wn,x);Bt.forEach(Hr=>{const bd=Hr.element,gT=cu(xe,bd,{});Hr.preStyleProps.forEach(d0=>gT[d0]=!0);const mT=cu(qe,bd,{});Hr.postStyleProps.forEach(d0=>mT[d0]=!0),bd!==e&&Se.add(bd)});const pr=fy(Se.values());return xE(e,this._triggerName,r,i,ct,W,fe,Bt,pr,xe,qe,wn)}}class iN{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r={},i=dy(this.defaultParams);return Object.keys(t).forEach(u=>{const h=t[u];null!=h&&(i[u]=h)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const h=u;Object.keys(h).forEach(_=>{let b=h[_];b.length>1&&(b=r_(b,i,e));const D=this.normalizer.normalizePropertyName(_,e);b=this.normalizer.normalizeStyleValue(_,D,b,e),r[D]=b})}}),r}}class mS{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states={},e.states.forEach(i=>{this.states[i.name]=new iN(i.style,i.options&&i.options.params||{},r)}),sN(this.states,"true","1"),sN(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new OE(t,i,this.states))}),this.fallbackTransition=function(n,t,e){return new OE(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(h,_)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(h=>h.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function sN(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const RF=new Zb;class NF{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,e){const r=[],i=gy(this._driver,e,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,r){const i=t.element,u=gE(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,u,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],u=this._animations[t];let h;const _=new Map;if(u?(h=_y(this._driver,e,u,wE,CE,{},{},r,RF,i),h.forEach(M=>{const x=cu(_,M.element,{});M.postStyleProps.forEach(L=>x[L]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),h=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);_.forEach((M,x)=>{Object.keys(M).forEach(L=>{M[L]=this._driver.computeStyle(x,L,_h)})});const D=yh(h.map(M=>{const x=_.get(M.element);return this._buildPlayer(M,{},x)}));return this._playersById[t]=D,D.onDestroy(()=>this.destroy(t)),this.players.push(D),D}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,r,i){const u=Fb(e,"","","");return Ob(this._getPlayer(t),r,u,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const u=this._getPlayer(t);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const aN="ng-animate-queued",uN="ng-animate-disabled",_S=".ng-animate-disabled",xF=[],dN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ul="__ng_removed";class PE{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=null!=(n=r?t.value:t)?n:null,r){const u=dy(t);delete u.value,this.options=u}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const yy="void",vS=new PE(yy);class PF{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,du(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${e}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${e}" is not supported!`);var n;const u=cu(this._elementListeners,t,[]),h={name:e,phase:r,callback:i};u.push(h);const _=cu(this._engine.statesByElement,t,{});return _.hasOwnProperty(e)||(du(t,Bb),du(t,Bb+"-"+e),_[e]=vS),()=>{this._engine.afterFlush(()=>{const b=u.indexOf(h);b>=0&&u.splice(b,1),this._triggers[e]||delete _[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,r,i=!0){const u=this._getTrigger(e),h=new yS(this.id,e,t);let _=this._engine.statesByElement.get(t);_||(du(t,Bb),du(t,Bb+"-"+e),this._engine.statesByElement.set(t,_={}));let b=_[e];const D=new PE(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&b&&D.absorbOptions(b.options),_[e]=D,b||(b=vS),D.value!==yy&&b.value===D.value){if(!function(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const u=e[i];if(!t.hasOwnProperty(u)||n[u]!==t[u])return!1}return!0}(b.params,D.params)){const ne=[],fe=u.matchStyles(b.value,b.params,ne),Se=u.matchStyles(D.value,D.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{ig(t,fe),al(t,Se)})}return}const L=cu(this._engine.playersByElement,t,[]);L.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==e&&ne.queued&&ne.destroy()});let z=u.matchTransition(b.value,D.value,t,D.params),W=!1;if(!z){if(!i)return;z=u.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:z,fromState:b,toState:D,player:h,isFallbackTransition:W}),W||(du(t,aN),h.onStart(()=>{og(t,aN)})),h.onDone(()=>{let ne=this.players.indexOf(h);ne>=0&&this.players.splice(ne,1);const fe=this._engine.playersByElement.get(t);if(fe){let Se=fe.indexOf(h);Se>=0&&fe.splice(Se,1)}}),this.players.push(h),L.push(h),h}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,r)=>{delete e[t]}),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Ub,!0);r.forEach(i=>{if(i[ul])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(h=>h.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const u=this._engine.statesByElement.get(t);if(u){const h=[];if(Object.keys(u).forEach(_=>{if(this._triggers[_]){const b=this.trigger(t,_,yy,i);b&&h.push(b)}}),h.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),r&&yh(h).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(u=>{const h=u.name;if(i.has(h))return;i.add(h);const b=this._triggers[h].fallbackTransition,D=r[h]||vS,M=new PE(yy),x=new yS(this.id,h,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:h,transition:b,fromState:D,toState:M,player:x,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(t):[];if(u&&u.length)i=!0;else{let h=t;for(;h=h.parentNode;)if(r.statesByElement.get(h)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const u=t[ul];(!u||u===dN)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){du(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,h=this._elementListeners.get(u);h&&h.forEach(_=>{if(_.name==r.triggerName){const b=Fb(u,r.triggerName,r.fromState.value,r.toState.value);b._data=t,Ob(r.player,_.phase,b,_.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const u=r.transition.ast.depCount,h=i.transition.ast.depCount;return 0==u||0==h?u-h:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class hN{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new PF(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let u=r;u>=0;u--)if(this.driver.containsElement(this._namespaceList[u].hostElement,e)){this._namespaceList.splice(u+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const h=r[i[u]].namespaceId;if(h){const _=this._fetchNamespace(h);_&&e.add(_)}}}return e}trigger(t,e,r,i){if(s_(e)){const u=this._fetchNamespace(t);if(u)return u.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!s_(e))return;const u=e[ul];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const h=this.collectedLeaveElements.indexOf(e);h>=0&&this.collectedLeaveElements.splice(h,1)}if(t){const h=this._fetchNamespace(t);h&&h.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),du(t,uN)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),og(t,uN))}removeNode(t,e,r,i){if(s_(e)){const u=t?this._fetchNamespace(t):null;if(u?u.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const h=this.namespacesByHostElement.get(e);h&&h.id!==t&&h.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i){this.collectedLeaveElements.push(e),e[ul]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(t,e,r,i,u){return s_(e)?this._fetchNamespace(t).listen(e,r,i,u):()=>{}}_buildInstruction(t,e,r,i,u){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,u)}destroyInnerAnimations(t){let e=this.driver.query(t,Ub,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,jb,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return yh(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[ul];if(e&&e.setForRemoval){if(t[ul]=dN,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,_S)&&this.markElementAsDisabled(t,!1),this.driver.query(t,_S,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)du(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?yh(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const r=new Zb,i=[],u=new Map,h=[],_=new Map,b=new Map,D=new Map,M=new Set;this.disabledNodes.forEach(Mt=>{M.add(Mt);const Gt=this.driver.query(Mt,".ng-animate-queued",!0);for(let pn=0;pn<Gt.length;pn++)M.add(Gt[pn])});const x=this.bodyNode,L=Array.from(this.statesByElement.keys()),z=wS(L,this.collectedEnterElements),W=new Map;let ne=0;z.forEach((Mt,Gt)=>{const pn=wE+ne++;W.set(Gt,pn),Mt.forEach(er=>du(er,pn))});const fe=[],Se=new Set,xe=new Set;for(let Mt=0;Mt<this.collectedLeaveElements.length;Mt++){const Gt=this.collectedLeaveElements[Mt],pn=Gt[ul];pn&&pn.setForRemoval&&(fe.push(Gt),Se.add(Gt),pn.hasAnimation?this.driver.query(Gt,".ng-star-inserted",!0).forEach(er=>Se.add(er)):xe.add(Gt))}const qe=new Map,ct=wS(L,Array.from(Se));ct.forEach((Mt,Gt)=>{const pn=CE+ne++;qe.set(Gt,pn),Mt.forEach(er=>du(er,pn))}),t.push(()=>{z.forEach((Mt,Gt)=>{const pn=W.get(Gt);Mt.forEach(er=>og(er,pn))}),ct.forEach((Mt,Gt)=>{const pn=qe.get(Gt);Mt.forEach(er=>og(er,pn))}),fe.forEach(Mt=>{this.processLeaveNode(Mt)})});const ut=[],Bt=[];for(let Mt=this._namespaceList.length-1;Mt>=0;Mt--)this._namespaceList[Mt].drainQueuedTransitions(e).forEach(pn=>{const er=pn.player,Ts=pn.element;if(ut.push(er),this.collectedEnterElements.length){const Ff=Ts[ul];if(Ff&&Ff.setForMove)return void er.destroy()}const Pf=!x||!this.driver.containsElement(x,Ts),pc=qe.get(Ts),z_=W.get(Ts),Wi=this._buildInstruction(pn,r,z_,pc,Pf);if(Wi.errors&&Wi.errors.length)Bt.push(Wi);else{if(Pf)return er.onStart(()=>ig(Ts,Wi.fromStyles)),er.onDestroy(()=>al(Ts,Wi.toStyles)),void i.push(er);if(pn.isFallbackTransition)return er.onStart(()=>ig(Ts,Wi.fromStyles)),er.onDestroy(()=>al(Ts,Wi.toStyles)),void i.push(er);Wi.timelines.forEach(Ff=>Ff.stretchStartingKeyframe=!0),r.append(Ts,Wi.timelines),h.push({instruction:Wi,player:er,element:Ts}),Wi.queriedElements.forEach(Ff=>cu(_,Ff,[]).push(er)),Wi.preStyleProps.forEach((Ff,_T)=>{const uM=Object.keys(Ff);if(uM.length){let h0=b.get(_T);h0||b.set(_T,h0=new Set),uM.forEach(WP=>h0.add(WP))}}),Wi.postStyleProps.forEach((Ff,_T)=>{const uM=Object.keys(Ff);let h0=D.get(_T);h0||D.set(_T,h0=new Set),uM.forEach(WP=>h0.add(WP))})}});if(Bt.length){const Mt=[];Bt.forEach(Gt=>{Mt.push(`@${Gt.triggerName} has failed due to:\n`),Gt.errors.forEach(pn=>Mt.push(`- ${pn}\n`))}),ut.forEach(Gt=>Gt.destroy()),this.reportError(Mt)}const wn=new Map,pr=new Map;h.forEach(Mt=>{const Gt=Mt.element;r.has(Gt)&&(pr.set(Gt,Gt),this._beforeAnimationBuild(Mt.player.namespaceId,Mt.instruction,wn))}),i.forEach(Mt=>{const Gt=Mt.element;this._getPreviousPlayers(Gt,!1,Mt.namespaceId,Mt.triggerName,null).forEach(er=>{cu(wn,Gt,[]).push(er),er.destroy()})});const Hr=fe.filter(Mt=>gN(Mt,b,D)),bd=new Map;bS(bd,this.driver,xe,D,_h).forEach(Mt=>{gN(Mt,b,D)&&Hr.push(Mt)});const mT=new Map;z.forEach((Mt,Gt)=>{bS(mT,this.driver,new Set(Mt),b,"!")}),Hr.forEach(Mt=>{const Gt=bd.get(Mt),pn=mT.get(Mt);bd.set(Mt,St(St({},Gt),pn))});const d0=[],wH=[],CH={};h.forEach(Mt=>{const{element:Gt,player:pn,instruction:er}=Mt;if(r.has(Gt)){if(M.has(Gt))return pn.onDestroy(()=>al(Gt,er.toStyles)),pn.disabled=!0,pn.overrideTotalTime(er.totalTime),void i.push(pn);let Ts=CH;if(pr.size>1){let pc=Gt;const z_=[];for(;pc=pc.parentNode;){const Wi=pr.get(pc);if(Wi){Ts=Wi;break}z_.push(pc)}z_.forEach(Wi=>pr.set(Wi,Ts))}const Pf=this._buildAnimation(pn.namespaceId,er,wn,u,mT,bd);if(pn.setRealPlayer(Pf),Ts===CH)d0.push(pn);else{const pc=this.playersByElement.get(Ts);pc&&pc.length&&(pn.parentPlayer=yh(pc)),i.push(pn)}}else ig(Gt,er.fromStyles),pn.onDestroy(()=>al(Gt,er.toStyles)),wH.push(pn),M.has(Gt)&&i.push(pn)}),wH.forEach(Mt=>{const Gt=u.get(Mt.element);if(Gt&&Gt.length){const pn=yh(Gt);Mt.setRealPlayer(pn)}}),i.forEach(Mt=>{Mt.parentPlayer?Mt.syncPlayerEvents(Mt.parentPlayer):Mt.destroy()});for(let Mt=0;Mt<fe.length;Mt++){const Gt=fe[Mt],pn=Gt[ul];if(og(Gt,CE),pn&&pn.hasAnimation)continue;let er=[];if(_.size){let Pf=_.get(Gt);Pf&&Pf.length&&er.push(...Pf);let pc=this.driver.query(Gt,jb,!0);for(let z_=0;z_<pc.length;z_++){let Wi=_.get(pc[z_]);Wi&&Wi.length&&er.push(...Wi)}}const Ts=er.filter(Pf=>!Pf.destroyed);Ts.length?LF(this,Gt,Ts):this.processLeaveNode(Gt)}return fe.length=0,d0.forEach(Mt=>{this.players.push(Mt),Mt.onDone(()=>{Mt.destroy();const Gt=this.players.indexOf(Mt);this.players.splice(Gt,1)}),Mt.play()}),d0}elementContainsData(t,e){let r=!1;const i=e[ul];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,u){let h=[];if(e){const _=this.playersByQueriedElement.get(t);_&&(h=_)}else{const _=this.playersByElement.get(t);if(_){const b=!u||u==yy;_.forEach(D=>{D.queued||!b&&D.triggerName!=i||h.push(D)})}}return(r||i)&&(h=h.filter(_=>!(r&&r!=_.namespaceId||i&&i!=_.triggerName))),h}_beforeAnimationBuild(t,e,r){const u=e.element,h=e.isRemovalTransition?void 0:t,_=e.isRemovalTransition?void 0:e.triggerName;for(const b of e.timelines){const D=b.element,M=D!==u,x=cu(r,D,[]);this._getPreviousPlayers(D,M,h,_,e.toState).forEach(z=>{const W=z.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),z.destroy(),x.push(z)})}ig(u,e.fromStyles)}_buildAnimation(t,e,r,i,u,h){const _=e.triggerName,b=e.element,D=[],M=new Set,x=new Set,L=e.timelines.map(W=>{const ne=W.element;M.add(ne);const fe=ne[ul];if(fe&&fe.removedBeforeQueried)return new Jm(W.duration,W.delay);const Se=ne!==b,xe=function(n){const t=[];return by(n,t),t}((r.get(ne)||xF).map(wn=>wn.getRealPlayer())).filter(wn=>!!wn.element&&wn.element===ne),qe=u.get(ne),ct=h.get(ne),ut=gE(0,this._normalizer,0,W.keyframes,qe,ct),Bt=this._buildPlayer(W,ut,xe);if(W.subTimeline&&i&&x.add(ne),Se){const wn=new yS(t,_,ne);wn.setRealPlayer(Bt),D.push(wn)}return Bt});D.forEach(W=>{cu(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function(n,t,e){let r;if(n instanceof Map){if(r=n.get(t),r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}}else if(r=n[t],r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&delete n[t]}return r}(this.playersByQueriedElement,W.element,W))}),M.forEach(W=>du(W,DE));const z=yh(L);return z.onDestroy(()=>{M.forEach(W=>og(W,DE)),al(b,e.toStyles)}),x.forEach(W=>{cu(i,W,[]).push(z)}),z}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Jm(t.duration,t.delay)}}class yS{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Jm,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(r=>Ob(t,e,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){cu(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function s_(n){return n&&1===n.nodeType}function FE(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function bS(n,t,e,r,i){const u=[];e.forEach(b=>u.push(FE(b)));const h=[];r.forEach((b,D)=>{const M={};b.forEach(x=>{const L=M[x]=t.computeStyle(D,x,i);(!L||0==L.length)&&(D[ul]=OF,h.push(D))}),n.set(D,M)});let _=0;return e.forEach(b=>FE(b,u[_++])),h}function wS(n,t){const e=new Map;if(n.forEach(_=>e.set(_,[])),0==t.length)return e;const i=new Set(t),u=new Map;function h(_){if(!_)return 1;let b=u.get(_);if(b)return b;const D=_.parentNode;return b=e.has(D)?D:i.has(D)?1:h(D),u.set(_,b),b}return t.forEach(_=>{const b=h(_);1!==b&&e.get(b).push(_)}),e}const u_="$$classes";function du(n,t){if(n.classList)n.classList.add(t);else{let e=n[u_];e||(e=n[u_]={}),e[t]=!0}}function og(n,t){if(n.classList)n.classList.remove(t);else{let e=n[u_];e&&delete e[t]}}function LF(n,t,e){yh(e).onDone(()=>n.processLeaveNode(t))}function by(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof K1?by(r.players,t):t.push(r)}}function gN(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(u=>i.add(u)):t.set(n,r),e.delete(n),!0}class LE{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new hN(t,e,r),this._timelineEngine=new NF(t,e,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(t,e,r,i,u){const h=t+"-"+i;let _=this._triggerCache[h];if(!_){const b=[],D=gy(this._driver,u,b);if(b.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${b.join("\n - ")}`);_=function(n,t,e){return new mS(n,t,e)}(i,D,this._normalizer),this._triggerCache[h]=_}this._transitionEngine.registerTrigger(e,i,_)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[u,h]=mE(r);this._timelineEngine.command(u,e,h,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,u){if("@"==r.charAt(0)){const[h,_]=mE(r);return this._timelineEngine.listen(h,e,_,u)}return this._transitionEngine.listen(t,e,r,i,u)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function mN(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=DS(t[0]),t.length>1&&(r=DS(t[t.length-1]))):t&&(e=DS(t)),e||r?new _N(n,e,r):null}let _N=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(e);u||n.initialStylesByElement.set(e,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&al(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(al(this._element,this._initialStyles),this._endStyles&&(al(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ig(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ig(this._element,this._endStyles),this._endStyles=null),al(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function DS(n){let t=null;const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=e[r];TS(i)&&(t=t||{},t[i]=n[i])}return t}function TS(n){return"display"===n||"position"===n}const yN="animation",bN="animationend";class wN{constructor(t,e,r,i,u,h,_){this._element=t,this._name=e,this._duration=r,this._delay=i,this._easing=u,this._fillMode=h,this._onDoneFn=_,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=b=>this._handleCallback(b)}apply(){(function(n,t){const e=IS(n,"").trim();let r=0;e.length&&(function(n,t){let e=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&e++;return e}(e)+1,t=`${e}, ${t}`),BE(n,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),SS(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){CN(this._element,this._name,"paused")}resume(){CN(this._element,this._name,"running")}setPosition(t){const e=DN(this._element,this._name);this._position=t*this._duration,BE(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),SS(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,t){const r=IS(n,"").split(","),i=nw(r,t);i>=0&&(r.splice(i,1),BE(n,"",r.join(",")))}(this._element,this._name))}}function CN(n,t,e){BE(n,"PlayState",e,DN(n,t))}function DN(n,t){const e=IS(n,"");return e.indexOf(",")>0?nw(e.split(","),t):nw([e],t)}function nw(n,t){for(let e=0;e<n.length;e++)if(n[e].indexOf(t)>=0)return e;return-1}function SS(n,t,e){e?n.removeEventListener(bN,t):n.addEventListener(bN,t)}function BE(n,t,e,r){const i=yN+t;if(null!=r){const u=n.style[i];if(u.length){const h=u.split(",");h[r]=e,e=h.join(",")}}n.style[i]=e}function IS(n,t){return n.style[yN+t]||""}class AS{constructor(t,e,r,i,u,h,_,b){this.element=t,this.keyframes=e,this.animationName=r,this._duration=i,this._delay=u,this._finalStyles=_,this._specialStyles=b,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=h||"linear",this.totalTime=i+u,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new wN(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(t[r]=e?this._finalStyles[r]:ME(this.element,r))})}this.currentSnapshot=t}}class IN extends Jm{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=J1(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Ia{constructor(){this._count=0}validateStyleProperty(t){return sl(t)}matchesElement(t,e){return t_(t,e)}containsElement(t,e){return yE(t,e)}query(t,e,r){return X1(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,r){r=r.map(_=>J1(_));let i=`@keyframes ${e} {\n`,u="";r.forEach(_=>{u=" ";const b=parseFloat(_.offset);i+=`${u}${100*b}% {\n`,u+=" ",Object.keys(_).forEach(D=>{const M=_[D];switch(D){case"offset":return;case"easing":return void(M&&(i+=`${u}animation-timing-function: ${M};\n`));default:return void(i+=`${u}${D}: ${M};\n`)}}),i+=`${u}}\n`}),i+="}\n";const h=document.createElement("style");return h.textContent=i,h}animate(t,e,r,i,u,h=[],_){const b=h.filter(fe=>fe instanceof AS),D={};rS(r,i)&&b.forEach(fe=>{let Se=fe.currentSnapshot;Object.keys(Se).forEach(xe=>D[xe]=Se[xe])});const M=function(n){let t={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(t[i]=r[i])})}),t}(e=AE(t,e,D));if(0==r)return new IN(t,M);const x="gen_css_kf_"+this._count++,L=this.buildKeyframeElement(t,x,e);(function(n){var e;const t=null==(e=n.getRootNode)?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(t).appendChild(L);const W=mN(t,e),ne=new AS(t,e,x,r,i,u,M,W);return ne.onDestroy(()=>{var n;(n=L).parentNode.removeChild(n)}),ne}}class GE{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,r){return t.animate(e,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:ME(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class kS{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(zE().toString()),this._cssKeyframesDriver=new Ia}validateStyleProperty(t){return sl(t)}matchesElement(t,e){return t_(t,e)}containsElement(t,e){return yE(t,e)}query(t,e,r){return X1(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,r,i,u,h=[],_){if(!_&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,r,i,u,h);const M={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(M.easing=u);const x={},L=h.filter(W=>W instanceof GE);rS(r,i)&&L.forEach(W=>{let ne=W.currentSnapshot;Object.keys(ne).forEach(fe=>x[fe]=ne[fe])});const z=mN(t,e=AE(t,e=e.map(W=>ld(W,!1)),x));return new GE(t,e,M,z)}}function zE(){return e_()&&Element.prototype.animate||{}}let xS=(()=>{class n extends jR{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?HR(e):e;return rw(this._renderer,null,r,"register",[i]),new NN(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class NN extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new kN(this._id,t,e||{},this._renderer)}}class kN{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return rw(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!=(e=null==(t=this._renderer.engine.players[+this.id])?void 0:t.getPosition())?e:0}}function rw(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const $E="@.disabled";let qE=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,h)=>{const _=null==h?void 0:h.parentNode(u);_&&h.removeChild(_,u)}}createRenderer(e,r){const u=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let M=this._rendererCache.get(u);return M||(M=new OS("",u,this.engine),this._rendererCache.set(u,M)),M}const h=r.id,_=r.id+"-"+this._currentId;this._currentId++,this.engine.register(_,e);const b=M=>{Array.isArray(M)?M.forEach(b):this.engine.registerTrigger(h,_,e,M.name,M)};return r.data.animation.forEach(b),new ic(this,_,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[h,_]=u;h(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(LE),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class OS{constructor(t,e,r){this.namespaceId=t,this.delegate=e,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>e.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==$E?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class ic extends OS{constructor(t,e,r,i){super(e,r,i),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==$E?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.substr(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let u=e.substr(1),h="";return"@"!=u.charAt(0)&&([u,h]=function(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(u)),this.engine.listen(this.namespaceId,i,u,h,_=>{this.factory.scheduleListenerCallback(_._data||-1,r,_)})}return this.delegate.listen(t,e,r)}}let ON=(()=>{class n extends LE{constructor(e,r,i){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we),c.LFG(bE),c.LFG(kE))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const PS=new c.OlP("AnimationModuleType"),LN=[{provide:jR,useClass:xS},{provide:kE,useFactory:function(){return new pS}},{provide:LE,useClass:ON},{provide:c.FYo,useFactory:function(n,t,e){return new qE(n,t,e)},deps:[Ru,LE,c.R0b]}],FS=[{provide:bE,useFactory:function(){return"function"==typeof zE()?new kS:new Ia}},{provide:PS,useValue:"BrowserAnimations"},...LN],LS=[{provide:bE,useClass:n_},{provide:PS,useValue:"NoopAnimations"},...LN];let VN=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?LS:FS}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:FS,imports:[da]}),n})();const VS=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,c.f3M)(we)}});let WE,UN=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new c.vpe,e){const i=e.documentElement?e.documentElement.dir:null,u=(e.body?e.body.dir:null)||i;this.value="ltr"===u||"rtl"===u?u:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(VS,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function c_(n){return Array.isArray(n)?n:[n]}function wi(n){return null==n?"":"string"==typeof n?n:`${n}px`}try{WE="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){WE=!1}let f_,sg=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(n){return n===Sd}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!WE)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function GS(){if(null==f_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return f_=!1,f_;if("scrollBehavior"in document.documentElement.style)f_=!0;else{const n=Element.prototype.scrollTo;f_=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return f_}function QE(n){return n.composedPath?n.composedPath()[0]:n.target}function Ch(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}var ZE=J(2869);const ag={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=ag;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=t(u=>{e=void 0,n(u)});return new $a.w0(()=>null==e?void 0:e(i))},requestAnimationFrame(...n){const{delegate:t}=ag;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=ag;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var zS=J(8843);new class extends zS.v{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let r,i=-1;t=t||e.shift();const u=e.length;do{if(r=t.execute(t.state,t.delay))break}while(++i<u&&(t=e.shift()));if(this._active=!1,r){for(;++i<u&&(t=e.shift());)t.unsubscribe();throw r}}}(class extends ZE.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=ag.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(ag.cancelAnimationFrame(e),t._scheduled=void 0)}});let $i,qS=1;const JE={};function WS(n){return n in JE&&(delete JE[n],!0)}const YN={setImmediate(n){const t=qS++;return JE[t]=!0,$i||($i=Promise.resolve()),$i.then(()=>WS(t)&&n()),t},clearImmediate(n){WS(n)}},{setImmediate:lw,clearImmediate:KN}=YN,eD={setImmediate(...n){const{delegate:t}=eD;return((null==t?void 0:t.setImmediate)||lw)(...n)},clearImmediate(n){const{delegate:t}=eD;return((null==t?void 0:t.clearImmediate)||KN)(n)},delegate:void 0};new class extends zS.v{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let r,i=-1;t=t||e.shift();const u=e.length;do{if(r=t.execute(t.state,t.delay))break}while(++i<u&&(t=e.shift()));if(this._active=!1,r){for(;++i<u&&(t=e.shift());)t.unsubscribe();throw r}}}(class extends ZE.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=eD.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(eD.clearImmediate(e),t._scheduled=void 0)}});function KS(n,t=tf.P){return function(n){return(0,Mi.e)((t,e)=>{let r=!1,i=null,u=null,h=!1;const _=()=>{if(null==u||u.unsubscribe(),u=null,r){r=!1;const D=i;i=null,e.next(D)}h&&e.complete()},b=()=>{u=null,h&&e.complete()};t.subscribe(new qn.Q(e,D=>{r=!0,i=D,u||(0,Go.Xf)(n()).subscribe(u=new qn.Q(e,_,b))},()=>{h=!0,(!r||!u||u.closed)&&e.complete()}))})}(()=>ql(n,t))}let nk=(()=>{class n{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new on.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Ln.y(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(KS(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Et()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(dr(u=>!u||i.indexOf(u)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,u)=>{this._scrollableContainsElement(u,e)&&r.push(u)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=function(n){return n instanceof c.SBq?n.nativeElement:n}(r),u=e.getElementRef().nativeElement;do{if(i==u)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>si(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(sg),c.LFG(we,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tD=(()=>{class n{constructor(e,r,i){this._platform=e,this._change=new on.x,this._changeListener=u=>{this._change.next(u)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,u=i.getBoundingClientRect();return{top:-u.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-u.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(KS(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(sg),c.LFG(c.R0b),c.LFG(we,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),nD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[l_,YE,hw],l_,hw]}),n})(),oL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[nD]]}),n})(),Ay=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),My=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Ay]}),n})();const vI="cdk-high-contrast-black-on-white",zk="cdk-high-contrast-white-on-black",yI="cdk-high-contrast-active";let $k=(()=>{class n{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,u=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),u){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(yI),e.remove(vI),e.remove(zk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(yI),e.add(vI)):2===r&&(e.add(yI),e.add(zk))}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(sg),c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N2=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG($k))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[YE,My]]}),n})();const o=new c.GfV("13.0.2"),O=new c.GfV("13.0.2"),q=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let K=(()=>{class n{constructor(e,r,i){this._hasDoneGlobalChecks=!1,this._document=i,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!(0,c.X6Q)()||Ch())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const r=getComputedStyle(e);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&O.full!==o.full&&console.warn("The Angular Material version ("+O.full+") does not match the Angular CDK version ("+o.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(e){return new(e||n)(c.LFG($k),c.LFG(q,8),c.LFG(we))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[l_],l_]}),n})(),P2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[K,YE],K]}),n})(),_6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[K]]}),n})(),F2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[P2,Vr,K,_6]]}),n})(),O6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[oL,K],K]}),n})(),Wk=(()=>{class n{constructor(){this.changes=new on.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L6={provide:Wk,deps:[[new c.FiY,new c.tp0,Wk]],useFactory:function(n){return n||new Wk}};let V6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[L6],imports:[[Vr,K]]}),n})(),B6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[P2,K],K]}),n})();class Yk{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class U6 extends Yk{constructor(t,e,r,i){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i}}class j6 extends Yk{constructor(t,e,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class H6 extends Yk{constructor(t){super(),this.element=t instanceof c.SBq?t.nativeElement:t}}class z6 extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof U6?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof j6?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof H6?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,r,i,u){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=h=>{const _=h.element,b=this._document.createComment("dom-portal");_.parentNode.insertBefore(b,_),this.outletElement.appendChild(_),this._attachedPortal=h,super.setDisposeFn(()=>{b.parentNode&&b.parentNode.replaceChild(_,b)})},this._document=u}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let $6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const H2=GS();class q6{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=wi(-this._previousScrollPosition.left),t.style.top=wi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,i=this._document.body.style,u=r.scrollBehavior||"",h=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),H2&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),H2&&(r.scrollBehavior=u,i.scrollBehavior=h)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class W6{constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class G2{enable(){}disable(){}attach(){}}function Kk(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function z2(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Y6{constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Kk(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let K6=(()=>{class n{constructor(e,r,i,u){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new G2,this.close=h=>new W6(this._scrollDispatcher,this._ngZone,this._viewportRuler,h),this.block=()=>new q6(this._viewportRuler,this._document),this.reposition=h=>new Y6(this._scrollDispatcher,this._viewportRuler,this._ngZone,h),this._document=u}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(nk),c.LFG(tD),c.LFG(c.R0b),c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Q6{constructor(t){if(this.scrollStrategy=new G2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class Z6{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let $2=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X6=(()=>{class n extends $2{constructor(e){super(e),this._keydownListener=r=>{const i=this._attachedOverlays;for(let u=i.length-1;u>-1;u--)if(i[u]._keydownEvents.observers.length>0){i[u]._keydownEvents.next(r);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J6=(()=>{class n extends $2{constructor(e,r){super(e),this._platform=r,this._cursorStyleIsSet=!1,this._pointerDownListener=i=>{this._pointerDownEventTarget=QE(i)},this._clickListener=i=>{const u=QE(i),h="click"===i.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const _=this._attachedOverlays.slice();for(let b=_.length-1;b>-1;b--){const D=_[b];if(!(D._outsidePointerEvents.observers.length<1)&&D.hasAttached()){if(D.overlayElement.contains(u)||D.overlayElement.contains(h))break;D._outsidePointerEvents.next(i)}}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we),c.LFG(sg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q2=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){var e;null==(e=this._containerElement)||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ch()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let u=0;u<i.length;u++)i[u].remove()}const r=this._document.createElement("div");r.classList.add(e),Ch()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(we),c.LFG(sg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eG{constructor(t,e,r,i,u,h,_,b,D){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=u,this._keyboardDispatcher=h,this._document=_,this._location=b,this._outsideClickDispatcher=D,this._backdropElement=null,this._backdropClick=new on.x,this._attachments=new on.x,this._detachments=new on.x,this._locationChanges=$a.w0.EMPTY,this._backdropClickHandler=M=>this._backdropClick.next(M),this._keydownEvents=new on.x,this._outsidePointerEvents=new on.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,pi.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(e=this._host)||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=St(St({},this._config),t),this._updateElementSize()}setDirection(t){this._config=es(St({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=wi(this._config.width),t.height=wi(this._config.height),t.minWidth=wi(this._config.minWidth),t.minHeight=wi(this._config.minHeight),t.maxWidth=wi(this._config.maxWidth),t.maxHeight=wi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const r=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",r),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",r)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(r,500))}_toggleClasses(t,e,r){const i=c_(e||[]).filter(u=>!!u);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(fr((0,to.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.remove(),this._backdropElement===t&&(this._backdropElement=null))}}const W2="cdk-overlay-connected-position-bounding-box",tG=/([A-Za-z%]+)$/;class nG{constructor(t,e,r,i,u){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=u,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new on.x,this._resizeSubscription=$a.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(W2),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=[];let u;for(let h of this._preferredPositions){let _=this._getOriginPoint(t,h),b=this._getOverlayPoint(_,e,h),D=this._getOverlayFit(b,e,r,h);if(D.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,_);this._canFitWithFlexibleDimensions(D,b,r)?i.push({position:h,origin:_,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(_,h)}):(!u||u.overlayFit.visibleArea<D.visibleArea)&&(u={overlayFit:D,overlayPoint:b,originPoint:_,position:h,overlayRect:e})}if(i.length){let h=null,_=-1;for(const b of i){const D=b.boundingBoxRect.width*b.boundingBoxRect.height*(b.position.weight||1);D>_&&(_=D,h=b)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Py(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(W2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let r,i;if("center"==e.originX)r=t.left+t.width/2;else{const u=this._isRtl()?t.right:t.left,h=this._isRtl()?t.left:t.right;r="start"==e.originX?u:h}return i="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:r,y:i}}_getOverlayPoint(t,e,r){let i,u;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,u="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+i,y:t.y+u}}_getOverlayFit(t,e,r,i){const u=K2(e);let{x:h,y:_}=t,b=this._getOffset(i,"x"),D=this._getOffset(i,"y");b&&(h+=b),D&&(_+=D);let L=0-_,z=_+u.height-r.height,W=this._subtractOverflows(u.width,0-h,h+u.width-r.width),ne=this._subtractOverflows(u.height,L,z),fe=W*ne;return{visibleArea:fe,isCompletelyWithinViewport:u.width*u.height===fe,fitsInViewportVertically:ne===u.height,fitsInViewportHorizontally:W==u.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,u=r.right-e.x,h=Y2(this._overlayRef.getConfig().minHeight),_=Y2(this._overlayRef.getConfig().minWidth),D=t.fitsInViewportHorizontally||null!=_&&_<=u;return(t.fitsInViewportVertically||null!=h&&h<=i)&&D}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=K2(e),u=this._viewportRect,h=Math.max(t.x+i.width-u.width,0),_=Math.max(t.y+i.height-u.height,0),b=Math.max(u.top-r.top-t.y,0),D=Math.max(u.left-r.left-t.x,0);let M=0,x=0;return M=i.width<=u.width?D||-h:t.x<this._viewportMargin?u.left-r.left-t.x:0,x=i.height<=u.height?b||-_:t.y<this._viewportMargin?u.top-r.top-t.y:0,this._previousPushAmount={x:M,y:x},{x:t.x+M,y:t.y+x}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Z6(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let u=0;u<e.length;u++)e[u].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,i=this._isRtl();let u,h,_,M,x,L;if("top"===e.overlayY)h=t.y,u=r.height-h+this._viewportMargin;else if("bottom"===e.overlayY)_=r.height-t.y+2*this._viewportMargin,u=r.height-_+this._viewportMargin;else{const z=Math.min(r.bottom-t.y+r.top,t.y),W=this._lastBoundingBoxSize.height;u=2*z,h=t.y-z,u>W&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.y-W/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)L=r.width-t.x+this._viewportMargin,M=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)x=t.x,M=r.right-t.x;else{const z=Math.min(r.right-t.x+r.left,t.x),W=this._lastBoundingBoxSize.width;M=2*z,x=t.x-z,M>W&&!this._isInitialRender&&!this._growAfterOpen&&(x=t.x-W/2)}return{top:h,left:x,bottom:_,right:L,width:M,height:u}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const u=this._overlayRef.getConfig().maxHeight,h=this._overlayRef.getConfig().maxWidth;i.height=wi(r.height),i.top=wi(r.top),i.bottom=wi(r.bottom),i.width=wi(r.width),i.left=wi(r.left),i.right=wi(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",u&&(i.maxHeight=wi(u)),h&&(i.maxWidth=wi(h))}this._lastBoundingBoxSize=r,Py(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Py(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Py(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},i=this._hasExactPosition(),u=this._hasFlexibleDimensions,h=this._overlayRef.getConfig();if(i){const M=this._viewportRuler.getViewportScrollPosition();Py(r,this._getExactOverlayY(e,t,M)),Py(r,this._getExactOverlayX(e,t,M))}else r.position="static";let _="",b=this._getOffset(e,"x"),D=this._getOffset(e,"y");b&&(_+=`translateX(${b}px) `),D&&(_+=`translateY(${D}px)`),r.transform=_.trim(),h.maxHeight&&(i?r.maxHeight=wi(h.maxHeight):u&&(r.maxHeight="")),h.maxWidth&&(i?r.maxWidth=wi(h.maxWidth):u&&(r.maxWidth="")),Py(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},u=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r));let h=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return u.y-=h,"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(u.y+this._overlayRect.height)+"px":i.top=wi(u.y),i}_getExactOverlayX(t,e,r){let h,i={left:"",right:""},u=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),h=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===h?i.right=this._document.documentElement.clientWidth-(u.x+this._overlayRect.width)+"px":i.left=wi(u.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:z2(t,r),isOriginOutsideView:Kk(t,r),isOverlayClipped:z2(e,r),isOverlayOutsideView:Kk(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&c_(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof c.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function Py(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Y2(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(tG);return e&&"px"!==e?null:parseFloat(t)}return n||null}function K2(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Q2="cdk-global-overlay-wrapper";class rG{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Q2),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:u,maxWidth:h,maxHeight:_}=r,b=!("100%"!==i&&"100vw"!==i||h&&"100%"!==h&&"100vw"!==h),D=!("100%"!==u&&"100vh"!==u||_&&"100%"!==_&&"100vh"!==_);t.position=this._cssPosition,t.marginLeft=b?"0":this._leftOffset,t.marginTop=D?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,b?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=D?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(Q2),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let iG=(()=>{class n{constructor(e,r,i,u){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=u}global(){return new rG}flexibleConnectedTo(e){return new nG(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(tD),c.LFG(we),c.LFG(sg),c.LFG(q2))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oG=0,TI=(()=>{class n{constructor(e,r,i,u,h,_,b,D,M,x,L){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=u,this._keyboardDispatcher=h,this._injector=_,this._ngZone=b,this._document=D,this._directionality=M,this._location=x,this._outsideClickDispatcher=L}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),u=this._createPortalOutlet(i),h=new Q6(e);return h.direction=h.direction||this._directionality.value,new eG(u,r,i,h,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+oG++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new z6(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(K6),c.LFG(q2),c.LFG(c._Vd),c.LFG(iG),c.LFG(X6),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(we),c.LFG(UN),c.LFG(Ke),c.LFG(J6))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const uG={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[TI],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let Z2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[TI,uG],imports:[[l_,$6,nD],nD]}),n})(),fG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr,K,My],K]}),n})();const vG={provide:new c.OlP("mat-select-scroll-strategy"),deps:[TI],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let yG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[vG],imports:[[Vr,Z2,F2,K],hw,fG,F2,K]}),n})();const EG={provide:new c.OlP("mat-tooltip-scroll-strategy"),deps:[TI],useFactory:function(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let TG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[EG],imports:[[N2,Vr,Z2,K],K,hw]}),n})(),Qk=(()=>{class n{constructor(){this.changes=new on.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,r,i)=>{if(0==i||0==r)return`0 of ${i}`;const u=e*r;return`${u+1} \u2013 ${u<(i=Math.max(i,0))?Math.min(u+r,i):u+r} of ${i}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RG={provide:Qk,deps:[[new c.FiY,new c.tp0,Qk]],useFactory:function(n){return n||new Qk}};let NG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[RG],imports:[[Vr,B6,yG,TG,K]]}),n})();var Mo=J(7506);function Zk(){return(0,Mi.e)((n,t)=>{let e,r=!1;n.subscribe(new qn.Q(t,i=>{const u=e;e=i,r&&t.next([u,i]),r=!0}))})}var Fy=J(4763),kG=J(7713),ll=J(417),F=J(4762),At=J(8305),fu=J(6433),Xk=function(n,t){return(Xk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)};function J2(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Tt,OG="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jk=Jk||{},fn=OG||self;function SI(){}function ex(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function gD(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var tx="closure_uid_"+(1e9*Math.random()>>>0),FG=0;function LG(n,t,e){return n.call.apply(n.bind,arguments)}function VG(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function Xs(n,t,e){return(Xs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LG:VG).apply(null,arguments)}function II(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Js(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var h=Array(arguments.length-2),_=2;_<arguments.length;_++)h[_-2]=arguments[_];return t.prototype[i].apply(r,h)}}function D_(){this.s=this.s,this.o=this.o}var UG={};D_.prototype.s=!1,D_.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,tx)&&n[tx]||(n[tx]=++FG)}(this);delete UG[n]}},D_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var eV=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(var e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},tV=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){for(var r=n.length,i="string"==typeof n?n.split(""):n,u=0;u<r;u++)u in i&&t.call(e,i[u],u,n)};function nV(n){return Array.prototype.concat.apply([],arguments)}function nx(n){var t=n.length;if(0<t){for(var e=Array(t),r=0;r<t;r++)e[r]=n[r];return e}return[]}function AI(n){return/^[\s\xa0]*$/.test(n)}var gu,rV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pu(n,t){return-1!=n.indexOf(t)}function rx(n,t){return n<t?-1:n>t?1:0}e:{var iV=fn.navigator;if(iV){var oV=iV.userAgent;if(oV){gu=oV;break e}}gu=""}function ix(n,t,e){for(var r in n)t.call(e,n[r],r,n)}function sV(n){var t={};for(var e in n)t[e]=n[e];return t}var aV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uV(n,t){for(var e,r,i=1;i<arguments.length;i++){for(e in r=arguments[i])n[e]=r[e];for(var u=0;u<aV.length;u++)e=aV[u],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function ox(n){return ox[" "](n),n}ox[" "]=SI;var MI,n,GG=pu(gu,"Opera"),Mw=pu(gu,"Trident")||pu(gu,"MSIE"),lV=pu(gu,"Edge"),sx=lV||Mw,cV=pu(gu,"Gecko")&&!(pu(gu.toLowerCase(),"webkit")&&!pu(gu,"Edge"))&&!(pu(gu,"Trident")||pu(gu,"MSIE"))&&!pu(gu,"Edge"),zG=pu(gu.toLowerCase(),"webkit")&&!pu(gu,"Edge");function dV(){var n=fn.document;return n?n.documentMode:void 0}e:{var ax="",ux=(n=gu,cV?/rv:([^\);]+)(\)|;)/.exec(n):lV?/Edge\/([\d\.]+)/.exec(n):Mw?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):zG?/WebKit\/(\S+)/.exec(n):GG?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ux&&(ax=ux?ux[1]:""),Mw){var lx=dV();if(null!=lx&&lx>parseFloat(ax)){MI=String(lx);break e}}MI=ax}var $G={};function qG(){return t=$G,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var n=0,t=rV(String(MI)).split("."),e=rV("9").split("."),r=Math.max(t.length,e.length),i=0;0==n&&i<r;i++){var u=t[i]||"",h=e[i]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==u[0].length&&0==h[0].length)break;n=rx(0==u[1].length?0:parseInt(u[1],10),0==h[1].length?0:parseInt(h[1],10))||rx(0==u[2].length,0==h[2].length)||rx(u[2],h[2]),u=u[3],h=h[3]}while(0==n)}return 0<=n}();var t}var WG=fn.document&&Mw&&(dV()||parseInt(MI,10))||void 0,YG=function(){if(!fn.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{fn.addEventListener("test",SI,t),fn.removeEventListener("test",SI,t)}catch(e){}return n}();function Ma(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function mD(n,t){if(Ma.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(cV){e:{try{ox(t.nodeName);var i=!0;break e}catch(u){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:KG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&mD.Z.h.call(this)}}Ma.prototype.h=function(){this.defaultPrevented=!0},Js(mD,Ma);var KG={2:"touch",3:"pen",4:"mouse"};mD.prototype.h=function(){mD.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _D="closure_listenable_"+(1e6*Math.random()|0),QG=0;function ZG(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++QG,this.ca=this.fa=!1}function RI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function NI(n){this.src=n,this.g={},this.h=0}function dx(n,t){var e=t.type;if(e in n.g){var u,r=n.g[e],i=eV(r,t);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(RI(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function hx(n,t,e,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==t&&u.capture==!!e&&u.ia==r)return i}return-1}NI.prototype.add=function(n,t,e,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=hx(n,t,r,i);return-1<h?(t=n[h],e||(t.fa=!1)):((t=new ZG(t,this.src,u,!!r,i)).fa=e,n.push(t)),t};var fx="closure_lm_"+(1e6*Math.random()|0),px={};function fV(n,t,e,r,i){if(r&&r.once)return gV(n,t,e,r,i);if(Array.isArray(t)){for(var u=0;u<t.length;u++)fV(n,t[u],e,r,i);return null}return e=vx(e),n&&n[_D]?n.N(t,e,gD(r)?!!r.capture:!!r,i):pV(n,t,e,!1,r,i)}function pV(n,t,e,r,i,u){if(!t)throw Error("Invalid event type");var h=gD(i)?!!i.capture:!!i,_=mx(n);if(_||(n[fx]=_=new NI(n)),(e=_.add(t,e,r,h,u)).proxy)return e;if(r=function(){var t=JG;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)YG||(i=h),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(_V(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function gV(n,t,e,r,i){if(Array.isArray(t)){for(var u=0;u<t.length;u++)gV(n,t[u],e,r,i);return null}return e=vx(e),n&&n[_D]?n.O(t,e,gD(r)?!!r.capture:!!r,i):pV(n,t,e,!0,r,i)}function mV(n,t,e,r,i){if(Array.isArray(t))for(var u=0;u<t.length;u++)mV(n,t[u],e,r,i);else r=gD(r)?!!r.capture:!!r,e=vx(e),n&&n[_D]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=hx(u=n.g[t],e,r,i))&&(RI(u[e]),Array.prototype.splice.call(u,e,1),0==u.length&&(delete n.g[t],n.h--))):n&&(n=mx(n))&&(t=n.g[t.toString()],n=-1,t&&(n=hx(t,e,r,i)),(e=-1<n?t[n]:null)&&gx(e))}function gx(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[_D])dx(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(_V(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=mx(t))?(dx(e,n),0==e.h&&(e.src=null,t[fx]=null)):RI(n)}}}function _V(n){return n in px?px[n]:px[n]="on"+n}function JG(n,t){if(n.ca)n=!0;else{t=new mD(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&gx(n),n=e.call(r,t)}return n}function mx(n){return(n=n[fx])instanceof NI?n:null}var _x="__closure_events_fn_"+(1e9*Math.random()>>>0);function vx(n){return"function"==typeof n?n:(n[_x]||(n[_x]=function(t){return n.handleEvent(t)}),n[_x])}function ws(){D_.call(this),this.i=new NI(this),this.P=this,this.I=null}function ea(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Ma(t,n);else if(t instanceof Ma)t.target=t.target||n;else{var i=t;uV(t=new Ma(r,n),i)}if(i=!0,e)for(var u=e.length-1;0<=u;u--){var h=t.g=e[u];i=kI(h,r,!0,t)&&i}if(i=kI(h=t.g=n,r,!0,t)&&i,i=kI(h,r,!1,t)&&i,e)for(u=0;u<e.length;u++)i=kI(h=t.g=e[u],r,!1,t)&&i}function kI(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,u=0;u<t.length;++u){var h=t[u];if(h&&!h.ca&&h.capture==e){var _=h.listener,b=h.ia||h.src;h.fa&&dx(n.i,h),i=!1!==_.call(b,r)&&i}}return i&&!r.defaultPrevented}Js(ws,D_),ws.prototype[_D]=!0,ws.prototype.removeEventListener=function(n,t,e,r){mV(this,n,t,e,r)},ws.prototype.M=function(){if(ws.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)RI(e[r]);delete n.g[t],n.h--}}this.I=null},ws.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},ws.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var yx=fn.JSON.stringify;function e8(){var n=yV,t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var wx,t8=function(){function n(){this.h=this.g=null}return n.prototype.add=function(t,e){var r=vV.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r},n}(),vV=new(function(){function n(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return n.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},n}())(function(){return new n8},function(n){return n.reset()}),n8=function(){function n(){this.next=this.g=this.h=null}return n.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},n.prototype.reset=function(){this.next=this.g=this.h=null},n}();function r8(n){fn.setTimeout(function(){throw n},0)}function bx(n,t){wx||function(){var n=fn.Promise.resolve(void 0);wx=function(){n.then(s8)}}(),Cx||(wx(),Cx=!0),yV.add(n,t)}var Cx=!1,yV=new t8;function s8(){for(var n;n=e8();){try{n.h.call(n.g)}catch(e){r8(e)}var t=vV;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Cx=!1}function xI(n,t){ws.call(this),this.h=n||1,this.g=t||fn,this.j=Xs(this.kb,this),this.l=Date.now()}function Ex(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Dx(n,t,e){if("function"==typeof n)e&&(n=Xs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xs(n.handleEvent,n)}return 2147483647<Number(t)?-1:fn.setTimeout(n,t||0)}function bV(n){n.g=Dx(function(){n.g=null,n.i&&(n.i=!1,bV(n))},n.j);var t=n.h;n.h=null,n.m.apply(null,t)}Js(xI,ws),(Tt=xI.prototype).da=!1,Tt.S=null,Tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ea(this,"tick"),this.da&&(Ex(this),this.start()))}},Tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){xI.Z.M.call(this),Ex(this),delete this.g};var a8=function(n){function t(e,r){var i=n.call(this)||this;return i.m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}Xk(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(t,n),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:bV(this)},t.prototype.M=function(){n.prototype.M.call(this),this.g&&(fn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(D_);function vD(n){D_.call(this),this.h=n,this.g={}}Js(vD,D_);var wV=[];function CV(n,t,e,r){Array.isArray(e)||(e&&(wV[0]=e.toString()),e=wV);for(var i=0;i<e.length;i++){var u=fV(t,e[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function EV(n){ix(n.g,function(t,e){this.g.hasOwnProperty(e)&&gx(t)},n),n.g={}}function OI(){this.g=!0}function Rw(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<i.length;h++)i[h]=""}}}return yx(e)}catch(_){return t}}(n,e)+(r?" "+r:"")})}vD.prototype.M=function(){vD.Z.M.call(this),EV(this)},vD.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},OI.prototype.Aa=function(){this.g=!1},OI.prototype.info=function(){};var Ly={},DV=null;function PI(){return DV=DV||new ws}function TV(n){Ma.call(this,Ly.Ma,n)}function yD(n){var t=PI();ea(t,new TV(t,n))}function SV(n,t){Ma.call(this,Ly.STAT_EVENT,n),this.stat=t}function mu(n){var t=PI();ea(t,new SV(t,n))}function IV(n,t){Ma.call(this,Ly.Na,n),this.size=t}function bD(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return fn.setTimeout(function(){n()},t)}Ly.Ma="serverreachability",Js(TV,Ma),Ly.STAT_EVENT="statevent",Js(SV,Ma),Ly.Na="timingevent",Js(IV,Ma);var FI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},AV={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Tx(){}function RV(){}Tx.prototype.h=null;var Ax,wD={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sx(){Ma.call(this,"d")}function Ix(){Ma.call(this,"c")}function LI(){}function CD(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new vD(this),this.P=h8,this.W=new xI(n=sx?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new NV}function NV(){this.i=null,this.g="",this.h=!1}Js(Sx,Ma),Js(Ix,Ma),Js(LI,Tx),LI.prototype.g=function(){return new XMLHttpRequest},LI.prototype.i=function(){return{}},Ax=new LI;var h8=45e3,Mx={},VI={};function Rx(n,t,e){n.K=1,n.v=GI(dg(t)),n.s=e,n.U=!0,kV(n,null)}function kV(n,t){n.F=Date.now(),ED(n),n.A=dg(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jV(e.h,"t",r),n.C=0,e=n.l.H,n.h=new NV,n.g=cB(n.l,e?t:null,!n.s),0<n.O&&(n.L=new a8(Xs(n.Ia,n,n.g),n.O)),CV(n.V,n.g,"readystatechange",n.gb),t=n.H?sV(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),yD(1),function(n,t,e,r,i,u){n.info(function(){if(n.g)if(u)for(var h="",_=u.split("&"),b=0;b<_.length;b++){var D=_[b].split("=");if(1<D.length){var M=D[0];D=D[1];var x=M.split("_");h=2<=x.length&&"type"==x[1]?h+(M+"=")+D+"&":h+(M+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function xV(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function OV(n,t,e){for(var i,r=!0;!n.I&&n.C<e.length;){if((i=f8(n,e))==VI){4==t&&(n.o=4,mu(14),r=!1),Rw(n.j,n.m,null,"[Incomplete Response]");break}if(i==Mx){n.o=4,mu(15),Rw(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}Rw(n.j,n.m,i,null),Nx(n,i)}xV(n)&&i!=VI&&i!=Mx&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,mu(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),Hx(t),t.L=!0,mu(11))):(Rw(n.j,n.m,e,"[Invalid Chunked Response]"),Vy(n),DD(n))}function f8(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?VI:(e=Number(t.substring(e,r)),isNaN(e)?Mx:(r+=1)+e>t.length?VI:(t=t.substr(r,e),n.C=r+e,t))}function ED(n){n.Y=Date.now()+n.P,PV(n,n.P)}function PV(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bD(Xs(n.eb,n),t)}function BI(n){n.B&&(fn.clearTimeout(n.B),n.B=null)}function DD(n){0==n.l.G||n.I||sB(n.l,n)}function Vy(n){BI(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Ex(n.W),EV(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Nx(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||Ox(e.i,n)))if(e.I=n.N,!n.J&&Ox(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(fe){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=bD(Xs(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;KI(e),WI(e)}jx(e),mu(18)}if(1>=zV(e.i)&&e.ka){try{e.ka()}catch(fe){}e.ka=void 0}}else jy(e,11)}else if((n.J||e.g==n)&&KI(e),!AI(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){var u=i[t];if(e.U=u[0],u=u[1],2==e.G)if("c"==u[0]){e.J=u[1],e.la=u[2];var h=u[3];null!=h&&(e.ma=h,e.h.info("VER="+e.ma));var _=u[4];null!=_&&(e.za=_,e.h.info("SVER="+e.za));var b=u[5];null!=b&&"number"==typeof b&&0<b&&(e.K=r=1.5*b,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;var D=n.g;if(D){var M=D.g?D.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(M){var x=r.i;!x.g&&(pu(M,"spdy")||pu(M,"quic")||pu(M,"h2"))&&(x.j=x.l,x.g=new Set,x.h&&(Px(x,x.h),x.h=null))}if(r.D){var L=D.g?D.g.getResponseHeader("X-HTTP-Session-Id"):null;L&&(r.sa=L,Ci(r.F,r.D,L))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var z=n;if((r=e).oa=lB(r,r.H?r.la:null,r.W),z.J){$V(r.i,z);var W=z,ne=r.K;ne&&W.setTimeout(ne),W.B&&(BI(W),ED(W)),r.g=z}else iB(r);0<e.l.length&&YI(e)}else"stop"!=u[0]&&"close"!=u[0]||jy(e,7);else 3==e.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?jy(e,7):Bx(e):"noop"!=u[0]&&e.j&&e.j.wa(u),e.A=0)}yD(4)}catch(fe){}}function kx(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(ex(n)||"string"==typeof n)tV(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(ex(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ex(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n),i=r.length;for(var u=0;u<i;u++)t.call(void 0,r[u],e&&e[u],n)}}function Nw(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Nw)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function xx(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];By(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)By(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function By(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(Tt=CD.prototype).setTimeout=function(n){this.P=n},Tt.gb=function(n){n=n.target;var t=this.L;t&&3==hg(n)?t.l():this.Ia(n)},Tt.Ia=function(n){try{if(n==this.g)e:{var t=hg(this.g),e=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||sx||this.g&&(this.h.h||this.g.ga()||JV(this.g)))){this.I||4!=t||7==e||yD(8==e||0>=r?3:2),BI(this);var i=this.g.ba();this.N=i;t:if(xV(this)){var u=JV(this.g);n="";var h=u.length,_=4==hg(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vy(this),DD(this);var b="";break t}this.h.i=new fn.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,n+=this.h.i.decode(u[e],{stream:_&&e==h-1});u.splice(0,h),this.h.g+=n,this.C=0,b=this.h.g}else b=this.g.ga();if(this.i=200==i,function(n,t,e,r,i,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var D,M=this.g;if((D=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!AI(D)){var x=D;break t}}x=null}if(!(i=x)){this.i=!1,this.o=3,mu(12),Vy(this),DD(this);break e}Rw(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Nx(this,i)}this.U?(OV(this,t,b),sx&&this.i&&3==t&&(CV(this.V,this.W,"tick",this.fb),this.W.start())):(Rw(this.j,this.m,b,null),Nx(this,b)),4==t&&Vy(this),this.i&&!this.I&&(4==t?sB(this.l,this):(this.i=!1,ED(this)))}else 400==i&&0<b.indexOf("Unknown SID")?(this.o=3,mu(12)):(this.o=0,mu(13)),Vy(this),DD(this)}}}catch(L){}},Tt.fb=function(){if(this.g){var n=hg(this.g),t=this.g.ga();this.C<t.length&&(BI(this),OV(this,n,t),this.i&&4!=n&&ED(this))}},Tt.cancel=function(){this.I=!0,Vy(this)},Tt.eb=function(){this.B=null;var n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(yD(3),mu(17)),Vy(this),this.o=2,DD(this)):PV(this,this.Y-n)},(Tt=Nw.prototype).R=function(){xx(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},Tt.T=function(){return xx(this),this.g.concat()},Tt.get=function(n,t){return By(this.h,n)?this.h[n]:t},Tt.set=function(n,t){By(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},Tt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],u=this.get(i);n.call(t,u,i,this)}};var FV=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Uy(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Uy){this.g=void 0!==t?t:n.g,UI(this,n.j),this.s=n.s,jI(this,n.i),HI(this,n.m),this.l=n.l,t=n.h;var e=new ID;e.i=t.i,t.g&&(e.g=new Nw(t.g),e.h=t.h),LV(this,e),this.o=n.o}else n&&(e=String(n).match(FV))?(this.g=!!t,UI(this,e[1]||"",!0),this.s=TD(e[2]||""),jI(this,e[3]||"",!0),HI(this,e[4]),this.l=TD(e[5]||"",!0),LV(this,e[6]||"",!0),this.o=TD(e[7]||"")):(this.g=!!t,this.h=new ID(null,this.g))}function dg(n){return new Uy(n)}function UI(n,t,e){n.j=e?TD(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function jI(n,t,e){n.i=e?TD(t,!0):t}function HI(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function LV(n,t,e){t instanceof ID?(n.h=t,function(n,t){t&&!n.j&&(T_(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(BV(this,r),jV(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=SD(t,w8)),n.h=new ID(t,n.g))}function Ci(n,t,e){n.h.set(t,e)}function GI(n){return Ci(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function TD(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function SD(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,v8),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function v8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Uy.prototype.toString=function(){var n=[],t=this.j;t&&n.push(SD(t,VV,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(SD(t,VV,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(SD(e,"/"==e.charAt(0)?b8:y8,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",SD(e,C8)),n.join("")};var VV=/[#\/\?@]/g,y8=/[#\?:]/g,b8=/[#\?]/g,w8=/[#\?@]/g,C8=/#/g;function ID(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function T_(n){n.g||(n.g=new Nw,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var u=n[e].substring(0,r);i=n[e].substring(r+1)}else u=n[e];t(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function BV(n,t){T_(n),t=kw(n,t),By(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,By((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&xx(n)))}function UV(n,t){return T_(n),t=kw(n,t),By(n.g.h,t)}function jV(n,t,e){BV(n,t),0<e.length&&(n.i=null,n.g.set(kw(n,t),nx(e)),n.h+=e.length)}function kw(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}(Tt=ID.prototype).add=function(n,t){T_(this),this.i=null,n=kw(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Tt.forEach=function(n,t){T_(this),this.g.forEach(function(e,r){tV(e,function(i){n.call(t,i,r,this)},this)},this)},Tt.T=function(){T_(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],u=0;u<i.length;u++)e.push(t[r]);return e},Tt.R=function(n){T_(this);var t=[];if("string"==typeof n)UV(this,n)&&(t=nV(t,this.g.get(kw(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=nV(t,n[e])}return t},Tt.set=function(n,t){return T_(this),this.i=null,UV(this,n=kw(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Tt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=i;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var D8=function(t,e){this.h=t,this.g=e};function HV(n){this.l=n||T8,n=fn.PerformanceNavigationTiming?0<(n=fn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(fn.g&&fn.g.Ea&&fn.g.Ea()&&fn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var T8=10;function GV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function zV(n){return n.h?1:n.g?n.g.size:0}function Ox(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function Px(n,t){n.g?n.g.add(t):n.h=t}function $V(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function qV(n){var t,e;if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){var r=n.i;try{for(var i=J2(n.g.values()),u=i.next();!u.done;u=i.next())r=r.concat(u.value.D)}catch(_){t={error:_}}finally{try{u&&!u.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r}return nx(n.i)}function Fx(){}function S8(){this.g=new Fx}function I8(n,t,e){var r=e||"";try{kx(n,function(i,u){var h=i;gD(i)&&(h=yx(i)),t.push(r+u+"="+encodeURIComponent(h))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zI(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(u){}}function AD(n){this.l=n.$b||null,this.j=n.ib||!1}function $I(n,t){ws.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Lx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}HV.prototype.cancel=function(){var n,t;if(this.i=qV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var e=J2(this.g.values()),r=e.next();!r.done;r=e.next())r.value.cancel()}catch(u){n={error:u}}finally{try{r&&!r.done&&(t=e.return)&&t.call(e)}finally{if(n)throw n.error}}this.g.clear()}},Fx.prototype.stringify=function(n){return fn.JSON.stringify(n,void 0)},Fx.prototype.parse=function(n){return fn.JSON.parse(n,void 0)},Js(AD,Tx),AD.prototype.g=function(){return new $I(this.l,this.j)},AD.prototype.i=function(n){return function(){return n}}({}),Js($I,ws);var Lx=0;function WV(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function MD(n){n.readyState=4,n.l=null,n.j=null,n.A=null,RD(n)}function RD(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=$I.prototype).open=function(n,t){if(this.readyState!=Lx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,RD(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||fn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,MD(this)),this.readyState=Lx},Tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,RD(this)),this.g&&(this.readyState=3,RD(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==fn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WV(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?MD(this):RD(this),3==this.readyState&&WV(this)}},Tt.Ua=function(n){this.g&&(this.response=this.responseText=n,MD(this))},Tt.Ta=function(n){this.g&&(this.response=n,MD(this))},Tt.ha=function(){this.g&&MD(this)},Tt.setRequestHeader=function(n,t){this.v.append(n,t)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";for(var n=[],t=this.h.entries(),e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty($I.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var M8=fn.JSON.parse;function Ro(n){ws.call(this),this.headers=new Nw,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=YV,this.K=this.L=!1}Js(Ro,ws);var YV="",R8=/^https?$/i,N8=["POST","PUT"];function x8(n){return"content-type"==n.toLowerCase()}function KV(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,QV(n),qI(n)}function QV(n){n.D||(n.D=!0,ea(n,"complete"),ea(n,"error"))}function ZV(n){if(n.h&&void 0!==Jk&&(!n.C[1]||4!=hg(n)||2!=n.ba()))if(n.v&&4==hg(n))Dx(n.Fa,0,n);else if(ea(n,"readystatechange"),4==hg(n)){n.h=!1;try{var r,t=n.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}if(!(r=e)){var i;if(i=0===t){var u=String(n.H).match(FV)[1]||null;if(!u&&fn.self&&fn.self.location){var h=fn.self.location.protocol;u=h.substr(0,h.length-1)}i=!R8.test(u?u.toLowerCase():"")}r=i}if(r)ea(n,"complete"),ea(n,"success");else{n.m=6;try{var _=2<hg(n)?n.g.statusText:""}catch(b){_=""}n.j=_+" ["+n.ba()+"]",QV(n)}}finally{qI(n)}}}function qI(n,t){if(n.g){XV(n);var e=n.g,r=n.C[0]?SI:null;n.g=null,n.C=null,t||ea(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function XV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(fn.clearTimeout(n.A),n.A=null)}function hg(n){return n.g?n.g.readyState:0}function JV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case YV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vx(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){var t="";return ix(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Ci(n,t,e))}function ND(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function eB(n){this.za=0,this.l=[],this.h=new OI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ND("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ND("baseRetryDelayMs",5e3,n),this.$a=ND("retryDelaySeedMs",1e4,n),this.Ya=ND("forwardChannelMaxRetries",2,n),this.ra=ND("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new HV(n&&n.concurrentRequestLimit),this.Ca=new S8,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Bx(n){if(tB(n),3==n.G){var t=n.V++,e=dg(n.F);Ci(e,"SID",n.J),Ci(e,"RID",t),Ci(e,"TYPE","terminate"),kD(n,e),(t=new CD(n,n.h,t,void 0)).K=2,t.v=GI(dg(e)),e=!1,fn.navigator&&fn.navigator.sendBeacon&&(e=fn.navigator.sendBeacon(t.v.toString(),"")),!e&&fn.Image&&((new Image).src=t.v,e=!0),e||(t.g=cB(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ED(t)}uB(n)}function WI(n){n.g&&(Hx(n),n.g.cancel(),n.g=null)}function tB(n){WI(n),n.u&&(fn.clearTimeout(n.u),n.u=null),KI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&fn.clearTimeout(n.m),n.m=null)}function Ux(n,t){n.l.push(new D8(n.Za++,t)),3==n.G&&YI(n)}function YI(n){GV(n.i)||n.m||(n.m=!0,bx(n.Ha,n),n.C=0)}function nB(n,t){var e;e=t?t.m:n.V++;var r=dg(n.F);Ci(r,"SID",n.J),Ci(r,"RID",e),Ci(r,"AID",n.U),kD(n,r),n.o&&n.s&&Vx(r,n.o,n.s),e=new CD(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=rB(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Px(n.i,e),Rx(e,r,t)}function kD(n,t){n.j&&kx({},function(e,r){Ci(t,r,e)})}function rB(n,t,e){e=Math.min(n.l.length,e);var r=n.j?Xs(n.j.Oa,n.j,n):null;e:for(var i=n.l,u=-1;;){var h=["count="+e];-1==u?0<e?h.push("ofs="+(u=i[0].h)):u=0:h.push("ofs="+u);for(var _=!0,b=0;b<e;b++){var D=i[b].h,M=i[b].g;if(0>(D-=u))u=Math.max(0,i[b].h-100),_=!1;else try{I8(M,h,"req"+D+"_")}catch(x){r&&r(M)}}if(_){r=h.join("&");break e}}return n=n.l.splice(0,e),t.D=n,r}function iB(n){n.g||n.u||(n.Y=1,bx(n.Ga,n),n.A=0)}function jx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=bD(Xs(n.Ga,n),aB(n,n.A)),n.A++,0))}function Hx(n){null!=n.B&&(fn.clearTimeout(n.B),n.B=null)}function oB(n){n.g=new CD(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=dg(n.oa);Ci(t,"RID","rpc"),Ci(t,"SID",n.J),Ci(t,"CI",n.N?"0":"1"),Ci(t,"AID",n.U),kD(n,t),Ci(t,"TYPE","xmlhttp"),n.o&&n.s&&Vx(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=GI(dg(t)),e.s=null,e.U=!0,kV(e,n)}function KI(n){null!=n.v&&(fn.clearTimeout(n.v),n.v=null)}function sB(n,t){var e=null;if(n.g==t){KI(n),Hx(n),n.g=null;var r=2}else{if(!Ox(n.i,t))return;e=t.D,$V(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;ea(r=PI(),new IV(r,e,t,i)),YI(n)}else iB(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(zV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=bD(Xs(n.Ha,n,t),aB(n,n.C)),n.C++,0)))}(n,t)||2==r&&jx(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:jy(n,5);break;case 4:jy(n,10);break;case 3:jy(n,6);break;default:jy(n,2)}}function aB(n,t){var e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function jy(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=Xs(n.jb,n);e||(e=new Uy("//www.google.com/images/cleardot.gif"),fn.location&&"http"==fn.location.protocol||UI(e,"https"),GI(e)),function(n,t){var e=new OI;if(fn.Image){var r=new Image;r.onload=II(zI,e,r,"TestLoadImage: loaded",!0,t),r.onerror=II(zI,e,r,"TestLoadImage: error",!1,t),r.onabort=II(zI,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=II(zI,e,r,"TestLoadImage: timeout",!1,t),fn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else mu(2);n.G=0,n.j&&n.j.va(t),uB(n),tB(n)}function uB(n){n.G=0,n.I=-1,n.j&&((0!=qV(n.i).length||0!=n.l.length)&&(n.i.i.length=0,nx(n.l),n.l.length=0),n.j.ua())}function lB(n,t,e){var r=function(n){return n instanceof Uy?dg(n):new Uy(n,void 0)}(e);if(""!=r.i)t&&jI(r,t+"."+r.i),HI(r,r.m);else{var i=fn.location;r=function(n,t,e,r){var i=new Uy(null,void 0);return n&&UI(i,n),t&&jI(i,t),e&&HI(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&ix(n.aa,function(u,h){Ci(r,h,u)}),e=n.sa,(t=n.D)&&e&&Ci(r,t,e),Ci(r,"VER",n.ma),kD(n,r),r}function cB(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ro(e&&n.Ba&&!n.qa?new AD({ib:!0}):n.qa)).L=n.H,t}function dB(){}function QI(){if(Mw&&!(10<=Number(WG)))throw Error("Environmental error: no available transport.")}function uc(n,t){ws.call(this),this.g=new eB(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!AI(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!AI(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new xw(this)}function hB(n){Sx.call(this);var t=n.__sm__;if(t){e:{for(var e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function fB(){Ix.call(this),this.status=1}function xw(n){this.g=n}(Tt=Ro.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ax.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Ax),this.g.onreadystatechange=Xs(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(u){return void KV(this,u)}n=e||"";var i=new Nw(this.headers);r&&kx(r,function(u,h){i.set(h,u)}),r=function(n){e:{for(var t=x8,e=n.length,r="string"==typeof n?n.split(""):n,i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=fn.FormData&&n instanceof fn.FormData,!(0<=eV(N8,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{XV(this),0<this.B&&((this.K=function(n){return Mw&&qG()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xs(this.pa,this)):this.A=Dx(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){KV(this,u)}},Tt.pa=function(){void 0!==Jk&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ea(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ea(this,"complete"),ea(this,"abort"),qI(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qI(this,!0)),Ro.Z.M.call(this)},Tt.Fa=function(){this.s||(this.F||this.v||this.l?ZV(this):this.cb())},Tt.cb=function(){ZV(this)},Tt.ba=function(){try{return 2<hg(this)?this.g.status:-1}catch(n){return-1}},Tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Tt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),M8(t)}},Tt.Da=function(){return this.m},Tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=eB.prototype).ma=8,Tt.G=1,Tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},Tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;var t=new CD(this,this.h,n,void 0),e=this.s;if(this.P&&(e?uV(e=sV(e),this.P):e=this.P),null===this.o&&(t.H=e),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var u=this.l[i];if(void 0===(u="__data__"in u.g&&"string"==typeof(u=u.g.__data__)?u.length:void 0))break;if(4096<(r+=u)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=rB(this,t,r),Ci(i=dg(this.F),"RID",n),Ci(i,"CVER",22),this.D&&Ci(i,"X-HTTP-Session-Id",this.D),kD(this,i),this.o&&e&&Vx(i,this.o,e),Px(this.i,t),this.Ra&&Ci(i,"TYPE","init"),this.ja?(Ci(i,"$req",r),Ci(i,"SID","null"),t.$=!0,Rx(t,i,null)):Rx(t,i,r),this.G=2}}else 3==this.G&&(n?nB(this,n):0==this.l.length||GV(this.i)||nB(this))},Tt.Ga=function(){if(this.u=null,oB(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=bD(Xs(this.bb,this),n)}},Tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mu(10),WI(this),oB(this))},Tt.ab=function(){null!=this.v&&(this.v=null,WI(this),jx(this),mu(19))},Tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),mu(2)):(this.h.info("Failed to ping google.com"),mu(1))},(Tt=dB.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Oa=function(){},QI.prototype.g=function(n,t){return new uc(n,t)},Js(uc,ws),uc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),bx(Xs(n.hb,n,t))),mu(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=lB(n,null,n.W),YI(n)},uc.prototype.close=function(){Bx(this.g)},uc.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,Ux(this.g,t)}else this.v?((t={}).__data__=yx(n),Ux(this.g,t)):Ux(this.g,n)},uc.prototype.M=function(){this.g.j=null,delete this.j,Bx(this.g),delete this.g,uc.Z.M.call(this)},Js(hB,Sx),Js(fB,Ix),Js(xw,dB),xw.prototype.xa=function(){ea(this.g,"a")},xw.prototype.wa=function(n){ea(this.g,new hB(n))},xw.prototype.va=function(n){ea(this.g,new fB(n))},xw.prototype.ua=function(){ea(this.g,"b")},QI.prototype.createWebChannel=QI.prototype.g,uc.prototype.send=uc.prototype.u,uc.prototype.open=uc.prototype.m,uc.prototype.close=uc.prototype.close,FI.NO_ERROR=0,FI.TIMEOUT=8,FI.HTTP_ERROR=6,AV.COMPLETE="complete",RV.EventType=wD,wD.OPEN="a",wD.CLOSE="b",wD.ERROR="c",wD.MESSAGE="d",ws.prototype.listen=ws.prototype.N,Ro.prototype.listenOnce=Ro.prototype.O,Ro.prototype.getLastError=Ro.prototype.La,Ro.prototype.getLastErrorCode=Ro.prototype.Da,Ro.prototype.getStatus=Ro.prototype.ba,Ro.prototype.getResponseJson=Ro.prototype.Qa,Ro.prototype.getResponseText=Ro.prototype.ga,Ro.prototype.send=Ro.prototype.ea;var ZI=FI,mB=AV,_B=Ly,Gx_PROXY=10,Gx_NOPROXY=11,vB=AD,xD=RV,yB=Ro,lc=function(){function n(t,e){var r=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return e.writeSequenceNumber(i)})}return n.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},n.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},n}();lc.o=-1;var ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},it=function(n){function t(e,r){var i=this;return(i=n.call(this,r)||this).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return(0,F.__extends)(t,n),t}(Error),Th=new fu.Logger("@firebase/firestore");function zx(){return Th.logLevel}function ht(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Th.logLevel<=fu.LogLevel.DEBUG){var r=t.map($x);Th.debug.apply(Th,(0,F.__spreadArray)(["Firestore (8.10.0): "+n],r))}}function No(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Th.logLevel<=fu.LogLevel.ERROR){var r=t.map($x);Th.error.apply(Th,(0,F.__spreadArray)(["Firestore (8.10.0): "+n],r))}}function OD(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Th.logLevel<=fu.LogLevel.WARN){var r=t.map($x);Th.warn.apply(Th,(0,F.__spreadArray)(["Firestore (8.10.0): "+n],r))}}function $x(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function Ft(n){void 0===n&&(n="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+n;throw No(t),new Error(t)}function an(n,t){n||Ft()}function mt(n,t){return n}function F8(n){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}var bB=function(){function n(){}return n.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=F8(40),u=0;u<i.length;++u)r.length<20&&i[u]<e&&(r+=t.charAt(i[u]%t.length));return r},n}();function Bn(n,t){return n<t?-1:n>t?1:0}function Ow(n,t,e){return n.length===t.length&&n.every(function(r,i){return e(r,t[i])})}function wB(n){return n+"\0"}var cl=function(){function n(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new it(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new it(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new it(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new it(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return n.now=function(){return n.fromMillis(Date.now())},n.fromDate=function(t){return n.fromMillis(t.getTime())},n.fromMillis=function(t){var e=Math.floor(t/1e3);return new n(e,Math.floor(1e6*(t-1e3*e)))},n.prototype.toDate=function(){return new Date(this.toMillis())},n.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},n.prototype._compareTo=function(t){return this.seconds===t.seconds?Bn(this.nanoseconds,t.nanoseconds):Bn(this.seconds,t.seconds)},n.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},n.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},n.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},n.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},n}(),Sn=function(){function n(t){this.timestamp=t}return n.fromTimestamp=function(t){return new n(t)},n.min=function(){return new n(new cl(0,0))},n.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},n.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},n.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},n.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},n.prototype.toTimestamp=function(){return this.timestamp},n}();function CB(n){var t=0;for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Hy(n,t){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function EB(n){for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var DB=function(){function n(t,e,r){void 0===e?e=0:e>t.length&&Ft(),void 0===r?r=t.length-e:r>t.length-e&&Ft(),this.segments=t,this.offset=e,this.len=r}return Object.defineProperty(n.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return 0===n.comparator(this,t)},n.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(function(r){e.push(r)}):e.push(t),this.construct(e)},n.prototype.limit=function(){return this.offset+this.length},n.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},n.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},n.prototype.firstSegment=function(){return this.segments[this.offset]},n.prototype.lastSegment=function(){return this.get(this.length-1)},n.prototype.get=function(t){return this.segments[this.offset+t]},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},n.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},n.prototype.forEach=function(t){for(var e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])},n.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},n.comparator=function(t,e){for(var r=Math.min(t.length,e.length),i=0;i<r;i++){var u=t.get(i),h=e.get(i);if(u<h)return-1;if(u>h)return 1}return t.length<e.length?-1:t.length>e.length?1:0},n}(),lr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t.prototype.construct=function(e,r,i){return new t(e,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=[],u=0,h=e;u<h.length;u++){var _=h[u];if(_.indexOf("//")>=0)throw new it(ke.INVALID_ARGUMENT,"Invalid segment ("+_+"). Paths must not contain // in them.");i.push.apply(i,_.split("/").filter(function(b){return b.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(DB),L8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Sh=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t.prototype.construct=function(e,r,i){return new t(e,r,i)},t.isValidIdentifier=function(e){return L8.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var r=[],i="",u=0,h=function(){if(0===i.length)throw new it(ke.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},_=!1;u<e.length;){var b=e[u];if("\\"===b){if(u+1===e.length)throw new it(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var D=e[u+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new it(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=D,u+=2}else"`"===b?(_=!_,u++):"."!==b||_?(i+=b,u++):(h(),u++)}if(h(),_)throw new it(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(r)},t.emptyPath=function(){return new t([])},t}(DB),Pw=function(){function n(t){this.fields=t,t.sort(Sh.comparator)}return n.prototype.covers=function(t){for(var e=0,r=this.fields;e<r.length;e++)if(r[e].isPrefixOf(t))return!0;return!1},n.prototype.isEqual=function(t){return Ow(this.fields,t.fields,function(e,r){return e.isEqual(r)})},n}(),_u=function(){function n(t){this.binaryString=t}return n.fromBase64String=function(t){return new n(atob(t))},n.fromUint8Array=function(t){return new n(function(e){for(var r="",i=0;i<e.length;++i)r+=String.fromCharCode(e[i]);return r}(t))},n.prototype.toBase64=function(){return btoa(this.binaryString)},n.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)},n.prototype.approximateByteSize=function(){return 2*this.binaryString.length},n.prototype.compareTo=function(t){return Bn(this.binaryString,t.binaryString)},n.prototype.isEqual=function(t){return this.binaryString===t.binaryString},n}();_u.EMPTY_BYTE_STRING=new _u("");var V8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function S_(n){if(an(!!n),"string"==typeof n){var t=0,e=V8.exec(n);if(an(!!e),e[1]){var r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ko(n.seconds),nanos:ko(n.nanos)}}function ko(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fw(n){return"string"==typeof n?_u.fromBase64String(n):_u.fromUint8Array(n)}function qx(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function TB(n){var t=n.mapValue.fields.__previous_value__;return qx(t)?TB(t):t}function PD(n){var t=S_(n.mapValue.fields.__local_write_time__.timestampValue);return new cl(t.seconds,t.nanos)}function Gy(n){return null==n}function XI(n){return 0===n&&1/n==-1/0}function SB(n){return"number"==typeof n&&Number.isInteger(n)&&!XI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Vt=function(){function n(t){this.path=t}return n.fromPath=function(t){return new n(lr.fromString(t))},n.fromName=function(t){return new n(lr.fromString(t).popFirst(5))},n.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},n.prototype.isEqual=function(t){return null!==t&&0===lr.comparator(this.path,t.path)},n.prototype.toString=function(){return this.path.toString()},n.comparator=function(t,e){return lr.comparator(t.path,e.path)},n.isDocumentKey=function(t){return t.length%2==0},n.fromSegments=function(t){return new n(new lr(t.slice()))},n}();function zy(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qx(n)?4:10:Ft()}function Mf(n,t){var i,e=zy(n);if(e!==zy(t))return!1;switch(e){case 0:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return PD(n).isEqual(PD(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var u=S_(r.timestampValue),h=S_(i.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,Fw(n.bytesValue).isEqual(Fw(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return ko(r.geoPointValue.latitude)===ko(i.geoPointValue.latitude)&&ko(r.geoPointValue.longitude)===ko(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ko(r.integerValue)===ko(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var u=ko(r.doubleValue),h=ko(i.doubleValue);return u===h?XI(u)===XI(h):isNaN(u)&&isNaN(h)}return!1}(n,t);case 9:return Ow(n.arrayValue.values||[],t.arrayValue.values||[],Mf);case 10:return function(r,i){var u=r.mapValue.fields||{},h=i.mapValue.fields||{};if(CB(u)!==CB(h))return!1;for(var _ in u)if(u.hasOwnProperty(_)&&(void 0===h[_]||!Mf(u[_],h[_])))return!1;return!0}(n,t);default:return Ft()}}function FD(n,t){return void 0!==(n.values||[]).find(function(e){return Mf(e,t)})}function Lw(n,t){var i,u,h,_,e=zy(n),r=zy(t);if(e!==r)return Bn(e,r);switch(e){case 0:return 0;case 1:return Bn(n.booleanValue,t.booleanValue);case 2:return u=t,(h=ko((i=n).integerValue||i.doubleValue))<(_=ko(u.integerValue||u.doubleValue))?-1:h>_?1:h===_?0:isNaN(h)?isNaN(_)?0:-1:1;case 3:return IB(n.timestampValue,t.timestampValue);case 4:return IB(PD(n),PD(t));case 5:return Bn(n.stringValue,t.stringValue);case 6:return function(i,u){var h=Fw(i),_=Fw(u);return h.compareTo(_)}(n.bytesValue,t.bytesValue);case 7:return function(i,u){for(var h=i.split("/"),_=u.split("/"),b=0;b<h.length&&b<_.length;b++){var D=Bn(h[b],_[b]);if(0!==D)return D}return Bn(h.length,_.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,u){var h=Bn(ko(i.latitude),ko(u.latitude));return 0!==h?h:Bn(ko(i.longitude),ko(u.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,u){for(var h=i.values||[],_=u.values||[],b=0;b<h.length&&b<_.length;++b){var D=Lw(h[b],_[b]);if(D)return D}return Bn(h.length,_.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,u){var h=i.fields||{},_=Object.keys(h),b=u.fields||{},D=Object.keys(b);_.sort(),D.sort();for(var M=0;M<_.length&&M<D.length;++M){var x=Bn(_[M],D[M]);if(0!==x)return x;var L=Lw(h[_[M]],b[D[M]]);if(0!==L)return L}return Bn(_.length,D.length)}(n.mapValue,t.mapValue);default:throw Ft()}}function IB(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Bn(n,t);var e=S_(n),r=S_(t),i=Bn(e.seconds,r.seconds);return 0!==i?i:Bn(e.nanos,r.nanos)}function Wx(n){return Yx(n)}function Yx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?"time("+(i=S_(n.timestampValue)).seconds+","+i.nanos+")":"stringValue"in n?n.stringValue:"bytesValue"in n?Fw(n.bytesValue).toBase64():"referenceValue"in n?Vt.fromName(n.referenceValue).toString():"geoPointValue"in n?"geo("+(t=n.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in n?function(r){for(var i="[",u=!0,h=0,_=r.values||[];h<_.length;h++)u?u=!1:i+=",",i+=Yx(_[h]);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){for(var i="{",u=!0,h=0,_=Object.keys(r.fields||{}).sort();h<_.length;h++){var b=_[h];u?u=!1:i+=",",i+=b+":"+Yx(r.fields[b])}return i+"}"}(n.mapValue):Ft();var i,t}function JI(n,t){return{referenceValue:"projects/"+n.projectId+"/databases/"+n.database+"/documents/"+t.path.canonicalString()}}function Kx(n){return!!n&&"integerValue"in n}function Qx(n){return!!n&&"arrayValue"in n}function AB(n){return!!n&&"nullValue"in n}function MB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eA(n){return!!n&&"mapValue"in n}function LD(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){var t={mapValue:{fields:{}}};return Hy(n.mapValue.fields,function(i,u){return t.mapValue.fields[i]=LD(u)}),t}if(n.arrayValue){for(var e={arrayValue:{values:[]}},r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=LD(n.arrayValue.values[r]);return e}return Object.assign({},n)}var cc=function(){function n(t){this.value=t}return n.empty=function(){return new n({mapValue:{}})},n.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,r=0;r<t.length-1;++r)if(!eA(e=(e.mapValue.fields||{})[t.get(r)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},n.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=LD(e)},n.prototype.setAll=function(t){var e=this,r=Sh.emptyPath(),i={},u=[];t.forEach(function(_,b){if(!r.isImmediateParentOf(b)){var D=e.getFieldsMap(r);e.applyChanges(D,i,u),i={},u=[],r=b.popLast()}_?i[b.lastSegment()]=LD(_):u.push(b.lastSegment())});var h=this.getFieldsMap(r);this.applyChanges(h,i,u)},n.prototype.delete=function(t){var e=this.field(t.popLast());eA(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},n.prototype.isEqual=function(t){return Mf(this.value,t.value)},n.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=e.mapValue.fields[t.get(r)];eA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields},n.prototype.applyChanges=function(t,e,r){Hy(e,function(_,b){return t[_]=b});for(var i=0,u=r;i<u.length;i++)delete t[u[i]]},n.prototype.clone=function(){return new n(LD(this.value))},n}();function RB(n){var t=[];return Hy(n.fields,function(e,r){var i=new Sh([e]);if(eA(r)){var u=RB(r.mapValue).fields;if(0===u.length)t.push(i);else for(var h=0,_=u;h<_.length;h++)t.push(i.child(_[h]))}else t.push(i)}),new Pw(t)}var ta=function(){function n(t,e,r,i,u){this.key=t,this.documentType=e,this.version=r,this.data=i,this.documentState=u}return n.newInvalidDocument=function(t){return new n(t,0,Sn.min(),cc.empty(),0)},n.newFoundDocument=function(t,e,r){return new n(t,1,e,r,0)},n.newNoDocument=function(t,e){return new n(t,2,e,cc.empty(),0)},n.newUnknownDocument=function(t,e){return new n(t,3,e,cc.empty(),2)},n.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},n.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=cc.empty(),this.documentState=0,this},n.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=cc.empty(),this.documentState=2,this},n.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},n.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(n.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isValidDocument=function(){return 0!==this.documentType},n.prototype.isFoundDocument=function(){return 1===this.documentType},n.prototype.isNoDocument=function(){return 2===this.documentType},n.prototype.isUnknownDocument=function(){return 3===this.documentType},n.prototype.isEqual=function(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},n.prototype.clone=function(){return new n(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},n}(),B8=function(n,t,e,r,i,u,h){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===u&&(u=null),void 0===h&&(h=null),this.path=n,this.collectionGroup=t,this.orderBy=e,this.filters=r,this.limit=i,this.startAt=u,this.endAt=h,this.h=null};function NB(n,t,e,r,i,u,h){return void 0===t&&(t=null),void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===u&&(u=null),void 0===h&&(h=null),new B8(n,t,e,r,i,u,h)}function VD(n){var t=mt(n);if(null===t.h){var e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(function(r){return(i=r).field.canonicalString()+i.op.toString()+Wx(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(function(r){return(i=r).field.canonicalString()+i.dir;var i}).join(","),Gy(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=rA(t.startAt)),t.endAt&&(e+="|ub:",e+=rA(t.endAt)),t.h=e}return t.h}function tA(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<n.orderBy.length;e++)if(!W8(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(var r=0;r<n.filters.length;r++)if((i=n.filters[r]).op!==(u=t.filters[r]).op||!i.field.isEqual(u.field)||!Mf(i.value,u.value))return!1;var i,u;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!OB(n.startAt,t.startAt)&&OB(n.endAt,t.endAt)}function nA(n){return Vt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}var dc=function(n){function t(e,r,i){var u=this;return(u=n.call(this)||this).field=e,u.op=r,u.value=i,u}return(0,F.__extends)(t,n),t.create=function(e,r,i){return e.isKeyField()?"in"===r||"not-in"===r?this.l(e,r,i):new U8(e,r,i):"array-contains"===r?new G8(e,i):"in"===r?new z8(e,i):"not-in"===r?new $8(e,i):"array-contains-any"===r?new q8(e,i):new t(e,r,i)},t.l=function(e,r,i){return"in"===r?new j8(e,i):new H8(e,i)},t.prototype.matches=function(e){var r=e.data.field(this.field);return"!="===this.op?null!==r&&this.m(Lw(r,this.value)):null!==r&&zy(this.value)===zy(r)&&this.m(Lw(r,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ft()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),U8=function(n){function t(e,r,i){var u=this;return(u=n.call(this,e,r,i)||this).key=Vt.fromName(i.referenceValue),u}return(0,F.__extends)(t,n),t.prototype.matches=function(e){var r=Vt.comparator(e.key,this.key);return this.m(r)},t}(dc),j8=function(n){function t(e,r){var i=this;return(i=n.call(this,e,"in",r)||this).keys=kB(0,r),i}return(0,F.__extends)(t,n),t.prototype.matches=function(e){return this.keys.some(function(r){return r.isEqual(e.key)})},t}(dc),H8=function(n){function t(e,r){var i=this;return(i=n.call(this,e,"not-in",r)||this).keys=kB(0,r),i}return(0,F.__extends)(t,n),t.prototype.matches=function(e){return!this.keys.some(function(r){return r.isEqual(e.key)})},t}(dc);function kB(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(r){return Vt.fromName(r.referenceValue)})}var G8=function(n){function t(e,r){return n.call(this,e,"array-contains",r)||this}return(0,F.__extends)(t,n),t.prototype.matches=function(e){var r=e.data.field(this.field);return Qx(r)&&FD(r.arrayValue,this.value)},t}(dc),z8=function(n){function t(e,r){return n.call(this,e,"in",r)||this}return(0,F.__extends)(t,n),t.prototype.matches=function(e){var r=e.data.field(this.field);return null!==r&&FD(this.value.arrayValue,r)},t}(dc),$8=function(n){function t(e,r){return n.call(this,e,"not-in",r)||this}return(0,F.__extends)(t,n),t.prototype.matches=function(e){if(FD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=e.data.field(this.field);return null!==r&&!FD(this.value.arrayValue,r)},t}(dc),q8=function(n){function t(e,r){return n.call(this,e,"array-contains-any",r)||this}return(0,F.__extends)(t,n),t.prototype.matches=function(e){var r=this,i=e.data.field(this.field);return!(!Qx(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(u){return FD(r.value.arrayValue,u)})},t}(dc),BD=function(n,t){this.position=n,this.before=t};function rA(n){return(n.before?"b":"a")+":"+n.position.map(function(t){return Wx(t)}).join(",")}var Vw=function(n,t){void 0===t&&(t="asc"),this.field=n,this.dir=t};function W8(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function xB(n,t,e){for(var r=0,i=0;i<n.position.length;i++){var u=t[i],h=n.position[i];if(r=u.field.isKeyField()?Vt.comparator(Vt.fromName(h.referenceValue),e.key):Lw(h,e.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function OB(n,t){if(null===n)return null===t;if(null===t||n.before!==t.before||n.position.length!==t.position.length)return!1;for(var e=0;e<n.position.length;e++)if(!Mf(n.position[e],t.position[e]))return!1;return!0}var fg=function(n,t,e,r,i,u,h,_){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===u&&(u="F"),void 0===h&&(h=null),void 0===_&&(_=null),this.path=n,this.collectionGroup=t,this.explicitOrderBy=e,this.filters=r,this.limit=i,this.limitType=u,this.startAt=h,this.endAt=_,this.p=null,this.T=null};function PB(n,t,e,r,i,u,h,_){return new fg(n,t,e,r,i,u,h,_)}function Bw(n){return new fg(n)}function iA(n){return!Gy(n.limit)&&"F"===n.limitType}function oA(n){return!Gy(n.limit)&&"L"===n.limitType}function Zx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Xx(n){for(var t=0,e=n.filters;t<e.length;t++){var r=e[t];if(r.g())return r.field}return null}function Jx(n){return null!==n.collectionGroup}function Uw(n){var t=mt(n);if(null===t.p){t.p=[];var e=Xx(t),r=Zx(t);if(null!==e&&null===r)e.isKeyField()||t.p.push(new Vw(e)),t.p.push(new Vw(Sh.keyField(),"asc"));else{for(var i=!1,u=0,h=t.explicitOrderBy;u<h.length;u++){var _=h[u];t.p.push(_),_.field.isKeyField()&&(i=!0)}if(!i){var b=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Vw(Sh.keyField(),b))}}}return t.p}function pd(n){var t=mt(n);if(!t.T)if("F"===t.limitType)t.T=NB(t.path,t.collectionGroup,Uw(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var e=[],r=0,i=Uw(t);r<i.length;r++){var u=i[r];e.push(new Vw(u.field,"desc"===u.dir?"asc":"desc"))}var _=t.endAt?new BD(t.endAt.position,!t.endAt.before):null,b=t.startAt?new BD(t.startAt.position,!t.startAt.before):null;t.T=NB(t.path,t.collectionGroup,e,t.filters,t.limit,_,b)}return t.T}function FB(n,t,e){return new fg(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function UD(n,t){return tA(pd(n),pd(t))&&n.limitType===t.limitType}function LB(n){return VD(pd(n))+"|lt:"+n.limitType}function eO(n){return"Query(target="+(e=(t=pd(n)).path.canonicalString(),null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+Wx(i.value);var i}).join(", ")+"]"),Gy(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(r){return(i=r).field.canonicalString()+" ("+i.dir+")";var i}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+rA(t.startAt)),t.endAt&&(e+=", endAt: "+rA(t.endAt)),"Target("+e+"); limitType=")+n.limitType+")";var t,e}function jD(n,t){return t.isFoundDocument()&&(i=(r=t).key.path,null!==(e=n).collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):Vt.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i))&&function(e,r){for(var i=0,u=e.explicitOrderBy;i<u.length;i++){var h=u[i];if(!h.field.isKeyField()&&null===r.data.field(h.field))return!1}return!0}(n,t)&&function(e,r){for(var i=0,u=e.filters;i<u.length;i++)if(!u[i].matches(r))return!1;return!0}(n,t)&&function(e,r){return!(e.startAt&&!xB(e.startAt,Uw(e),r)||e.endAt&&xB(e.endAt,Uw(e),r))}(n,t);var e,r,i}function VB(n){return function(t,e){for(var r=!1,i=0,u=Uw(n);i<u.length;i++){var h=u[i],_=Y8(h,t,e);if(0!==_)return _;r=r||h.field.isKeyField()}return 0}}function Y8(n,t,e){var i,h,_,b,r=n.field.isKeyField()?Vt.comparator(t.key,e.key):(h=e,_=t.data.field(i=n.field),b=h.data.field(i),null!==_&&null!==b?Lw(_,b):Ft());switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ft()}}function BB(n,t){if(n.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:XI(t)?"-0":t}}function UB(n){return{integerValue:""+n}}function jB(n,t){return SB(t)?UB(t):BB(n,t)}var sA=function(){this._=void 0};function K8(n,t,e){return n instanceof jw?(u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=e).seconds,nanos:r.nanoseconds}}}},(i=t)&&(u.fields.__previous_value__=i),{mapValue:u}):n instanceof $y?GB(n,t):n instanceof qy?zB(n,t):function(r,i){var u=HB(r,i),h=$B(u)+$B(r.A);return Kx(u)&&Kx(r.A)?UB(h):BB(r.R,h)}(n,t);var r,i,u}function Q8(n,t,e){return n instanceof $y?GB(n,t):n instanceof qy?zB(n,t):e}function HB(n,t){return n instanceof Hw?Kx(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}var jw=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t}(sA),$y=function(n){function t(e){var r=this;return(r=n.call(this)||this).elements=e,r}return(0,F.__extends)(t,n),t}(sA);function GB(n,t){for(var e=qB(t),r=function(h){e.some(function(_){return Mf(_,h)})||e.push(h)},i=0,u=n.elements;i<u.length;i++)r(u[i]);return{arrayValue:{values:e}}}var qy=function(n){function t(e){var r=this;return(r=n.call(this)||this).elements=e,r}return(0,F.__extends)(t,n),t}(sA);function zB(n,t){for(var e=qB(t),r=function(h){e=e.filter(function(_){return!Mf(_,h)})},i=0,u=n.elements;i<u.length;i++)r(u[i]);return{arrayValue:{values:e}}}var Hw=function(n){function t(e,r){var i=this;return(i=n.call(this)||this).R=e,i.A=r,i}return(0,F.__extends)(t,n),t}(sA);function $B(n){return ko(n.integerValue||n.doubleValue)}function qB(n){return Qx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var HD=function(n,t){this.field=n,this.transform=t},Z8=function(n,t){this.version=n,this.transformResults=t},Ra=function(){function n(t,e){this.updateTime=t,this.exists=e}return n.none=function(){return new n},n.exists=function(t){return new n(void 0,t)},n.updateTime=function(t){return new n(t)},Object.defineProperty(n.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},n}();function aA(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}var uA=function(){};function X8(n,t,e){var r,i,u,h,_;n instanceof GD?(i=t,u=e,h=(r=n).value.clone(),_=QB(r.fieldTransforms,i,u.transformResults),h.setAll(_),i.convertToFoundDocument(u.version,h).setHasCommittedMutations()):n instanceof I_?function(r,i,u){if(aA(r.precondition,i)){var h=QB(r.fieldTransforms,i,u.transformResults),_=i.data;_.setAll(KB(r)),_.setAll(h),i.convertToFoundDocument(u.version,_).setHasCommittedMutations()}else i.convertToUnknownDocument(u.version)}(n,t,e):function(r,i,u){i.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,e)}function tO(n,t,e){var i;n instanceof GD?function(r,i,u){if(aA(r.precondition,i)){var h=r.value.clone(),_=ZB(r.fieldTransforms,u,i);h.setAll(_),i.convertToFoundDocument(YB(i),h).setHasLocalMutations()}}(n,t,e):n instanceof I_?function(r,i,u){if(aA(r.precondition,i)){var h=ZB(r.fieldTransforms,u,i),_=i.data;_.setAll(KB(r)),_.setAll(h),i.convertToFoundDocument(YB(i),_).setHasLocalMutations()}}(n,t,e):aA(n.precondition,i=t)&&i.convertToNoDocument(Sn.min())}function J8(n,t){for(var e=null,r=0,i=n.fieldTransforms;r<i.length;r++){var u=i[r],h=t.data.field(u.field),_=HB(u.transform,h||null);null!=_&&(null==e&&(e=cc.empty()),e.set(u.field,_))}return e||null}function WB(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&Ow(e,r,function(i,u){return(h=i).field.isEqual((_=u).field)&&(D=_.transform,(b=h.transform)instanceof $y&&D instanceof $y||b instanceof qy&&D instanceof qy?Ow(b.elements,D.elements,Mf):b instanceof Hw&&D instanceof Hw?Mf(b.A,D.A):b instanceof jw&&D instanceof jw);var h,_,b,D})))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function YB(n){return n.isFoundDocument()?n.version:Sn.min()}var GD=function(n){function t(e,r,i,u){void 0===u&&(u=[]);var h=this;return(h=n.call(this)||this).key=e,h.value=r,h.precondition=i,h.fieldTransforms=u,h.type=0,h}return(0,F.__extends)(t,n),t}(uA),I_=function(n){function t(e,r,i,u,h){void 0===h&&(h=[]);var _=this;return(_=n.call(this)||this).key=e,_.data=r,_.fieldMask=i,_.precondition=u,_.fieldTransforms=h,_.type=1,_}return(0,F.__extends)(t,n),t}(uA);function KB(n){var t=new Map;return n.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=n.data.field(e);t.set(e,r)}}),t}function QB(n,t,e){var r=new Map;an(n.length===e.length);for(var i=0;i<e.length;i++){var u=n[i],h=u.transform,_=t.data.field(u.field);r.set(u.field,Q8(h,_,e[i]))}return r}function ZB(n,t,e){for(var r=new Map,i=0,u=n;i<u.length;i++){var h=u[i],_=h.transform,b=e.data.field(h.field);r.set(h.field,K8(_,b,t))}return r}var xo,Xn,zD=function(n){function t(e,r){var i=this;return(i=n.call(this)||this).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,F.__extends)(t,n),t}(uA),nO=function(n){function t(e,r){var i=this;return(i=n.call(this)||this).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,F.__extends)(t,n),t}(uA),e5=function(n){this.count=n};function XB(n){switch(n){default:return Ft();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function JB(n){if(void 0===n)return No("GRPC error has no .code"),ke.UNKNOWN;switch(n){case xo.OK:return ke.OK;case xo.CANCELLED:return ke.CANCELLED;case xo.UNKNOWN:return ke.UNKNOWN;case xo.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case xo.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case xo.INTERNAL:return ke.INTERNAL;case xo.UNAVAILABLE:return ke.UNAVAILABLE;case xo.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case xo.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case xo.NOT_FOUND:return ke.NOT_FOUND;case xo.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case xo.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case xo.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case xo.ABORTED:return ke.ABORTED;case xo.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case xo.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case xo.DATA_LOSS:return ke.DATA_LOSS;default:return Ft()}}(Xn=xo||(xo={}))[Xn.OK=0]="OK",Xn[Xn.CANCELLED=1]="CANCELLED",Xn[Xn.UNKNOWN=2]="UNKNOWN",Xn[Xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xn[Xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xn[Xn.NOT_FOUND=5]="NOT_FOUND",Xn[Xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xn[Xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xn[Xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xn[Xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xn[Xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xn[Xn.ABORTED=10]="ABORTED",Xn[Xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xn[Xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xn[Xn.INTERNAL=13]="INTERNAL",Xn[Xn.UNAVAILABLE=14]="UNAVAILABLE",Xn[Xn.DATA_LOSS=15]="DATA_LOSS";var Na=function(){function n(t,e){this.comparator=t,this.root=e||A_.EMPTY}return n.prototype.insert=function(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,A_.BLACK,null,null))},n.prototype.remove=function(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,A_.BLACK,null,null))},n.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null},n.prototype.indexOf=function(t){for(var e=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1},n.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(n.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),n.prototype.minKey=function(){return this.root.minKey()},n.prototype.maxKey=function(){return this.root.maxKey()},n.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},n.prototype.forEach=function(t){this.inorderTraversal(function(e,r){return t(e,r),!1})},n.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,r){return t.push(e+":"+r),!1}),"{"+t.join(", ")+"}"},n.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},n.prototype.getIterator=function(){return new lA(this.root,null,this.comparator,!1)},n.prototype.getIteratorFrom=function(t){return new lA(this.root,t,this.comparator,!1)},n.prototype.getReverseIterator=function(){return new lA(this.root,null,this.comparator,!0)},n.prototype.getReverseIteratorFrom=function(t){return new lA(this.root,t,this.comparator,!0)},n}(),lA=function(){function n(t,e,r,i){this.isReverse=i,this.nodeStack=[];for(var u=1;!t.isEmpty();)if(u=e?r(t.key,e):1,i&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(0===u){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return n.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},n.prototype.hasNext=function(){return this.nodeStack.length>0},n.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},n}(),A_=function(){function n(t,e,r,i,u){this.key=t,this.value=e,this.color=null!=r?r:n.RED,this.left=null!=i?i:n.EMPTY,this.right=null!=u?u:n.EMPTY,this.size=this.left.size+1+this.right.size}return n.prototype.copy=function(t,e,r,i,u){return new n(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)},n.prototype.isEmpty=function(){return!1},n.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},n.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},n.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},n.prototype.minKey=function(){return this.min().key},n.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},n.prototype.insert=function(t,e,r){var i=this,u=r(t,i.key);return(i=u<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===u?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r))).fixUp()},n.prototype.removeMin=function(){if(this.left.isEmpty())return n.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},n.prototype.remove=function(t,e){var r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()},n.prototype.isRed=function(){return this.color},n.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},n.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},n.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},n.prototype.rotateLeft=function(){var t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},n.prototype.rotateRight=function(){var t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},n.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},n.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},n.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ft();var t=this.left.check();if(t!==this.right.check())throw Ft();return t+(this.isRed()?0:1)},n}();A_.EMPTY=null,A_.RED=!0,A_.BLACK=!1,A_.EMPTY=new(function(){function n(){this.size=0}return Object.defineProperty(n.prototype,"key",{get:function(){throw Ft()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){throw Ft()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){throw Ft()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){throw Ft()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){throw Ft()},enumerable:!1,configurable:!0}),n.prototype.copy=function(t,e,r,i,u){return this},n.prototype.insert=function(t,e,r){return new A_(t,e)},n.prototype.remove=function(t,e){return this},n.prototype.isEmpty=function(){return!0},n.prototype.inorderTraversal=function(t){return!1},n.prototype.reverseTraversal=function(t){return!1},n.prototype.minKey=function(){return null},n.prototype.maxKey=function(){return null},n.prototype.isRed=function(){return!1},n.prototype.checkMaxDepth=function(){return!0},n.prototype.check=function(){return 0},n}());var Zo=function(){function n(t){this.comparator=t,this.data=new Na(this.comparator)}return n.prototype.has=function(t){return null!==this.data.get(t)},n.prototype.first=function(){return this.data.minKey()},n.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(n.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),n.prototype.indexOf=function(t){return this.data.indexOf(t)},n.prototype.forEach=function(t){this.data.inorderTraversal(function(e,r){return t(e),!1})},n.prototype.forEachInRange=function(t,e){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}},n.prototype.forEachWhile=function(t,e){var r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},n.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},n.prototype.getIterator=function(){return new e3(this.data.getIterator())},n.prototype.getIteratorFrom=function(t){return new e3(this.data.getIteratorFrom(t))},n.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},n.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},n.prototype.isEmpty=function(){return this.data.isEmpty()},n.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(r){e=e.add(r)}),e},n.prototype.isEqual=function(t){if(!(t instanceof n)||this.size!==t.size)return!1;for(var e=this.data.getIterator(),r=t.data.getIterator();e.hasNext();){var i=e.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0},n.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},n.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},n.prototype.copy=function(t){var e=new n(this.comparator);return e.data=t,e},n}(),e3=function(){function n(t){this.iter=t}return n.prototype.getNext=function(){return this.iter.getNext().key},n.prototype.hasNext=function(){return this.iter.hasNext()},n}(),t5=new Na(Vt.comparator);function gd(){return t5}var n5=new Na(Vt.comparator);function rO(){return n5}var r5=new Na(Vt.comparator);function t3(){return r5}var o5=new Zo(Vt.comparator);function Sr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=o5,r=0,i=n;r<i.length;r++){var u=i[r];e=e.add(u)}return e}var s5=new Zo(Bn);function cA(){return s5}var iO=function(){function n(t,e,r,i,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}return n.createSynthesizedRemoteEventForCurrentChange=function(t,e){var r=new Map;return r.set(t,oO.createSynthesizedTargetChangeForCurrentChange(t,e)),new n(Sn.min(),r,cA(),gd(),Sr())},n}(),oO=function(){function n(t,e,r,i,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}return n.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new n(_u.EMPTY_BYTE_STRING,e,Sr(),Sr(),Sr())},n}(),dA=function(n,t,e,r){this.v=n,this.removedTargetIds=t,this.key=e,this.P=r},n3=function(n,t){this.targetId=n,this.V=t},r3=function(n,t,e,r){void 0===e&&(e=_u.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=n,this.targetIds=t,this.resumeToken=e,this.cause=r},o3=function(){function n(){this.S=0,this.D=a3(),this.C=_u.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(n.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),n.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},n.prototype.M=function(){var t=Sr(),e=Sr(),r=Sr();return this.D.forEach(function(i,u){switch(u){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:Ft()}}),new oO(this.C,this.N,t,e,r)},n.prototype.L=function(){this.k=!1,this.D=a3()},n.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},n.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},n.prototype.U=function(){this.S+=1},n.prototype.K=function(){this.S-=1},n.prototype.j=function(){this.k=!0,this.N=!0},n}(),a5=function(){function n(t){this.W=t,this.G=new Map,this.H=gd(),this.J=s3(),this.Y=new Zo(Bn)}return n.prototype.X=function(t){for(var e=0,r=t.v;e<r.length;e++){var i=r[e];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var u=0,h=t.removedTargetIds;u<h.length;u++)this.tt(i=h[u],t.key,t.P)},n.prototype.et=function(t){var e=this;this.forEachTarget(t,function(r){var i=e.nt(r);switch(t.state){case 0:e.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||e.removeTarget(r);break;case 3:e.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:e.st(r)&&(e.it(r),i.O(t.resumeToken));break;default:Ft()}})},n.prototype.forEachTarget=function(t,e){var r=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(i,u){r.st(u)&&e(u)})},n.prototype.rt=function(t){var e=t.targetId,r=t.V.count,i=this.ot(e);if(i){var u=i.target;if(nA(u))if(0===r){var h=new Vt(u.path);this.tt(e,h,ta.newNoDocument(h,Sn.min()))}else an(1===r);else this.ct(e)!==r&&(this.it(e),this.Y=this.Y.add(e))}},n.prototype.ut=function(t){var e=this,r=new Map;this.G.forEach(function(h,_){var b=e.ot(_);if(b){if(h.current&&nA(b.target)){var D=new Vt(b.target.path);null!==e.H.get(D)||e.at(_,D)||e.tt(_,D,ta.newNoDocument(D,t))}h.$&&(r.set(_,h.M()),h.L())}});var i=Sr();this.J.forEach(function(h,_){var b=!0;_.forEachWhile(function(D){var M=e.ot(D);return!M||2===M.purpose||(b=!1,!1)}),b&&(i=i.add(h))});var u=new iO(t,r,this.Y,this.H,i);return this.H=gd(),this.J=s3(),this.Y=new Zo(Bn),u},n.prototype.Z=function(t,e){if(this.st(t)){var r=this.at(t,e.key)?2:0;this.nt(t).B(e.key,r),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},n.prototype.tt=function(t,e,r){if(this.st(t)){var i=this.nt(t);this.at(t,e)?i.B(e,1):i.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),r&&(this.H=this.H.insert(e,r))}},n.prototype.removeTarget=function(t){this.G.delete(t)},n.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},n.prototype.U=function(t){this.nt(t).U()},n.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new o3,this.G.set(t,e)),e},n.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Zo(Bn),this.J=this.J.insert(t,e)),e},n.prototype.st=function(t){var e=null!==this.ot(t);return e||ht("WatchChangeAggregator","Detected inactive target",t),e},n.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},n.prototype.it=function(t){var e=this;this.G.set(t,new o3),this.W.getRemoteKeysForTarget(t).forEach(function(r){e.tt(t,r,null)})},n.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},n}();function s3(){return new Na(Vt.comparator)}function a3(){return new Na(Vt.comparator)}var u5={asc:"ASCENDING",desc:"DESCENDING"},l5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c5=function(n,t){this.databaseId=n,this.I=t};function $D(n,t){return n.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function u3(n,t){return n.I?t.toBase64():t.toUint8Array()}function d5(n,t){return $D(n,t.toTimestamp())}function Cs(n){return an(!!n),Sn.fromTimestamp((e=S_(n),new cl(e.seconds,e.nanos)));var e}function sO(n,t){return(e=n,new lr(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function l3(n){var t=lr.fromString(n);return an(w3(t)),t}function qD(n,t){return sO(n.databaseId,t.path)}function Rf(n,t){var e=l3(t);if(e.get(1)!==n.databaseId.projectId)throw new it(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new it(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Vt(d3(e))}function aO(n,t){return sO(n.databaseId,t)}function c3(n){var t=l3(n);return 4===t.length?lr.emptyPath():d3(t)}function WD(n){return new lr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function d3(n){return an(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function h3(n,t,e){return{name:qD(n,t),fields:e.value.mapValue.fields}}function f3(n,t,e){var r=Rf(n,t.name),i=Cs(t.updateTime),u=new cc({mapValue:{fields:t.fields}}),h=ta.newFoundDocument(r,i,u);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function hA(n,t){var e,i;if(t instanceof GD)e={update:h3(n,t.key,t.value)};else if(t instanceof zD)e={delete:qD(n,t.key)};else if(t instanceof I_)e={update:h3(n,t.key,t.data),updateMask:m5(t.fieldMask)};else{if(!(t instanceof nO))return Ft();e={verify:qD(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(function(r){return function(i,u){var h=u.transform;if(h instanceof jw)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof $y)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qy)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Hw)return{fieldPath:u.field.canonicalString(),increment:h.A};throw Ft()}(0,r)})),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:d5(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ft()),e}function p3(n,t){var D,e=t.currentDocument?void 0!==(D=t.currentDocument).updateTime?Ra.updateTime(Cs(D.updateTime)):void 0!==D.exists?Ra.exists(D.exists):Ra.none():Ra.none(),r=t.updateTransforms?t.updateTransforms.map(function(D){return function(M,x){var L=null;"setToServerValue"in x?(an("REQUEST_TIME"===x.setToServerValue),L=new jw):"appendMissingElements"in x?L=new $y(x.appendMissingElements.values||[]):"removeAllFromArray"in x?L=new qy(x.removeAllFromArray.values||[]):"increment"in x?L=new Hw(M,x.increment):Ft();var ne=Sh.fromServerFormat(x.fieldPath);return new HD(ne,L)}(n,D)}):[];if(t.update){var i=Rf(n,t.update.name),u=new cc({mapValue:{fields:t.update.fields}});if(t.updateMask){var h=function(D){return new Pw((D.fieldPaths||[]).map(function(x){return Sh.fromServerFormat(x)}))}(t.updateMask);return new I_(i,u,h,e,r)}return new GD(i,u,e,r)}if(t.delete){var _=Rf(n,t.delete);return new zD(_,e)}if(t.verify){var b=Rf(n,t.verify);return new nO(b,e)}return Ft()}function g3(n,t){return{documents:[aO(n,t.path)]}}function m3(n,t){var e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=aO(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=aO(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(_){if(0!==_.length){var b=_.map(function(D){return function(M){if("=="===M.op){if(MB(M.value))return{unaryFilter:{field:Gw(M.field),op:"IS_NAN"}};if(AB(M.value))return{unaryFilter:{field:Gw(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(MB(M.value))return{unaryFilter:{field:Gw(M.field),op:"IS_NOT_NAN"}};if(AB(M.value))return{unaryFilter:{field:Gw(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gw(M.field),op:f5(M.op),value:M.value}}}(D)});return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}}(t.filters);i&&(e.structuredQuery.where=i);var u=function(_){if(0!==_.length)return _.map(function(b){return{field:Gw((D=b).field),direction:h5(D.dir)};var D})}(t.orderBy);u&&(e.structuredQuery.orderBy=u);var b,h=(b=t.limit,n.I||Gy(b)?b:{value:b});return null!==h&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=y3(t.startAt)),t.endAt&&(e.structuredQuery.endAt=y3(t.endAt)),e}function _3(n){var t=c3(n.parent),e=n.structuredQuery,r=e.from?e.from.length:0,i=null;if(r>0){an(1===r);var u=e.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}var h=[];e.where&&(h=v3(e.where));var _=[];e.orderBy&&(_=e.orderBy.map(function(x){return new Vw(zw((L=x).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction));var L}));var x,L,b=null;e.limit&&(b=Gy(L="object"==typeof(x=e.limit)?x.value:x)?null:L);var D=null;e.startAt&&(D=b3(e.startAt));var M=null;return e.endAt&&(M=b3(e.endAt)),PB(t,i,_,h,b,"F",D,M)}function v3(n){return n?void 0!==n.unaryFilter?[g5(n)]:void 0!==n.fieldFilter?[p5(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(function(t){return v3(t)}).reduce(function(t,e){return t.concat(e)}):Ft():[]}function y3(n){return{before:n.before,values:n.position}}function b3(n){return new BD(n.values||[],!!n.before)}function h5(n){return u5[n]}function f5(n){return l5[n]}function Gw(n){return{fieldPath:n.canonicalString()}}function zw(n){return Sh.fromServerFormat(n.fieldPath)}function p5(n){return dc.create(zw(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function g5(n){switch(n.unaryFilter.op){case"IS_NAN":var t=zw(n.unaryFilter.field);return dc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var e=zw(n.unaryFilter.field);return dc.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zw(n.unaryFilter.field);return dc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zw(n.unaryFilter.field);return dc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ft()}}function m5(n){var t=[];return n.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function w3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ih(n){for(var t="",e=0;e<n.length;e++)t.length>0&&(t=C3(t)),t=_5(n.get(e),t);return C3(t)}function _5(n,t){for(var e=t,r=n.length,i=0;i<r;i++){var u=n.charAt(i);switch(u){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=u}}return e}function C3(n){return n+"\x01\x01"}function pg(n){var t=n.length;if(an(t>=2),2===t)return an("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),lr.emptyPath();for(var e=t-2,r=[],i="",u=0;u<t;){var h=n.indexOf("\x01",u);switch((h<0||h>e)&&Ft(),n.charAt(h+1)){case"\x01":var _=n.substring(u,h),b=void 0;0===i.length?b=_:(b=i+=_,i=""),r.push(b);break;case"\x10":i+=n.substring(u,h),i+="\0";break;case"\x11":i+=n.substring(u,h+1);break;default:Ft()}u=h+2}return new lr(r)}var v5=function(n,t){this.seconds=n,this.nanoseconds=t},hc=function(n,t,e){this.ownerId=n,this.allowTabSynchronization=t,this.leaseTimestampMs=e};hc.store="owner",hc.key="owner";var M_=function(n,t,e){this.userId=n,this.lastAcknowledgedBatchId=t,this.lastStreamToken=e};M_.store="mutationQueues",M_.keyPath="userId";var ui=function(n,t,e,r,i){this.userId=n,this.batchId=t,this.localWriteTimeMs=e,this.baseMutations=r,this.mutations=i};ui.store="mutations",ui.keyPath="batchId",ui.userMutationsIndex="userMutationsIndex",ui.userMutationsKeyPath=["userId","batchId"];var ka=function(){function n(){}return n.prefixForUser=function(t){return[t]},n.prefixForPath=function(t,e){return[t,Ih(e)]},n.key=function(t,e,r){return[t,Ih(e),r]},n}();ka.store="documentMutations",ka.PLACEHOLDER=new ka;var y5=function(n,t){this.path=n,this.readTime=t},b5=function(n,t){this.path=n,this.version=t},qi=function(n,t,e,r,i,u){this.unknownDocument=n,this.noDocument=t,this.document=e,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=u};qi.store="remoteDocuments",qi.readTimeIndex="readTimeIndex",qi.readTimeIndexPath="readTime",qi.collectionReadTimeIndex="collectionReadTimeIndex",qi.collectionReadTimeIndexPath=["parentPath","readTime"];var Nf=function(n){this.byteSize=n};Nf.store="remoteDocumentGlobal",Nf.key="remoteDocumentGlobalKey";var dl=function(n,t,e,r,i,u,h){this.targetId=n,this.canonicalId=t,this.readTime=e,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=u,this.query=h};dl.store="targets",dl.keyPath="targetId",dl.queryTargetsIndexName="queryTargetsIndex",dl.queryTargetsKeyPath=["canonicalId","targetId"];var na=function(n,t,e){this.targetId=n,this.path=t,this.sequenceNumber=e};na.store="targetDocuments",na.keyPath=["targetId","path"],na.documentTargetsIndex="documentTargetsIndex",na.documentTargetsKeyPath=["path","targetId"];var fc=function(n,t,e,r){this.highestTargetId=n,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=e,this.targetCount=r};fc.key="targetGlobalKey",fc.store="targetGlobal";var Wy=function(n,t){this.collectionId=n,this.parent=t};Wy.store="collectionParents",Wy.keyPath=["collectionId","parent"];var gg=function(n,t,e,r){this.clientId=n,this.updateTimeMs=t,this.networkEnabled=e,this.inForeground=r};gg.store="clientMetadata",gg.keyPath="clientId";var $w=function(n,t,e){this.bundleId=n,this.createTime=t,this.version=e};$w.store="bundles",$w.keyPath="bundleId";var qw=function(n,t,e){this.name=n,this.readTime=t,this.bundledQuery=e};qw.store="namedQueries",qw.keyPath="name";var w5=(0,F.__spreadArray)((0,F.__spreadArray)([],(0,F.__spreadArray)((0,F.__spreadArray)([],(0,F.__spreadArray)((0,F.__spreadArray)([],(0,F.__spreadArray)((0,F.__spreadArray)([],[M_.store,ui.store,ka.store,qi.store,dl.store,hc.store,fc.store,na.store]),[gg.store])),[Nf.store])),[Wy.store])),[$w.store,qw.store]),E3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",D3=function(){function n(){this.onCommittedListeners=[]}return n.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},n.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},n}(),xa=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},lt=function(){function n(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){e.isDone=!0,e.result=r,e.nextCallback&&e.nextCallback(r)},function(r){e.isDone=!0,e.error=r,e.catchCallback&&e.catchCallback(r)})}return n.prototype.catch=function(t){return this.next(void 0,t)},n.prototype.next=function(t,e){var r=this;return this.callbackAttached&&Ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n(function(i,u){r.nextCallback=function(h){r.wrapSuccess(t,h).next(i,u)},r.catchCallback=function(h){r.wrapFailure(e,h).next(i,u)}})},n.prototype.toPromise=function(){var t=this;return new Promise(function(e,r){t.next(e,r)})},n.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof n?e:n.resolve(e)}catch(r){return n.reject(r)}},n.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):n.resolve(e)},n.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):n.reject(e)},n.resolve=function(t){return new n(function(e,r){e(t)})},n.reject=function(t){return new n(function(e,r){r(t)})},n.waitFor=function(t){return new n(function(e,r){var i=0,u=0,h=!1;t.forEach(function(_){++i,_.next(function(){++u,h&&u===i&&e()},function(b){return r(b)})}),h=!0,u===i&&e()})},n.or=function(t){for(var e=n.resolve(!1),r=function(h){e=e.next(function(_){return _?n.resolve(_):h()})},i=0,u=t;i<u.length;i++)r(u[i]);return e},n.forEach=function(t,e){var r=this,i=[];return t.forEach(function(u,h){i.push(e.call(r,u,h))}),this.waitFor(i)},n}(),T3=function(){function n(t,e){var r=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xa,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){e.error?r.ft.reject(new YD(t,e.error)):r.ft.resolve()},this.transaction.onerror=function(i){var u=uO(i.target.error);r.ft.reject(new YD(t,u))}}return n.open=function(t,e,r,i){try{return new n(e,t.transaction(i,r))}catch(u){throw new YD(e,u)}},Object.defineProperty(n.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),n.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(ht("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},n.prototype.store=function(t){var e=this.transaction.objectStore(t);return new E5(e)},n}(),Ww=function(){function n(t,e,r){this.name=t,this.version=e,this.wt=r,12.2===n._t((0,At.getUA)())&&No("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return n.delete=function(t){return ht("SimpleDb","Removing database:",t),Ky(window.indexedDB.deleteDatabase(t)).toPromise()},n.yt=function(){if("undefined"==typeof indexedDB)return!1;if(n.gt())return!0;var t=(0,At.getUA)(),e=n._t(t),r=0<e&&e<10,i=n.Et(t),u=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)},n.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},n.It=function(t,e){return t.store(e)},n._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)},n.Et=function(t){var e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)},n.prototype.At=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r=this;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(ht("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(u,h){var _=indexedDB.open(r.name,r.version);_.onsuccess=function(b){u(b.target.result)},_.onblocked=function(){h(new YD(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=function(b){var D=b.target.error;h("VersionError"===D.name?new it(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new YD(t,D))},_.onupgradeneeded=function(b){ht("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',b.oldVersion),r.wt.Rt(b.target.result,_.transaction,b.oldVersion,r.version).next(function(){ht("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:e.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(u){return r.bt(u)}),this.db)]}})})},n.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},n.prototype.runTransaction=function(t,e,r,i){return(0,F.__awaiter)(this,void 0,void 0,function(){var u,h,_,b,D;return(0,F.__generator)(this,function(M){switch(M.label){case 0:u="readonly"===e,h=0,_=function(){var x,L,z,W,ne;return(0,F.__generator)(this,function(fe){switch(fe.label){case 0:++h,fe.label=1;case 1:return fe.trys.push([1,4,,5]),[4,b.At(t)];case 2:return b.db=fe.sent(),x=T3.open(b.db,t,u?"readonly":"readwrite",r),L=i(x).catch(function(Se){return x.abort(Se),lt.reject(Se)}).toPromise(),z={},L.catch(function(){}),[4,x.dt];case 3:return[2,(z.value=(fe.sent(),L),z)];case 4:return ht("SimpleDb","Transaction failed with error:",(W=fe.sent()).message,"Retrying:",ne="FirebaseError"!==W.name&&h<3),b.close(),ne?[3,5]:[2,{value:Promise.reject(W)}];case 5:return[2]}})},b=this,M.label=1;case 1:return[5,_()];case 2:if("object"==typeof(D=M.sent()))return[2,D.value];M.label=3;case 3:return[3,1];case 4:return[2]}})})},n.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},n}(),C5=function(){function n(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(n.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),n.prototype.done=function(){this.Vt=!0},n.prototype.Ct=function(t){this.St=t},n.prototype.delete=function(){return Ky(this.Pt.delete())},n}(),YD=function(n){function t(e,r){var i=this;return(i=n.call(this,ke.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return(0,F.__extends)(t,n),t}(it);function Yy(n){return"IndexedDbTransactionError"===n.name}var E5=function(){function n(t){this.store=t}return n.prototype.put=function(t,e){var r;return void 0!==e?(ht("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(ht("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Ky(r)},n.prototype.add=function(t){return ht("SimpleDb","ADD",this.store.name,t,t),Ky(this.store.add(t))},n.prototype.get=function(t){var e=this;return Ky(this.store.get(t)).next(function(r){return void 0===r&&(r=null),ht("SimpleDb","GET",e.store.name,t,r),r})},n.prototype.delete=function(t){return ht("SimpleDb","DELETE",this.store.name,t),Ky(this.store.delete(t))},n.prototype.count=function(){return ht("SimpleDb","COUNT",this.store.name),Ky(this.store.count())},n.prototype.Nt=function(t,e){var r=this.cursor(this.options(t,e)),i=[];return this.xt(r,function(u,h){i.push(h)}).next(function(){return i})},n.prototype.kt=function(t,e){ht("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,e);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(u,h,_){return _.delete()})},n.prototype.$t=function(t,e){var r;e?r=t:(r={},e=t);var i=this.cursor(r);return this.xt(i,e)},n.prototype.Ot=function(t){var e=this.cursor({});return new lt(function(r,i){e.onerror=function(u){var h=uO(u.target.error);i(h)},e.onsuccess=function(u){var h=u.target.result;h?t(h.primaryKey,h.value).next(function(_){_?h.continue():r()}):r()}})},n.prototype.xt=function(t,e){var r=[];return new lt(function(i,u){t.onerror=function(h){u(h.target.error)},t.onsuccess=function(h){var _=h.target.result;if(_){var b=new C5(_),D=e(_.primaryKey,_.value,b);if(D instanceof lt){var M=D.catch(function(x){return b.done(),lt.reject(x)});r.push(M)}b.isDone?i():null===b.Dt?_.continue():_.continue(b.Dt)}else i()}}).next(function(){return lt.waitFor(r)})},n.prototype.options=function(t,e){var r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}},n.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},n}();function Ky(n){return new lt(function(t,e){n.onsuccess=function(r){t(r.target.result)},n.onerror=function(r){var i=uO(r.target.error);e(i)}})}var S3=!1;function uO(n){var t=Ww._t((0,At.getUA)());if(t>=12.2&&t<13){var e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){var r=new it("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return S3||(S3=!0,setTimeout(function(){throw r},0)),r}}return n}var I3=function(n){function t(e,r){var i=this;return(i=n.call(this)||this).Mt=e,i.currentSequenceNumber=r,i}return(0,F.__extends)(t,n),t}(D3);function hl(n,t){var e=mt(n);return Ww.It(e.Mt,t)}var lO=function(){function n(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}return n.prototype.applyToRemoteDocument=function(t,e){for(var r=e.mutationResults,i=0;i<this.mutations.length;i++){var u=this.mutations[i];u.key.isEqual(t.key)&&X8(u,t,r[i])}},n.prototype.applyToLocalView=function(t){for(var e=0,r=this.baseMutations;e<r.length;e++)(h=r[e]).key.isEqual(t.key)&&tO(h,t,this.localWriteTime);for(var i=0,u=this.mutations;i<u.length;i++){var h;(h=u[i]).key.isEqual(t.key)&&tO(h,t,this.localWriteTime)}},n.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(r){var i=t.get(r.key),u=i;e.applyToLocalView(u),i.isValidDocument()||u.convertToNoDocument(Sn.min())})},n.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Sr())},n.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ow(this.mutations,t.mutations,function(e,r){return WB(e,r)})&&Ow(this.baseMutations,t.baseMutations,function(e,r){return WB(e,r)})},n}(),D5=function(){function n(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}return n.from=function(t,e,r){an(t.mutations.length===r.length);for(var i=t3(),u=t.mutations,h=0;h<u.length;h++)i=i.insert(u[h].key,r[h].version);return new n(t,e,r,i)},n}(),fA=function(){function n(t,e,r,i,u,h,_){void 0===u&&(u=Sn.min()),void 0===h&&(h=Sn.min()),void 0===_&&(_=_u.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=_}return n.prototype.withSequenceNumber=function(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},n.prototype.withResumeToken=function(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},n.prototype.withLastLimboFreeSnapshotVersion=function(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},n}(),A3=function(n){this.Lt=n};function cO(n,t){if(t.document)return f3(n.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Vt.fromSegments(t.noDocument.path),r=Kw(t.noDocument.readTime),i=ta.newNoDocument(e,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var u=Vt.fromSegments(t.unknownDocument.path);return r=Kw(t.unknownDocument.version),ta.newUnknownDocument(u,r)}return Ft()}function M3(n,t,e){var x,L,r=dO(e),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var u={name:qD(x=n.Lt,(L=t).key),fields:L.data.value.mapValue.fields,updateTime:$D(x,L.version.toTimestamp())},h=t.hasCommittedMutations;return new qi(null,null,u,h,r,i)}if(t.isNoDocument()){var _=t.key.path.toArray(),b=Yw(t.version);return h=t.hasCommittedMutations,new qi(null,new y5(_,b),null,h,r,i)}if(t.isUnknownDocument()){var D=t.key.path.toArray(),M=Yw(t.version);return new qi(new b5(D,M),null,null,!0,r,i)}return Ft()}function dO(n){var t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function R3(n){var t=new cl(n[0],n[1]);return Sn.fromTimestamp(t)}function Yw(n){var t=n.toTimestamp();return new v5(t.seconds,t.nanoseconds)}function Kw(n){var t=new cl(n.seconds,n.nanoseconds);return Sn.fromTimestamp(t)}function Qw(n,t){for(var e=(t.baseMutations||[]).map(function(b){return p3(n.Lt,b)}),r=0;r<t.mutations.length-1;++r)r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(t.mutations[r].updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r);var h=t.mutations.map(function(b){return p3(n.Lt,b)}),_=cl.fromMillis(t.localWriteTimeMs);return new lO(t.batchId,_,e,h)}function KD(n){var t,e,r=Kw(n.readTime),i=void 0!==n.lastLimboFreeSnapshotVersion?Kw(n.lastLimboFreeSnapshotVersion):Sn.min();return void 0!==n.query.documents?(an(1===(e=n.query).documents.length),t=pd(Bw(c3(e.documents[0])))):t=pd(_3(n.query)),new fA(t,n.targetId,0,n.lastListenSequenceNumber,r,i,_u.fromBase64String(n.resumeToken))}function N3(n,t){var e,r=Yw(t.snapshotVersion),i=Yw(t.lastLimboFreeSnapshotVersion);e=nA(t.target)?g3(n.Lt,t.target):m3(n.Lt,t.target);var u=t.resumeToken.toBase64();return new dl(t.targetId,VD(t.target),r,u,t.sequenceNumber,i,e)}function hO(n){var t=_3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?FB(t,t.limit,"L"):t}var T5=function(){function n(){}return n.prototype.getBundleMetadata=function(t,e){return k3(t).get(e).next(function(r){if(r)return{id:(i=r).bundleId,createTime:Kw(i.createTime),version:i.version};var i})},n.prototype.saveBundleMetadata=function(t,e){return k3(t).put({bundleId:(r=e).id,createTime:Yw(Cs(r.createTime)),version:r.version});var r},n.prototype.getNamedQuery=function(t,e){return x3(t).get(e).next(function(r){if(r)return{name:(i=r).name,query:hO(i.bundledQuery),readTime:Kw(i.readTime)};var i})},n.prototype.saveNamedQuery=function(t,e){return x3(t).put({name:(r=e).name,readTime:Yw(Cs(r.readTime)),bundledQuery:r.bundledQuery});var r},n}();function k3(n){return hl(n,$w.store)}function x3(n){return hl(n,qw.store)}var S5=function(){function n(){this.Bt=new fO}return n.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),lt.resolve()},n.prototype.getCollectionParents=function(t,e){return lt.resolve(this.Bt.getEntries(e))},n}(),fO=function(){function n(){this.index={}}return n.prototype.add=function(t){var e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Zo(lr.comparator),u=!i.has(r);return this.index[e]=i.add(r),u},n.prototype.has=function(t){var e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)},n.prototype.getEntries=function(t){return(this.index[t]||new Zo(lr.comparator)).toArray()},n}(),I5=function(){function n(){this.qt=new fO}return n.prototype.addToCollectionParentIndex=function(t,e){var r=this;if(!this.qt.has(e)){var i=e.lastSegment(),u=e.popLast();t.addOnCommittedListener(function(){r.qt.add(e)});var h={collectionId:i,parent:Ih(u)};return O3(t).put(h)}return lt.resolve()},n.prototype.getCollectionParents=function(t,e){var r=[],i=IDBKeyRange.bound([e,""],[wB(e),""],!1,!0);return O3(t).Nt(i).next(function(u){for(var h=0,_=u;h<_.length;h++){var b=_[h];if(b.collectionId!==e)break;r.push(pg(b.parent))}return r})},n}();function O3(n){return hl(n,Wy.store)}var P3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kf=function(){function n(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}return n.withCacheSize=function(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},n}();function F3(n,t,e){var r=n.store(ui.store),i=n.store(ka.store),u=[],h=IDBKeyRange.only(e.batchId),_=0,b=r.$t({range:h},function(W,ne,fe){return _++,fe.delete()});u.push(b.next(function(){an(1===_)}));for(var D=[],M=0,x=e.mutations;M<x.length;M++){var L=x[M],z=ka.key(t,L.key.path,e.batchId);u.push(i.delete(z)),D.push(L.key)}return lt.waitFor(u).next(function(){return D})}function pA(n){if(!n)return 0;var t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ft();t=n.noDocument}return JSON.stringify(t).length}kf.DEFAULT_COLLECTION_PERCENTILE=10,kf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kf.DEFAULT=new kf(41943040,kf.DEFAULT_COLLECTION_PERCENTILE,kf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kf.DISABLED=new kf(-1,0,0);var A5=function(){function n(t,e,r,i){this.userId=t,this.R=e,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return n.Qt=function(t,e,r,i){return an(""!==t.uid),new n(t.isAuthenticated()?t.uid:"",e,r,i)},n.prototype.checkEmpty=function(t){var e=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return R_(t).$t({index:ui.userMutationsIndex,range:r},function(i,u,h){e=!1,h.done()}).next(function(){return e})},n.prototype.addMutationBatch=function(t,e,r,i){var u=this,h=Zw(t),_=R_(t);return _.add({}).next(function(b){an("number"==typeof b);for(var D=new lO(b,e,r,i),M=function(Se,xe,qe){var ct=qe.baseMutations.map(function(Bt){return hA(Se.Lt,Bt)}),ut=qe.mutations.map(function(Bt){return hA(Se.Lt,Bt)});return new ui(xe,qe.batchId,qe.localWriteTime.toMillis(),ct,ut)}(u.R,u.userId,D),x=[],L=new Zo(function(Se,xe){return Bn(Se.canonicalString(),xe.canonicalString())}),z=0,W=i;z<W.length;z++){var ne=W[z],fe=ka.key(u.userId,ne.key.path,b);L=L.add(ne.key.path.popLast()),x.push(_.put(M)),x.push(h.put(fe,ka.PLACEHOLDER))}return L.forEach(function(Se){x.push(u.Ut.addToCollectionParentIndex(t,Se))}),t.addOnCommittedListener(function(){u.Kt[b]=D.keys()}),lt.waitFor(x).next(function(){return D})})},n.prototype.lookupMutationBatch=function(t,e){var r=this;return R_(t).get(e).next(function(i){return i?(an(i.userId===r.userId),Qw(r.R,i)):null})},n.prototype.jt=function(t,e){var r=this;return this.Kt[e]?lt.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(i){if(i){var u=i.keys();return r.Kt[e]=u,u}return null})},n.prototype.getNextMutationBatchAfterBatchId=function(t,e){var r=this,i=e+1,u=IDBKeyRange.lowerBound([this.userId,i]),h=null;return R_(t).$t({index:ui.userMutationsIndex,range:u},function(_,b,D){b.userId===r.userId&&(an(b.batchId>=i),h=Qw(r.R,b)),D.done()}).next(function(){return h})},n.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return R_(t).$t({index:ui.userMutationsIndex,range:e,reverse:!0},function(i,u,h){r=u.batchId,h.done()}).next(function(){return r})},n.prototype.getAllMutationBatches=function(t){var e=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return R_(t).Nt(ui.userMutationsIndex,r).next(function(i){return i.map(function(u){return Qw(e.R,u)})})},n.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var r=this,i=ka.prefixForPath(this.userId,e.path),u=IDBKeyRange.lowerBound(i),h=[];return Zw(t).$t({range:u},function(_,b,D){var M=_[0],L=_[2],z=pg(_[1]);if(M===r.userId&&e.path.isEqual(z))return R_(t).get(L).next(function(W){if(!W)throw Ft();an(W.userId===r.userId),h.push(Qw(r.R,W))});D.done()}).next(function(){return h})},n.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var r=this,i=new Zo(Bn),u=[];return e.forEach(function(h){var _=ka.prefixForPath(r.userId,h.path),b=IDBKeyRange.lowerBound(_),D=Zw(t).$t({range:b},function(M,x,L){var z=M[0],ne=M[2],fe=pg(M[1]);z===r.userId&&h.path.isEqual(fe)?i=i.add(ne):L.done()});u.push(D)}),lt.waitFor(u).next(function(){return r.Wt(t,i)})},n.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var r=this,i=e.path,u=i.length+1,h=ka.prefixForPath(this.userId,i),_=IDBKeyRange.lowerBound(h),b=new Zo(Bn);return Zw(t).$t({range:_},function(D,M,x){var L=D[0],W=D[2],ne=pg(D[1]);L===r.userId&&i.isPrefixOf(ne)?ne.length===u&&(b=b.add(W)):x.done()}).next(function(){return r.Wt(t,b)})},n.prototype.Wt=function(t,e){var r=this,i=[],u=[];return e.forEach(function(h){u.push(R_(t).get(h).next(function(_){if(null===_)throw Ft();an(_.userId===r.userId),i.push(Qw(r.R,_))}))}),lt.waitFor(u).next(function(){return i})},n.prototype.removeMutationBatch=function(t,e){var r=this;return F3(t.Mt,this.userId,e).next(function(i){return t.addOnCommittedListener(function(){r.Gt(e.batchId)}),lt.forEach(i,function(u){return r.referenceDelegate.markPotentiallyOrphaned(t,u)})})},n.prototype.Gt=function(t){delete this.Kt[t]},n.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(r){if(!r)return lt.resolve();var i=IDBKeyRange.lowerBound(ka.prefixForUser(e.userId)),u=[];return Zw(t).$t({range:i},function(h,_,b){if(h[0]===e.userId){var D=pg(h[1]);u.push(D)}else b.done()}).next(function(){an(0===u.length)})})},n.prototype.containsKey=function(t,e){return L3(t,this.userId,e)},n.prototype.zt=function(t){var e=this;return V3(t).get(this.userId).next(function(r){return r||new M_(e.userId,-1,"")})},n}();function L3(n,t,e){var r=ka.prefixForPath(t,e.path),i=r[1],u=IDBKeyRange.lowerBound(r),h=!1;return Zw(n).$t({range:u,Ft:!0},function(_,b,D){_[0]===t&&_[1]===i&&(h=!0),D.done()}).next(function(){return h})}function R_(n){return hl(n,ui.store)}function Zw(n){return hl(n,ka.store)}function V3(n){return hl(n,M_.store)}var gA=function(){function n(t){this.Ht=t}return n.prototype.next=function(){return this.Ht+=2,this.Ht},n.Jt=function(){return new n(0)},n.Yt=function(){return new n(-1)},n}(),M5=function(){function n(t,e){this.referenceDelegate=t,this.R=e}return n.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(r){var i=new gA(r.highestTargetId);return r.highestTargetId=i.next(),e.Zt(t,r).next(function(){return r.highestTargetId})})},n.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(e){return Sn.fromTimestamp(new cl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},n.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(e){return e.highestListenSequenceNumber})},n.prototype.setTargetsMetadata=function(t,e,r){var i=this;return this.Xt(t).next(function(u){return u.highestListenSequenceNumber=e,r&&(u.lastRemoteSnapshotVersion=r.toTimestamp()),e>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=e),i.Zt(t,u)})},n.prototype.addTargetData=function(t,e){var r=this;return this.te(t,e).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(e,i),r.Zt(t,i)})})},n.prototype.updateTargetData=function(t,e){return this.te(t,e)},n.prototype.removeTargetData=function(t,e){var r=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Xw(t).delete(e.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return an(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},n.prototype.removeTargets=function(t,e,r){var i=this,u=0,h=[];return Xw(t).$t(function(_,b){var D=KD(b);D.sequenceNumber<=e&&null===r.get(D.targetId)&&(u++,h.push(i.removeTargetData(t,D)))}).next(function(){return lt.waitFor(h)}).next(function(){return u})},n.prototype.forEachTarget=function(t,e){return Xw(t).$t(function(r,i){var u=KD(i);e(u)})},n.prototype.Xt=function(t){return B3(t).get(fc.key).next(function(e){return an(null!==e),e})},n.prototype.Zt=function(t,e){return B3(t).put(fc.key,e)},n.prototype.te=function(t,e){return Xw(t).put(N3(this.R,e))},n.prototype.ee=function(t,e){var r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},n.prototype.getTargetCount=function(t){return this.Xt(t).next(function(e){return e.targetCount})},n.prototype.getTargetData=function(t,e){var r=VD(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),u=null;return Xw(t).$t({range:i,index:dl.queryTargetsIndexName},function(h,_,b){var D=KD(_);tA(e,D.target)&&(u=D,b.done())}).next(function(){return u})},n.prototype.addMatchingKeys=function(t,e,r){var i=this,u=[],h=N_(t);return e.forEach(function(_){var b=Ih(_.path);u.push(h.put(new na(r,b))),u.push(i.referenceDelegate.addReference(t,r,_))}),lt.waitFor(u)},n.prototype.removeMatchingKeys=function(t,e,r){var i=this,u=N_(t);return lt.forEach(e,function(h){var _=Ih(h.path);return lt.waitFor([u.delete([r,_]),i.referenceDelegate.removeReference(t,r,h)])})},n.prototype.removeMatchingKeysForTargetId=function(t,e){var r=N_(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)},n.prototype.getMatchingKeysForTargetId=function(t,e){var r=IDBKeyRange.bound([e],[e+1],!1,!0),i=N_(t),u=Sr();return i.$t({range:r,Ft:!0},function(h,_,b){var D=pg(h[1]),M=new Vt(D);u=u.add(M)}).next(function(){return u})},n.prototype.containsKey=function(t,e){var r=Ih(e.path),i=IDBKeyRange.bound([r],[wB(r)],!1,!0),u=0;return N_(t).$t({index:na.documentTargetsIndex,Ft:!0,range:i},function(h,_,b){0!==h[0]&&(u++,b.done())}).next(function(){return u>0})},n.prototype.lt=function(t,e){return Xw(t).get(e).next(function(r){return r?KD(r):null})},n}();function Xw(n){return hl(n,dl.store)}function B3(n){return hl(n,fc.store)}function N_(n){return hl(n,na.store)}function Qy(n){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){if(n.code!==ke.FAILED_PRECONDITION||n.message!==E3)throw n;return ht("LocalStore","Unexpectedly lost primary lease"),[2]})})}function U3(n,t){var r=n[1],u=t[1],h=Bn(n[0],t[0]);return 0===h?Bn(r,u):h}var R5=function(){function n(t){this.ne=t,this.buffer=new Zo(U3),this.se=0}return n.prototype.ie=function(){return++this.se},n.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var r=this.buffer.last();U3(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}},Object.defineProperty(n.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),n}(),N5=function(){function n(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return n.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},n.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(n.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),n.prototype.ue=function(t){var e=this,r=this.oe?3e5:6e4;ht("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return(0,F.__awaiter)(e,void 0,void 0,function(){var i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:this.ce=null,this.oe=!0,u.label=1;case 1:return u.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return u.sent(),[3,7];case 3:return Yy(i=u.sent())?(ht("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,Qy(i)];case 5:u.sent(),u.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return u.sent(),[2]}})})})},n}(),k5=function(){function n(t,e){this.ae=t,this.params=e}return n.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(r){return Math.floor(e/100*r)})},n.prototype.nthSequenceNumber=function(t,e){var r=this;if(0===e)return lt.resolve(lc.o);var i=new R5(e);return this.ae.forEachTarget(t,function(u){return i.re(u.sequenceNumber)}).next(function(){return r.ae.le(t,function(u){return i.re(u)})}).next(function(){return i.maxValue})},n.prototype.removeTargets=function(t,e,r){return this.ae.removeTargets(t,e,r)},n.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},n.prototype.collect=function(t,e){var r=this;return-1===this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(P3)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),P3):r.fe(t,e)})},n.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},n.prototype.fe=function(t,e){var r,i,u,h,_,b,D,M=this,x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(L){return L>M.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+M.params.maximumSequenceNumbersToCollect+" from "+L),i=M.params.maximumSequenceNumbersToCollect):i=L,h=Date.now(),M.nthSequenceNumber(t,i)}).next(function(L){return r=L,_=Date.now(),M.removeTargets(t,r,e)}).next(function(L){return u=L,b=Date.now(),M.removeOrphanedDocuments(t,r)}).next(function(L){return D=Date.now(),zx()<=fu.LogLevel.DEBUG&&ht("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(h-x)+"ms\n\tDetermined least recently used "+i+" in "+(_-h)+"ms\n\tRemoved "+u+" targets in "+(b-_)+"ms\n\tRemoved "+L+" documents in "+(D-b)+"ms\nTotal Duration: "+(D-x)+"ms"),lt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:L})})},n}(),x5=function(){function n(t,e){this.db=t,this.garbageCollector=new k5(this,e)}return n.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return e.next(function(i){return r+i})})},n.prototype.de=function(t){var e=0;return this.le(t,function(r){e++}).next(function(){return e})},n.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},n.prototype.le=function(t,e){return this.we(t,function(r,i){return e(i)})},n.prototype.addReference=function(t,e,r){return mA(t,r)},n.prototype.removeReference=function(t,e,r){return mA(t,r)},n.prototype.removeTargets=function(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)},n.prototype.markPotentiallyOrphaned=function(t,e){return mA(t,e)},n.prototype._e=function(t,e){return i=e,u=!1,V3(r=t).Ot(function(h){return L3(r,h,i).next(function(_){return _&&(u=!0),lt.resolve(!_)})}).next(function(){return u});var r,i,u},n.prototype.removeOrphanedDocuments=function(t,e){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[],h=0;return this.we(t,function(_,b){if(b<=e){var D=r._e(t,_).next(function(M){if(!M)return h++,i.getEntry(t,_).next(function(){return i.removeEntry(_),N_(t).delete([0,Ih(_.path)])})});u.push(D)}}).next(function(){return lt.waitFor(u)}).next(function(){return i.apply(t)}).next(function(){return h})},n.prototype.removeTarget=function(t,e){var r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},n.prototype.updateLimboDocument=function(t,e){return mA(t,e)},n.prototype.we=function(t,e){var r,i=N_(t),u=lc.o;return i.$t({index:na.documentTargetsIndex},function(h,_){var D=_.path,M=_.sequenceNumber;0===h[0]?(u!==lc.o&&e(new Vt(pg(r)),u),u=M,r=D):u=lc.o}).next(function(){u!==lc.o&&e(new Vt(pg(r)),u)})},n.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},n}();function mA(n,t){return N_(n).put((r=n.currentSequenceNumber,new na(0,Ih(t.path),r)));var r}var Jw=function(){function n(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return n.prototype.get=function(t){var e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(var i=0,u=r;i<u.length;i++){var h=u[i],b=h[1];if(this.equalsFn(h[0],t))return b}},n.prototype.has=function(t){return void 0!==this.get(t)},n.prototype.set=function(t,e){var r=this.mapKeyFn(t),i=this.inner[r];if(void 0!==i){for(var u=0;u<i.length;u++)if(this.equalsFn(i[u][0],t))return void(i[u]=[t,e]);i.push([t,e])}else this.inner[r]=[[t,e]]},n.prototype.delete=function(t){var e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),!0;return!1},n.prototype.forEach=function(t){Hy(this.inner,function(e,r){for(var i=0,u=r;i<u.length;i++){var h=u[i];t(h[0],h[1])}})},n.prototype.isEmpty=function(){return EB(this.inner)},n}(),j3=function(){function n(){this.changes=new Jw(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return n.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Sn.min()},n.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},n.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ta.newInvalidDocument(t),readTime:e})},n.prototype.getEntry=function(t,e){this.assertNotApplied();var r=this.changes.get(e);return void 0!==r?lt.resolve(r.document):this.getFromCache(t,e)},n.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},n.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},n.prototype.assertNotApplied=function(){},n}(),O5=function(){function n(t,e){this.R=t,this.Ut=e}return n.prototype.addEntry=function(t,e,r){return k_(t).put(_A(e),r)},n.prototype.removeEntry=function(t,e){var r=k_(t),i=_A(e);return r.delete(i)},n.prototype.updateMetadata=function(t,e){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=e,r.me(t,i)})},n.prototype.getEntry=function(t,e){var r=this;return k_(t).get(_A(e)).next(function(i){return r.ye(e,i)})},n.prototype.ge=function(t,e){var r=this;return k_(t).get(_A(e)).next(function(i){return{document:r.ye(e,i),size:pA(i)}})},n.prototype.getEntries=function(t,e){var r=this,i=gd();return this.pe(t,e,function(u,h){var _=r.ye(u,h);i=i.insert(u,_)}).next(function(){return i})},n.prototype.Ee=function(t,e){var r=this,i=gd(),u=new Na(Vt.comparator);return this.pe(t,e,function(h,_){var b=r.ye(h,_);i=i.insert(h,b),u=u.insert(h,pA(_))}).next(function(){return{documents:i,Te:u}})},n.prototype.pe=function(t,e,r){if(e.isEmpty())return lt.resolve();var i=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),u=e.getIterator(),h=u.getNext();return k_(t).$t({range:i},function(_,b,D){for(var M=Vt.fromSegments(_);h&&Vt.comparator(h,M)<0;)r(h,null),h=u.getNext();h&&h.isEqual(M)&&(r(h,b),h=u.hasNext()?u.getNext():null),h?D.Ct(h.path.toArray()):D.done()}).next(function(){for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})},n.prototype.getDocumentsMatchingQuery=function(t,e,r){var i=this,u=gd(),h=e.path.length+1,_={};if(r.isEqual(Sn.min())){var b=e.path.toArray();_.range=IDBKeyRange.lowerBound(b)}else{var D=e.path.toArray(),M=dO(r);_.range=IDBKeyRange.lowerBound([D,M],!0),_.index=qi.collectionReadTimeIndex}return k_(t).$t(_,function(x,L,z){if(x.length===h){var W=cO(i.R,L);e.path.isPrefixOf(W.key.path)?jD(e,W)&&(u=u.insert(W.key,W)):z.done()}}).next(function(){return u})},n.prototype.newChangeBuffer=function(t){return new P5(this,!!t&&t.trackRemovals)},n.prototype.getSize=function(t){return this.getMetadata(t).next(function(e){return e.byteSize})},n.prototype.getMetadata=function(t){return H3(t).get(Nf.key).next(function(e){return an(!!e),e})},n.prototype.me=function(t,e){return H3(t).put(Nf.key,e)},n.prototype.ye=function(t,e){if(e){var r=cO(this.R,e);if(!r.isNoDocument()||!r.version.isEqual(Sn.min()))return r}return ta.newInvalidDocument(t)},n}(),P5=function(n){function t(e,r){var i=this;return(i=n.call(this)||this).Ie=e,i.trackRemovals=r,i.Ae=new Jw(function(u){return u.toString()},function(u,h){return u.isEqual(h)}),i}return(0,F.__extends)(t,n),t.prototype.applyChanges=function(e){var r=this,i=[],u=0,h=new Zo(function(_,b){return Bn(_.canonicalString(),b.canonicalString())});return this.changes.forEach(function(_,b){var D=r.Ae.get(_);if(b.document.isValidDocument()){var M=M3(r.Ie.R,b.document,r.getReadTime(_));h=h.add(_.path.popLast());var x=pA(M);u+=x-D,i.push(r.Ie.addEntry(e,_,M))}else if(u-=D,r.trackRemovals){var L=M3(r.Ie.R,ta.newNoDocument(_,Sn.min()),r.getReadTime(_));i.push(r.Ie.addEntry(e,_,L))}else i.push(r.Ie.removeEntry(e,_))}),h.forEach(function(_){i.push(r.Ie.Ut.addToCollectionParentIndex(e,_))}),i.push(this.Ie.updateMetadata(e,u)),lt.waitFor(i)},t.prototype.getFromCache=function(e,r){var i=this;return this.Ie.ge(e,r).next(function(u){return i.Ae.set(r,u.size),u.document})},t.prototype.getAllFromCache=function(e,r){var i=this;return this.Ie.Ee(e,r).next(function(u){var h=u.documents;return u.Te.forEach(function(_,b){i.Ae.set(_,b)}),h})},t}(j3);function H3(n){return hl(n,Nf.store)}function k_(n){return hl(n,qi.store)}function _A(n){return n.path.toArray()}var F5=function(){function n(t){this.R=t}return n.prototype.Rt=function(t,e,r,i){var u=this;an(r<i&&r>=0&&i<=11);var b,h=new T3("createOrUpgrade",e);r<1&&i>=1&&(t.createObjectStore(hc.store),(b=t).createObjectStore(M_.store,{keyPath:M_.keyPath}),b.createObjectStore(ui.store,{keyPath:ui.keyPath,autoIncrement:!0}).createIndex(ui.userMutationsIndex,ui.userMutationsKeyPath,{unique:!0}),b.createObjectStore(ka.store),G3(t),function(b){b.createObjectStore(qi.store)}(t));var _=lt.resolve();return r<3&&i>=3&&(0!==r&&(function(b){b.deleteObjectStore(na.store),b.deleteObjectStore(dl.store),b.deleteObjectStore(fc.store)}(t),G3(t)),_=_.next(function(){return function(b){var D=b.store(fc.store),M=new fc(0,0,Sn.min().toTimestamp(),0);return D.put(fc.key,M)}(h)})),r<4&&i>=4&&(0!==r&&(_=_.next(function(){return function(b,D){return D.store(ui.store).Nt().next(function(M){b.deleteObjectStore(ui.store),b.createObjectStore(ui.store,{keyPath:ui.keyPath,autoIncrement:!0}).createIndex(ui.userMutationsIndex,ui.userMutationsKeyPath,{unique:!0});var x=D.store(ui.store),L=M.map(function(z){return x.put(z)});return lt.waitFor(L)})}(t,h)})),_=_.next(function(){!function(b){b.createObjectStore(gg.store,{keyPath:gg.keyPath})}(t)})),r<5&&i>=5&&(_=_.next(function(){return u.Re(h)})),r<6&&i>=6&&(_=_.next(function(){return function(b){b.createObjectStore(Nf.store)}(t),u.be(h)})),r<7&&i>=7&&(_=_.next(function(){return u.ve(h)})),r<8&&i>=8&&(_=_.next(function(){return u.Pe(t,h)})),r<9&&i>=9&&(_=_.next(function(){(function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")})(t),function(b){var D=b.objectStore(qi.store);D.createIndex(qi.readTimeIndex,qi.readTimeIndexPath,{unique:!1}),D.createIndex(qi.collectionReadTimeIndex,qi.collectionReadTimeIndexPath,{unique:!1})}(e)})),r<10&&i>=10&&(_=_.next(function(){return u.Ve(h)})),r<11&&i>=11&&(_=_.next(function(){(function(b){b.createObjectStore($w.store,{keyPath:$w.keyPath})})(t),function(b){b.createObjectStore(qw.store,{keyPath:qw.keyPath})}(t)})),_},n.prototype.be=function(t){var e=0;return t.store(qi.store).$t(function(r,i){e+=pA(i)}).next(function(){var r=new Nf(e);return t.store(Nf.store).put(Nf.key,r)})},n.prototype.Re=function(t){var e=this,r=t.store(M_.store),i=t.store(ui.store);return r.Nt().next(function(u){return lt.forEach(u,function(h){var _=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return i.Nt(ui.userMutationsIndex,_).next(function(b){return lt.forEach(b,function(D){an(D.userId===h.userId);var M=Qw(e.R,D);return F3(t,h.userId,M).next(function(){})})})})})},n.prototype.ve=function(t){var e=t.store(na.store),r=t.store(qi.store);return t.store(fc.store).get(fc.key).next(function(i){var u=[];return r.$t(function(h,_){var b=new lr(h),D=[0,Ih(b)];u.push(e.get(D).next(function(M){return M?lt.resolve():e.put(new na(0,Ih(b),i.highestListenSequenceNumber))}))}).next(function(){return lt.waitFor(u)})})},n.prototype.Pe=function(t,e){t.createObjectStore(Wy.store,{keyPath:Wy.keyPath});var r=e.store(Wy.store),i=new fO,u=function(h){if(i.add(h)){var _=h.lastSegment(),b=h.popLast();return r.put({collectionId:_,parent:Ih(b)})}};return e.store(qi.store).$t({Ft:!0},function(h,_){var b=new lr(h);return u(b.popLast())}).next(function(){return e.store(ka.store).$t({Ft:!0},function(h,_){var D=pg(h[1]);return u(D.popLast())})})},n.prototype.Ve=function(t){var e=this,r=t.store(dl.store);return r.$t(function(i,u){var h=KD(u),_=N3(e.R,h);return r.put(_)})},n}();function G3(n){n.createObjectStore(na.store,{keyPath:na.keyPath}).createIndex(na.documentTargetsIndex,na.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(dl.store,{keyPath:dl.keyPath}).createIndex(dl.queryTargetsIndexName,dl.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(fc.store)}var pO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",L5=function(){function n(t,e,r,i,u,h,_,b,D,M){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Se=u,this.window=h,this.document=_,this.De=D,this.Ce=M,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(x){return Promise.resolve()},!n.yt())throw new it(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x5(this,i),this.Le=e+"main",this.R=new A3(b),this.Be=new Ww(this.Le,11,new F5(this.R)),this.qe=new M5(this.referenceDelegate,this.R),this.Ut=new I5,this.Ue=new O5(this.R,this.Ut),this.Ke=new T5,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===M&&No("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return n.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new it(ke.FAILED_PRECONDITION,pO);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new lc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},n.prototype.He=function(t){var e=this;return this.Me=function(r){return(0,F.__awaiter)(e,void 0,void 0,function(){return(0,F.__generator)(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},n.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(r){return(0,F.__awaiter)(e,void 0,void 0,function(){return(0,F.__generator)(this,function(i){switch(i.label){case 0:return null===r.newVersion?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},n.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,F.__awaiter)(e,void 0,void 0,function(){return(0,F.__generator)(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},n.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return vA(e).put(new gg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(r){return t.isPrimary&&!r?t.Xe(e).next(function(){return!1}):!!r&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Yy(e))return ht("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ht("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},n.prototype.Je=function(t){var e=this;return QD(t).get(hc.key).next(function(r){return lt.resolve(e.tn(r))})},n.prototype.en=function(t){return vA(t).delete(this.clientId)},n.prototype.nn=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,u=this;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(_){var b=hl(_,gg.store);return b.Nt().next(function(D){var M=u.rn(D,18e5),x=D.filter(function(L){return-1===M.indexOf(L)});return lt.forEach(x,function(L){return b.delete(L.clientId)}).next(function(){return x})})}).catch(function(){return[]})]);case 1:if(t=h.sent(),this.Qe)for(e=0,r=t;e<r.length;e++)this.Qe.removeItem(this.on(r[e].clientId));h.label=2;case 2:return[2]}})})},n.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},n.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},n.prototype.Ye=function(t){var e=this;return this.Ce?lt.resolve(!0):QD(t).get(hc.key).next(function(r){if(null!==r&&e.sn(r.leaseTimestampMs,5e3)&&!e.cn(r.ownerId)){if(e.tn(r)&&e.networkEnabled)return!0;if(!e.tn(r)){if(!r.allowTabSynchronization)throw new it(ke.FAILED_PRECONDITION,pO);return!1}}return!(!e.networkEnabled||!e.inForeground)||vA(t).Nt().next(function(i){return void 0===e.rn(i,5e3).find(function(u){return!(e.clientId===u.clientId||!(!e.networkEnabled&&u.networkEnabled||!e.inForeground&&u.inForeground&&e.networkEnabled===u.networkEnabled))})})}).next(function(r){return e.isPrimary!==r&&ht("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},n.prototype.shutdown=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[hc.store,gg.store],function(r){var i=new I3(r,lc.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},n.prototype.rn=function(t,e){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,e)&&!r.cn(i.clientId)})},n.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return vA(e).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(n.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),n.prototype.getMutationQueue=function(t){return A5.Qt(t,this.R,this.Ut,this.referenceDelegate)},n.prototype.getTargetCache=function(){return this.qe},n.prototype.getRemoteDocumentCache=function(){return this.Ue},n.prototype.getIndexManager=function(){return this.Ut},n.prototype.getBundleCache=function(){return this.Ke},n.prototype.runTransaction=function(t,e,r){var u,i=this;return ht("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",w5,function(_){return u=new I3(_,i.Ne?i.Ne.next():lc.o),"readwrite-primary"===e?i.Je(u).next(function(b){return!!b||i.Ye(u)}).next(function(b){if(!b)throw No("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new it(ke.FAILED_PRECONDITION,E3);return r(u)}).next(function(b){return i.Ze(u).next(function(){return b})}):i.dn(u).next(function(){return r(u)})}).then(function(_){return u.raiseOnCommittedEvent(),_})},n.prototype.dn=function(t){var e=this;return QD(t).get(hc.key).next(function(r){if(null!==r&&e.sn(r.leaseTimestampMs,5e3)&&!e.cn(r.ownerId)&&!e.tn(r)&&!(e.Ce||e.allowTabSynchronization&&r.allowTabSynchronization))throw new it(ke.FAILED_PRECONDITION,pO)})},n.prototype.Ze=function(t){var e=new hc(this.clientId,this.allowTabSynchronization,Date.now());return QD(t).put(hc.key,e)},n.yt=function(){return Ww.yt()},n.prototype.Xe=function(t){var e=this,r=QD(t);return r.get(hc.key).next(function(i){return e.tn(i)?(ht("IndexedDbPersistence","Releasing primary lease."),r.delete(hc.key)):lt.resolve()})},n.prototype.sn=function(t,e){var r=Date.now();return!(t<r-e||t>r&&(No("Detected an update time that is in the future: "+t+" > "+r),1))},n.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},n.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},n.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,At.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.ke))},n.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},n.prototype.cn=function(t){var e;try{var r=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return ht("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return No("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},n.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){No("Failed to set zombie client id.",t)}},n.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},n.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},n}();function QD(n){return hl(n,hc.store)}function vA(n){return hl(n,gg.store)}function gO(n,t){var e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}var V5=function(n,t){this.progress=n,this.wn=t},z3=function(){function n(t,e,r){this.Ue=t,this._n=e,this.Ut=r}return n.prototype.mn=function(t,e){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(i){return r.yn(t,e,i)})},n.prototype.yn=function(t,e,r){return this.Ue.getEntry(t,e).next(function(i){for(var u=0,h=r;u<h.length;u++)h[u].applyToLocalView(i);return i})},n.prototype.gn=function(t,e){t.forEach(function(r,i){for(var u=0,h=e;u<h.length;u++)h[u].applyToLocalView(i)})},n.prototype.pn=function(t,e){var r=this;return this.Ue.getEntries(t,e).next(function(i){return r.En(t,i).next(function(){return i})})},n.prototype.En=function(t,e){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(i){return r.gn(e,i)})},n.prototype.getDocumentsMatchingQuery=function(t,e,r){return Vt.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.Tn(t,e.path):Jx(e)?this.In(t,e,r):this.An(t,e,r);var i},n.prototype.Tn=function(t,e){return this.mn(t,new Vt(e)).next(function(r){var i=rO();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},n.prototype.In=function(t,e,r){var i=this,u=e.collectionGroup,h=rO();return this.Ut.getCollectionParents(t,u).next(function(_){return lt.forEach(_,function(b){var M,x,D=(M=e,x=b.child(u),new fg(x,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt));return i.An(t,D,r).next(function(M){M.forEach(function(x,L){h=h.insert(x,L)})})}).next(function(){return h})})},n.prototype.An=function(t,e,r){var i,u,h=this;return this.Ue.getDocumentsMatchingQuery(t,e,r).next(function(_){return i=_,h._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(_){return h.Rn(t,u=_,i).next(function(b){i=b;for(var D=0,M=u;D<M.length;D++)for(var x=M[D],L=0,z=x.mutations;L<z.length;L++){var W=z[L],ne=W.key,fe=i.get(ne);null==fe&&(fe=ta.newInvalidDocument(ne),i=i.insert(ne,fe)),tO(W,fe,x.localWriteTime),fe.isFoundDocument()||(i=i.remove(ne))}})}).next(function(){return i.forEach(function(_,b){jD(e,b)||(i=i.remove(_))}),i})},n.prototype.Rn=function(t,e,r){for(var i=Sr(),u=0,h=e;u<h.length;u++)for(var _=0,b=h[u].mutations;_<b.length;_++){var D=b[_];D instanceof I_&&null===r.get(D.key)&&(i=i.add(D.key))}var M=r;return this.Ue.getEntries(t,i).next(function(x){return x.forEach(function(L,z){z.isFoundDocument()&&(M=M.insert(L,z))}),M})},n}(),B5=function(){function n(t,e,r,i){this.targetId=t,this.fromCache=e,this.bn=r,this.vn=i}return n.Pn=function(t,e){for(var r=Sr(),i=Sr(),u=0,h=e.docChanges;u<h.length;u++){var _=h[u];switch(_.type){case 0:r=r.add(_.doc.key);break;case 1:i=i.add(_.doc.key)}}return new n(t,e.fromCache,r,i)},n}(),$3=function(){function n(){}return n.prototype.Vn=function(t){this.Sn=t},n.prototype.getDocumentsMatchingQuery=function(t,e,r,i){var h,u=this;return 0===(h=e).filters.length&&null===h.limit&&null==h.startAt&&null==h.endAt&&(0===h.explicitOrderBy.length||1===h.explicitOrderBy.length&&h.explicitOrderBy[0].field.isKeyField())||r.isEqual(Sn.min())?this.Dn(t,e):this.Sn.pn(t,i).next(function(h){var _=u.Cn(e,h);return(iA(e)||oA(e))&&u.Nn(e.limitType,_,i,r)?u.Dn(t,e):(zx()<=fu.LogLevel.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eO(e)),u.Sn.getDocumentsMatchingQuery(t,e,r).next(function(b){return _.forEach(function(D){b=b.insert(D.key,D)}),b}))})},n.prototype.Cn=function(t,e){var r=new Zo(VB(t));return e.forEach(function(i,u){jD(t,u)&&(r=r.add(u))}),r},n.prototype.Nn=function(t,e,r,i){if(r.size!==e.size)return!0;var u="F"===t?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)},n.prototype.Dn=function(t,e){return zx()<=fu.LogLevel.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",eO(e)),this.Sn.getDocumentsMatchingQuery(t,e,Sn.min())},n}(),U5=function(){function n(t,e,r,i){this.persistence=t,this.xn=e,this.R=i,this.kn=new Na(Bn),this.Fn=new Jw(function(u){return VD(u)},tA),this.$n=Sn.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new z3(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return n.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,e.kn)})},n}();function q3(n,t,e,r){return new U5(n,t,e,r)}function W3(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return e=mt(n),r=e._n,i=e.Mn,[4,e.persistence.runTransaction("Handle user change","readonly",function(_){var b;return e._n.getAllMutationBatches(_).next(function(D){return b=D,r=e.persistence.getMutationQueue(t),i=new z3(e.On,r,e.persistence.getIndexManager()),r.getAllMutationBatches(_)}).next(function(D){for(var M=[],x=[],L=Sr(),z=0,W=b;z<W.length;z++){var ne=W[z];M.push(ne.batchId);for(var fe=0,Se=ne.mutations;fe<Se.length;fe++)L=L.add(Se[fe].key)}for(var qe=0,ct=D;qe<ct.length;qe++){var ut=ct[qe];x.push(ut.batchId);for(var Bt=0,wn=ut.mutations;Bt<wn.length;Bt++)L=L.add(wn[Bt].key)}return i.pn(_,L).next(function(Hr){return{Ln:Hr,removedBatchIds:M,addedBatchIds:x}})})})];case 1:return u=h.sent(),[2,(e._n=r,e.Mn=i,e.xn.Vn(e.Mn),u)]}})})}function j5(n,t){var e=mt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var h,_,b,D,M,x,L,i=t.batch.keys(),u=e.On.newChangeBuffer({trackRemovals:!0});return(h=e,_=r,b=t,D=u,M=b.batch,x=M.keys(),L=lt.resolve(),x.forEach(function(z){L=L.next(function(){return D.getEntry(_,z)}).next(function(W){var ne=b.docVersions.get(z);an(null!==ne),W.version.compareTo(ne)<0&&(M.applyToRemoteDocument(W,b),W.isValidDocument()&&D.addEntry(W,b.commitVersion))})}),L.next(function(){return h._n.removeMutationBatch(_,M)})).next(function(){return u.apply(r)}).next(function(){return e._n.performConsistencyCheck(r)}).next(function(){return e.Mn.pn(r,i)})})}function Y3(n){var t=mt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.qe.getLastRemoteSnapshotVersion(e)})}function H5(n,t){var e=mt(n),r=t.snapshotVersion,i=e.kn;return e.persistence.runTransaction("Apply remote event","readwrite-primary",function(u){var h=e.On.newChangeBuffer({trackRemovals:!0});i=e.kn;var _=[];t.targetChanges.forEach(function(M,x){var ne,fe,Se,L=i.get(x);if(L){_.push(e.qe.removeMatchingKeys(u,M.removedDocuments,x).next(function(){return e.qe.addMatchingKeys(u,M.addedDocuments,x)}));var z=M.resumeToken;if(z.approximateByteSize()>0){var W=L.withResumeToken(z,r).withSequenceNumber(u.currentSequenceNumber);i=i.insert(x,W),ne=L,Se=M,an((fe=W).resumeToken.approximateByteSize()>0),(0===ne.resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&_.push(e.qe.updateTargetData(u,W))}}});var b=gd();if(t.documentUpdates.forEach(function(M,x){t.resolvedLimboDocuments.has(M)&&_.push(e.persistence.referenceDelegate.updateLimboDocument(u,M))}),_.push(K3(u,h,t.documentUpdates,r,void 0).next(function(M){b=M})),!r.isEqual(Sn.min())){var D=e.qe.getLastRemoteSnapshotVersion(u).next(function(M){return e.qe.setTargetsMetadata(u,u.currentSequenceNumber,r)});_.push(D)}return lt.waitFor(_).next(function(){return h.apply(u)}).next(function(){return e.Mn.En(u,b)}).next(function(){return b})}).then(function(u){return e.kn=i,u})}function K3(n,t,e,r,i){var u=Sr();return e.forEach(function(h){return u=u.add(h)}),t.getEntries(n,u).next(function(h){var _=gd();return e.forEach(function(b,D){var M=h.get(b),x=(null==i?void 0:i.get(b))||r;D.isNoDocument()&&D.version.isEqual(Sn.min())?(t.removeEntry(b,x),_=_.insert(b,D)):!M.isValidDocument()||D.version.compareTo(M.version)>0||0===D.version.compareTo(M.version)&&M.hasPendingWrites?(t.addEntry(D,x),_=_.insert(b,D)):ht("LocalStore","Ignoring outdated watch update for ",b,". Current version:",M.version," Watch version:",D.version)}),_})}function G5(n,t){var e=mt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",function(r){return void 0===t&&(t=-1),e._n.getNextMutationBatchAfterBatchId(r,t)})}function eC(n,t){var e=mt(n);return e.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return e.qe.getTargetData(r,t).next(function(u){return u?lt.resolve(i=u):e.qe.allocateTargetId(r).next(function(h){return i=new fA(t,h,0,r.currentSequenceNumber),e.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=e.kn.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.kn=e.kn.insert(r.targetId,r),e.Fn.set(t,r.targetId)),r})}function tC(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:r=mt(n),i=r.kn.get(t),u=e?"readwrite":"readwrite-primary",_.label=1;case 1:return _.trys.push([1,4,,5]),e?[3,3]:[4,r.persistence.runTransaction("Release target",u,function(b){return r.persistence.referenceDelegate.removeTarget(b,i)})];case 2:_.sent(),_.label=3;case 3:return[3,5];case 4:if(!Yy(h=_.sent()))throw h;return ht("LocalStore","Failed to update sequence numbers for target "+t+": "+h),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function yA(n,t,e){var r=mt(n),i=Sn.min(),u=Sr();return r.persistence.runTransaction("Execute query","readonly",function(h){return(_=r,b=h,D=pd(t),M=mt(_),x=M.Fn.get(D),void 0!==x?lt.resolve(M.kn.get(x)):M.qe.getTargetData(b,D)).next(function(_){if(_)return i=_.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(h,_.targetId).next(function(b){u=b})}).next(function(){return r.xn.getDocumentsMatchingQuery(h,t,e?i:Sn.min(),e?u:Sr())}).next(function(_){return{documents:_,Bn:u}});var _,b,D,M,x})}function Q3(n,t){var e=mt(n),r=mt(e.qe),i=e.kn.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",function(u){return r.lt(u,t).next(function(h){return h?h.target:null})})}function Z3(n){var t=mt(n);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return i=e,u=t.$n,h=mt(t.On),_=gd(),b=dO(u),D=k_(i),M=IDBKeyRange.lowerBound(b,!0),D.$t({index:qi.readTimeIndex,range:M},function(x,L){var z=cO(h.R,L);_=_.insert(z.key,z),b=L.readTime}).next(function(){return{wn:_,readTime:R3(b)}});var i,u,h,_,b,D,M}).then(function(e){var r=e.wn;return t.$n=e.readTime,r})}function z5(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){return[2,(t=mt(n)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return u=k_(r),h=Sn.min(),u.$t({index:qi.readTimeIndex,reverse:!0},function(_,b,D){b.readTime&&(h=R3(b.readTime)),D.done()}).next(function(){return h});var u,h}).then(function(r){t.$n=r})]})})}function $5(n,t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h,_,b,D,M,x,L,z;return(0,F.__generator)(this,function(W){switch(W.label){case 0:for(i=mt(n),u=Sr(),h=gd(),_=t3(),b=0,D=e;b<D.length;b++)x=t.qn((M=D[b]).metadata.name),M.document&&(u=u.add(x)),h=h.insert(x,t.Un(M)),_=_.insert(x,t.Kn(M.metadata.readTime));return L=i.On.newChangeBuffer({trackRemovals:!0}),[4,eC(i,(ne=r,pd(Bw(lr.fromString("__bundle__/docs/"+ne)))))];case 1:return z=W.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(ne){return K3(ne,L,h,Sn.min(),_).next(function(fe){return L.apply(ne),fe}).next(function(fe){return i.qe.removeMatchingKeysForTargetId(ne,z.targetId).next(function(){return i.qe.addMatchingKeys(ne,u,z.targetId)}).next(function(){return i.Mn.En(ne,fe)}).next(function(){return fe})})})]}var ne})})}function q5(n,t,e){return void 0===e&&(e=Sr()),(0,F.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,eC(n,pd(hO(t.bundledQuery)))];case 1:return r=u.sent(),[2,(i=mt(n)).persistence.runTransaction("Save named query","readwrite",function(h){var _=Cs(t.readTime);if(r.snapshotVersion.compareTo(_)>=0)return i.Ke.saveNamedQuery(h,t);var b=r.withResumeToken(_u.EMPTY_BYTE_STRING,_);return i.kn=i.kn.insert(b.targetId,b),i.qe.updateTargetData(h,b).next(function(){return i.qe.removeMatchingKeysForTargetId(h,r.targetId)}).next(function(){return i.qe.addMatchingKeys(h,e,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(h,t)})})]}})})}var W5=function(){function n(t){this.R=t,this.Qn=new Map,this.jn=new Map}return n.prototype.getBundleMetadata=function(t,e){return lt.resolve(this.Qn.get(e))},n.prototype.saveBundleMetadata=function(t,e){var r;return this.Qn.set(e.id,{id:(r=e).id,version:r.version,createTime:Cs(r.createTime)}),lt.resolve()},n.prototype.getNamedQuery=function(t,e){return lt.resolve(this.jn.get(e))},n.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(r=e).name,query:hO(r.bundledQuery),readTime:Cs(r.readTime)}),lt.resolve();var r},n}(),mO=function(){function n(){this.Wn=new Zo(Es.Gn),this.zn=new Zo(Es.Hn)}return n.prototype.isEmpty=function(){return this.Wn.isEmpty()},n.prototype.addReference=function(t,e){var r=new Es(t,e);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},n.prototype.Jn=function(t,e){var r=this;t.forEach(function(i){return r.addReference(i,e)})},n.prototype.removeReference=function(t,e){this.Yn(new Es(t,e))},n.prototype.Xn=function(t,e){var r=this;t.forEach(function(i){return r.removeReference(i,e)})},n.prototype.Zn=function(t){var e=this,r=new Vt(new lr([])),i=new Es(r,t),u=new Es(r,t+1),h=[];return this.zn.forEachInRange([i,u],function(_){e.Yn(_),h.push(_.key)}),h},n.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},n.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},n.prototype.es=function(t){var e=new Vt(new lr([])),r=new Es(e,t),i=new Es(e,t+1),u=Sr();return this.zn.forEachInRange([r,i],function(h){u=u.add(h.key)}),u},n.prototype.containsKey=function(t){var e=new Es(t,0),r=this.Wn.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)},n}(),Es=function(){function n(t,e){this.key=t,this.ns=e}return n.Gn=function(t,e){return Vt.comparator(t.key,e.key)||Bn(t.ns,e.ns)},n.Hn=function(t,e){return Bn(t.ns,e.ns)||Vt.comparator(t.key,e.key)},n}(),Y5=function(){function n(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Zo(Es.Gn)}return n.prototype.checkEmpty=function(t){return lt.resolve(0===this._n.length)},n.prototype.addMutationBatch=function(t,e,r,i){var u=this.ss;this.ss++;var h=new lO(u,e,r,i);this._n.push(h);for(var _=0,b=i;_<b.length;_++){var D=b[_];this.rs=this.rs.add(new Es(D.key,u)),this.Ut.addToCollectionParentIndex(t,D.key.path.popLast())}return lt.resolve(h)},n.prototype.lookupMutationBatch=function(t,e){return lt.resolve(this.os(e))},n.prototype.getNextMutationBatchAfterBatchId=function(t,e){var i=this.cs(e+1),u=i<0?0:i;return lt.resolve(this._n.length>u?this._n[u]:null)},n.prototype.getHighestUnacknowledgedBatchId=function(){return lt.resolve(0===this._n.length?-1:this.ss-1)},n.prototype.getAllMutationBatches=function(t){return lt.resolve(this._n.slice())},n.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var r=this,i=new Es(e,0),u=new Es(e,Number.POSITIVE_INFINITY),h=[];return this.rs.forEachInRange([i,u],function(_){var b=r.os(_.ns);h.push(b)}),lt.resolve(h)},n.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var r=this,i=new Zo(Bn);return e.forEach(function(u){var h=new Es(u,0),_=new Es(u,Number.POSITIVE_INFINITY);r.rs.forEachInRange([h,_],function(b){i=i.add(b.ns)})}),lt.resolve(this.us(i))},n.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var r=e.path,i=r.length+1,u=r;Vt.isDocumentKey(u)||(u=u.child(""));var h=new Es(new Vt(u),0),_=new Zo(Bn);return this.rs.forEachWhile(function(b){var D=b.key.path;return!!r.isPrefixOf(D)&&(D.length===i&&(_=_.add(b.ns)),!0)},h),lt.resolve(this.us(_))},n.prototype.us=function(t){var e=this,r=[];return t.forEach(function(i){var u=e.os(i);null!==u&&r.push(u)}),r},n.prototype.removeMutationBatch=function(t,e){var r=this;an(0===this.hs(e.batchId,"removed")),this._n.shift();var i=this.rs;return lt.forEach(e.mutations,function(u){var h=new Es(u.key,e.batchId);return i=i.delete(h),r.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(function(){r.rs=i})},n.prototype.Gt=function(t){},n.prototype.containsKey=function(t,e){var r=new Es(e,0),i=this.rs.firstAfterOrEqual(r);return lt.resolve(e.isEqual(i&&i.key))},n.prototype.performConsistencyCheck=function(t){return lt.resolve()},n.prototype.hs=function(t,e){return this.cs(t)},n.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},n.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},n}(),K5=function(){function n(t,e){this.Ut=t,this.ls=e,this.docs=new Na(Vt.comparator),this.size=0}return n.prototype.addEntry=function(t,e,r){var i=e.key,u=this.docs.get(i),h=u?u.size:0,_=this.ls(e);return this.docs=this.docs.insert(i,{document:e.clone(),size:_,readTime:r}),this.size+=_-h,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},n.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},n.prototype.getEntry=function(t,e){var r=this.docs.get(e);return lt.resolve(r?r.document.clone():ta.newInvalidDocument(e))},n.prototype.getEntries=function(t,e){var r=this,i=gd();return e.forEach(function(u){var h=r.docs.get(u);i=i.insert(u,h?h.document.clone():ta.newInvalidDocument(u))}),lt.resolve(i)},n.prototype.getDocumentsMatchingQuery=function(t,e,r){for(var i=gd(),u=new Vt(e.path.child("")),h=this.docs.getIteratorFrom(u);h.hasNext();){var _=h.getNext(),D=_.value,M=D.document,x=D.readTime;if(!e.path.isPrefixOf(_.key.path))break;x.compareTo(r)<=0||jD(e,M)&&(i=i.insert(M.key,M.clone()))}return lt.resolve(i)},n.prototype.fs=function(t,e){return lt.forEach(this.docs,function(r){return e(r)})},n.prototype.newChangeBuffer=function(t){return new Q5(this)},n.prototype.getSize=function(t){return lt.resolve(this.size)},n}(),Q5=function(n){function t(e){var r=this;return(r=n.call(this)||this).Ie=e,r}return(0,F.__extends)(t,n),t.prototype.applyChanges=function(e){var r=this,i=[];return this.changes.forEach(function(u,h){h.document.isValidDocument()?i.push(r.Ie.addEntry(e,h.document,r.getReadTime(u))):r.Ie.removeEntry(u)}),lt.waitFor(i)},t.prototype.getFromCache=function(e,r){return this.Ie.getEntry(e,r)},t.prototype.getAllFromCache=function(e,r){return this.Ie.getEntries(e,r)},t}(j3),Z5=function(){function n(t){this.persistence=t,this.ds=new Jw(function(e){return VD(e)},tA),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.ws=0,this._s=new mO,this.targetCount=0,this.ys=gA.Jt()}return n.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(r,i){return e(i)}),lt.resolve()},n.prototype.getLastRemoteSnapshotVersion=function(t){return lt.resolve(this.lastRemoteSnapshotVersion)},n.prototype.getHighestSequenceNumber=function(t){return lt.resolve(this.ws)},n.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),lt.resolve(this.highestTargetId)},n.prototype.setTargetsMetadata=function(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.ws&&(this.ws=e),lt.resolve()},n.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new gA(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},n.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,lt.resolve()},n.prototype.updateTargetData=function(t,e){return this.te(e),lt.resolve()},n.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,lt.resolve()},n.prototype.removeTargets=function(t,e,r){var i=this,u=0,h=[];return this.ds.forEach(function(_,b){b.sequenceNumber<=e&&null===r.get(b.targetId)&&(i.ds.delete(_),h.push(i.removeMatchingKeysForTargetId(t,b.targetId)),u++)}),lt.waitFor(h).next(function(){return u})},n.prototype.getTargetCount=function(t){return lt.resolve(this.targetCount)},n.prototype.getTargetData=function(t,e){var r=this.ds.get(e)||null;return lt.resolve(r)},n.prototype.addMatchingKeys=function(t,e,r){return this._s.Jn(e,r),lt.resolve()},n.prototype.removeMatchingKeys=function(t,e,r){this._s.Xn(e,r);var i=this.persistence.referenceDelegate,u=[];return i&&e.forEach(function(h){u.push(i.markPotentiallyOrphaned(t,h))}),lt.waitFor(u)},n.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),lt.resolve()},n.prototype.getMatchingKeysForTargetId=function(t,e){var r=this._s.es(e);return lt.resolve(r)},n.prototype.containsKey=function(t,e){return lt.resolve(this._s.containsKey(e))},n}(),X5=function(){function n(t,e){var r=this;this.gs={},this.Ne=new lc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Z5(this),this.Ut=new S5,this.Ue=new K5(this.Ut,function(h){return r.referenceDelegate.ps(h)}),this.R=new A3(e),this.Ke=new W5(this.R)}return n.prototype.start=function(){return Promise.resolve()},n.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(n.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),n.prototype.setDatabaseDeletedListener=function(){},n.prototype.setNetworkEnabled=function(){},n.prototype.getIndexManager=function(){return this.Ut},n.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Y5(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},n.prototype.getTargetCache=function(){return this.qe},n.prototype.getRemoteDocumentCache=function(){return this.Ue},n.prototype.getBundleCache=function(){return this.Ke},n.prototype.runTransaction=function(t,e,r){var i=this;ht("MemoryPersistence","Starting transaction:",t);var u=new J5(this.Ne.next());return this.referenceDelegate.Es(),r(u).next(function(h){return i.referenceDelegate.Ts(u).next(function(){return h})}).toPromise().then(function(h){return u.raiseOnCommittedEvent(),h})},n.prototype.Is=function(t,e){return lt.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,e)}}))},n}(),J5=function(n){function t(e){var r=this;return(r=n.call(this)||this).currentSequenceNumber=e,r}return(0,F.__extends)(t,n),t}(D3),ez=function(){function n(t){this.persistence=t,this.As=new mO,this.Rs=null}return n.bs=function(t){return new n(t)},Object.defineProperty(n.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ft()},enumerable:!1,configurable:!0}),n.prototype.addReference=function(t,e,r){return this.As.addReference(r,e),this.vs.delete(r.toString()),lt.resolve()},n.prototype.removeReference=function(t,e,r){return this.As.removeReference(r,e),this.vs.add(r.toString()),lt.resolve()},n.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),lt.resolve()},n.prototype.removeTarget=function(t,e){var r=this;this.As.Zn(e.targetId).forEach(function(u){return r.vs.add(u.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(function(u){u.forEach(function(h){return r.vs.add(h.toString())})}).next(function(){return i.removeTargetData(t,e)})},n.prototype.Es=function(){this.Rs=new Set},n.prototype.Ts=function(t){var e=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.vs,function(i){var u=Vt.fromPath(i);return e.Ps(t,u).next(function(h){h||r.removeEntry(u)})}).next(function(){return e.Rs=null,r.apply(t)})},n.prototype.updateLimboDocument=function(t,e){var r=this;return this.Ps(t,e).next(function(i){i?r.vs.delete(e.toString()):r.vs.add(e.toString())})},n.prototype.ps=function(t){return 0},n.prototype.Ps=function(t,e){var r=this;return lt.or([function(){return lt.resolve(r.As.containsKey(e))},function(){return r.persistence.getTargetCache().containsKey(t,e)},function(){return r.persistence.Is(t,e)}])},n}(),ra=function(){function n(t){this.uid=t}return n.prototype.isAuthenticated=function(){return null!=this.uid},n.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},n.prototype.isEqual=function(t){return t.uid===this.uid},n}();function X3(n,t){return"firestore_clients_"+n+"_"+t}function J3(n,t,e){var r="firestore_mutations_"+n+"_"+e;return t.isAuthenticated()&&(r+="_"+t.uid),r}function _O(n,t){return"firestore_targets_"+n+"_"+t}ra.UNAUTHENTICATED=new ra(null),ra.GOOGLE_CREDENTIALS=new ra("google-credentials-uid"),ra.FIRST_PARTY=new ra("first-party-uid"),ra.MOCK_USER=new ra("mock-user");var eU=function(){function n(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}return n.Vs=function(t,e,r){var i,u=JSON.parse(r),h="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return h&&u.error&&(h="string"==typeof u.error.message&&"string"==typeof u.error.code)&&(i=new it(u.error.code,u.error.message)),h?new n(t,e,u.state,i):(No("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+r),null)},n.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},n}(),vO=function(){function n(t,e,r){this.targetId=t,this.state=e,this.error=r}return n.Vs=function(t,e){var r,i=JSON.parse(e),u="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new it(i.error.code,i.error.message)),u?new n(t,i.state,r):(No("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},n.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},n}(),tU=function(){function n(t,e){this.clientId=t,this.activeTargetIds=e}return n.Vs=function(t,e){for(var r=JSON.parse(e),i="object"==typeof r&&r.activeTargetIds instanceof Array,u=cA(),h=0;i&&h<r.activeTargetIds.length;++h)i=SB(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return i?new n(t,u):(No("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},n}(),tz=function(){function n(t,e){this.clientId=t,this.onlineState=e}return n.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new n(e.clientId,e.onlineState):(No("SharedClientState","Failed to parse online state: "+t),null)},n}(),yO=function(){function n(){this.activeTargetIds=cA()}return n.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},n.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},n.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},n}(),bO=function(){function n(t,e,r,i,u){this.window=t,this.Se=e,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Na(Bn),this.started=!1,this.$s=[];var h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Os=X3(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new yO),this.Ls=new RegExp("^firestore_clients_"+h+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+h+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+h+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(_){return"firestore_bundle_loaded_"+_}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return n.yt=function(t){return!(!t||!t.localStorage)},n.prototype.start=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i,u,h,_,b,D,M,L=this;return(0,F.__generator)(this,function(z){switch(z.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=z.sent(),e=0,r=t;e<r.length;e++)(i=r[e])!==this.Ns&&(u=this.getItem(X3(this.persistenceKey,i)))&&(h=tU.Vs(i,u))&&(this.Fs=this.Fs.insert(h.clientId,h));for(this.Qs(),(_=this.storage.getItem(this.Us))&&(b=this.js(_))&&this.Ws(b),D=0,M=this.$s;D<M.length;D++)this.ks(M[D]);return this.$s=[],this.window.addEventListener("pagehide",function(){return L.shutdown()}),this.started=!0,[2]}})})},n.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},n.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},n.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(e=!0)}),e},n.prototype.addPendingMutation=function(t){this.zs(t,"pending")},n.prototype.updateMutationState=function(t,e,r){this.zs(t,e,r),this.Hs(t)},n.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(_O(this.persistenceKey,t));if(r){var i=vO.Vs(t,r);i&&(e=i.state)}}return this.Js.Ds(t),this.Qs(),e},n.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},n.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},n.prototype.clearQueryState=function(t){this.removeItem(_O(this.persistenceKey,t))},n.prototype.updateQueryState=function(t,e,r){this.Ys(t,e,r)},n.prototype.handleUserChange=function(t,e,r){var i=this;e.forEach(function(u){i.Hs(u)}),this.currentUser=t,r.forEach(function(u){i.addPendingMutation(u)})},n.prototype.setOnlineState=function(t){this.Xs(t)},n.prototype.notifyBundleLoaded=function(){this.Zs()},n.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},n.prototype.getItem=function(t){var e=this.storage.getItem(t);return ht("SharedClientState","READ",t,e),e},n.prototype.setItem=function(t,e){ht("SharedClientState","SET",t,e),this.storage.setItem(t,e)},n.prototype.removeItem=function(t){ht("SharedClientState","REMOVE",t),this.storage.removeItem(t)},n.prototype.ks=function(t){var e=this,r=t;if(r.storageArea===this.storage){if(ht("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void No("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,F.__awaiter)(e,void 0,void 0,function(){var i,u,h,_,b,D;return(0,F.__generator)(this,function(M){if(this.started){if(null!==r.key)if(this.Ls.test(r.key)){if(null==r.newValue)return i=this.ti(r.key),[2,this.ei(i,null)];if(u=this.ni(r.key,r.newValue))return[2,this.ei(u.clientId,u)]}else if(this.Bs.test(r.key)){if(null!==r.newValue&&(h=this.si(r.key,r.newValue)))return[2,this.ii(h)]}else if(this.qs.test(r.key)){if(null!==r.newValue&&(_=this.ri(r.key,r.newValue)))return[2,this.oi(_)]}else if(r.key===this.Us){if(null!==r.newValue&&(b=this.js(r.newValue)))return[2,this.Ws(b)]}else if(r.key===this.Ms)(D=function(x){var L=lc.o;if(null!=x)try{var z=JSON.parse(x);an("number"==typeof z),L=z}catch(W){No("SharedClientState","Failed to read sequence number from WebStorage",W)}return L}(r.newValue))!==lc.o&&this.sequenceNumberHandler(D);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(r);return[2]})})})}},Object.defineProperty(n.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),n.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},n.prototype.zs=function(t,e,r){var i=new eU(this.currentUser,t,e,r),u=J3(this.persistenceKey,this.currentUser,t);this.setItem(u,i.Ss())},n.prototype.Hs=function(t){var e=J3(this.persistenceKey,this.currentUser,t);this.removeItem(e)},n.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},n.prototype.Ys=function(t,e,r){var i=_O(this.persistenceKey,t),u=new vO(t,e,r);this.setItem(i,u.Ss())},n.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},n.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},n.prototype.ni=function(t,e){var r=this.ti(t);return tU.Vs(r,e)},n.prototype.si=function(t,e){var r=this.Bs.exec(t),i=Number(r[1]);return eU.Vs(new ra(void 0!==r[2]?r[2]:null),i,e)},n.prototype.ri=function(t,e){var r=this.qs.exec(t),i=Number(r[1]);return vO.Vs(i,e)},n.prototype.js=function(t){return tz.Vs(t)},n.prototype.ii=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(ht("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},n.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},n.prototype.ei=function(t,e){var r=this,i=e?this.Fs.insert(t,e):this.Fs.remove(t),u=this.Gs(this.Fs),h=this.Gs(i),_=[],b=[];return h.forEach(function(D){u.has(D)||_.push(D)}),u.forEach(function(D){h.has(D)||b.push(D)}),this.syncEngine.hi(_,b).then(function(){r.Fs=i})},n.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},n.prototype.Gs=function(t){var e=cA();return t.forEach(function(r,i){e=e.unionWith(i.activeTargetIds)}),e},n}(),nU=function(){function n(){this.li=new yO,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return n.prototype.addPendingMutation=function(t){},n.prototype.updateMutationState=function(t,e,r){},n.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},n.prototype.updateQueryState=function(t,e,r){this.fi[t]=e},n.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},n.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},n.prototype.clearQueryState=function(t){delete this.fi[t]},n.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},n.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},n.prototype.start=function(){return this.li=new yO,Promise.resolve()},n.prototype.handleUserChange=function(t,e,r){},n.prototype.setOnlineState=function(t){},n.prototype.shutdown=function(){},n.prototype.writeSequenceNumber=function(t){},n.prototype.notifyBundleLoaded=function(){},n}(),nz=function(){function n(){}return n.prototype.di=function(t){},n.prototype.shutdown=function(){},n}(),rU=function(){function n(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return n.prototype.di=function(t){this.gi.push(t)},n.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},n.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},n.prototype._i=function(){ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},n.prototype.yi=function(){ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},n.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},n}(),rz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},iz=function(){function n(t){this.Ei=t.Ei,this.Ti=t.Ti}return n.prototype.Ii=function(t){this.Ai=t},n.prototype.Ri=function(t){this.bi=t},n.prototype.onMessage=function(t){this.vi=t},n.prototype.close=function(){this.Ti()},n.prototype.send=function(t){this.Ei(t)},n.prototype.Pi=function(){this.Ai()},n.prototype.Vi=function(t){this.bi(t)},n.prototype.Si=function(t){this.vi(t)},n}(),oz=function(n){function t(e){var r=this;return(r=n.call(this,e)||this).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,F.__extends)(t,n),t.prototype.Fi=function(e,r,i,u){return new Promise(function(h,_){var b=new yB;b.listenOnce(mB.COMPLETE,function(){try{switch(b.getLastErrorCode()){case ZI.NO_ERROR:var M=b.getResponseJson();ht("Connection","XHR received:",JSON.stringify(M)),h(M);break;case ZI.TIMEOUT:ht("Connection",'RPC "'+e+'" timed out'),_(new it(ke.DEADLINE_EXCEEDED,"Request time out"));break;case ZI.HTTP_ERROR:var x=b.getStatus();if(ht("Connection",'RPC "'+e+'" failed with status:',x,"response text:",b.getResponseText()),x>0){var L=b.getResponseJson().error;if(L&&L.status&&L.message){var z=(ne=L.status.toLowerCase().replace(/_/g,"-"),Object.values(ke).indexOf(ne)>=0?ne:ke.UNKNOWN);_(new it(z,L.message))}else _(new it(ke.UNKNOWN,"Server responded with status "+b.getStatus()))}else _(new it(ke.UNAVAILABLE,"Connection failed."));break;default:Ft()}}finally{ht("Connection",'RPC "'+e+'" completed.')}var ne});var D=JSON.stringify(u);b.send(r,"POST",D,i,15)})},t.prototype.Oi=function(e,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=new QI,h=PI(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new vB({})),this.ki(_.initMessageHeaders,r),(0,At.isMobileCordova)()||(0,At.isReactNative)()||(0,At.isElectron)()||(0,At.isIE)()||(0,At.isUWP)()||(0,At.isBrowserExtension)()||(_.httpHeadersOverwriteParam="$httpHeaders");var b=i.join("");ht("Connection","Creating WebChannel: "+b,_);var D=u.createWebChannel(b,_),M=!1,x=!1,L=new iz({Ei:function(W){x?ht("Connection","Not sending because WebChannel is closed:",W):(M||(ht("Connection","Opening WebChannel transport."),D.open(),M=!0),ht("Connection","WebChannel sending:",W),D.send(W))},Ti:function(){return D.close()}}),z=function(W,ne,fe){W.listen(ne,function(Se){try{fe(Se)}catch(xe){setTimeout(function(){throw xe},0)}})};return z(D,xD.EventType.OPEN,function(){x||ht("Connection","WebChannel transport opened.")}),z(D,xD.EventType.CLOSE,function(){x||(x=!0,ht("Connection","WebChannel transport closed"),L.Vi())}),z(D,xD.EventType.ERROR,function(W){x||(x=!0,OD("Connection","WebChannel transport errored:",W),L.Vi(new it(ke.UNAVAILABLE,"The operation could not be completed")))}),z(D,xD.EventType.MESSAGE,function(W){var ne;if(!x){var fe=W.data[0];an(!!fe);var xe=fe.error||(null===(ne=fe[0])||void 0===ne?void 0:ne.error);if(xe){ht("Connection","WebChannel received error:",xe);var qe=xe.status,ct=function(Bt){var wn=xo[Bt];if(void 0!==wn)return JB(wn)}(qe),ut=xe.message;void 0===ct&&(ct=ke.INTERNAL,ut="Unknown error status: "+qe+" with message "+xe.message),x=!0,L.Vi(new it(ct,ut)),D.close()}else ht("Connection","WebChannel received:",fe),L.Si(fe)}}),z(h,_B.STAT_EVENT,function(W){W.stat===Gx_PROXY?ht("Connection","Detected buffering proxy"):W.stat===Gx_NOPROXY&&ht("Connection","Detected no buffering proxy")}),setTimeout(function(){L.Pi()},0),L},t}(function(){function n(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return n.prototype.Ni=function(t,e,r,i){var u=this.xi(t,e);ht("RestConnection","Sending: ",u,r);var h={};return this.ki(h,i),this.Fi(t,u,h,r).then(function(_){return ht("RestConnection","Received: ",_),_},function(_){throw OD("RestConnection",t+" failed with error: ",_,"url: ",u,"request:",r),_})},n.prototype.$i=function(t,e,r,i){return this.Ni(t,e,r,i)},n.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var r in e.authHeaders)e.authHeaders.hasOwnProperty(r)&&(t[r]=e.authHeaders[r])},n.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+rz[t]},n}());function iU(){return"undefined"!=typeof window?window:null}function bA(){return"undefined"!=typeof document?document:null}function ZD(n){return new c5(n,!0)}var wO=function(){function n(t,e,r,i,u){void 0===r&&(r=1e3),void 0===i&&(i=1.5),void 0===u&&(u=6e4),this.Se=t,this.timerId=e,this.Mi=r,this.Li=i,this.Bi=u,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return n.prototype.reset=function(){this.qi=0},n.prototype.Qi=function(){this.qi=this.Bi},n.prototype.ji=function(t){var e=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),u=Math.max(0,r-i);u>0&&ht("ExponentialBackoff","Backing off for "+u+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,u,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},n.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},n.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},n.prototype.Wi=function(){return(Math.random()-.5)*this.qi},n}(),oU=function(){function n(t,e,r,i,u,h){this.Se=t,this.zi=r,this.Hi=i,this.Ji=u,this.listener=h,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new wO(t,e)}return n.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},n.prototype.er=function(){return 2===this.state},n.prototype.start=function(){3!==this.state?this.auth():this.nr()},n.prototype.stop=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.sr=function(){this.state=0,this.Zi.reset()},n.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},n.prototype.cr=function(t){this.ur(),this.stream.send(t)},n.prototype.rr=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},n.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},n.prototype.close=function(t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ke.RESOURCE_EXHAUSTED?(No(e.toString()),No("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===ke.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return r.sent(),[2]}})})},n.prototype.ar=function(){},n.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){e(function(){var u=new it(ke.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(u)})})},n.prototype.lr=function(t){var e=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return e.dr(i)})}),this.stream.onMessage(function(i){r(function(){return e.onMessage(i)})})},n.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,F.__awaiter)(t,void 0,void 0,function(){return(0,F.__generator)(this,function(e){return this.state=0,this.start(),[2]})})})},n.prototype.dr=function(t){return ht("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},n.prototype.hr=function(t){var e=this;return function(r){e.Se.enqueueAndForget(function(){return e.Yi===t?r():(ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},n}(),sz=function(n){function t(e,r,i,u,h){var _=this;return(_=n.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",r,i,h)||this).R=u,_}return(0,F.__extends)(t,n),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var r=function(u,h){var _,fe;if("targetChange"in h){var b="NO_CHANGE"===(fe=h.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===fe?1:"REMOVE"===fe?2:"CURRENT"===fe?3:"RESET"===fe?4:Ft(),D=h.targetChange.targetIds||[],M=function(fe,Se){return fe.I?(an(void 0===Se||"string"==typeof Se),_u.fromBase64String(Se||"")):(an(void 0===Se||Se instanceof Uint8Array),_u.fromUint8Array(Se||new Uint8Array))}(u,h.targetChange.resumeToken),x=(L=h.targetChange.cause)&&function(fe){var Se=void 0===fe.code?ke.UNKNOWN:JB(fe.code);return new it(Se,fe.message||"")}(L);_=new r3(b,D,M,x||null)}else if("documentChange"in h){D=Rf(u,(b=h.documentChange).document.name),M=Cs(b.document.updateTime);var L=new cc({mapValue:{fields:b.document.fields}}),z=(x=ta.newFoundDocument(D,M,L),b.targetIds||[]);_=new dA(z,b.removedTargetIds||[],x.key,x)}else if("documentDelete"in h)D=Rf(u,(b=h.documentDelete).document),M=b.readTime?Cs(b.readTime):Sn.min(),L=ta.newNoDocument(D,M),_=new dA([],x=b.removedTargetIds||[],L.key,L);else if("documentRemove"in h)D=Rf(u,(b=h.documentRemove).document),_=new dA([],M=b.removedTargetIds||[],D,null);else{if(!("filter"in h))return Ft();var ne=h.filter;D=new e5(b=ne.count||0),_=new n3(M=ne.targetId,D)}return _}(this.R,e),i=function(u){if(!("targetChange"in u))return Sn.min();var h=u.targetChange;return h.targetIds&&h.targetIds.length?Sn.min():h.readTime?Cs(h.readTime):Sn.min()}(e);return this.listener._r(r,i)},t.prototype.mr=function(e){var u,h,_,b,r={};r.database=WD(this.R),r.addTarget=(u=this.R,(_=nA(b=(h=e).target)?{documents:g3(u,b)}:{query:m3(u,b)}).targetId=h.targetId,h.resumeToken.approximateByteSize()>0?_.resumeToken=u3(u,h.resumeToken):h.snapshotVersion.compareTo(Sn.min())>0&&(_.readTime=$D(u,h.snapshotVersion.toTimestamp())),_);var i=function(u,h){var _=function(b,D){switch(D){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ft()}}(0,h.purpose);return null==_?null:{"goog-listen-tags":_}}(0,e);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(e){var r={};r.database=WD(this.R),r.removeTarget=e,this.cr(r)},t}(oU),az=function(n){function t(e,r,i,u,h){var _=this;return(_=n.call(this,e,"write_stream_connection_backoff","write_stream_idle",r,i,h)||this).R=u,_.gr=!1,_}return(0,F.__extends)(t,n),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,n.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(an(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var r=(h=e.commitTime,(u=e.writeResults)&&u.length>0?(an(void 0!==h),u.map(function(_){return D=h,(M=Cs((b=_).updateTime?b.updateTime:D)).isEqual(Sn.min())&&(M=Cs(D)),new Z8(M,b.transformResults||[]);var b,D,M})):[]),i=Cs(e.commitTime);return this.listener.Tr(i,r)}var u,h;return an(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=WD(this.R),this.cr(e)},t.prototype.Er=function(e){var r=this,i={streamToken:this.lastStreamToken,writes:e.map(function(u){return hA(r.R,u)})};this.cr(i)},t}(oU),uz=function(n){function t(e,r,i){var u=this;return(u=n.call(this)||this).credentials=e,u.Hi=r,u.R=i,u.Rr=!1,u}return(0,F.__extends)(t,n),t.prototype.br=function(){if(this.Rr)throw new it(ke.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,r,i){var u=this;return this.br(),this.credentials.getToken().then(function(h){return u.Hi.Ni(e,r,i,h)}).catch(function(h){throw"FirebaseError"===h.name?(h.code===ke.UNAUTHENTICATED&&u.credentials.invalidateToken(),h):new it(ke.UNKNOWN,h.toString())})},t.prototype.$i=function(e,r,i){var u=this;return this.br(),this.credentials.getToken().then(function(h){return u.Hi.$i(e,r,i,h)}).catch(function(h){throw"FirebaseError"===h.name?(h.code===ke.UNAUTHENTICATED&&u.credentials.invalidateToken(),h):new it(ke.UNKNOWN,h.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),lz=function(){function n(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return n.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},n.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},n.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},n.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},n.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(No(e),this.Vr=!1):ht("OnlineStateTracker",e)},n.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},n}(),cz=function(n,t,e,r,i){var u=this;this.localStore=n,this.datastore=t,this.asyncQueue=e,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(h){e.enqueueAndForget(function(){return(0,F.__awaiter)(u,void 0,void 0,function(){return(0,F.__generator)(this,function(_){switch(_.label){case 0:return x_(this)?(ht("RemoteStore","Restarting streams for network reachability change."),[4,function(b){return(0,F.__awaiter)(this,void 0,void 0,function(){var D;return(0,F.__generator)(this,function(M){switch(M.label){case 0:return(D=mt(b)).Or.add(4),[4,nC(D)];case 1:return M.sent(),D.Br.set("Unknown"),D.Or.delete(4),[4,XD(D)];case 2:return M.sent(),[2]}})})}(this)]):[3,2];case 1:_.sent(),_.label=2;case 2:return[2]}})})})}),this.Br=new lz(e,r)};function XD(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:if(!x_(n))return[3,4];t=0,e=n.Mr,r.label=1;case 1:return t<e.length?[4,(0,e[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function nC(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:t=0,e=n.Mr,r.label=1;case 1:return t<e.length?[4,(0,e[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function wA(n,t){var e=mt(n);e.$r.has(t.targetId)||(e.$r.set(t.targetId,t),DO(e)?EO(e):iC(e).er()&&CO(e,t))}function JD(n,t){var e=mt(n),r=iC(e);e.$r.delete(t),r.er()&&sU(e,t),0===e.$r.size&&(r.er()?r.ir():x_(e)&&e.Br.set("Unknown"))}function CO(n,t){n.qr.U(t.targetId),iC(n).mr(t)}function sU(n,t){n.qr.U(t),iC(n).yr(t)}function EO(n){n.qr=new a5({getRemoteKeysForTarget:function(t){return n.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return n.$r.get(t)||null}}),iC(n).start(),n.Br.Sr()}function DO(n){return x_(n)&&!iC(n).tr()&&n.$r.size>0}function x_(n){return 0===mt(n).Or.size}function aU(n){n.qr=void 0}function dz(n){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){return n.$r.forEach(function(e,r){CO(n,e)}),[2]})})}function hz(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(e){return aU(n),DO(n)?(n.Br.Nr(t),EO(n)):n.Br.set("Unknown"),[2]})})}function fz(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:if(n.Br.set("Online"),!(t instanceof r3&&2===t.state&&t.cause))return[3,6];h.label=1;case 1:return h.trys.push([1,3,,5]),[4,function(_,b){return(0,F.__awaiter)(this,void 0,void 0,function(){var D,M,x,L;return(0,F.__generator)(this,function(z){switch(z.label){case 0:D=b.cause,M=0,x=b.targetIds,z.label=1;case 1:return M<x.length?_.$r.has(L=x[M])?[4,_.remoteSyncer.rejectListen(L,D)]:[3,3]:[3,5];case 2:z.sent(),_.$r.delete(L),_.qr.removeTarget(L),z.label=3;case 3:z.label=4;case 4:return M++,[3,1];case 5:return[2]}})})}(n,t)];case 2:return h.sent(),[3,5];case 3:return r=h.sent(),ht("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,CA(n,r)];case 4:return h.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof dA?n.qr.X(t):t instanceof n3?n.qr.rt(t):n.qr.et(t),e.isEqual(Sn.min()))return[3,13];h.label=7;case 7:return h.trys.push([7,11,,13]),[4,Y3(n.localStore)];case 8:return i=h.sent(),e.compareTo(i)>=0?[4,(_=n,b=e,D=_.qr.ut(b),D.targetChanges.forEach(function(M,x){if(M.resumeToken.approximateByteSize()>0){var L=_.$r.get(x);L&&_.$r.set(x,L.withResumeToken(M.resumeToken,b))}}),D.targetMismatches.forEach(function(M){var x=_.$r.get(M);if(x){_.$r.set(M,x.withResumeToken(_u.EMPTY_BYTE_STRING,x.snapshotVersion)),sU(_,M);var L=new fA(x.target,M,1,x.sequenceNumber);CO(_,L)}}),_.remoteSyncer.applyRemoteEvent(D))]:[3,10];case 9:h.sent(),h.label=10;case 10:return[3,13];case 11:return ht("RemoteStore","Failed to raise snapshot:",u=h.sent()),[4,CA(n,u)];case 12:return h.sent(),[3,13];case 13:return[2]}var _,b,D})})}function CA(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,F.__generator)(this,function(i){switch(i.label){case 0:if(!Yy(t))throw t;return n.Or.add(1),[4,nC(n)];case 1:return i.sent(),n.Br.set("Offline"),e||(e=function(){return Y3(n.localStore)}),n.asyncQueue.enqueueRetryable(function(){return(0,F.__awaiter)(r,void 0,void 0,function(){return(0,F.__generator)(this,function(u){switch(u.label){case 0:return ht("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return u.sent(),n.Or.delete(1),[4,XD(n)];case 2:return u.sent(),[2]}})})}),[2]}})})}function uU(n,t){return t().catch(function(e){return CA(n,e,t)})}function rC(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:t=mt(n),e=O_(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,h.label=1;case 1:if(!(x_(_=t)&&_.Fr.length<10))return[3,7];h.label=2;case 2:return h.trys.push([2,4,,6]),[4,G5(t.localStore,r)];case 3:return null===(i=h.sent())?(0===t.Fr.length&&e.ir(),[3,7]):(r=i.batchId,function(_,b){_.Fr.push(b);var D=O_(_);D.er()&&D.pr&&D.Er(b.mutations)}(t,i),[3,6]);case 4:return u=h.sent(),[4,CA(t,u)];case 5:return h.sent(),[3,6];case 6:return[3,1];case 7:return lU(t)&&cU(t),[2]}var _})})}function lU(n){return x_(n)&&!O_(n).tr()&&n.Fr.length>0}function cU(n){O_(n).start()}function pz(n){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){return O_(n).Ar(),[2]})})}function gz(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r;return(0,F.__generator)(this,function(u){for(t=O_(n),e=0,r=n.Fr;e<r.length;e++)t.Er(r[e].mutations);return[2]})})}function mz(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return r=n.Fr.shift(),i=D5.from(r,t,e),[4,uU(n,function(){return n.remoteSyncer.applySuccessfulWrite(i)})];case 1:return u.sent(),[4,rC(n)];case 2:return u.sent(),[2]}})})}function _z(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(e){switch(e.label){case 0:return t&&O_(n).pr?[4,function(r,i){return(0,F.__awaiter)(this,void 0,void 0,function(){var u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return XB(h=i.code)&&h!==ke.ABORTED?(u=r.Fr.shift(),O_(r).sr(),[4,uU(r,function(){return r.remoteSyncer.rejectFailedWrite(u.batchId,i)})]):[3,3];case 1:return _.sent(),[4,rC(r)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}(n,t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return lU(n)&&cU(n),[2]}})})}function TO(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return e=mt(n),t?(e.Or.delete(2),[4,XD(e)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(e.Or.add(2),[4,nC(e)]);case 3:r.sent(),e.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function iC(n){var e,r,i,u,t=this;return n.Ur||(n.Ur=(e=n.datastore,r=n.asyncQueue,i={Ii:dz.bind(null,n),Ri:hz.bind(null,n),_r:fz.bind(null,n)},(u=mt(e)).br(),new sz(r,u.Hi,u.credentials,u.R,i)),n.Mr.push(function(e){return(0,F.__awaiter)(t,void 0,void 0,function(){return(0,F.__generator)(this,function(r){switch(r.label){case 0:return e?(n.Ur.sr(),DO(n)?EO(n):n.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Ur.stop()];case 2:r.sent(),aU(n),r.label=3;case 3:return[2]}})})})),n.Ur}function O_(n){var e,r,i,u,t=this;return n.Kr||(n.Kr=(e=n.datastore,r=n.asyncQueue,i={Ii:pz.bind(null,n),Ri:_z.bind(null,n),Ir:gz.bind(null,n),Tr:mz.bind(null,n)},(u=mt(e)).br(),new az(r,u.Hi,u.credentials,u.R,i)),n.Mr.push(function(e){return(0,F.__awaiter)(t,void 0,void 0,function(){return(0,F.__generator)(this,function(r){switch(r.label){case 0:return e?(n.Kr.sr(),[4,rC(n)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,n.Kr.stop()];case 3:r.sent(),n.Fr.length>0&&(ht("RemoteStore","Stopping write stream with "+n.Fr.length+" pending writes"),n.Fr=[]),r.label=4;case 4:return[2]}})})})),n.Kr}var vz=function(){function n(t,e,r,i,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(h){})}return n.createAndSchedule=function(t,e,r,i,u){var h=new n(t,e,Date.now()+r,i,u);return h.start(r),h},n.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},n.prototype.skipDelay=function(){return this.handleDelayElapsed()},n.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new it(ke.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},n.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},n.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},n}();function oC(n,t){if(No("AsyncQueue",t+": "+n),Yy(n))return new it(ke.UNAVAILABLE,t+": "+n);throw n}var dU=function(){function n(t){this.comparator=t?function(e,r){return t(e,r)||Vt.comparator(e.key,r.key)}:function(e,r){return Vt.comparator(e.key,r.key)},this.keyedMap=rO(),this.sortedSet=new Na(this.comparator)}return n.emptySet=function(t){return new n(t.comparator)},n.prototype.has=function(t){return null!=this.keyedMap.get(t)},n.prototype.get=function(t){return this.keyedMap.get(t)},n.prototype.first=function(){return this.sortedSet.minKey()},n.prototype.last=function(){return this.sortedSet.maxKey()},n.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},n.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(n.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),n.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,r){return t(e),!1})},n.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},n.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},n.prototype.isEqual=function(t){if(!(t instanceof n)||this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();e.hasNext();){var i=e.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0},n.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},n.prototype.copy=function(t,e){var r=new n;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r},n}(),hU=function(){function n(){this.Qr=new Na(Vt.comparator)}return n.prototype.track=function(t){var e=t.doc.key,r=this.Qr.get(e);r?0!==t.type&&3===r.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==r.type?this.Qr=this.Qr.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.Qr=this.Qr.remove(e):1===t.type&&2===r.type?this.Qr=this.Qr.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Ft():this.Qr=this.Qr.insert(e,t)},n.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,r){t.push(r)}),t},n}(),EA=function(){function n(t,e,r,i,u,h,_,b){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=_,this.excludesMetadataChanges=b}return n.fromInitialDocuments=function(t,e,r,i){var u=[];return e.forEach(function(h){u.push({type:0,doc:h})}),new n(t,e,dU.emptySet(e),u,r,i,!0,!1)},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&UD(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0},n}(),yz=function(){this.Wr=void 0,this.listeners=[]},bz=function(){this.queries=new Jw(function(n){return LB(n)},UD),this.onlineState="Unknown",this.Gr=new Set};function SO(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,h,_,b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:if(e=mt(n),i=!1,(u=e.queries.get(r=t.query))||(i=!0,u=new yz),!i)return[3,4];D.label=1;case 1:return D.trys.push([1,3,,4]),h=u,[4,e.onListen(r)];case 2:return h.Wr=D.sent(),[3,4];case 3:return _=D.sent(),b=oC(_,"Initialization of query '"+eO(t.query)+"' failed"),[2,void t.onError(b)];case 4:return e.queries.set(r,u),u.listeners.push(t),t.zr(e.onlineState),u.Wr&&t.Hr(u.Wr)&&AO(e),[2]}})})}function IO(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,h;return(0,F.__generator)(this,function(_){return e=mt(n),i=!1,(u=e.queries.get(r=t.query))&&(h=u.listeners.indexOf(t))>=0&&(u.listeners.splice(h,1),i=0===u.listeners.length),i?[2,(e.queries.delete(r),e.onUnlisten(r))]:[2]})})}function wz(n,t){for(var e=mt(n),r=!1,i=0,u=t;i<u.length;i++){var h=u[i],b=e.queries.get(h.query);if(b){for(var D=0,M=b.listeners;D<M.length;D++)M[D].Hr(h)&&(r=!0);b.Wr=h}}r&&AO(e)}function Cz(n,t,e){var r=mt(n),i=r.queries.get(t);if(i)for(var u=0,h=i.listeners;u<h.length;u++)h[u].onError(e);r.queries.delete(t)}function AO(n){n.Gr.forEach(function(t){t.next()})}var MO=function(){function n(t,e,r){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return n.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],r=0,i=t.docChanges;r<i.length;r++){var u=i[r];3!==u.type&&e.push(u)}t=new EA(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var h=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),h=!0):this.eo(t,this.onlineState)&&(this.no(t),h=!0),this.Xr=t,h},n.prototype.onError=function(t){this.Jr.error(t)},n.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},n.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},n.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},n.prototype.no=function(t){t=EA.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},n}(),Ez=function(){function n(t,e){this.payload=t,this.byteLength=e}return n.prototype.io=function(){return"metadata"in this.payload},n}(),fU=function(){function n(t){this.R=t}return n.prototype.qn=function(t){return Rf(this.R,t)},n.prototype.Un=function(t){return t.metadata.exists?f3(this.R,t.document,!1):ta.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},n.prototype.Kn=function(t){return Cs(t)},n}(),Dz=function(){function n(t,e,r){this.ro=t,this.localStore=e,this.R=r,this.queries=[],this.documents=[],this.progress=pU(t)}return n.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},n.prototype.co=function(t){for(var e=new Map,r=new fU(this.R),i=0,u=t;i<u.length;i++){var h=u[i];if(h.metadata.queries)for(var _=r.qn(h.metadata.name),b=0,D=h.metadata.queries;b<D.length;b++){var M=D[b],x=(e.get(M)||Sr()).add(_);e.set(M,x)}}return e},n.prototype.complete=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return[4,$5(this.localStore,new fU(this.R),this.documents,this.ro.id)];case 1:t=h.sent(),e=this.co(this.documents),r=0,i=this.queries,h.label=2;case 2:return r<i.length?[4,q5(this.localStore,u=i[r],e.get(u.name))]:[3,5];case 3:h.sent(),h.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new V5(Object.assign({},this.progress),t))]}})})},n}();function pU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var gU=function(n){this.key=n},mU=function(n){this.key=n},_U=function(){function n(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Sr(),this.mutatedKeys=Sr(),this.lo=VB(t),this.fo=new dU(this.lo)}return Object.defineProperty(n.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),n.prototype._o=function(t,e){var r=this,i=e?e.mo:new hU,u=e?e.fo:this.fo,h=e?e.mutatedKeys:this.mutatedKeys,_=u,b=!1,D=iA(this.query)&&u.size===this.query.limit?u.last():null,M=oA(this.query)&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal(function(L,z){var W=u.get(L),ne=jD(r.query,z)?z:null,fe=!!W&&r.mutatedKeys.has(W.key),Se=!!ne&&(ne.hasLocalMutations||r.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations),xe=!1;W&&ne?W.data.isEqual(ne.data)?fe!==Se&&(i.track({type:3,doc:ne}),xe=!0):r.yo(W,ne)||(i.track({type:2,doc:ne}),xe=!0,(D&&r.lo(ne,D)>0||M&&r.lo(ne,M)<0)&&(b=!0)):!W&&ne?(i.track({type:0,doc:ne}),xe=!0):W&&!ne&&(i.track({type:1,doc:W}),xe=!0,(D||M)&&(b=!0)),xe&&(ne?(_=_.add(ne),h=Se?h.add(L):h.delete(L)):(_=_.delete(L),h=h.delete(L)))}),iA(this.query)||oA(this.query))for(;_.size>this.query.limit;){var x=iA(this.query)?_.last():_.first();_=_.delete(x.key),h=h.delete(x.key),i.track({type:1,doc:x})}return{fo:_,mo:i,Nn:b,mutatedKeys:h}},n.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},n.prototype.applyChanges=function(t,e,r){var i=this,u=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var h=t.mo.jr();h.sort(function(M,x){return z=x.type,(W=function(ne){switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft()}})(M.type)-W(z)||i.lo(M.doc,x.doc);var z,W}),this.po(r);var _=e?this.Eo():[],b=0===this.ho.size&&this.current?1:0,D=b!==this.ao;return this.ao=b,0!==h.length||D?{snapshot:new EA(this.query,t.fo,u,h,t.mutatedKeys,0===b,D,!1),To:_}:{To:_}},n.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hU,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},n.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},n.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(r){return e.uo=e.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return e.uo=e.uo.delete(r)}),this.current=t.current)},n.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Sr(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return e.forEach(function(i){t.ho.has(i)||r.push(new mU(i))}),this.ho.forEach(function(i){e.has(i)||r.push(new gU(i))}),r},n.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Sr();var e=this._o(t.documents);return this.applyChanges(e,!0)},n.prototype.Ro=function(){return EA.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},n}(),Tz=function(n,t,e){this.query=n,this.targetId=t,this.view=e},Sz=function(n){this.key=n,this.bo=!1},Iz=function(){function n(t,e,r,i,u,h){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.vo={},this.Po=new Jw(function(_){return LB(_)},UD),this.Vo=new Map,this.So=new Set,this.Do=new Na(Vt.comparator),this.Co=new Map,this.No=new mO,this.xo={},this.ko=new Map,this.Fo=gA.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(n.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),n}();function Az(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,i,u,h,_;return(0,F.__generator)(this,function(b){switch(b.label){case 0:return e=PO(n),(u=e.Po.get(t))?(e.sharedClientState.addLocalQueryTarget(u.targetId),i=u.view.Ro(),[3,4]):[3,1];case 1:return[4,eC(e.localStore,pd(t))];case 2:return h=b.sent(),_=e.sharedClientState.addLocalQueryTarget(h.targetId),[4,RO(e,t,h.targetId,"current"===_)];case 3:i=b.sent(),e.isPrimaryClient&&wA(e.remoteStore,h),b.label=4;case 4:return[2,i]}})})}function RO(n,t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h,_,b,D;return(0,F.__generator)(this,function(M){switch(M.label){case 0:return n.Oo=function(x,L,z){return function(W,ne,fe,Se){return(0,F.__awaiter)(this,void 0,void 0,function(){var xe,qe,ct;return(0,F.__generator)(this,function(ut){switch(ut.label){case 0:return(xe=ne.view._o(fe)).Nn?[4,yA(W.localStore,ne.query,!1).then(function(Bt){return ne.view._o(Bt.documents,xe)})]:[3,2];case 1:xe=ut.sent(),ut.label=2;case 2:return qe=Se&&Se.targetChanges.get(ne.targetId),ct=ne.view.applyChanges(xe,W.isPrimaryClient,qe),[2,(xO(W,ne.targetId,ct.To),ct.snapshot)]}})})}(n,x,L,z)},[4,yA(n.localStore,t,!0)];case 1:return i=M.sent(),u=new _U(t,i.Bn),h=u._o(i.documents),_=oO.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),b=u.applyChanges(h,n.isPrimaryClient,_),xO(n,e,b.To),D=new Tz(t,e,u),[2,(n.Po.set(t,D),n.Vo.has(e)?n.Vo.get(e).push(t):n.Vo.set(e,[t]),b.snapshot)]}})})}function Mz(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return e=mt(n),r=e.Po.get(t),(i=e.Vo.get(r.targetId)).length>1?[2,(e.Vo.set(r.targetId,i.filter(function(h){return!UD(h,t)})),void e.Po.delete(t))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,tC(e.localStore,r.targetId,!1).then(function(){e.sharedClientState.clearQueryState(r.targetId),JD(e.remoteStore,r.targetId),sC(e,r.targetId)}).catch(Qy)]):[3,3];case 1:u.sent(),u.label=2;case 2:return[3,5];case 3:return sC(e,r.targetId),[4,tC(e.localStore,r.targetId,!0)];case 4:u.sent(),u.label=5;case 5:return[2]}})})}function Rz(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:r=FO(n),_.label=1;case 1:return _.trys.push([1,5,,6]),[4,(b=r.localStore,D=t,x=mt(b),L=cl.now(),z=D.reduce(function(W,ne){return W.add(ne.key)},Sr()),x.persistence.runTransaction("Locally write mutations","readwrite",function(W){return x.Mn.pn(W,z).next(function(ne){M=ne;for(var fe=[],Se=0,xe=D;Se<xe.length;Se++){var qe=xe[Se],ct=J8(qe,M.get(qe.key));null!=ct&&fe.push(new I_(qe.key,ct,RB(ct.value.mapValue),Ra.exists(!0)))}return x._n.addMutationBatch(W,L,fe,D)})}).then(function(W){return W.applyToLocalDocumentSet(M),{batchId:W.batchId,changes:M}}))];case 2:return i=_.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(b,D,M){var x=b.xo[b.currentUser.toKey()];x||(x=new Na(Bn)),x=x.insert(D,M),b.xo[b.currentUser.toKey()]=x}(r,i.batchId,e),[4,mg(r,i.changes)];case 3:return _.sent(),[4,rC(r.remoteStore)];case 4:return _.sent(),[3,6];case 5:return u=_.sent(),h=oC(u,"Failed to persist write"),e.reject(h),[3,6];case 6:return[2]}var b,D,M,x,L,z})})}function vU(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:e=mt(n),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,H5(e.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(u,h){var _=e.Co.get(h);_&&(an(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?_.bo=!0:u.modifiedDocuments.size>0?an(_.bo):u.removedDocuments.size>0&&(an(_.bo),_.bo=!1))}),[4,mg(e,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Qy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function yU(n,t,e){var r=mt(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){var i=[];r.Po.forEach(function(u,h){var _=h.view.zr(t);_.snapshot&&i.push(_.snapshot)}),function(u,h){var _=mt(u);_.onlineState=h;var b=!1;_.queries.forEach(function(D,M){for(var x=0,L=M.listeners;x<L.length;x++)L[x].zr(h)&&(b=!0)}),b&&AO(_)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Nz(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h,_,b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return(r=mt(n)).sharedClientState.updateQueryState(t,"rejected",e),i=r.Co.get(t),(u=i&&i.key)?(h=(h=new Na(Vt.comparator)).insert(u,ta.newNoDocument(u,Sn.min())),_=Sr().add(u),b=new iO(Sn.min(),new Map,new Zo(Bn),h,_),[4,vU(r,b)]):[3,2];case 1:return D.sent(),r.Do=r.Do.remove(u),r.Co.delete(t),OO(r),[3,4];case 2:return[4,tC(r.localStore,t,!1).then(function(){return sC(r,t,e)}).catch(Qy)];case 3:D.sent(),D.label=4;case 4:return[2]}})})}function kz(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:e=mt(n),r=t.batch.batchId,u.label=1;case 1:return u.trys.push([1,4,,6]),[4,j5(e.localStore,t)];case 2:return i=u.sent(),kO(e,r,null),NO(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),[4,mg(e,i)];case 3:return u.sent(),[3,6];case 4:return[4,Qy(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function xz(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:r=mt(n),u.label=1;case 1:return u.trys.push([1,4,,6]),[4,(h=r.localStore,_=t,b=mt(h),b.persistence.runTransaction("Reject batch","readwrite-primary",function(D){var M;return b._n.lookupMutationBatch(D,_).next(function(x){return an(null!==x),M=x.keys(),b._n.removeMutationBatch(D,x)}).next(function(){return b._n.performConsistencyCheck(D)}).next(function(){return b.Mn.pn(D,M)})}))];case 2:return i=u.sent(),kO(r,t,e),NO(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),[4,mg(r,i)];case 3:return u.sent(),[3,6];case 4:return[4,Qy(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}var h,_,b})})}function Oz(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:x_((e=mt(n)).remoteStore)||ht("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,(b=e.localStore,D=mt(b),D.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(M){return D._n.getHighestUnacknowledgedBatchId(M)}))];case 2:return-1===(r=_.sent())?[2,void t.resolve()]:((i=e.ko.get(r)||[]).push(t),e.ko.set(r,i),[3,4]);case 3:return u=_.sent(),h=oC(u,"Initialization of waitForPendingWrites() operation failed"),t.reject(h),[3,4];case 4:return[2]}var b,D})})}function NO(n,t){(n.ko.get(t)||[]).forEach(function(e){e.resolve()}),n.ko.delete(t)}function kO(n,t,e){var r=mt(n),i=r.xo[r.currentUser.toKey()];if(i){var u=i.get(t);u&&(e?u.reject(e):u.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function sC(n,t,e){void 0===e&&(e=null),n.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=n.Vo.get(t);r<i.length;r++){var u=i[r];n.Po.delete(u),e&&n.vo.Mo(u,e)}n.Vo.delete(t),n.isPrimaryClient&&n.No.Zn(t).forEach(function(h){n.No.containsKey(h)||bU(n,h)})}function bU(n,t){n.So.delete(t.path.canonicalString());var e=n.Do.get(t);null!==e&&(JD(n.remoteStore,e),n.Do=n.Do.remove(t),n.Co.delete(e),OO(n))}function xO(n,t,e){for(var r=0,i=e;r<i.length;r++){var u=i[r];u instanceof gU?(n.No.addReference(u.key,t),Pz(n,u)):u instanceof mU?(ht("SyncEngine","Document no longer in limbo: "+u.key),n.No.removeReference(u.key,t),n.No.containsKey(u.key)||bU(n,u.key)):Ft()}}function Pz(n,t){var e=t.key,r=e.path.canonicalString();n.Do.get(e)||n.So.has(r)||(ht("SyncEngine","New document in limbo: "+e),n.So.add(r),OO(n))}function OO(n){for(;n.So.size>0&&n.Do.size<n.maxConcurrentLimboResolutions;){var t=n.So.values().next().value;n.So.delete(t);var e=new Vt(lr.fromString(t)),r=n.Fo.next();n.Co.set(r,new Sz(e)),n.Do=n.Do.insert(e,r),wA(n.remoteStore,new fA(pd(Bw(e.path)),r,2,lc.o))}}function mg(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return r=mt(n),i=[],u=[],h=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(b,D){h.push(r.Oo(D,t,e).then(function(M){if(M){r.isPrimaryClient&&r.sharedClientState.updateQueryState(D.targetId,M.fromCache?"not-current":"current"),i.push(M);var x=B5.Pn(D.targetId,M);u.push(x)}}))}),[4,Promise.all(h)]);case 1:return _.sent(),r.vo._r(i),[4,function(b,D){return(0,F.__awaiter)(this,void 0,void 0,function(){var M,x,L,z,W,ne,fe,xe;return(0,F.__generator)(this,function(qe){switch(qe.label){case 0:M=mt(b),qe.label=1;case 1:return qe.trys.push([1,3,,4]),[4,M.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(ct){return lt.forEach(D,function(ut){return lt.forEach(ut.bn,function(Bt){return M.persistence.referenceDelegate.addReference(ct,ut.targetId,Bt)}).next(function(){return lt.forEach(ut.vn,function(Bt){return M.persistence.referenceDelegate.removeReference(ct,ut.targetId,Bt)})})})})];case 2:return qe.sent(),[3,4];case 3:if(!Yy(x=qe.sent()))throw x;return ht("LocalStore","Failed to update sequence numbers: "+x),[3,4];case 4:for(L=0,z=D;L<z.length;L++)ne=(W=z[L]).targetId,W.fromCache||(fe=M.kn.get(ne),xe=fe.withLastLimboFreeSnapshotVersion(fe.snapshotVersion),M.kn=M.kn.insert(ne,xe));return[2]}})})}(r.localStore,u)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}function Fz(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return(e=mt(n)).currentUser.isEqual(t)?[3,3]:(ht("SyncEngine","User change. New user:",t.toKey()),[4,W3(e.localStore,t)]);case 1:return r=i.sent(),e.currentUser=t,(u=e).ko.forEach(function(_){_.forEach(function(b){b.reject(new it(ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ko.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,mg(e,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var u})})}function Lz(n,t){var e=mt(n),r=e.Co.get(t);if(r&&r.bo)return Sr().add(r.key);var i=Sr(),u=e.Vo.get(t);if(!u)return i;for(var h=0,_=u;h<_.length;h++){var D=e.Po.get(_[h]);i=i.unionWith(D.view.wo)}return i}function Vz(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,yA((e=mt(n)).localStore,t.query,!0)];case 1:return r=u.sent(),i=t.view.Ao(r),[2,(e.isPrimaryClient&&xO(e,t.targetId,i.To),i)]}})})}function Bz(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){return[2,Z3((t=mt(n)).localStore).then(function(r){return mg(t,r)})]})})}function Uz(n,t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return[4,(_=(i=mt(n)).localStore,b=t,D=mt(_),M=mt(D._n),D.persistence.runTransaction("Lookup mutation documents","readonly",function(x){return M.jt(x,b).next(function(L){return L?D.Mn.pn(x,L):lt.resolve(null)})}))];case 1:return null===(u=h.sent())?[3,6]:"pending"!==e?[3,3]:[4,rC(i.remoteStore)];case 2:return h.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(kO(i,t,r||null),NO(i,t),function(_,b){mt(mt(_)._n).Gt(b)}(i.localStore,t)):Ft(),h.label=4;case 4:return[4,mg(i,u)];case 5:return h.sent(),[3,7];case 6:ht("SyncEngine","Cannot apply mutation batch with id: "+t),h.label=7;case 7:return[2]}var _,b,D,M})})}function jz(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,h,b,D;return(0,F.__generator)(this,function(M){switch(M.label){case 0:return PO(e=mt(n)),FO(e),!0!==t||!0===e.$o?[3,3]:(r=e.sharedClientState.getAllActiveQueryTargets(),[4,wU(e,r.toArray())]);case 1:return i=M.sent(),e.$o=!0,[4,TO(e.remoteStore,!0)];case 2:for(M.sent(),u=0,h=i;u<h.length;u++)wA(e.remoteStore,h[u]);return[3,7];case 3:return!1!==t||!1===e.$o?[3,7]:(b=[],D=Promise.resolve(),e.Vo.forEach(function(x,L){e.sharedClientState.isLocalQueryTarget(L)?b.push(L):D=D.then(function(){return sC(e,L),tC(e.localStore,L,!0)}),JD(e.remoteStore,L)}),[4,D]);case 4:return M.sent(),[4,wU(e,b)];case 5:return M.sent(),(L=mt(e)).Co.forEach(function(z,W){JD(L.remoteStore,W)}),L.No.ts(),L.Co=new Map,L.Do=new Na(Vt.comparator),e.$o=!1,[4,TO(e.remoteStore,!1)];case 6:M.sent(),M.label=7;case 7:return[2]}var L})})}function wU(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h,_,b,D,M,x,L,W,ne,fe;return(0,F.__generator)(this,function(Se){switch(Se.label){case 0:r=mt(n),i=[],u=[],h=0,_=t,Se.label=1;case 1:return h<_.length?(D=void 0,(M=r.Vo.get(b=_[h]))&&0!==M.length?[4,eC(r.localStore,pd(M[0]))]:[3,7]):[3,13];case 2:D=Se.sent(),x=0,L=M,Se.label=3;case 3:return x<L.length?(W=r.Po.get(L[x]),[4,Vz(r,W)]):[3,6];case 4:(ne=Se.sent()).snapshot&&u.push(ne.snapshot),Se.label=5;case 5:return x++,[3,3];case 6:return[3,11];case 7:return[4,Q3(r.localStore,b)];case 8:return fe=Se.sent(),[4,eC(r.localStore,fe)];case 9:return D=Se.sent(),[4,RO(r,CU(fe),b,!1)];case 10:Se.sent(),Se.label=11;case 11:i.push(D),Se.label=12;case 12:return h++,[3,1];case 13:return[2,(r.vo._r(u),i)]}})})}function CU(n){return PB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Hz(n){var t=mt(n);return mt(mt(t.localStore).persistence).fn()}function Gz(n,t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return(i=mt(n)).$o?(ht("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Z3(i.localStore)];case 3:return u=_.sent(),h=iO.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,mg(i,u,h)];case 4:return _.sent(),[3,8];case 5:return[4,tC(i.localStore,t,!0)];case 6:return _.sent(),sC(i,t,r),[3,8];case 7:Ft(),_.label=8;case 8:return[2]}})})}function zz(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h,_,b,D,M,x;return(0,F.__generator)(this,function(z){switch(z.label){case 0:if(!(r=PO(n)).$o)return[3,10];i=0,u=t,z.label=1;case 1:return i<u.length?r.Vo.has(h=u[i])?(ht("SyncEngine","Adding an already active target "+h),[3,5]):[4,Q3(r.localStore,h)]:[3,6];case 2:return _=z.sent(),[4,eC(r.localStore,_)];case 3:return b=z.sent(),[4,RO(r,CU(_),b.targetId,!1)];case 4:z.sent(),wA(r.remoteStore,b),z.label=5;case 5:return i++,[3,1];case 6:D=function(W){return(0,F.__generator)(this,function(ne){switch(ne.label){case 0:return r.Vo.has(W)?[4,tC(r.localStore,W,!1).then(function(){JD(r.remoteStore,W),sC(r,W)}).catch(Qy)]:[3,2];case 1:ne.sent(),ne.label=2;case 2:return[2]}})},M=0,x=e,z.label=7;case 7:return M<x.length?[5,D(x[M])]:[3,10];case 8:z.sent(),z.label=9;case 9:return M++,[3,7];case 10:return[2]}})})}function PO(n){var t=mt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=vU.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lz.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nz.bind(null,t),t.vo._r=wz.bind(null,t.eventManager),t.vo.Mo=Cz.bind(null,t.eventManager),t}function FO(n){var t=mt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kz.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xz.bind(null,t),t}function $z(n,t,e){var r=mt(n);(function(i,u,h){return(0,F.__awaiter)(this,void 0,void 0,function(){var _,b,D,M,x,L;return(0,F.__generator)(this,function(z){switch(z.label){case 0:return z.trys.push([0,14,,15]),[4,u.getMetadata()];case 1:return _=z.sent(),[4,(W=i.localStore,ne=_,fe=mt(W),Se=Cs(ne.createTime),fe.persistence.runTransaction("hasNewerBundle","readonly",function(xe){return fe.Ke.getBundleMetadata(xe,ne.id)}).then(function(xe){return!!xe&&xe.createTime.compareTo(Se)>=0}))];case 2:return z.sent()?[4,u.close()]:[3,4];case 3:return[2,(z.sent(),void h._completeWith(function(W){return{taskState:"Success",documentsLoaded:W.totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}}(_)))];case 4:return h._updateProgress(pU(_)),b=new Dz(_,i.localStore,u.R),[4,u.Lo()];case 5:D=z.sent(),z.label=6;case 6:return D?[4,b.oo(D)]:[3,10];case 7:return(M=z.sent())&&h._updateProgress(M),[4,u.Lo()];case 8:D=z.sent(),z.label=9;case 9:return[3,6];case 10:return[4,b.complete()];case 11:return x=z.sent(),[4,mg(i,x.wn,void 0)];case 12:return z.sent(),[4,function(W,ne){var fe=mt(W);return fe.persistence.runTransaction("Save bundle","readwrite",function(Se){return fe.Ke.saveBundleMetadata(Se,ne)})}(i.localStore,_)];case 13:return z.sent(),h._completeWith(x.progress),[3,15];case 14:return OD("SyncEngine","Loading bundle failed with "+(L=z.sent())),h._failWith(L),[3,15];case 15:return[2]}var W,ne,fe,Se})})})(r,t,e).then(function(){r.sharedClientState.notifyBundleLoaded()})}var EU=function(){function n(){this.synchronizeTabs=!1}return n.prototype.initialize=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(e){switch(e.label){case 0:return this.R=ZD(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},n.prototype.Uo=function(t){return null},n.prototype.Ko=function(t){return q3(this.persistence,new $3,t.initialUser,this.R)},n.prototype.qo=function(t){return new X5(ez.bs,this.R)},n.prototype.Bo=function(t){return new nU},n.prototype.terminate=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},n}(),DU=function(n){function t(e,r,i){var u=this;return(u=n.call(this)||this).Qo=e,u.cacheSizeBytes=r,u.forceOwnership=i,u.synchronizeTabs=!1,u}return(0,F.__extends)(t,n),t.prototype.initialize=function(e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,n.prototype.initialize.call(this,e)];case 1:return i.sent(),[4,z5(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,e)];case 3:return i.sent(),[4,FO(this.Qo.syncEngine)];case 4:return i.sent(),[4,rC(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(e){return q3(this.persistence,new $3,e.initialUser,this.R)},t.prototype.Uo=function(e){return new N5(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)},t.prototype.qo=function(e){var r=gO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?kf.withCacheSize(this.cacheSizeBytes):kf.DEFAULT;return new L5(this.synchronizeTabs,r,e.clientId,i,e.asyncQueue,iU(),bA(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new nU},t}(EU),qz=function(n){function t(e,r){var i=this;return(i=n.call(this,e,r,!1)||this).Qo=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return(0,F.__extends)(t,n),t.prototype.initialize=function(e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i=this;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,n.prototype.initialize.call(this,e)];case 1:return u.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof bO?(this.sharedClientState.syncEngine={ui:Uz.bind(null,r),ai:Gz.bind(null,r),hi:zz.bind(null,r),fn:Hz.bind(null,r),ci:Bz.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:u.sent(),u.label=3;case 3:return[4,this.persistence.He(function(h){return(0,F.__awaiter)(i,void 0,void 0,function(){return(0,F.__generator)(this,function(_){switch(_.label){case 0:return[4,jz(this.Qo.syncEngine,h)];case 1:return _.sent(),this.gcScheduler&&(h&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):h||this.gcScheduler.stop()),[2]}})})})];case 4:return u.sent(),[2]}})})},t.prototype.Bo=function(e){var r=iU();if(!bO.yt(r))throw new it(ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=gO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bO(r,e.asyncQueue,i,e.clientId,e.initialUser)},t}(DU),LO=function(){function n(){}return n.prototype.initialize=function(t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(u){return yU(r.syncEngine,u,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fz.bind(null,this.syncEngine),[4,TO(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.createEventManager=function(t){return new bz},n.prototype.createDatastore=function(t){var r=ZD(t.databaseInfo.databaseId),i=new oz(t.databaseInfo);return new uz(t.credentials,i,r)},n.prototype.createRemoteStore=function(t){var e,r,i,u,h,_=this;return e=this.localStore,r=this.datastore,i=t.asyncQueue,u=function(b){return yU(_.syncEngine,b,0)},h=rU.yt()?new rU:new nz,new cz(e,r,i,u,h)},n.prototype.createSyncEngine=function(t,e){return D=e,M=new Iz(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),D&&(M.$o=!0),M;var D,M},n.prototype.terminate=function(){return function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return e=mt(t),ht("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,nC(e)];case 1:return r.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},n}();function TU(n,t){void 0===t&&(t=10240);var e=0;return{read:function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var r;return(0,F.__generator)(this,function(i){return e<n.byteLength?(r={value:n.slice(e,e+t),done:!1},[2,(e+=t,r)]):[2,{done:!0}]})})},cancel:function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(r){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var DA=function(){function n(t){this.observer=t,this.muted=!1}return n.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},n.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},n.prototype.Wo=function(){this.muted=!0},n.prototype.jo=function(t,e){var r=this;this.muted||setTimeout(function(){r.muted||t(e)},0)},n}(),Wz=function(){function n(t,e){var r=this;this.Go=t,this.R=e,this.metadata=new xa,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==i?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return n.prototype.close=function(){return this.Go.cancel()},n.prototype.getMetadata=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){return[2,this.metadata.promise]})})},n.prototype.Lo=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},n.prototype.Ho=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,this.Jo()];case 1:return null===(t=u.sent())?[2,null]:(e=this.zo.decode(t),r=Number(e),isNaN(r)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(r)]);case 2:return i=u.sent(),[2,new Ez(JSON.parse(i),t.length+r)]}})})},n.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},n.prototype.Jo=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},n.prototype.Xo=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},n.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},n.prototype.tc=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},n}(),Yz=function(){function n(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return n.prototype.lookup=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r=this;return(0,F.__generator)(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new it(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(u,h){return(0,F.__awaiter)(this,void 0,void 0,function(){var _,b,D,M,x,L;return(0,F.__generator)(this,function(z){switch(z.label){case 0:return _=mt(u),b=WD(_.R)+"/documents",D={documents:h.map(function(W){return qD(_.R,W)})},[4,_.$i("BatchGetDocuments",b,D)];case 1:return M=z.sent(),x=new Map,M.forEach(function(W){var fe,Se,ne=(fe=_.R,"found"in(Se=W)?function(xe,qe){an(!!qe.found);var ct=Rf(xe,qe.found.name),ut=Cs(qe.found.updateTime),Bt=new cc({mapValue:{fields:qe.found.fields}});return ta.newFoundDocument(ct,ut,Bt)}(fe,Se):"missing"in Se?function(xe,qe){an(!!qe.missing),an(!!qe.readTime);var ct=Rf(xe,qe.missing),ut=Cs(qe.readTime);return ta.newNoDocument(ct,ut)}(fe,Se):Ft());x.set(ne.key.toString(),ne)}),L=[],[2,(h.forEach(function(W){var ne=x.get(W.toString());an(!!ne),L.push(ne)}),L)]}})})}(this.datastore,t)];case 1:return[2,((e=i.sent()).forEach(function(u){return r.recordVersion(u)}),e)]}})})},n.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},n.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},n.prototype.delete=function(t){this.write(new zD(t,this.precondition(t))),this.writtenDocs.add(t.toString())},n.prototype.commit=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,F.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,u){var h=Vt.fromPath(u);e.mutations.push(new nO(h,e.precondition(h)))}),[4,function(i,u){return(0,F.__awaiter)(this,void 0,void 0,function(){var h,_,b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return h=mt(i),_=WD(h.R)+"/documents",b={writes:u.map(function(M){return hA(h.R,M)})},[4,h.Ni("Commit",_,b)];case 1:return D.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},n.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ft();e=Sn.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new it(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},n.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ra.updateTime(e):Ra.none()},n.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Sn.min()))throw new it(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ra.updateTime(e)}return Ra.exists(!0)},n.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},n.prototype.ensureCommitNotCalled=function(){},n}(),Kz=function(){function n(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new wO(this.asyncQueue,"transaction_retry")}return n.prototype.run=function(){this.ec-=1,this.nc()},n.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,F.__awaiter)(t,void 0,void 0,function(){var e,r,i=this;return(0,F.__generator)(this,function(u){return e=new Yz(this.datastore),(r=this.sc(e))&&r.then(function(h){i.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){i.deferred.resolve(h)}).catch(function(_){i.ic(_)})})}).catch(function(h){i.ic(h)}),[2]})})})},n.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Gy(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},n.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},n.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!XB(e)}return!1},n}(),Qz=function(){function n(t,e,r){var i=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=r,this.user=ra.UNAUTHENTICATED,this.clientId=bB.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(u){return(0,F.__awaiter)(i,void 0,void 0,function(){return(0,F.__generator)(this,function(h){switch(h.label){case 0:return ht("FirestoreClient","Received user=",u.uid),[4,this.credentialListener(u)];case 1:return h.sent(),this.user=u,[2]}})})})}return n.prototype.getConfiguration=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},n.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},n.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new it(ke.FAILED_PRECONDITION,"The client has already been terminated.")},n.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,F.__awaiter)(t,void 0,void 0,function(){var r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:u.sent(),u.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:u.sent(),u.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return r=u.sent(),i=oC(r,"Failed to shutdown persistence"),e.reject(i),[3,6];case 6:return[2]}})})}),e.promise},n}();function SU(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i=this;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return n.asyncQueue.verifyOperationInProgress(),ht("FirestoreClient","Initializing OfflineComponentProvider"),[4,n.getConfiguration()];case 1:return e=u.sent(),[4,t.initialize(e)];case 2:return u.sent(),r=e.initialUser,n.setCredentialChangeListener(function(h){return(0,F.__awaiter)(i,void 0,void 0,function(){return(0,F.__generator)(this,function(_){switch(_.label){case 0:return r.isEqual(h)?[3,2]:[4,W3(t.localStore,h)];case 1:_.sent(),r=h,_.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return n.terminate()}),n.offlineComponents=t,[2]}})})}function IU(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return n.asyncQueue.verifyOperationInProgress(),[4,VO(n)];case 1:return e=i.sent(),ht("FirestoreClient","Initializing OnlineComponentProvider"),[4,n.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(e,r)];case 3:return i.sent(),n.setCredentialChangeListener(function(u){return function(h,_){return(0,F.__awaiter)(this,void 0,void 0,function(){var b,D;return(0,F.__generator)(this,function(M){switch(M.label){case 0:return(b=mt(h)).asyncQueue.verifyOperationInProgress(),ht("RemoteStore","RemoteStore received new credentials"),D=x_(b),b.Or.add(3),[4,nC(b)];case 1:return M.sent(),D&&b.Br.set("Unknown"),[4,b.remoteSyncer.handleCredentialChange(_)];case 2:return M.sent(),b.Or.delete(3),[4,XD(b)];case 3:return M.sent(),[2]}})})}(t.remoteStore,u)}),n.onlineComponents=t,[2]}})})}function VO(n){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:return n.offlineComponents?[3,2]:(ht("FirestoreClient","Using default OfflineComponentProvider"),[4,SU(n,new EU)]);case 1:t.sent(),t.label=2;case 2:return[2,n.offlineComponents]}})})}function TA(n){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:return n.onlineComponents?[3,2]:(ht("FirestoreClient","Using default OnlineComponentProvider"),[4,IU(n,new LO)]);case 1:t.sent(),t.label=2;case 2:return[2,n.onlineComponents]}})})}function AU(n){return VO(n).then(function(t){return t.persistence})}function BO(n){return VO(n).then(function(t){return t.localStore})}function MU(n){return TA(n).then(function(t){return t.remoteStore})}function UO(n){return TA(n).then(function(t){return t.syncEngine})}function aC(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,TA(n)];case 1:return t=r.sent(),[2,((e=t.eventManager).onListen=Az.bind(null,t.syncEngine),e.onUnlisten=Mz.bind(null,t.syncEngine),e)]}})})}function RU(n,t,e){var r=this;void 0===e&&(e={});var i=new xa;return n.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(r,void 0,void 0,function(){var u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return u=function(_,b,D,M,x){var L=new DA({next:function(W){b.enqueueAndForget(function(){return IO(_,z)});var ne=W.docs.has(D);!ne&&W.fromCache?x.reject(new it(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):ne&&W.fromCache&&M&&"server"===M.source?x.reject(new it(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(W)},error:function(W){return x.reject(W)}}),z=new MO(Bw(D.path),L,{includeMetadataChanges:!0,so:!0});return SO(_,z)},[4,aC(n)];case 1:return[2,u.apply(void 0,[h.sent(),n.asyncQueue,t,e,i])]}})})}),i.promise}function NU(n,t,e){var r=this;void 0===e&&(e={});var i=new xa;return n.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(r,void 0,void 0,function(){var u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return u=function(_,b,D,M,x){var L=new DA({next:function(W){b.enqueueAndForget(function(){return IO(_,z)}),W.fromCache&&"server"===M.source?x.reject(new it(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(W)},error:function(W){return x.reject(W)}}),z=new MO(D,L,{includeMetadataChanges:!0,so:!0});return SO(_,z)},[4,aC(n)];case 1:return[2,u.apply(void 0,[h.sent(),n.asyncQueue,t,e,i])]}})})}),i.promise}var Zz=function(n,t,e,r,i,u,h,_){this.databaseId=n,this.appId=t,this.persistenceKey=e,this.host=r,this.ssl=i,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=_},SA=function(){function n(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(n.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database},n}(),kU=new Map,xU=function(n,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+n},OU=function(){function n(){this.changeListener=null}return n.prototype.getToken=function(){return Promise.resolve(null)},n.prototype.invalidateToken=function(){},n.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(ra.UNAUTHENTICATED)})},n.prototype.removeChangeListener=function(){this.changeListener=null},n}(),Xz=function(){function n(t){this.token=t,this.changeListener=null}return n.prototype.getToken=function(){return Promise.resolve(this.token)},n.prototype.invalidateToken=function(){},n.prototype.setChangeListener=function(t,e){var r=this;this.changeListener=e,t.enqueueRetryable(function(){return e(r.token.user)})},n.prototype.removeChangeListener=function(){this.changeListener=null},n}(),Jz=function(){function n(t){var e=this;this.currentUser=ra.UNAUTHENTICATED,this.oc=new xa,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var r=function(i){ht("FirebaseCredentialsProvider","Auth detected"),e.auth=i,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!e.auth){var i=t.getImmediate({optional:!0});i?r(i):(ht("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return n.prototype.getToken=function(){var t=this,e=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==e?(ht("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(an("string"==typeof i.accessToken),new xU(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},n.prototype.invalidateToken=function(){this.forceRefresh=!0},n.prototype.setChangeListener=function(t,e){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,F.__awaiter)(r,void 0,void 0,function(){return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,e(this.currentUser)];case 2:return i.sent(),this.changeListener=e,[2]}})})})},n.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},n.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return an(null===t||"string"==typeof t),new ra(t)},n}(),e$=function(){function n(t,e,r){this.hc=t,this.lc=e,this.fc=r,this.type="FirstParty",this.user=ra.FIRST_PARTY}return Object.defineProperty(n.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),n}(),t$=function(){function n(t,e,r){this.hc=t,this.lc=e,this.fc=r}return n.prototype.getToken=function(){return Promise.resolve(new e$(this.hc,this.lc,this.fc))},n.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(ra.FIRST_PARTY)})},n.prototype.removeChangeListener=function(){},n.prototype.invalidateToken=function(){},n}();function jO(n,t,e){if(!e)throw new it(ke.INVALID_ARGUMENT,"Function "+n+"() cannot be called with an empty "+t+".")}function HO(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new it(ke.INVALID_ARGUMENT,"Invalid options passed to function "+n+'(): You cannot specify both "merge" and "mergeFields".');return t}function PU(n,t,e,r){if(!0===t&&!0===r)throw new it(ke.INVALID_ARGUMENT,n+" and "+e+" cannot be used together.")}function FU(n){if(!Vt.isDocumentKey(n))throw new it(ke.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+n+" has "+n.length+".")}function LU(n){if(Vt.isDocumentKey(n))throw new it(ke.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+n+" has "+n.length+".")}function IA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=n.substring(0,20)+"..."),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";var t=function(e){if(e.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(r&&r.length>1)return r[1]}return null}(n);return t?"a custom "+t+" object":"an object"}return"function"==typeof n?"a function":Ft()}function cr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new it(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var e=IA(n);throw new it(ke.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+e)}return n}function VU(n,t){if(t<=0)throw new it(ke.INVALID_ARGUMENT,"Function "+n+"() requires a positive number, but it was: "+t+".")}var BU=function(){function n(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new it(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new it(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,PU("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return n.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},n}(),eT=function(){function n(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BU({}),this._settingsFrozen=!1,t instanceof SA?(this._databaseId=t,this._credentials=new OU):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new it(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new SA(r.options.projectId)}(t),this._credentials=new Jz(e))}return Object.defineProperty(n.prototype,"app",{get:function(){if(!this._app)throw new it(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),n.prototype._setSettings=function(t){if(this._settingsFrozen)throw new it(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BU(t),void 0!==t.credentials&&(this._credentials=function(e){if(!e)return new OU;switch(e.type){case"gapi":var r=e.client;return an(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new t$(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new it(ke.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},n.prototype._getSettings=function(){return this._settings},n.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},n.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},n.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},n.prototype._terminate=function(){return(e=kU.get(this))&&(ht("ComponentProvider","Removing Datastore"),kU.delete(this),e.terminate()),Promise.resolve();var e},n}(),Pi=function(){function n(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(n.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new P_(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),n.prototype.withConverter=function(t){return new n(this.firestore,t,this._key)},n}(),fl=function(){function n(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}return n.prototype.withConverter=function(t){return new n(this.firestore,t,this._query)},n}(),P_=function(n){function t(e,r,i){var u=this;return(u=n.call(this,e,r,Bw(i))||this)._path=i,u.type="collection",u}return(0,F.__extends)(t,n),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Pi(this.firestore,null,new Vt(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(fl);function UU(n,t){for(var e,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(n=(0,At.getModularInstance)(n),jO("collection","path",t),n instanceof eT)return LU(e=lr.fromString.apply(lr,(0,F.__spreadArray)([t],r))),new P_(n,null,e);if(!(n instanceof Pi||n instanceof P_))throw new it(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return LU(e=lr.fromString.apply(lr,(0,F.__spreadArray)([n.path],r)).child(lr.fromString(t))),new P_(n.firestore,null,e)}function AA(n,t){for(var e,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(n=(0,At.getModularInstance)(n),1===arguments.length&&(t=bB.u()),jO("doc","path",t),n instanceof eT)return FU(e=lr.fromString.apply(lr,(0,F.__spreadArray)([t],r))),new Pi(n,null,new Vt(e));if(!(n instanceof Pi||n instanceof P_))throw new it(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return FU(e=n._path.child(lr.fromString.apply(lr,(0,F.__spreadArray)([t],r)))),new Pi(n.firestore,n instanceof P_?n.converter:null,new Vt(e))}function jU(n,t){return n=(0,At.getModularInstance)(n),t=(0,At.getModularInstance)(t),(n instanceof Pi||n instanceof P_)&&(t instanceof Pi||t instanceof P_)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function HU(n,t){return n=(0,At.getModularInstance)(n),t=(0,At.getModularInstance)(t),n instanceof fl&&t instanceof fl&&n.firestore===t.firestore&&UD(n._query,t._query)&&n.converter===t.converter}var n$=function(){function n(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new wO(this,"async_queue_retry"),this.Ic=function(){var r=bA();r&&ht("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var e=bA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(n.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),n.prototype.enqueueAndForget=function(t){this.enqueue(t)},n.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},n.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=bA();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},n.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new xa;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},n.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},n.prototype.bc=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,F.__generator)(this,function(r){switch(r.label){case 0:if(0===this.wc.length)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Yy(t=r.sent()))throw t;return ht("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),r.label=5;case 5:return[2]}})})},n.prototype.Rc=function(t){var e=this,r=this.dc.then(function(){return e.gc=!0,t().catch(function(i){throw e.yc=i,e.gc=!1,No("INTERNAL UNHANDLED ERROR: ",(h=(u=i).message||"",u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h)),i;var u,h}).then(function(i){return e.gc=!1,i})});return this.dc=r,r},n.prototype.enqueueAfterDelay=function(t,e,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var u=vz.createAndSchedule(this,t,e,r,function(h){return i.vc(h)});return this.mc.push(u),u},n.prototype.Ac=function(){this.yc&&Ft()},n.prototype.verifyOperationInProgress=function(){},n.prototype.Pc=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},n.prototype.Vc=function(t){for(var e=0,r=this.mc;e<r.length;e++)if(r[e].timerId===t)return!0;return!1},n.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(h,_){return h.targetTimeMs-_.targetTimeMs});for(var r=0,i=e.mc;r<i.length;r++){var u=i[r];if(u.skipDelay(),"all"!==t&&u.timerId===t)break}return e.Pc()})},n.prototype.Dc=function(t){this.Tc.push(t)},n.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},n}();function uC(n){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var r=t,i=0,u=["next","error","complete"];i<u.length;i++){var h=u[i];if(h in r&&"function"==typeof r[h])return!0}return!1}(n)}var r$=function(){function n(){this._progressObserver={},this._taskCompletionResolver=new xa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return n.prototype.onProgress=function(t,e,r){this._progressObserver={next:t,error:e,complete:r}},n.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},n.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},n.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},n.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},n.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},n}(),io=function(n){function t(e,r){var i=this;return(i=n.call(this,e,r)||this).type="firestore",i._queue=new n$,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return(0,F.__extends)(t,n),t.prototype._terminate=function(){return this._firestoreClient||GU(this),this._firestoreClient.terminate()},t}(eT);function Ds(n){return n._firestoreClient||GU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function GU(n){var t,u,_,e=n._freezeSettings(),r=(u=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new Zz(n._databaseId,u,n._persistenceKey,(_=e).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));n._firestoreClient=new Qz(n._credentials,n._queue,r)}function zU(n,t,e){var r=this,i=new xa;return n.asyncQueue.enqueue(function(){return(0,F.__awaiter)(r,void 0,void 0,function(){var u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),[4,SU(n,e)];case 1:return h.sent(),[4,IU(n,t)];case 2:return h.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(_=u=h.sent()).name?_.code===ke.FAILED_PRECONDITION||_.code===ke.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw u;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),i.reject(u),[3,4];case 4:return[2]}var _})})}).then(function(){return i.promise})}function $U(n){if(n._initialized||n._terminated)throw new it(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xf=function(){function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0;r<t.length;++r)if(0===t[r].length)throw new it(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sh(t)}return n.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},n}(),Zy=function(){function n(t){this._byteString=t}return n.fromBase64String=function(t){try{return new n(_u.fromBase64String(t))}catch(e){throw new it(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},n.fromUint8Array=function(t){return new n(_u.fromUint8Array(t))},n.prototype.toBase64=function(){return this._byteString.toBase64()},n.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},n.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},n.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},n}(),Xy=function(n){this._methodName=n},MA=function(){function n(t,e){if(!isFinite(t)||t<-90||t>90)throw new it(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new it(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(n.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},n.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},n.prototype._compareTo=function(t){return Bn(this._lat,t._lat)||Bn(this._long,t._long)},n}(),o$=/^__.*__$/,s$=function(){function n(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}return n.prototype.toMutation=function(t,e){return null!==this.fieldMask?new I_(t,this.data,this.fieldMask,e,this.fieldTransforms):new GD(t,this.data,e,this.fieldTransforms)},n}(),qU=function(){function n(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}return n.prototype.toMutation=function(t,e){return new I_(t,this.data,this.fieldMask,e,this.fieldTransforms)},n}();function WU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft()}}var YU=function(){function n(t,e,r,i,u,h){this.settings=t,this.databaseId=e,this.R=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Cc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}return Object.defineProperty(n.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),n.prototype.xc=function(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},n.prototype.kc=function(t){var e,r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},n.prototype.Oc=function(t){var e,r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},n.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},n.prototype.Lc=function(t){return NA(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},n.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},n.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},n.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(WU(this.Nc)&&o$.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},n}(),a$=function(){function n(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=r||ZD(t)}return n.prototype.Uc=function(t,e,r,i){return void 0===i&&(i=!1),new YU({Nc:t,methodName:e,qc:r,path:Sh.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},n}();function Jy(n){var t=n._freezeSettings(),e=ZD(n._databaseId);return new a$(n._databaseId,!!t.ignoreUndefinedProperties,e)}function RA(n,t,e,r,i,u){void 0===u&&(u={});var h=n.Uc(u.merge||u.mergeFields?2:0,t,e,i);qO("Data must be an object, but it was:",h,r);var _,b,D=ZU(r,h);if(u.merge)_=new Pw(h.fieldMask),b=h.fieldTransforms;else if(u.mergeFields){for(var M=[],x=0,L=u.mergeFields;x<L.length;x++){var z=WO(t,L[x],e);if(!h.contains(z))throw new it(ke.INVALID_ARGUMENT,"Field '"+z+"' is specified in your field mask but missing from your input data.");JU(M,z)||M.push(z)}_=new Pw(M),b=h.fieldTransforms.filter(function(W){return _.covers(W.field)})}else _=null,b=h.fieldTransforms;return new s$(new cc(D),_,b)}var GO=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw e.Lc(1===e.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Xy);function KU(n,t,e){return new YU({Nc:3,qc:t.settings.qc,methodName:n._methodName,Fc:e},t.databaseId,t.R,t.ignoreUndefinedProperties)}var u$=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t.prototype._toFieldTransform=function(e){return new HD(e.path,new jw)},t.prototype.isEqual=function(e){return e instanceof t},t}(Xy),l$=function(n){function t(e,r){var i=this;return(i=n.call(this,e)||this).Kc=r,i}return(0,F.__extends)(t,n),t.prototype._toFieldTransform=function(e){var r=KU(this,e,!0),i=this.Kc.map(function(h){return e0(h,r)}),u=new $y(i);return new HD(e.path,u)},t.prototype.isEqual=function(e){return this===e},t}(Xy),c$=function(n){function t(e,r){var i=this;return(i=n.call(this,e)||this).Kc=r,i}return(0,F.__extends)(t,n),t.prototype._toFieldTransform=function(e){var r=KU(this,e,!0),i=this.Kc.map(function(h){return e0(h,r)}),u=new qy(i);return new HD(e.path,u)},t.prototype.isEqual=function(e){return this===e},t}(Xy),d$=function(n){function t(e,r){var i=this;return(i=n.call(this,e)||this).Qc=r,i}return(0,F.__extends)(t,n),t.prototype._toFieldTransform=function(e){var r=new Hw(e.R,jB(e.R,this.Qc));return new HD(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Xy);function zO(n,t,e,r){var i=n.Uc(1,t,e);qO("Data must be an object, but it was:",i,r);var u=[],h=cc.empty();Hy(r,function(b,D){var M=YO(t,b,e);D=(0,At.getModularInstance)(D);var x=i.Oc(M);if(D instanceof GO)u.push(M);else{var L=e0(D,x);null!=L&&(u.push(M),h.set(M,L))}});var _=new Pw(u);return new qU(h,_,i.fieldTransforms)}function $O(n,t,e,r,i,u){var h=n.Uc(1,t,e),_=[WO(t,r,e)],b=[i];if(u.length%2!=0)throw new it(ke.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var D=0;D<u.length;D+=2)_.push(WO(t,u[D])),b.push(u[D+1]);for(var M=[],x=cc.empty(),L=_.length-1;L>=0;--L)if(!JU(M,_[L])){var z=_[L],W=b[L];W=(0,At.getModularInstance)(W);var ne=h.Oc(z);if(W instanceof GO)M.push(z);else{var fe=e0(W,ne);null!=fe&&(M.push(z),x.set(z,fe))}}var Se=new Pw(M);return new qU(x,Se,h.fieldTransforms)}function QU(n,t,e,r){return void 0===r&&(r=!1),e0(e,n.Uc(r?4:3,t))}function e0(n,t){if(XU(n=(0,At.getModularInstance)(n)))return qO("Unsupported field value:",t,n),ZU(n,t);if(n instanceof Xy)return function(e,r){if(!WU(r.Nc))throw r.Lc(e._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(e._methodName+"() is not currently supported inside arrays");var i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,r){for(var i=[],u=0,h=0,_=e;h<_.length;h++){var b=e0(_[h],r.Mc(u));null==b&&(b={nullValue:"NULL_VALUE"}),i.push(b),u++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,At.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jB(r.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var i=cl.fromDate(e);return{timestampValue:$D(r.R,i)}}if(e instanceof cl)return i=new cl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:$D(r.R,i)};if(e instanceof MA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Zy)return{bytesValue:u3(r.R,e._byteString)};if(e instanceof Pi){var u=e.firestore._databaseId;if(!u.isEqual(i=r.databaseId))throw r.Lc("Document reference is for database "+u.projectId+"/"+u.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:sO(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.Lc("Unsupported field value: "+IA(e))}(n,t)}function ZU(n,t){var e={};return EB(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hy(n,function(r,i){var u=e0(i,t.kc(r));null!=u&&(e[r]=u)}),{mapValue:{fields:e}}}function XU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof cl||n instanceof MA||n instanceof Zy||n instanceof Pi||n instanceof Xy)}function qO(n,t,e){if(!XU(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){var r=IA(e);throw t.Lc("an object"===r?n+" a custom object":n+" "+r)}var i}function WO(n,t,e){if((t=(0,At.getModularInstance)(t))instanceof xf)return t._internalPath;if("string"==typeof t)return YO(n,t);throw NA("Field path arguments must be of type string or FieldPath.",n,!1,void 0,e)}var h$=new RegExp("[~\\*/\\[\\]]");function YO(n,t,e){if(t.search(h$)>=0)throw NA("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",n,!1,void 0,e);try{return(new(xf.bind.apply(xf,(0,F.__spreadArray)([void 0],t.split(".")))))._internalPath}catch(r){throw NA("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",n,!1,void 0,e)}}function NA(n,t,e,r,i){var u=r&&!r.isEmpty(),h=void 0!==i,_="Function "+t+"() called with invalid data";e&&(_+=" (via `toFirestore()`)");var b="";return(u||h)&&(b+=" (found",u&&(b+=" in field "+r),h&&(b+=" in document "+i),b+=")"),new it(ke.INVALID_ARGUMENT,(_+=". ")+n+b)}function JU(n,t){return n.some(function(e){return e.isEqual(t)})}var tT=function(){function n(t,e,r,i,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=u}return Object.defineProperty(n.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ref",{get:function(){return new Pi(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),n.prototype.exists=function(){return null!==this._document},n.prototype.data=function(){if(this._document){if(this._converter){var t=new f$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},n.prototype.get=function(t){if(this._document){var e=this._document.data.field(kA("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},n}(),f$=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t.prototype.data=function(){return n.prototype.data.call(this)},t}(tT);function kA(n,t){return"string"==typeof t?YO(n,t):t instanceof xf?t._internalPath:t._delegate._internalPath}var t0=function(){function n(t,e){this.hasPendingWrites=t,this.fromCache=e}return n.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},n}(),_g=function(n){function t(e,r,i,u,h,_){var b=this;return(b=n.call(this,e,r,i,u,_)||this)._firestore=e,b._firestoreImpl=e,b.metadata=h,b}return(0,F.__extends)(t,n),t.prototype.exists=function(){return n.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var r=new nT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,r){if(void 0===r&&(r={}),this._document){var i=this._document.data.field(kA("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(tT),nT=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t.prototype.data=function(e){return void 0===e&&(e={}),n.prototype.data.call(this,e)},t}(_g),F_=function(){function n(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new t0(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(n.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),n.prototype.forEach=function(t,e){var r=this;this._snapshot.docs.forEach(function(i){t.call(e,new nT(r._firestore,r._userDataWriter,i.key,i,new t0(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},n.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new it(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var u=0;return r._snapshot.docChanges.map(function(_){return{type:"added",doc:new nT(r._firestore,r._userDataWriter,_.doc.key,_.doc,new t0(r._snapshot.mutatedKeys.has(_.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}})}var h=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(_){return i||3!==_.type}).map(function(_){var b=new nT(r._firestore,r._userDataWriter,_.doc.key,_.doc,new t0(r._snapshot.mutatedKeys.has(_.doc.key),r._snapshot.fromCache),r.query.converter),D=-1,M=-1;return 0!==_.type&&(D=h.indexOf(_.doc.key),h=h.delete(_.doc.key)),1!==_.type&&(M=(h=h.add(_.doc)).indexOf(_.doc.key)),{type:p$(_.type),doc:b,oldIndex:D,newIndex:M}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},n}();function p$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft()}}function ej(n,t){return n instanceof _g&&t instanceof _g?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof F_&&t instanceof F_&&n._firestore===t._firestore&&HU(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function tj(n){if(oA(n)&&0===n.explicitOrderBy.length)throw new it(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rT=function(){};function L_(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var r=0,i=t;r<i.length;r++){var u=i[r];n=u._apply(n)}return n}var g$=function(n){function t(e,r,i){var u=this;return(u=n.call(this)||this).jc=e,u.Wc=r,u.Gc=i,u.type="where",u}return(0,F.__extends)(t,n),t.prototype._apply=function(e){var u,_,r=Jy(e.firestore),i=function(u,h,_,b,D,M,x){var L;if(D.isKeyField()){if("array-contains"===M||"array-contains-any"===M)throw new it(ke.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+M+"' queries on FieldPath.documentId().");if("in"===M||"not-in"===M){aj(x,M);for(var z=[],W=0,ne=x;W<ne.length;W++)z.push(sj(b,u,ne[W]));L={arrayValue:{values:z}}}else L=sj(b,u,x)}else"in"!==M&&"not-in"!==M&&"array-contains-any"!==M||aj(x,M),L=QU(_,"where",x,"in"===M||"not-in"===M);var Se=dc.create(D,M,L);return function(xe,qe){if(qe.g()){var ct=Xx(xe);if(null!==ct&&!ct.isEqual(qe.field))throw new it(ke.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+ct.toString()+"' and '"+qe.field.toString()+"'");var ut=Zx(xe);null!==ut&&uj(0,qe.field,ut)}var Bt=function(wn,pr){for(var Hr=0,bd=wn.filters;Hr<bd.length;Hr++){var gT=bd[Hr];if(pr.indexOf(gT.op)>=0)return gT.op}return null}(xe,function(wn){switch(wn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(qe.op));if(null!==Bt)throw new it(ke.INVALID_ARGUMENT,Bt===qe.op?"Invalid query. You cannot use more than one '"+qe.op.toString()+"' filter.":"Invalid query. You cannot use '"+qe.op.toString()+"' filters with '"+Bt.toString()+"' filters.")}(u,Se),Se}(e._query,0,r,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new fl(e.firestore,e.converter,(_=(u=e._query).filters.concat([i]),new fg(u.path,u.collectionGroup,u.explicitOrderBy.slice(),_,u.limit,u.limitType,u.startAt,u.endAt)))},t}(rT),m$=function(n){function t(e,r){var i=this;return(i=n.call(this)||this).jc=e,i.zc=r,i.type="orderBy",i}return(0,F.__extends)(t,n),t.prototype._apply=function(e){var i,h,r=function(i,u,h){if(null!==i.startAt)throw new it(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new it(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var _=new Vw(u,h);return function(b,D){if(null===Zx(b)){var M=Xx(b);null!==M&&uj(0,M,D.field)}}(i,_),_}(e._query,this.jc,this.zc);return new fl(e.firestore,e.converter,(h=(i=e._query).explicitOrderBy.concat([r]),new fg(i.path,i.collectionGroup,h,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)))},t}(rT),nj=function(n){function t(e,r,i){var u=this;return(u=n.call(this)||this).type=e,u.Hc=r,u.Jc=i,u}return(0,F.__extends)(t,n),t.prototype._apply=function(e){return new fl(e.firestore,e.converter,FB(e._query,this.Hc,this.Jc))},t}(rT),rj=function(n){function t(e,r,i){var u=this;return(u=n.call(this)||this).type=e,u.Yc=r,u.Xc=i,u}return(0,F.__extends)(t,n),t.prototype._apply=function(e){var i,u,r=oj(e,this.type,this.Yc,this.Xc);return new fl(e.firestore,e.converter,(u=r,new fg((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,u,i.endAt)))},t}(rT),ij=function(n){function t(e,r,i){var u=this;return(u=n.call(this)||this).type=e,u.Yc=r,u.Xc=i,u}return(0,F.__extends)(t,n),t.prototype._apply=function(e){var i,u,r=oj(e,this.type,this.Yc,this.Xc);return new fl(e.firestore,e.converter,(u=r,new fg((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,u)))},t}(rT);function oj(n,t,e,r){if(e[0]=(0,At.getModularInstance)(e[0]),e[0]instanceof tT)return function(u,h,_,b,D){if(!b)throw new it(ke.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+_+"().");for(var M=[],x=0,L=Uw(u);x<L.length;x++){var z=L[x];if(z.field.isKeyField())M.push(JI(h,b.key));else{var W=b.data.field(z.field);if(qx(W))throw new it(ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+z.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===W){var ne=z.field.canonicalString();throw new it(ke.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+ne+"' (used as the orderBy) does not exist.")}M.push(W)}}return new BD(M,D)}(n._query,n.firestore._databaseId,t,e[0]._document,r);var i=Jy(n.firestore);return function(u,h,_,b,D,M){var x=u.explicitOrderBy;if(D.length>x.length)throw new it(ke.INVALID_ARGUMENT,"Too many arguments provided to "+b+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var L=[],z=0;z<D.length;z++){var W=D[z];if(x[z].field.isKeyField()){if("string"!=typeof W)throw new it(ke.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+b+"(), but got a "+typeof W);if(!Jx(u)&&-1!==W.indexOf("/"))throw new it(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+b+"() must be a plain document ID, but '"+W+"' contains a slash.");var ne=u.path.child(lr.fromString(W));if(!Vt.isDocumentKey(ne))throw new it(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+b+"() must result in a valid document path, but '"+ne+"' is not because it contains an odd number of segments.");var fe=new Vt(ne);L.push(JI(h,fe))}else{var Se=QU(_,b,W);L.push(Se)}}return new BD(L,M)}(n._query,n.firestore._databaseId,i,t,e,r)}function sj(n,t,e){if("string"==typeof(e=(0,At.getModularInstance)(e))){if(""===e)throw new it(ke.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jx(t)&&-1!==e.indexOf("/"))throw new it(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var r=t.path.child(lr.fromString(e));if(!Vt.isDocumentKey(r))throw new it(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return JI(n,new Vt(r))}if(e instanceof Pi)return JI(n,e._key);throw new it(ke.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+IA(e)+".")}function aj(n,t){if(!Array.isArray(n)||0===n.length)throw new it(ke.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(n.length>10)throw new it(ke.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function uj(n,t,e){if(!e.isEqual(t))throw new it(ke.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+e.toString()+"' instead.")}var KO=function(){function n(){}return n.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),zy(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ko(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Fw(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ft()}},n.prototype.convertObject=function(t,e){var r=this,i={};return Hy(t.fields,function(u,h){i[u]=r.convertValue(h,e)}),i},n.prototype.convertGeoPoint=function(t){return new MA(ko(t.latitude),ko(t.longitude))},n.prototype.convertArray=function(t,e){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,e)})},n.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var r=TB(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(PD(t));default:return null}},n.prototype.convertTimestamp=function(t){var e=S_(t);return new cl(e.seconds,e.nanos)},n.prototype.convertDocumentKey=function(t,e){var r=lr.fromString(t);an(w3(r));var i=new SA(r.get(1),r.get(3)),u=new Vt(r.popFirst(5));return i.isEqual(e)||No("Document "+u+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),u},n}();function xA(n,t,e){return n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t}var _$=function(n){function t(e){var r=this;return(r=n.call(this)||this).firestore=e,r}return(0,F.__extends)(t,n),t.prototype.convertBytes=function(e){return new Zy(e)},t.prototype.convertReference=function(e){var r=this.convertDocumentKey(e,this.firestore._databaseId);return new Pi(this.firestore,null,r)},t}(KO),v$=function(){function n(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Jy(t)}return n.prototype.set=function(t,e,r){this._verifyNotCommitted();var i=V_(t,this._firestore),u=xA(i.converter,e,r),h=RA(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(h.toMutation(i._key,Ra.none())),this},n.prototype.update=function(t,e,r){for(var i=[],u=3;u<arguments.length;u++)i[u-3]=arguments[u];this._verifyNotCommitted();var h,_=V_(t,this._firestore);return h="string"==typeof(e=(0,At.getModularInstance)(e))||e instanceof xf?$O(this._dataReader,"WriteBatch.update",_._key,e,r,i):zO(this._dataReader,"WriteBatch.update",_._key,e),this._mutations.push(h.toMutation(_._key,Ra.exists(!0))),this},n.prototype.delete=function(t){this._verifyNotCommitted();var e=V_(t,this._firestore);return this._mutations=this._mutations.concat(new zD(e._key,Ra.none())),this},n.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},n.prototype._verifyNotCommitted=function(){if(this._committed)throw new it(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},n}();function V_(n,t){if((n=(0,At.getModularInstance)(n)).firestore!==t)throw new it(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var n0=function(n){function t(e){var r=this;return(r=n.call(this)||this).firestore=e,r}return(0,F.__extends)(t,n),t.prototype.convertBytes=function(e){return new Zy(e)},t.prototype.convertReference=function(e){var r=this.convertDocumentKey(e,this.firestore._databaseId);return new Pi(this.firestore,null,r)},t}(KO);function lj(n,t,e){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];n=cr(n,Pi);var u=cr(n.firestore,io),h=Jy(u);return iT(u,[("string"==typeof(t=(0,At.getModularInstance)(t))||t instanceof xf?$O(h,"updateDoc",n._key,t,e,r):zO(h,"updateDoc",n._key,t)).toMutation(n._key,Ra.exists(!0))])}function cj(n){for(var t,e,r,i=[],u=1;u<arguments.length;u++)i[u-1]=arguments[u];n=(0,At.getModularInstance)(n);var h={includeMetadataChanges:!1},_=0;"object"!=typeof i[_]||uC(i[_])||(h=i[_],_++);var b,D,M,x={includeMetadataChanges:h.includeMetadataChanges};if(uC(i[_])){var L=i[_];i[_]=null===(t=L.next)||void 0===t?void 0:t.bind(L),i[_+1]=null===(e=L.error)||void 0===e?void 0:e.bind(L),i[_+2]=null===(r=L.complete)||void 0===r?void 0:r.bind(L)}if(n instanceof Pi)D=cr(n.firestore,io),M=Bw(n._key.path),b={next:function(ne){i[_]&&i[_](QO(D,n,ne))},error:i[_+1],complete:i[_+2]};else{var z=cr(n,fl);D=cr(z.firestore,io),M=z._query;var W=new n0(D);b={next:function(ne){i[_]&&i[_](new F_(D,W,z,ne))},error:i[_+1],complete:i[_+2]},tj(n._query)}return function(ne,fe,Se,xe){var qe=this,ct=new DA(xe),ut=new MO(fe,ct,Se);return ne.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(qe,void 0,void 0,function(){var Bt;return(0,F.__generator)(this,function(wn){switch(wn.label){case 0:return Bt=SO,[4,aC(ne)];case 1:return[2,Bt.apply(void 0,[wn.sent(),ut])]}})})}),function(){ct.Wo(),ne.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(qe,void 0,void 0,function(){var Bt;return(0,F.__generator)(this,function(wn){switch(wn.label){case 0:return Bt=IO,[4,aC(ne)];case 1:return[2,Bt.apply(void 0,[wn.sent(),ut])]}})})})}}(Ds(D),M,x,b)}function iT(n,t){return function(e,r){var i=this,u=new xa;return e.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(i,void 0,void 0,function(){var h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return h=Rz,[4,UO(e)];case 1:return[2,h.apply(void 0,[_.sent(),r,u])]}})})}),u.promise}(Ds(n),t)}function QO(n,t,e){var r=e.docs.get(t._key),i=new n0(n);return new _g(n,i,t._key,r,new t0(e.hasPendingWrites,e.fromCache),t.converter)}var y$=function(n){function t(e,r){var i=this;return(i=n.call(this,e,r)||this)._firestore=e,i}return(0,F.__extends)(t,n),t.prototype.get=function(e){var r=this,i=V_(e,this._firestore),u=new n0(this._firestore);return n.prototype.get.call(this,e).then(function(h){return new _g(r._firestore,u,i._key,h._document,new t0(!1,!1),i.converter)})},t}(function(){function n(t,e){this._firestore=t,this._transaction=e,this._dataReader=Jy(t)}return n.prototype.get=function(t){var e=this,r=V_(t,this._firestore),i=new _$(this._firestore);return this._transaction.lookup([r._key]).then(function(u){if(!u||1!==u.length)return Ft();var h=u[0];if(h.isFoundDocument())return new tT(e._firestore,i,h.key,h,r.converter);if(h.isNoDocument())return new tT(e._firestore,i,r._key,null,r.converter);throw Ft()})},n.prototype.set=function(t,e,r){var i=V_(t,this._firestore),u=xA(i.converter,e,r),h=RA(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,h),this},n.prototype.update=function(t,e,r){for(var i=[],u=3;u<arguments.length;u++)i[u-3]=arguments[u];var h,_=V_(t,this._firestore);return h="string"==typeof(e=(0,At.getModularInstance)(e))||e instanceof xf?$O(this._dataReader,"Transaction.update",_._key,e,r,i):zO(this._dataReader,"Transaction.update",_._key,e),this._transaction.update(_._key,h),this},n.prototype.delete=function(t){var e=V_(t,this._firestore);return this._transaction.delete(e._key),this},n}());function dj(){if("undefined"==typeof Uint8Array)throw new it(ke.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hj(){if("undefined"==typeof atob)throw new it(ke.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fj=function(){function n(t){this._delegate=t}return n.fromBase64String=function(t){return hj(),new n(Zy.fromBase64String(t))},n.fromUint8Array=function(t){return dj(),new n(Zy.fromUint8Array(t))},n.prototype.toBase64=function(){return hj(),this._delegate.toBase64()},n.prototype.toUint8Array=function(){return dj(),this._delegate.toUint8Array()},n.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n}(),b$=function(){function n(){}return n.prototype.enableIndexedDbPersistence=function(t,e){return function(r,i){$U(r=cr(r,io));var u=Ds(r),h=r._freezeSettings(),_=new LO;return zU(u,_,new DU(_,h.cacheSizeBytes,null==i?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:e})},n.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(e){$U(e=cr(e,io));var r=Ds(e),i=e._freezeSettings(),u=new LO;return zU(r,u,new qz(u,i.cacheSizeBytes))}(t._delegate)},n.prototype.clearIndexedDbPersistence=function(t){return function(e){var r=this;if(e._initialized&&!e._terminated)throw new it(ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new xa;return e._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,F.__awaiter)(r,void 0,void 0,function(){var u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,,3]),[4,function(_){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(D){switch(D.label){case 0:return Ww.yt()?[4,Ww.delete(_+"main")]:[2,Promise.resolve()];case 1:return D.sent(),[2]}})})}(gO(e._databaseId,e._persistenceKey))];case 1:return h.sent(),i.resolve(),[3,3];case 2:return u=h.sent(),i.reject(u),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},n}(),ZO=function(){function n(t,e,r){var i=this;this._delegate=e,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof SA||(this.tu=t)}return Object.defineProperty(n.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),n.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||OD("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},n.prototype.useEmulator=function(t,e,r){void 0===r&&(r={}),function(i,u,h,_){var b;void 0===_&&(_={});var D=(i=cr(i,eT))._getSettings();if("firestore.googleapis.com"!==D.host&&D.host!==u&&OD("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},D),{host:u+":"+h,ssl:!1})),_.mockUserToken){var M,x;if("string"==typeof _.mockUserToken)M=_.mockUserToken,x=ra.MOCK_USER;else{M=(0,At.createMockUserToken)(_.mockUserToken,null===(b=i._app)||void 0===b?void 0:b.options.projectId);var L=_.mockUserToken.sub||_.mockUserToken.user_id;if(!L)throw new it(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new ra(L)}i._credentials=new Xz(new xU(M,x))}}(this._delegate,t,e,r)},n.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,F.__awaiter)(e,void 0,void 0,function(){var r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,AU(t)];case 1:return r=u.sent(),[4,MU(t)];case 2:return i=u.sent(),[2,(r.setNetworkEnabled(!0),h=i,_=mt(h),_.Or.delete(0),XD(_))]}var h,_})})})}(Ds(cr(this._delegate,io)))},n.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,F.__awaiter)(e,void 0,void 0,function(){var r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,AU(t)];case 1:return r=u.sent(),[4,MU(t)];case 2:return i=u.sent(),[2,(r.setNetworkEnabled(!1),function(h){return(0,F.__awaiter)(this,void 0,void 0,function(){var _;return(0,F.__generator)(this,function(b){switch(b.label){case 0:return(_=mt(h)).Or.add(0),[4,nC(_)];case 1:return b.sent(),_.Br.set("Offline"),[2]}})})}(i))]}})})})}(Ds(cr(this._delegate,io)))},n.prototype.enablePersistence=function(t){var e=!1,r=!1;return t&&PU("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},n.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},n.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},n.prototype.waitForPendingWrites=function(){return function(t){var e=this,r=new xa;return t.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(e,void 0,void 0,function(){var i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return i=Oz,[4,UO(t)];case 1:return[2,i.apply(void 0,[u.sent(),r])]}})})}),r.promise}(Ds(cr(this._delegate,io)))},n.prototype.onSnapshotsInSync=function(t){return r=t,function(i,u){var h=this,_=new DA(u);return i.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(h,void 0,void 0,function(){var b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return b=function(M,x){mt(M).Gr.add(x),x.next()},[4,aC(i)];case 1:return[2,b.apply(void 0,[D.sent(),_])]}})})}),function(){_.Wo(),i.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(h,void 0,void 0,function(){var b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return b=function(M,x){mt(M).Gr.delete(x)},[4,aC(i)];case 1:return[2,b.apply(void 0,[D.sent(),_])]}})})})}}(Ds(cr(this._delegate,io)),uC(r)?r:{next:r});var r},Object.defineProperty(n.prototype,"app",{get:function(){if(!this.tu)throw new it(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new FA(this,UU(this._delegate,t))}catch(e){throw vu(e,"collection()","Firestore.collection()")}},n.prototype.doc=function(t){try{return new r0(this,AA(this._delegate,t))}catch(e){throw vu(e,"doc()","Firestore.doc()")}},n.prototype.collectionGroup=function(t){try{return new aT(this,function(e,r){if(e=cr(e,eT),jO("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new it(ke.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new fl(e,null,(i=r,new fg(lr.emptyPath(),i)));var i}(this._delegate,t))}catch(e){throw vu(e,"collectionGroup()","Firestore.collectionGroup()")}},n.prototype.runTransaction=function(t){var r,e=this;return function(u,h){var _=this,b=new xa;return u.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(_,void 0,void 0,function(){var D;return(0,F.__generator)(this,function(M){switch(M.label){case 0:return[4,(x=u,TA(x).then(function(L){return L.datastore}))];case 1:return D=M.sent(),new Kz(u.asyncQueue,D,h,b).run(),[2]}var x})})}),b.promise}(Ds(r=this._delegate),function(u){return function(r){return t(new pj(e,r))}(new y$(r,u))})},n.prototype.batch=function(){var t=this;return Ds(this._delegate),new gj(new v$(this._delegate,function(e){return iT(t._delegate,e)}))},n.prototype.loadBundle=function(t){throw new it(ke.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},n.prototype.namedQuery=function(t){throw new it(ke.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},n}(),OA=function(n){function t(e){var r=this;return(r=n.call(this)||this).firestore=e,r}return(0,F.__extends)(t,n),t.prototype.convertBytes=function(e){return new fj(new Zy(e))},t.prototype.convertReference=function(e){var r=this.convertDocumentKey(e,this.firestore._databaseId);return r0.eu(r,this.firestore,null)},t}(KO),pj=function(){function n(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new OA(t)}return n.prototype.get=function(t){var e=this,r=o0(t);return this._delegate.get(r).then(function(i){return new oT(e._firestore,new _g(e._firestore._delegate,e._userDataWriter,i._key,i._document,i.metadata,r.converter))})},n.prototype.set=function(t,e,r){var i=o0(t);return r?(HO("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this},n.prototype.update=function(t,e,r){for(var i,u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];var _=o0(t);return 2===arguments.length?this._delegate.update(_,e):(i=this._delegate).update.apply(i,(0,F.__spreadArray)([_,e,r],u)),this},n.prototype.delete=function(t){var e=o0(t);return this._delegate.delete(e),this},n}(),gj=function(){function n(t){this._delegate=t}return n.prototype.set=function(t,e,r){var i=o0(t);return r?(HO("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this},n.prototype.update=function(t,e,r){for(var i,u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];var _=o0(t);return 2===arguments.length?this._delegate.update(_,e):(i=this._delegate).update.apply(i,(0,F.__spreadArray)([_,e,r],u)),this},n.prototype.delete=function(t){var e=o0(t);return this._delegate.delete(e),this},n.prototype.commit=function(){return this._delegate.commit()},n}(),PA=function(){function n(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}return n.prototype.fromFirestore=function(t,e){var r=new nT(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new sT(this._firestore,r),null!=e?e:{})},n.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},n.nu=function(t,e){var r=n.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var u=i.get(e);return u||(u=new n(t,new OA(t),e),i.set(e,u)),u},n}();PA.su=new WeakMap;var r0=function(){function n(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new OA(t)}return n.iu=function(t,e,r){if(t.length%2!=0)throw new it(ke.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new n(e,new Pi(e._delegate,r,new Vt(t)))},n.eu=function(t,e,r){return new n(e,new Pi(e._delegate,r,t))},Object.defineProperty(n.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new FA(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new FA(this.firestore,UU(this._delegate,t))}catch(e){throw vu(e,"collection()","DocumentReference.collection()")}},n.prototype.isEqual=function(t){return(t=(0,At.getModularInstance)(t))instanceof Pi&&jU(this._delegate,t)},n.prototype.set=function(t,e){e=HO("DocumentReference.set",e);try{return function(r,i,u){r=cr(r,Pi);var h=cr(r.firestore,io),_=xA(r.converter,i,u);return iT(h,[RA(Jy(h),"setDoc",r._key,_,null!==r.converter,u).toMutation(r._key,Ra.none())])}(this._delegate,t,e)}catch(r){throw vu(r,"setDoc()","DocumentReference.set()")}},n.prototype.update=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return 1===arguments.length?lj(this._delegate,t):lj.apply(void 0,(0,F.__spreadArray)([this._delegate,t,e],r))}catch(u){throw vu(u,"updateDoc()","DocumentReference.update()")}},n.prototype.delete=function(){return iT(cr((t=this._delegate).firestore,io),[new zD(t._key,Ra.none())]);var t},n.prototype.onSnapshot=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=mj(e),u=_j(e,function(h){return new oT(t.firestore,new _g(t.firestore._delegate,t._userDataWriter,h._key,h._document,h.metadata,t._delegate.converter))});return cj(this._delegate,i,u)},n.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(r){r=cr(r,Pi);var i=cr(r.firestore,io),u=Ds(i),h=new n0(i);return function(_,b){var D=this,M=new xa;return _.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(D,void 0,void 0,function(){var x;return(0,F.__generator)(this,function(L){switch(L.label){case 0:return x=function(z,W,ne){return(0,F.__awaiter)(this,void 0,void 0,function(){var fe,Se;return(0,F.__generator)(this,function(xe){switch(xe.label){case 0:return xe.trys.push([0,2,,3]),[4,(qe=z,ct=W,ut=mt(qe),ut.persistence.runTransaction("read document","readonly",function(Bt){return ut.Mn.mn(Bt,ct)}))];case 1:return(Se=xe.sent()).isFoundDocument()?ne.resolve(Se):Se.isNoDocument()?ne.resolve(null):ne.reject(new it(ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return fe=xe.sent(),Se=oC(fe,"Failed to get document '"+W+" from cache"),ne.reject(Se),[3,3];case 3:return[2]}var qe,ct,ut})})},[4,BO(_)];case 1:return[2,x.apply(void 0,[L.sent(),b,M])]}})})}),M.promise}(u,r._key).then(function(_){return new _g(i,h,r._key,_,new t0(null!==_&&_.hasLocalMutations,!0),r.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(r){r=cr(r,Pi);var i=cr(r.firestore,io);return RU(Ds(i),r._key,{source:"server"}).then(function(u){return QO(i,r,u)})}(this._delegate):function(r){r=cr(r,Pi);var i=cr(r.firestore,io);return RU(Ds(i),r._key).then(function(u){return QO(i,r,u)})}(this._delegate)).then(function(r){return new oT(e.firestore,new _g(e.firestore._delegate,e._userDataWriter,r._key,r._document,r.metadata,e._delegate.converter))})},n.prototype.withConverter=function(t){return new n(this.firestore,this._delegate.withConverter(t?PA.nu(this.firestore,t):null))},n}();function vu(n,t,e){return n.message=n.message.replace(t,e),n}function mj(n){for(var t=0,e=n;t<e.length;t++){var r=e[t];if("object"==typeof r&&!uC(r))return r}return{}}function _j(n,t){var e,r,i;return{next:function(u){i.next&&i.next(t(u))},error:null===(e=(i=uC(n[0])?n[0]:uC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]}).error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var oT=function(){function n(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(n.prototype,"ref",{get:function(){return new r0(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),n.prototype.data=function(t){return this._delegate.data(t)},n.prototype.get=function(t,e){return this._delegate.get(t,e)},n.prototype.isEqual=function(t){return ej(this._delegate,t._delegate)},n}(),sT=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return(0,F.__extends)(t,n),t.prototype.data=function(e){return this._delegate.data(e)},t}(oT),aT=function(){function n(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new OA(t)}return n.prototype.where=function(t,e,r){try{return new n(this.firestore,L_(this._delegate,(h=r,_=e,b=kA("where",i=t),new g$(b,_,h))))}catch(i){throw vu(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,h,_,b},n.prototype.orderBy=function(t,e){try{return new n(this.firestore,L_(this._delegate,function(r,i){void 0===i&&(i="asc");var u=i,h=kA("orderBy",r);return new m$(h,u)}(t,e)))}catch(r){throw vu(r,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.limit=function(t){try{return new n(this.firestore,L_(this._delegate,(VU("limit",e=t),new nj("limit",e,"F"))))}catch(e){throw vu(e,"limit()","Query.limit()")}var e},n.prototype.limitToLast=function(t){try{return new n(this.firestore,L_(this._delegate,(VU("limitToLast",e=t),new nj("limitToLast",e,"L"))))}catch(e){throw vu(e,"limitToLast()","Query.limitToLast()")}var e},n.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,L_(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new rj("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw vu(r,"startAt()","Query.startAt()")}},n.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,L_(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new rj("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw vu(r,"startAfter()","Query.startAfter()")}},n.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,L_(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new ij("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw vu(r,"endBefore()","Query.endBefore()")}},n.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,L_(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new ij("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw vu(r,"endAt()","Query.endAt()")}},n.prototype.isEqual=function(t){return HU(this._delegate,t._delegate)},n.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(r){r=cr(r,fl);var i=cr(r.firestore,io),u=Ds(i),h=new n0(i);return function(_,b){var D=this,M=new xa;return _.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(D,void 0,void 0,function(){var x;return(0,F.__generator)(this,function(L){switch(L.label){case 0:return x=function(z,W,ne){return(0,F.__awaiter)(this,void 0,void 0,function(){var fe,Se,xe,qe,ct;return(0,F.__generator)(this,function(ut){switch(ut.label){case 0:return ut.trys.push([0,2,,3]),[4,yA(z,W,!0)];case 1:return ct=ut.sent(),fe=new _U(W,ct.Bn),Se=fe._o(ct.documents),xe=fe.applyChanges(Se,!1),ne.resolve(xe.snapshot),[3,3];case 2:return qe=ut.sent(),ct=oC(qe,"Failed to execute query '"+W+" against cache"),ne.reject(ct),[3,3];case 3:return[2]}})})},[4,BO(_)];case 1:return[2,x.apply(void 0,[L.sent(),b,M])]}})})}),M.promise}(u,r._query).then(function(_){return new F_(i,h,r,_)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(r){r=cr(r,fl);var i=cr(r.firestore,io),u=Ds(i),h=new n0(i);return NU(u,r._query,{source:"server"}).then(function(_){return new F_(i,h,r,_)})}(this._delegate):function(r){r=cr(r,fl);var i=cr(r.firestore,io),u=Ds(i),h=new n0(i);return tj(r._query),NU(u,r._query).then(function(_){return new F_(i,h,r,_)})}(this._delegate)).then(function(r){return new XO(e.firestore,new F_(e.firestore._delegate,e._userDataWriter,e._delegate,r._snapshot))})},n.prototype.onSnapshot=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=mj(e),u=_j(e,function(h){return new XO(t.firestore,new F_(t.firestore._delegate,t._userDataWriter,t._delegate,h._snapshot))});return cj(this._delegate,i,u)},n.prototype.withConverter=function(t){return new n(this.firestore,this._delegate.withConverter(t?PA.nu(this.firestore,t):null))},n}(),C$=function(){function n(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(n.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return new sT(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),n}(),XO=function(){function n(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(n.prototype,"query",{get:function(){return new aT(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new sT(t._firestore,e)})},enumerable:!1,configurable:!0}),n.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(r){return new C$(e._firestore,r)})},n.prototype.forEach=function(t,e){var r=this;this._delegate.forEach(function(i){t.call(e,new sT(r._firestore,i))})},n.prototype.isEqual=function(t){return ej(this._delegate,t._delegate)},n}(),FA=function(n){function t(e,r){var i=this;return(i=n.call(this,e,r)||this).firestore=e,i._delegate=r,i}return(0,F.__extends)(t,n),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new r0(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new r0(this.firestore,void 0===e?AA(this._delegate):AA(this._delegate,e))}catch(r){throw vu(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var i,u,h,_,b,r=this;return(i=this._delegate,u=e,h=cr(i.firestore,io),_=AA(i),b=xA(i.converter,u),iT(h,[RA(Jy(i.firestore),"addDoc",_._key,b,null!==i.converter,{}).toMutation(_._key,Ra.exists(!1))]).then(function(){return _})).then(function(i){return new r0(r.firestore,i)})},t.prototype.isEqual=function(e){return jU(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?PA.nu(this.firestore,e):null))},t}(aT);function o0(n){return cr(n,Pi)}var E$=function(){function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(xf.bind.apply(xf,(0,F.__spreadArray)([void 0],t)))}return n.documentId=function(){return new n(Sh.keyField().canonicalString())},n.prototype.isEqual=function(t){return(t=(0,At.getModularInstance)(t))instanceof xf&&this._delegate._internalPath.isEqual(t._internalPath)},n}(),D$=function(){function n(t){this._delegate=t}return n.serverTimestamp=function(){var t=new u$("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new n(t)},n.delete=function(){var t=new GO("deleteField");return t._methodName="FieldValue.delete",new n(t)},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return new l$("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new n(r)},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return new c$("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new n(r)},n.increment=function(t){var e=new d$("increment",t);return e._methodName="FieldValue.increment",new n(e)},n.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},n}();function T$(n){return e=n,r=Ds(t=cr(t=this._delegate,io)),i=new r$,function(u,h,_,b){var x,L,z,D=this,M=(x=_,L=ZD(h),z=function(z,W){if(z instanceof Uint8Array)return TU(z,W);if(z instanceof ArrayBuffer)return TU(new Uint8Array(z),W);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof x?(new TextEncoder).encode(x):x),new Wz(z,L));u.asyncQueue.enqueueAndForget(function(){return(0,F.__awaiter)(D,void 0,void 0,function(){var x;return(0,F.__generator)(this,function(L){switch(L.label){case 0:return x=$z,[4,UO(u)];case 1:return x.apply(void 0,[L.sent(),M,b]),[2]}})})})}(r,t._databaseId,e,i),i;var t,e,r,i}function S$(n){var t,e,r=this;return(t=this._delegate,e=n,function(i,u){var h=this;return i.asyncQueue.enqueue(function(){return(0,F.__awaiter)(h,void 0,void 0,function(){var _;return(0,F.__generator)(this,function(b){switch(b.label){case 0:return _=function(D,M){var x=mt(D);return x.persistence.runTransaction("Get named query","readonly",function(L){return x.Ke.getNamedQuery(L,M)})},[4,BO(i)];case 1:return[2,_.apply(void 0,[b.sent(),u])]}})})})}(Ds(t=cr(t,io)),e).then(function(i){return i?new fl(t,null,i.query):null})).then(function(i){return i?new aT(r,i):null})}var vg=J(8391),I$={Firestore:ZO,GeoPoint:MA,Timestamp:cl,Blob:fj,Transaction:pj,WriteBatch:gj,DocumentReference:r0,DocumentSnapshot:oT,Query:aT,QueryDocumentSnapshot:sT,QuerySnapshot:XO,CollectionReference:FA,FieldPath:E$,FieldValue:D$,setLogLevel:function(n){Th.setLogLevel(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){n.INTERNAL.registerComponent(new vg.Component("firestore",function(r){return t=r.getProvider("app").getImmediate(),e=r.getProvider("auth-internal"),new ZO(t,new io(t,e),new b$);var t,e},"PUBLIC").setServiceProps(Object.assign({},I$))),n.registerVersion("@firebase/firestore","2.4.0")}(ll.default);var M$=J(1733);class R$ extends on.x{constructor(t=1/0,e=1/0,r=M$.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:h}=this;e||(r.push(t),!i&&r.push(u.now()+h)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let h=0;h<u.length&&!t.closed;h+=r?1:2)t.next(u[h]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*t;if(t<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const h=e.now();let _=0;for(let b=1;b<r.length&&r[b]<=h;b+=2)_=b;_&&r.splice(0,_+1)}}}function vj(n,t,e){var r,i;let u,h=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,t=null!==(i=n.windowTime)&&void 0!==i?i:1/0,h=!!n.refCount,e=n.scheduler):u=null!=n?n:1/0,(0,Mp.B)({connector:()=>new R$(u,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}function yj(n,t){return(0,xn.m)(t)?Er(()=>n,t):Er(()=>n)}var JO=J(5222);const LA=new c.OlP("angularfire2.auth.use-emulator"),bj=new c.OlP("angularfire2.auth.settings"),wj=new c.OlP("angularfire2.auth.tenant-id"),Cj=new c.OlP("angularfire2.auth.langugage-code"),Ej=new c.OlP("angularfire2.auth.use-device-language"),Dj=new c.OlP("angularfire.auth.persistence");let eP=(()=>{class n{constructor(e,r,i,u,h,_,b,D,M,x){const L=new Mo.HU(u),z=(0,Mo.ss)(L),W=new on.x,ne=Et(void 0).pipe((0,Fy.Q)(L.outsideAngular),Er(()=>u.runOutsideAngular(()=>J.e(322).then(J.bind(J,8322)))),(0,Nt.U)(()=>(0,Mo.on)(e,u,r)),(0,Nt.U)(fe=>u.runOutsideAngular(()=>{const Se=h,xe=_;return(0,Mo.sI)(`${fe.name}.auth`,"AngularFireAuth",fe,()=>{const qe=u.runOutsideAngular(()=>fe.auth());if(Se&&qe.useEmulator(`http://${Se.join(":")}`),b&&(qe.tenantId=b),qe.languageCode=D,M&&qe.useDeviceLanguage(),xe)for(const[ct,ut]of Object.entries(xe))qe.settings[ct]=ut;return x&&qe.setPersistence(x),qe},[Se,b,D,M,xe,x])})),vj({bufferSize:1,refCount:!1}));if(ci(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{ne.pipe(pa()).subscribe();const Se=ne.pipe(Er(ut=>ut.getRedirectResult().then(Bt=>Bt,()=>null)),z,vj({bufferSize:1,refCount:!1})),xe=ut=>new Ln.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>ut(Bt))})),qe=ne.pipe(Er(ut=>xe(ut.onAuthStateChanged.bind(ut)))),ct=ne.pipe(Er(ut=>xe(ut.onIdTokenChanged.bind(ut))));this.authState=Se.pipe(yj(qe),(0,JO.R)(L.outsideAngular),(0,Fy.Q)(L.insideAngular)),this.user=Se.pipe(yj(ct),(0,JO.R)(L.outsideAngular),(0,Fy.Q)(L.insideAngular)),this.idToken=this.user.pipe(Er(ut=>ut?(0,zn.D)(ut.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(Er(ut=>ut?(0,zn.D)(ut.getIdTokenResult()):Et(null))),this.credential=(0,to.T)(Se,W,this.authState.pipe(dr(ut=>!ut))).pipe((0,Nt.U)(ut=>(null==ut?void 0:ut.user)?ut:null),(0,JO.R)(L.outsideAngular),(0,Fy.Q)(L.insideAngular))}return(0,Mo.pX)(this,ne,u,{spy:{apply:(fe,Se,xe)=>{(fe.startsWith("signIn")||fe.startsWith("createUser"))&&xe.then(qe=>W.next(qe))}}})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Mo.Dh),c.LFG(Mo.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(LA,8),c.LFG(bj,8),c.LFG(wj,8),c.LFG(Cj,8),c.LFG(Ej,8),c.LFG(Dj,8))},n.\u0275prov=c.Yz7({factory:function(){return new n(c.LFG(Mo.Dh),c.LFG(Mo.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(LA,8),c.LFG(bj,8),c.LFG(wj,8),c.LFG(Cj,8),c.LFG(Ej,8),c.LFG(Dj,8))},token:n,providedIn:"any"}),n})(),k$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[eP]}),n})();function Tj(n,t){return function(n,t=tf.z){return new Ln.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function tP(n,t){return Tj(n,t).pipe((0,Nt.U)(e=>({payload:e,type:"query"})))}function VA(n,t){return tP(n,t).pipe(Bc(void 0),Zk(),(0,Nt.U)(([e,r])=>{const i=r.payload.docChanges(),u=i.map(h=>({type:h.type,payload:h}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,_)=>{const b=i.find(M=>M.doc.ref.isEqual(h.ref)),D=null==e?void 0:e.payload.docs.find(M=>M.ref.isEqual(h.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(h.metadata)||!b&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:h}})}),u}))}function Sj(n,t,e){return VA(n,e).pipe(Uc((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return nP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return nP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return nP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),t),[]),function(n,t=Sl.y){return n=null!=n?n:su,(0,Mi.e)((e,r)=>{let i,u=!0;e.subscribe(new qn.Q(r,h=>{const _=t(h);(u||!n(i,_))&&(u=!1,i=_,r.next(h))}))})}(),(0,Nt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function nP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function Ij(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Aj{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=VA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Nt.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(Bc(void 0),Zk(),dr(([r,i])=>i.length>0||!r),(0,Nt.U)(([r,i])=>i),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Uc((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=Ij(t);return Sj(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return tP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,zn.D)(this.query.get(t)).pipe((0,Fy.Q)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Mj(this.ref.doc(t),this.afs)}}class Mj{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:u}=kj(r,e);return new Aj(i,u,this.afs)}snapshotChanges(){return function(n,t){return Tj(n,t).pipe(Bc(void 0),Zk(),(0,Nt.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Nt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,zn.D)(this.ref.get(t)).pipe((0,Fy.Q)(this.afs.schedulers.insideAngular))}}class L${constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?VA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),dr(e=>e.length>0),this.afs.keepUnstableUntilFirst):VA(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Uc((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=Ij(t);return Sj(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return tP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,zn.D)(this.query.get(t)).pipe((0,Fy.Q)(this.afs.schedulers.insideAngular))}}const rP=new c.OlP("angularfire2.enableFirestorePersistence"),iP=new c.OlP("angularfire2.firestore.persistenceSettings"),Rj=new c.OlP("angularfire2.firestore.settings"),Nj=new c.OlP("angularfire2.firestore.use-emulator");function kj(n,t=(e=>e)){return{query:t(n),ref:n}}let xj=(()=>{class n{constructor(e,r,i,u,h,_,b,D,M){this.schedulers=new Mo.HU(_),this.keepUnstableUntilFirst=(0,Mo.ss)(this.schedulers);const x=(0,Mo.on)(e,_,r);!kG.Z.auth&&M&&(0,Mo.yq)();const L=D;[this.firestore,this.persistenceEnabled$]=(0,Mo.sI)(`${x.name}.firestore`,"AngularFirestore",x,()=>{const z=_.runOutsideAngular(()=>x.firestore());if(u&&z.settings(u),L&&z.useEmulator(...L),i&&!ci(h)){const W=()=>{try{return(0,zn.D)(z.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ne){return"undefined"!=typeof console&&console.warn(ne),Et(!1)}};return[z,_.runOutsideAngular(W)]}return[z,Et(!1)]},[u,L,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:u,query:h}=kj(i,r),_=this.schedulers.ngZone.run(()=>u);return new Aj(_,h,this)}collectionGroup(e,r){const i=r||(h=>h),u=this.firestore.collectionGroup(e);return new L$(i(u),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new Mj(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Mo.Dh),c.LFG(Mo.xv,8),c.LFG(rP,8),c.LFG(Rj,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(iP,8),c.LFG(Nj,8),c.LFG(LA,8))},n.\u0275prov=c.Yz7({factory:function(){return new n(c.LFG(Mo.Dh),c.LFG(Mo.xv,8),c.LFG(rP,8),c.LFG(Rj,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(iP,8),c.LFG(Nj,8),c.LFG(LA,8))},token:n,providedIn:"any"}),n})(),V$=(()=>{class n{static enablePersistence(e){return{ngModule:n,providers:[{provide:rP,useValue:!0},{provide:iP,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[xj]}),n})();const Oj_firebase={apiKey:"AIzaSyBeJYQVV2y7aS3CBiBR5XHaB2_GVuvE8dE",authDomain:"musiclibrary-b2320.firebaseapp.com",projectId:"musiclibrary-b2320",storageBucket:"musiclibrary-b2320.appspot.com",messagingSenderId:"177761232797",appId:"1:177761232797:web:486c3927d053d9e191f174",measurementId:"G-GPPQYZ066D"},B$=[];let U$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[$.forRoot(B$)],$]}),n})(),BA=(()=>{class n{constructor(e){this.db=e}save(e){this.db.doc("/users/"+e.uid).set({name:e.displayName,email:e.email},{merge:!0}).then(()=>console.log("user saved successfully")).catch(r=>console.log("user save failed:",r))}get(e){return this.db.doc("/users/"+e).valueChanges()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(xj))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();J(6779),J(6522),function(n){n.prototype.loadBundle=T$,n.prototype.namedQuery=S$}(ZO);var Pj={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},lC=function(n){function t(e,r,i){var u=n.call(this,r)||this;return Object.setPrototypeOf(u,t.prototype),u.code=e,u.details=i,u}return(0,F.__extends)(t,n),t}(Error),z$=function(){function n(t,e){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||e.get().then(function(i){return r.messaging=i},function(){})}return n.prototype.getAuthToken=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},n.prototype.getInstanceIdToken=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},n.prototype.getContext=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return e=r.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},n}();function Fj(n,t){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[r]=t(n[r]));return e}var W$=function(){function n(){}return n.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t)||!0===t||!1===t||"[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(r){return e.encode(r)});if("function"==typeof t||"object"==typeof t)return Fj(t,function(r){return e.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},n.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return e.decode(i)}):"function"==typeof t||"object"==typeof t?Fj(t,function(i){return e.decode(i)}):t},n}(),Lj=function(){function n(t,e,r,i,u,h){var _=this;void 0===u&&(u="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=h,this.serializer=new W$,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(_.deleteService())}},this.contextProvider=new z$(e,r),this.cancelAllRequests=new Promise(function(D){_.deleteService=function(){return D()}});try{var b=new URL(u);this.customDomain=b.origin,this.region="us-central1"}catch(D){this.customDomain=null,this.region=u}}return Object.defineProperty(n.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),n.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},n.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},n.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},n.prototype.httpsCallable=function(t,e){var r=this;return function(i){return r.call(t,i,e||{})}},n.prototype.postJSON=function(t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(i=_.sent())&&(r["X-Firebase-AppCheck"]=i),_.label=2;case 2:return _.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:r})];case 3:return u=_.sent(),[3,5];case 4:return _.sent(),[2,{status:0,json:null}];case 5:h=null,_.label=6;case 6:return _.trys.push([6,8,,9]),[4,u.json()];case 7:return h=_.sent(),[3,9];case 8:return _.sent(),[3,9];case 9:return[2,{status:u.status,json:h}]}})})},n.prototype.getAppCheckToken=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,r.sent().token];case 2:return[2,null]}})})},n.prototype.call=function(t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h,_,D,M,x,L,z,W;return(0,F.__generator)(this,function(fe){switch(fe.label){case 0:return i=this._url(t),e=this.serializer.encode(e),u={data:e},h={},[4,this.contextProvider.getContext()];case 1:return(_=fe.sent()).authToken&&(h.Authorization="Bearer "+_.authToken),_.instanceIdToken&&(h["Firebase-Instance-ID-Token"]=_.instanceIdToken),D=function(n){var t,e=new Promise(function(r,i){t=setTimeout(function(){i(new lC("deadline-exceeded","deadline-exceeded"))},n)});return{timer:t,promise:e}}(r.timeout||7e4),M=D.timer,x=D.promise,[4,Promise.race([Vj(M,this.postJSON(i,u,h)),x,Vj(M,this.cancelAllRequests)])];case 2:if(!(L=fe.sent()))throw new lC("cancelled","Firebase Functions instance was deleted.");if(z=function(n,t,e){var r=function(n){if(n>=200&&n<300)return"ok";switch(n){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(n),i=r,u=void 0;try{var h=t&&t.error;if(h){var _=h.status;if("string"==typeof _){if(!Pj[_])return new lC("internal","internal");r=Pj[_],i=_}var b=h.message;"string"==typeof b&&(i=b),void 0!==(u=h.details)&&(u=e.decode(u))}}catch(D){}return"ok"===r?null:new lC(r,i,u)}(L.status,L.json,this.serializer),z)throw z;if(!L.json)throw new lC("internal","Response is not valid JSON object.");if(void 0===(W=L.json.data)&&(W=L.json.result),void 0===W)throw new lC("internal","Response is missing data field.");return[2,{data:this.serializer.decode(W)}]}})})},n}();function Vj(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return e=r.sent(),clearTimeout(n),[2,e]}})})}(function(n,t){var e={Functions:Lj};n.INTERNAL.registerComponent(new vg.Component("functions",function(i,u){var h=u.instanceIdentifier,_=i.getProvider("app").getImmediate(),b=i.getProvider("auth-internal"),D=i.getProvider("app-check-internal"),M=i.getProvider("messaging");return new Lj(_,b,M,D,h,t)},"PUBLIC").setServiceProps(e).setMultipleInstances(!0))})(ll.default,fetch.bind(self)),ll.default.registerVersion("@firebase/functions","0.6.15");var B_,cC=J(4995),jj="w:0.4.32",iq=((B_={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',B_["not-registered"]="Firebase Installation is not registered.",B_["installation-not-found"]="Firebase Installation not found.",B_["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',B_["app-offline"]="Could not process request. Application offline.",B_["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",B_),yg=new At.ErrorFactory("installations","Installations",iq);function Gj(n){return n instanceof At.FirebaseError&&n.code.includes("request-failed")}function oP(n){return"https://firebaseinstallations.googleapis.com/v1/projects/"+n.projectId+"/installations"}function zj(n){return{token:n.token,requestStatus:2,expiresIn:oq(n.expiresIn),creationTime:Date.now()}}function sP(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return e=i.sent(),[2,yg.create("request-failed",{requestName:n,serverCode:(r=e.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function $j(n){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey})}function qj(n,t){var e=t.refreshToken,r=$j(n);return r.append("Authorization",function(n){return"FIS_v2 "+n}(e)),r}function aP(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return(t=e.sent()).status>=500&&t.status<600?[2,n()]:[2,t]}})})}function oq(n){return Number(n.replace("s","000"))}function aq(n,t){var e=t.fid;return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,h,_,b;return(0,F.__generator)(this,function(M){switch(M.label){case 0:return r=oP(n),i=$j(n),h={method:"POST",headers:i,body:JSON.stringify({fid:e,authVersion:"FIS_v2",appId:n.appId,sdkVersion:jj})},[4,aP(function(){return fetch(r,h)})];case 1:return(_=M.sent()).ok?[4,_.json()]:[3,3];case 2:return[2,{fid:(b=M.sent()).fid||e,registrationStatus:2,refreshToken:b.refreshToken,authToken:zj(b.authToken)}];case 3:return[4,sP("Create Installation",_)];case 4:throw M.sent()}})})}function Wj(n){return new Promise(function(t){setTimeout(t,n)})}var lq=/^[cdef][\w-]{21}$/;function cq(){try{var n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;var e=function(n){return function(n){return btoa(String.fromCharCode.apply(String,(0,F.__spreadArray)([],(0,F.__read)(n)))).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return lq.test(e)?e:""}catch(r){return""}}function dC(n){return n.appName+"!"+n.appId}var hC=new Map;function Yj(n,t){var e=dC(n);Kj(e,t),function(n,t){var e=Qj();e&&e.postMessage({key:n,fid:t}),Zj()}(e,t)}function Kj(n,t){var e,r,i=hC.get(n);if(i)try{for(var u=(0,F.__values)(i),h=u.next();!h.done;h=u.next())(0,h.value)(t)}catch(b){e={error:b}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}}var s0=null;function Qj(){return!s0&&"BroadcastChannel"in self&&((s0=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(n){Kj(n.data.key,n.data.fid)}),s0}function Zj(){0===hC.size&&s0&&(s0.close(),s0=null)}var a0="firebase-installations-store",lP=null;function cP(){return lP||(lP=(0,cC.openDb)("firebase-installations-database",1,function(n){0===n.oldVersion&&n.createObjectStore(a0)})),lP}function UA(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return e=dC(n),[4,cP()];case 1:return r=_.sent(),i=r.transaction(a0,"readwrite"),[4,(u=i.objectStore(a0)).get(e)];case 2:return h=_.sent(),[4,u.put(t,e)];case 3:return _.sent(),[4,i.complete];case 4:return _.sent(),(!h||h.fid!==t.fid)&&Yj(n,t.fid),[2,t]}})})}function dP(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return t=dC(n),[4,cP()];case 1:return e=i.sent(),[4,(r=e.transaction(a0,"readwrite")).objectStore(a0).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function uT(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,h,_;return(0,F.__generator)(this,function(b){switch(b.label){case 0:return e=dC(n),[4,cP()];case 1:return r=b.sent(),i=r.transaction(a0,"readwrite"),[4,(u=i.objectStore(a0)).get(e)];case 2:return h=b.sent(),void 0!==(_=t(h))?[3,4]:[4,u.delete(e)];case 3:return b.sent(),[3,6];case 4:return[4,u.put(_,e)];case 5:b.sent(),b.label=6;case 6:return[4,i.complete];case 7:return b.sent(),_&&(!h||h.fid!==_.fid)&&Yj(n,_.fid),[2,_]}})})}function hP(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,uT(n,function(u){var h=function(n){return Jj(n||{fid:cq(),registrationStatus:0})}(u),_=function(n,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(yg.create("app-offline"))};var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,aq(n,t)];case 1:return e=i.sent(),[2,UA(n,e)];case 2:return Gj(r=i.sent())&&409===r.customData.serverCode?[4,dP(n)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,UA(n,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(n,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:bq(n)}:{installationEntry:t}}(n,h);return t=_.registrationPromise,_.installationEntry})];case 1:return""!==(e=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:e,registrationPromise:t}]}})})}function bq(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,Xj(n)];case 1:t=u.sent(),u.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,Wj(100)];case 3:return u.sent(),[4,Xj(n)];case 4:return t=u.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,hP(n)];case 6:return e=u.sent(),r=e.installationEntry,(i=e.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}})})}function Xj(n){return uT(n,function(t){if(!t)throw yg.create("installation-not-found");return Jj(t)})}function Jj(n){return function(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Cq(n,t){var e=n.appConfig,r=n.platformLoggerProvider;return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h,b,D;return(0,F.__generator)(this,function(L){switch(L.label){case 0:return i=function(n,t){var e=t.fid;return oP(n)+"/"+e+"/authTokens:generate"}(e,t),u=qj(e,t),(h=r.getImmediate({optional:!0}))&&u.append("x-firebase-client",h.getPlatformInfoString()),b={method:"POST",headers:u,body:JSON.stringify({installation:{sdkVersion:jj}})},[4,aP(function(){return fetch(i,b)})];case 1:return(D=L.sent()).ok?[4,D.json()]:[3,3];case 2:return[2,zj(L.sent())];case 3:return[4,sP("Generate Auth Token",D)];case 4:throw L.sent()}})})}function fP(n,t){return void 0===t&&(t=!1),(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return[4,uT(n.appConfig,function(_){if(!t4(_))throw yg.create("not-registered");var b=_.authToken;if(!t&&function(n){return 2===n.requestStatus&&!function(n){var t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+36e5}(n)}(b))return _;if(1===b.requestStatus)return e=function(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,e4(n.appConfig)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,Wj(100)];case 3:return i.sent(),[4,e4(n.appConfig)];case 4:return e=i.sent(),[3,2];case 5:return 0===(r=e.authToken).requestStatus?[2,fP(n,t)]:[2,r]}})})}(n,t),_;if(!navigator.onLine)throw yg.create("app-offline");var D=function(n){var t={requestStatus:1,requestTime:Date.now()};return(0,F.__assign)((0,F.__assign)({},n),{authToken:t})}(_);return e=function(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,i,r;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,8]),[4,Cq(n,t)];case 1:return e=u.sent(),r=(0,F.__assign)((0,F.__assign)({},t),{authToken:e}),[4,UA(n.appConfig,r)];case 2:return u.sent(),[2,e];case 3:return!Gj(i=u.sent())||401!==i.customData.serverCode&&404!==i.customData.serverCode?[3,5]:[4,dP(n.appConfig)];case 4:return u.sent(),[3,7];case 5:return r=(0,F.__assign)((0,F.__assign)({},t),{authToken:{requestStatus:0}}),[4,UA(n.appConfig,r)];case 6:u.sent(),u.label=7;case 7:throw i;case 8:return[2]}})})}(n,D),D})];case 1:return r=h.sent(),e?[4,e]:[3,3];case 2:return u=h.sent(),[3,4];case 3:u=r.authToken,h.label=4;case 4:return[2,u]}})})}function e4(n){return uT(n,function(t){if(!t4(t))throw yg.create("not-registered");return function(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(t.authToken)?(0,F.__assign)((0,F.__assign)({},t),{authToken:{requestStatus:0}}):t})}function t4(n){return void 0!==n&&2===n.registrationStatus}function kq(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return[4,hP(n)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}function xq(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return e=function(n,t){var e=t.fid;return oP(n)+"/"+e}(n,t),r=qj(n,t),i={method:"DELETE",headers:r},[4,aP(function(){return fetch(e,i)})];case 1:return(u=h.sent()).ok?[3,3]:[4,sP("Delete Installation",u)];case 2:throw h.sent();case 3:return[2]}})})}function pP(n){return yg.create("missing-app-config-values",{valueName:n})}!function(n){n.INTERNAL.registerComponent(new vg.Component("installations",function(e){var r=e.getProvider("app").getImmediate(),i=function(n){var t,e;if(!n||!n.options)throw pP("App Configuration");if(!n.name)throw pP("App Name");try{for(var i=(0,F.__values)(["projectId","apiKey","appId"]),u=i.next();!u.done;u=i.next()){var h=u.value;if(!n.options[h])throw pP(h)}}catch(_){t={error:_}}finally{try{u&&!u.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(r),h={appConfig:i,platformLoggerProvider:e.getProvider("platform-logger")},_={app:r,getId:function(){return function(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,hP(n.appConfig)];case 1:return t=i.sent(),e=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):fP(n).catch(console.error),[2,e.fid]}})})}(h)},getToken:function(b){return function(n,t){return void 0===t&&(t=!1),(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,kq(n.appConfig)];case 1:return r.sent(),[4,fP(n,t)];case 2:return[2,r.sent().token]}})})}(h,b)},delete:function(){return function(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,uT(t=n.appConfig,function(i){if(!i||0!==i.registrationStatus)return i})];case 1:if(!(e=r.sent()))return[3,6];if(1!==e.registrationStatus)return[3,2];throw yg.create("delete-pending-registration");case 2:if(2!==e.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw yg.create("app-offline");case 3:return[4,xq(t,e)];case 4:return r.sent(),[4,dP(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(h)},onIdChange:function(b){return function(n,t){var e=n.appConfig;return function(n,t){Qj();var e=dC(n),r=hC.get(e);r||(r=new Set,hC.set(e,r)),r.add(t)}(e,t),function(){!function(n,t){var e=dC(n),r=hC.get(e);!r||(r.delete(t),0===r.size&&hC.delete(e),Zj())}(e,t)}}(h,b)}};return _},"PUBLIC")),n.registerVersion("@firebase/installations","0.4.32")}(ll.default);var Xo,Bq=((Xo={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Xo["only-available-in-window"]="This method is available in a Window context.",Xo["only-available-in-sw"]="This method is available in a service worker context.",Xo["permission-default"]="The notification permission was not granted and dismissed instead.",Xo["permission-blocked"]="The notification permission was not granted and blocked instead.",Xo["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Xo["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Xo["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Xo["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Xo["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Xo["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Xo["token-update-no-token"]="FCM returned no token when updating the user to push.",Xo["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Xo["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Xo["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Xo["invalid-vapid-key"]="The public VAPID key must be a string.",Xo["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Xo),Ir=new At.ErrorFactory("messaging","Messaging",Bq),jA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",n4="FCM_MSG",r4="google.c.a.c_id",U_=(()=>(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(U_||(U_={})),U_))();function bg(n){var t=new Uint8Array(n);return btoa(String.fromCharCode.apply(String,(0,F.__spreadArray)([],(0,F.__read)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Kq(n){for(var e=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(e),i=new Uint8Array(r.length),u=0;u<r.length;++u)i[u]=r.charCodeAt(u);return i}var gP="fcm_token_details_db",o4="fcm_token_object_Store";function Zq(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,u=this;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!h.sent().map(function(_){return _.name}).includes(gP))return[2,null];h.label=2;case 2:return r=null,[4,(0,cC.openDb)(gP,5,function(_){return(0,F.__awaiter)(u,void 0,void 0,function(){var b,D,M,x;return(0,F.__generator)(this,function(L){switch(L.label){case 0:return _.oldVersion<2?[2]:_.objectStoreNames.contains(o4)?[4,(b=_.transaction.objectStore(o4)).index("fcmSenderId").get(n)]:[2];case 1:return D=L.sent(),[4,b.clear()];case 2:if(L.sent(),!D)return[2];if(2===_.oldVersion){if(!(M=D).auth||!M.p256dh||!M.endpoint)return[2];r={token:M.fcmToken,createTime:null!==(x=M.createTime)&&void 0!==x?x:Date.now(),subscriptionOptions:{auth:M.auth,p256dh:M.p256dh,endpoint:M.endpoint,swScope:M.swScope,vapidKey:"string"==typeof M.vapidKey?M.vapidKey:bg(M.vapidKey)}}}else(3===_.oldVersion||4===_.oldVersion)&&(r={token:(M=D).fcmToken,createTime:M.createTime,subscriptionOptions:{auth:bg(M.auth),p256dh:bg(M.p256dh),endpoint:M.endpoint,swScope:M.swScope,vapidKey:bg(M.vapidKey)}});return[2]}})})})];case 3:return h.sent().close(),[4,(0,cC.deleteDb)(gP)];case 4:return h.sent(),[4,(0,cC.deleteDb)("fcm_vapid_details_db")];case 5:return h.sent(),[4,(0,cC.deleteDb)("undefined")];case 6:return h.sent(),[2,Xq(r)?r:null]}})})}function Xq(n){if(!n||!n.subscriptionOptions)return!1;var t=n.subscriptionOptions;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var u0="firebase-messaging-store",mP=null;function _P(){return mP||(mP=(0,cC.openDb)("firebase-messaging-database",1,function(n){0===n.oldVersion&&n.createObjectStore(u0)})),mP}function HA(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return t=yP(n),[4,_P()];case 1:return[4,u.sent().transaction(u0).objectStore(u0).get(t)];case 2:return(r=u.sent())?[2,r]:[3,3];case 3:return[4,Zq(n.appConfig.senderId)];case 4:return(i=u.sent())?[4,vP(n,i)]:[3,6];case 5:return u.sent(),[2,i];case 6:return[2]}})})}function vP(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return e=yP(n),[4,_P()];case 1:return r=u.sent(),[4,(i=r.transaction(u0,"readwrite")).objectStore(u0).put(t,e)];case 2:return u.sent(),[4,i.complete];case 3:return u.sent(),[2,t]}})})}function tW(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return t=yP(n),[4,_P()];case 1:return e=i.sent(),[4,(r=e.transaction(u0,"readwrite")).objectStore(u0).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function yP(n){return n.appConfig.appId}function nW(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,_;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return[4,wP(n)];case 1:e=D.sent(),r=a4(t),i={method:"POST",headers:e,body:JSON.stringify(r)},D.label=2;case 2:return D.trys.push([2,5,,6]),[4,fetch(bP(n.appConfig),i)];case 3:return[4,D.sent().json()];case 4:return u=D.sent(),[3,6];case 5:throw _=D.sent(),Ir.create("token-subscribe-failed",{errorInfo:_});case 6:if(u.error)throw Ir.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw Ir.create("token-subscribe-no-token");return[2,u.token]}})})}function rW(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,_;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return[4,wP(n)];case 1:e=D.sent(),r=a4(t.subscriptionOptions),i={method:"PATCH",headers:e,body:JSON.stringify(r)},D.label=2;case 2:return D.trys.push([2,5,,6]),[4,fetch(bP(n.appConfig)+"/"+t.token,i)];case 3:return[4,D.sent().json()];case 4:return u=D.sent(),[3,6];case 5:throw _=D.sent(),Ir.create("token-update-failed",{errorInfo:_});case 6:if(u.error)throw Ir.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw Ir.create("token-update-no-token");return[2,u.token]}})})}function s4(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,u,_;return(0,F.__generator)(this,function(b){switch(b.label){case 0:return[4,wP(n)];case 1:e=b.sent(),r={method:"DELETE",headers:e},b.label=2;case 2:return b.trys.push([2,5,,6]),[4,fetch(bP(n.appConfig)+"/"+t,r)];case 3:return[4,b.sent().json()];case 4:if((u=b.sent()).error)throw Ir.create("token-unsubscribe-failed",{errorInfo:u.error.message});return[3,6];case 5:throw _=b.sent(),Ir.create("token-unsubscribe-failed",{errorInfo:_});case 6:return[2]}})})}function bP(n){return"https://fcmregistrations.googleapis.com/v1/projects/"+n.projectId+"/registrations"}function wP(n){var t=n.appConfig,e=n.installations;return(0,F.__awaiter)(this,void 0,void 0,function(){var r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,e.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function a4(n){var i=n.vapidKey,u={web:{endpoint:n.endpoint,auth:n.auth,p256dh:n.p256dh}};return i!==jA&&(u.web.applicationPubKey=i),u}function CP(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:if("granted"!==Notification.permission)throw Ir.create("permission-blocked");return[4,sW(t,e)];case 1:return r=_.sent(),[4,HA(n)];case 2:return i=_.sent(),u={vapidKey:e,swScope:t.scope,endpoint:r.endpoint,auth:bg(r.getKey("auth")),p256dh:bg(r.getKey("p256dh"))},i?[3,3]:[2,u4(n,u)];case 3:if(function(n,t){return t.vapidKey===n.vapidKey&&t.endpoint===n.endpoint&&t.auth===n.auth&&t.p256dh===n.p256dh}(i.subscriptionOptions,u))return[3,8];_.label=4;case 4:return _.trys.push([4,6,,7]),[4,s4(n,i.token)];case 5:return _.sent(),[3,7];case 6:return h=_.sent(),console.warn(h),[3,7];case 7:return[2,u4(n,u)];case 8:return Date.now()>=i.createTime+6048e5?[2,oW({token:i.token,createTime:Date.now(),subscriptionOptions:u},n,t)]:[2,i.token];case 9:return[2]}})})}function lT(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,HA(n)];case 1:return(e=i.sent())?[4,s4(n,e.token)]:[3,4];case 2:return i.sent(),[4,tW(n)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function oW(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,5]),[4,rW(t,n)];case 1:return r=h.sent(),i=(0,F.__assign)((0,F.__assign)({},n),{token:r,createTime:Date.now()}),[4,vP(t,i)];case 2:return h.sent(),[2,r];case 3:return u=h.sent(),[4,lT(t,e)];case 4:throw h.sent(),u;case 5:return[2]}})})}function u4(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,nW(n,t)];case 1:return e=i.sent(),r={token:e,createTime:Date.now(),subscriptionOptions:t},[4,vP(n,r)];case 2:return i.sent(),[2,r.token]}})})}function sW(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=r.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Kq(t)})]}})})}function l4(n){return"object"==typeof n&&!!n&&r4 in n}function c4(n){return new Promise(function(t){setTimeout(t,n)})}var hW=function(){function n(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(e.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(e.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(e.onNotificationClick(r))})}return Object.defineProperty(n.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),n.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Ir.create("invalid-bg-handler");this.bgMessageHandler=t},n.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},n.prototype.getToken=function(){var t,e;return(0,F.__awaiter)(this,void 0,void 0,function(){var r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,HA(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=null!==(e=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:jA,i.label=2;case 2:return[2,CP(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},n.prototype.deleteToken=function(){return lT(this.firebaseDependencies,self.registration)},n.prototype.requestPermission=function(){throw Ir.create("only-available-in-window")},n.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Ir.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Ir.create("invalid-vapid-key");this.vapidKey=t},n.prototype.useServiceWorker=function(){throw Ir.create("only-available-in-window")},n.prototype.onMessage=function(){throw Ir.create("only-available-in-window")},n.prototype.onTokenRefresh=function(){throw Ir.create("only-available-in-window")},n.prototype.onPush=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return e=function(n){var t=n.data;if(!t)return null;try{return t.json()}catch(e){return null}}(t),e?[4,d4()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(n){return n.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(r=h.sent())?[2,_W(r,e)]:(i=!1,e.notification?[4,vW(fW(e))]:[3,3]);case 2:h.sent(),i=!0,h.label=3;case 3:return!0===i&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(u=function(n){var t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcm_message_id};return function(n,t){if(t.notification){n.notification={};var e=t.notification.title;e&&(n.notification.title=e);var r=t.notification.body;r&&(n.notification.body=r);var i=t.notification.image;i&&(n.notification.image=i)}}(t,n),function(n,t){!t.data||(n.data=t.data)}(t,n),function(n,t){if(t.fcmOptions){n.fcmOptions={};var e=t.fcmOptions.link;e&&(n.fcmOptions.link=e);var r=t.fcmOptions.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}}(t,n),t}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(u):this.bgMessageHandler.next(u)),[4,c4(1e3)]);case 4:return h.sent(),[2]}})})},n.prototype.onSubChange=function(t){var e,r;return(0,F.__awaiter)(this,void 0,void 0,function(){var u;return(0,F.__generator)(this,function(h){switch(h.label){case 0:return t.newSubscription?[3,2]:[4,lT(this.firebaseDependencies,self.registration)];case 1:case 5:return h.sent(),[2];case 2:return[4,HA(this.firebaseDependencies)];case 3:return u=h.sent(),[4,lT(this.firebaseDependencies,self.registration)];case 4:return h.sent(),[4,CP(this.firebaseDependencies,self.registration,null!==(r=null===(e=null==u?void 0:u.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==r?r:jA)]}})})},n.prototype.onNotificationClick=function(t){var e,r;return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h,_,b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return(i=null===(r=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===r?void 0:r[n4])?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),u=function(n){var t,e,r;return(null!==(e=null===(t=n.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==e?e:null===(r=n.notification)||void 0===r?void 0:r.click_action)||(l4(n.data)?self.location.origin:null)}(i),u?(h=new URL(u,self.location.href),_=new URL(self.location.origin),h.host!==_.host?[2]:[4,gW(h)]):[2]):[2];case 1:return(b=D.sent())?[3,4]:[4,self.clients.openWindow(u)];case 2:return b=D.sent(),[4,c4(3e3)];case 3:return D.sent(),[3,6];case 4:return[4,b.focus()];case 5:b=D.sent(),D.label=6;case 6:return b?(i.messageType=U_.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,b.postMessage(i)]):[2]}})})},n}();function fW(n){var t,e=(0,F.__assign)({},n.notification);return e.data=((t={})[n4]=n,t),e}function gW(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i,u,h,_;return(0,F.__generator)(this,function(b){switch(b.label){case 0:return[4,d4()];case 1:t=b.sent();try{for(e=(0,F.__values)(t),r=e.next();!r.done;r=e.next())if(i=r.value,u=new URL(i.url,self.location.href),n.host===u.host)return[2,i]}catch(D){h={error:D}}finally{try{r&&!r.done&&(_=e.return)&&_.call(e)}finally{if(h)throw h.error}}return[2,null]}})})}function _W(n,t){var e,r;t.isFirebaseMessaging=!0,t.messageType=U_.PUSH_RECEIVED;try{for(var i=(0,F.__values)(n),u=i.next();!u.done;u=i.next())u.value.postMessage(t)}catch(_){e={error:_}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}function d4(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function vW(n){var t,e=n.actions,r=Notification.maxActions;return e&&r&&e.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=n.title)&&void 0!==t?t:"",n)}var bW=function(){function n(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return e.messageEventListener(r)})}return Object.defineProperty(n.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),n.prototype.messageEventListener=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===U_.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(n){return delete n.messageType,delete n.isFirebaseMessaging,n}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),l4(r=e.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(e.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.getVapidKey=function(){return this.vapidKey},n.prototype.getSwReg=function(){return this.swRegistration},n.prototype.getToken=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Ir.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,CP(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},n.prototype.updateVapidKey=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=jA),[2]})})},n.prototype.updateSwReg=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Ir.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},n.prototype.registerDefaultSw=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=r.sent(),Ir.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},n.prototype.deleteToken=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,lT(this.firebaseDependencies,this.swRegistration)]}})})},n.prototype.requestPermission=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw Ir.create("denied"===t?"permission-blocked":"permission-default")}})})},n.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Ir.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Ir.create("invalid-vapid-key");this.vapidKey=t},n.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Ir.create("invalid-sw-registration");if(this.swRegistration)throw Ir.create("use-sw-after-get-token");this.swRegistration=t},n.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},n.prototype.setBackgroundMessageHandler=function(){throw Ir.create("only-available-in-sw")},n.prototype.onBackgroundMessage=function(){throw Ir.create("only-available-in-sw")},n.prototype.onTokenRefresh=function(){return function(){}},n.prototype.logEvent=function(t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return r=function(n){switch(n){case U_.NOTIFICATION_CLICKED:return"notification_open";case U_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return u.sent().logEvent(r,{message_id:e[r4],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},n}();function EP(n){return Ir.create("missing-app-config-values",{valueName:n})}var SW={isSupported:h4};function h4(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}ll.default.INTERNAL.registerComponent(new vg.Component("messaging",function(n){var t=n.getProvider("app").getImmediate(),e=function(n){var t,e;if(!n||!n.options)throw EP("App Configuration Object");if(!n.name)throw EP("App Name");var i=n.options;try{for(var u=(0,F.__values)(["projectId","apiKey","appId","messagingSenderId"]),h=u.next();!h.done;h=u.next()){var _=h.value;if(!i[_])throw EP(_)}}catch(b){t={error:b}}finally{try{h&&!h.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return{appName:n.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}(t),u={app:t,appConfig:e,installations:n.getProvider("installations").getImmediate(),analyticsProvider:n.getProvider("analytics-internal")};if(!h4())throw Ir.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new hW(u):new bW(u)},"PUBLIC").setServiceProps(SW));var f4="firebasestorage.googleapis.com",p4="storageBucket",Oo=function(n){function t(e,r){var i=n.call(this,DP(e),"Firebase Storage: "+r+" ("+DP(e)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return(0,F.__extends)(t,n),t.prototype._codeEquals=function(e){return DP(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),t}(At.FirebaseError);function DP(n){return"storage/"+n}function TP(){return new Oo("unknown","An unknown error occurred, please check the error payload for server response.")}function g4(){return new Oo("canceled","User canceled the upload/download.")}function m4(){return new Oo("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function fC(n){return new Oo("invalid-argument",n)}function _4(){return new Oo("app-deleted","The Firebase app was deleted.")}function v4(n){return new Oo("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cT(n,t){return new Oo("invalid-format","String does not match format '"+n+"': "+t)}function GA(n){throw new Oo("internal-error","Internal error: "+n)}var md={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},SP=function(t,e){this.data=t,this.contentType=e||null};function y4(n,t){switch(n){case md.RAW:return new SP(b4(t));case md.BASE64:case md.BASE64URL:return new SP(w4(n,t));case md.DATA_URL:return new SP(function(n){var t=new C4(n);return t.base64?w4(md.BASE64,t.rest):function(n){var t;try{t=decodeURIComponent(n)}catch(e){throw cT(md.DATA_URL,"Malformed data URL.")}return b4(t)}(t.rest)}(t),function(n){return new C4(n).contentType}(t))}throw TP()}function b4(n){for(var t=[],e=0;e<n.length;e++){var r=n.charCodeAt(e);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(e<n.length-1&&56320==(64512&n.charCodeAt(e+1))){var u=r,h=n.charCodeAt(++e);t.push(240|(r=65536|(1023&u)<<10|1023&h)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function w4(n,t){switch(n){case md.BASE64:var e=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(e||r)throw cT(n,"Invalid character '"+(e?"-":"_")+"' found: is it base64url encoded?");break;case md.BASE64URL:var u=-1!==t.indexOf("+"),h=-1!==t.indexOf("/");if(u||h)throw cT(n,"Invalid character '"+(u?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var _;try{_=function(n){return atob(n)}(t)}catch(M){throw cT(n,"Invalid character found")}for(var b=new Uint8Array(_.length),D=0;D<_.length;D++)b[D]=_.charCodeAt(D);return b}var C4=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw cT(md.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},WW={STATE_CHANGED:"state_changed"},yu={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function IP(n){switch(n){case"running":case"pausing":case"canceling":return yu.RUNNING;case"paused":return yu.PAUSED;case"success":return yu.SUCCESS;case"canceled":return yu.CANCELED;default:return yu.ERROR}}var j_=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(j_||(j_={})),j_))(),YW=function(){function n(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=j_.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=j_.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=j_.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return n.prototype.send=function(t,e,r,i){if(this.sent_)throw GA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(var u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},n.prototype.getErrorCode=function(){if(!this.sent_)throw GA("cannot .getErrorCode() before sending");return this.errorCode_},n.prototype.getStatus=function(){if(!this.sent_)throw GA("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},n.prototype.getResponseText=function(){if(!this.sent_)throw GA("cannot .getResponseText() before sending");return this.xhr_.responseText},n.prototype.abort=function(){this.xhr_.abort()},n.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},n.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},n.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},n}(),QW=function(){function n(){}return n.prototype.createConnection=function(){return new YW},n}(),_d=function(){function n(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(n.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),n.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},n.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},n.makeFromBucketSpec=function(t,e){var r;try{r=n.makeFromUrl(t,e)}catch(i){return new n(t,"")}if(""===r.path)return r;throw function(n){return new Oo("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)},n.makeFromUrl=function(t,e){var r=null,i="([A-Za-z0-9.\\-_]+)",_=new RegExp("^gs://"+i+"(/(.*))?$","i");function D(Hr){Hr.path_=decodeURIComponent(Hr.path)}for(var x=e.replace(/[.]/g,"\\."),qe=[{regex:_,indices:{bucket:1,path:3},postModify:function(Hr){"/"===Hr.path.charAt(Hr.path.length-1)&&(Hr.path_=Hr.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+x+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp("^https?://"+(e===f4?"(?:storage.googleapis.com|storage.cloud.google.com)":e)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:D}],ct=0;ct<qe.length;ct++){var ut=qe[ct],Bt=ut.regex.exec(t);if(Bt){var pr=Bt[ut.indices.path];pr||(pr=""),r=new n(Bt[ut.indices.bucket],pr),ut.postModify(r);break}}if(null==r)throw function(n){return new Oo("invalid-url","Invalid URL '"+n+"'.")}(t);return r},n}(),ZW=function(){function n(t){this.promise_=Promise.reject(t)}return n.prototype.getPromise=function(){return this.promise_},n.prototype.cancel=function(t){},n}();function zA(n){return"string"==typeof n||n instanceof String}function E4(n){return AP()&&n instanceof Blob}function AP(){return"undefined"!=typeof Blob}function MP(n,t,e,r){if(r<t)throw fC("Invalid value for '"+n+"'. Expected "+t+" or greater.");if(r>e)throw fC("Invalid value for '"+n+"'. Expected "+e+" or less.")}function H_(n,t){var e=t.match(/^(\w+):\/\/.+/),i=t;return null==(null==e?void 0:e[1])&&(i="https://"+t),i+"/v0"+n}function D4(n){var t=encodeURIComponent,e="?";for(var r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e.slice(0,-1)}var rY=function(){function n(t,e,r,i,u,h,_,b,D,M,x){var L=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=u.slice(),this.additionalRetryCodes_=h.slice(),this.callback_=_,this.errorCallback_=b,this.progressCallback_=M,this.timeout_=D,this.pool_=x,this.promise_=new Promise(function(z,W){L.resolve_=z,L.reject_=W,L.start_()})}return n.prototype.start_=function(){var t=this;function r(i,u){var h=t.resolve_,_=t.reject_,b=u.connection;if(u.wasSuccessCode)try{var D=t.callback_(b,b.getResponseText());!function(n){return void 0!==n}(D)?h():h(D)}catch(x){_(x)}else if(null!==b)(M=TP()).serverResponse=b.getResponseText(),_(t.errorCallback_?t.errorCallback_(b,M):M);else if(u.canceled)_(M=t.appDelete_?_4():g4());else{var M;_(M=new Oo("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?r(0,new $A(!1,null,!0)):this.backoffId_=function(n,t,e){var r=1,i=null,u=!1,h=0;function _(){return 2===h}var b=!1;function D(){for(var W=[],ne=0;ne<arguments.length;ne++)W[ne]=arguments[ne];b||(b=!0,t.apply(null,W))}function M(W){i=setTimeout(function(){i=null,n(x,_())},W)}function x(W){for(var ne=[],fe=1;fe<arguments.length;fe++)ne[fe-1]=arguments[fe];if(!b){if(W)return void D.call.apply(D,(0,F.__spreadArray)([null,W],ne));var xe;if(_()||u)return void D.call.apply(D,(0,F.__spreadArray)([null,W],ne));r<64&&(r*=2),1===h?(h=2,xe=0):xe=1e3*(r+Math.random()),M(xe)}}var L=!1;function z(W){L||(L=!0,!b&&(null!==i?(W||(h=2),clearTimeout(i),M(0)):W||(h=1)))}return M(0),setTimeout(function(){u=!0,z(!0)},e),z}(function(i,u){if(u)i(!1,new $A(!1,null,!0));else{var h=t.pool_.createConnection();t.pendingConnection_=h,null!==t.progressCallback_&&h.addUploadProgressListener(_),h.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&h.removeUploadProgressListener(_),t.pendingConnection_=null;var b=h.getErrorCode()===j_.NO_ERROR,D=h.getStatus();if(b&&!t.isRetryStatusCode_(D)){var x=-1!==t.successCodes_.indexOf(D);i(!0,new $A(x,h))}else{var M=h.getErrorCode()===j_.ABORT;i(!1,new $A(!1,null,M))}})}function _(b){null!==t.progressCallback_&&t.progressCallback_(b.loaded,b.lengthComputable?b.total:-1)}},r,this.timeout_)},n.prototype.getPromise=function(){return this.promise_},n.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},n.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),u=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||u},n}(),$A=function(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r};function lY(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function cY(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=lY();if(void 0!==e){for(var r=new e,i=0;i<n.length;i++)r.append(n[i]);return r.getBlob()}if(AP())return new Blob(n);throw new Oo("unsupported-environment","This browser doesn't seem to support creating Blobs")}var RP=function(){function n(t,e){var r=0,i="";E4(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return n.prototype.size=function(){return this.size_},n.prototype.type=function(){return this.type_},n.prototype.slice=function(t,e){if(E4(this.data_)){var i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new n(i)}return new n(new Uint8Array(this.data_.buffer,t,e-t),!0)},n.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(AP()){var r=t.map(function(b){return b instanceof n?b.data_:b});return new n(cY.apply(null,r))}var i=t.map(function(b){return zA(b)?y4(md.RAW,b).data:b.data_}),u=0;i.forEach(function(b){u+=b.byteLength});var h=new Uint8Array(u),_=0;return i.forEach(function(b){for(var D=0;D<b.length;D++)h[_++]=b[D]}),new n(h,!0)},n.prototype.uploadData=function(){return this.data_},n}();function NP(n){var t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function T4(n){var t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function pY(n,t){return t}var bu=function(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||pY},qA=null;function WA(){if(qA)return qA;var n=[];n.push(new bu("bucket")),n.push(new bu("generation")),n.push(new bu("metageneration")),n.push(new bu("name","fullPath",!0));var e=new bu("name");e.xform=function(u,h){return function(n){return!zA(n)||n.length<2?n:T4(n)}(h)},n.push(e);var i=new bu("size");return i.xform=function(u,h){return void 0!==h?Number(h):h},n.push(i),n.push(new bu("timeCreated")),n.push(new bu("updated")),n.push(new bu("md5Hash",null,!0)),n.push(new bu("cacheControl",null,!0)),n.push(new bu("contentDisposition",null,!0)),n.push(new bu("contentEncoding",null,!0)),n.push(new bu("contentLanguage",null,!0)),n.push(new bu("contentType",null,!0)),n.push(new bu("metadata","customMetadata",!0)),qA=n}function S4(n,t,e){var r=NP(t);return null===r?null:function(n,t,e){for(var r={type:"file"},i=e.length,u=0;u<i;u++){var h=e[u];r[h.local]=h.xform(r,t[h.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){var u=new _d(n.bucket,n.fullPath);return t._makeStorageReference(u)}})}(r,n),r}(n,r,e)}function kP(n,t){for(var e={},r=t.length,i=0;i<r;i++){var u=t[i];u.writable&&(e[u.server]=n[u.local])}return JSON.stringify(e)}var I4="prefixes";var wg=function(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Of(n){if(!n)throw TP()}function YA(n,t){return function(r,i){var u=S4(n,i,t);return Of(null!==u),u}}function pC(n){return function(e,r){var i;return i=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new Oo("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Oo("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new Oo("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new Oo("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function KA(n){var t=pC(n);return function(r,i){var u=t(r,i);return 404===r.getStatus()&&(u=function(n){return new Oo("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function M4(n,t,e){var i=H_(t.fullServerUrl(),n.host),h=n.maxOperationRetryTime,_=new wg(i,"GET",YA(n,e),h);return _.errorHandler=KA(t),_}function EY(n,t,e,r,i){var u={};u.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(u.delimiter=e),r&&(u.pageToken=r),i&&(u.maxResults=i);var _=H_(t.bucketOnlyServerUrl(),n.host),D=n.maxOperationRetryTime,M=new wg(_,"GET",function(n,t){return function(r,i){var u=function(n,t,e){var r=NP(e);return null===r?null:function(n,t,e){var r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[I4])for(var i=0,u=e[I4];i<u.length;i++){var _=u[i].replace(/\/$/,""),b=n._makeStorageReference(new _d(t,_));r.prefixes.push(b)}if(e.items)for(var D=0,M=e.items;D<M.length;D++)b=n._makeStorageReference(new _d(t,M[D].name)),r.items.push(b);return r}(n,t,r)}(n,t,i);return Of(null!==u),u}}(n,t.bucket),D);return M.urlParams=u,M.errorHandler=pC(t),M}function R4(n,t,e){var r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var QA=function(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null};function xP(n,t){var e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Of(!1)}return Of(!!e&&-1!==(t||["active"]).indexOf(e)),e}var kY=function(t,e,r){var i=function(n){return"function"==typeof n}(t)||null!=e||null!=r;if(i)this.next=t,this.error=e,this.complete=r;else{var u=t;this.next=u.next,this.error=u.error,this.complete=u.complete}};function gC(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var k4=function(){function n(t,e,r){var i=this;void 0===r&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=WA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(u){i._request=void 0,i._chunkMultiplier=1,u._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=u,i._transition("error"))},this._metadataErrorHandler=function(u){i._request=void 0,u._codeEquals("canceled")?i.completeTransitions_():(i._error=u,i._transition("error"))},this._promise=new Promise(function(u,h){i._resolve=u,i._reject=h,i._start()}),this._promise.then(null,function(){})}return n.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(r){return t._updateProgress(e+r)}},n.prototype._shouldDoResumable=function(t){return t.size()>262144},n.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},n.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],u=r[1];switch(e._state){case"running":t(i,u);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},n.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,r){var i=function(n,t,e,r,i){var u=t.bucketOnlyServerUrl(),h=R4(t,r,i),_={name:h.fullPath},b=H_(u,n.host),M={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},x=kP(h,e),W=new wg(b,"POST",function(ne){var fe;xP(ne);try{fe=ne.getResponseHeader("X-Goog-Upload-URL")}catch(Se){Of(!1)}return Of(zA(fe)),fe},n.maxUploadRetryTime);return W.urlParams=_,W.headers=M,W.body=x,W.errorHandler=pC(t),W}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),u=t._ref.storage._makeRequest(i,e,r);t._request=u,u.getPromise().then(function(h){t._request=void 0,t._uploadUrl=h,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},n.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(r,i){var u=function(n,t,e,r){var b=new wg(e,"POST",function(D){var M=xP(D,["active","final"]),x=null;try{x=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch(z){Of(!1)}x||Of(!1);var L=Number(x);return Of(!isNaN(L)),new QA(L,r.size(),"final"===M)},n.maxUploadRetryTime);return b.headers={"X-Goog-Upload-Command":"query"},b.errorHandler=pC(t),b}(t._ref.storage,t._ref._location,e,t._blob),h=t._ref.storage._makeRequest(u,r,i);t._request=h,h.getPromise().then(function(_){_=_,t._request=void 0,t._updateProgress(_.current),t._needToFetchStatus=!1,_.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},n.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,r=new QA(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(u,h){var _;try{_=function(n,t,e,r,i,u,h,_){var b=new QA(0,0);if(h?(b.current=h.current,b.total=h.total):(b.current=0,b.total=r.size()),r.size()!==b.total)throw new Oo("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var D=b.total-b.current,M=D;i>0&&(M=Math.min(M,i));var x=b.current,W={"X-Goog-Upload-Command":M===D?"upload, finalize":"upload","X-Goog-Upload-Offset":""+b.current},ne=r.slice(x,x+M);if(null===ne)throw m4();var qe=new wg(e,"POST",function(ct,ut){var Hr,Bt=xP(ct,["active","final"]),wn=b.current+M,pr=r.size();return Hr="final"===Bt?YA(t,u)(ct,ut):null,new QA(wn,pr,"final"===Bt,Hr)},t.maxUploadRetryTime);return qe.headers=W,qe.body=ne.uploadData(),qe.progressCallback=_||null,qe.errorHandler=pC(n),qe}(t._ref._location,t._ref.storage,i,t._blob,e,t._mappings,r,t._makeProgressCallback())}catch(D){return t._error=D,void t._transition("error")}var b=t._ref.storage._makeRequest(_,u,h);t._request=b,b.getPromise().then(function(D){t._increaseMultiplier(),t._request=void 0,t._updateProgress(D.current),D.finalized?(t._metadata=D.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},n.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},n.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,r){var i=M4(t._ref.storage,t._ref._location,t._mappings),u=t._ref.storage._makeRequest(i,e,r);t._request=u,u.getPromise().then(function(h){t._request=void 0,t._metadata=h,t._transition("success")},t._metadataErrorHandler)})},n.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,r){var i=function(n,t,e,r,i){var u=t.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},b=function(){for(var qe="",ct=0;ct<2;ct++)qe+=Math.random().toString().slice(2);return qe}();h["Content-Type"]="multipart/related; boundary="+b;var D=R4(t,r,i),M=kP(D,e),z=RP.getBlob("--"+b+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+M+"\r\n--"+b+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+b+"--");if(null===z)throw m4();var W={name:D.fullPath},ne=H_(u,n.host),Se=n.maxUploadRetryTime,xe=new wg(ne,"POST",YA(n,e),Se);return xe.urlParams=W,xe.headers=h,xe.body=z.uploadData(),xe.errorHandler=pC(t),xe}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),u=t._ref.storage._makeRequest(i,e,r);t._request=u,u.getPromise().then(function(h){t._request=void 0,t._metadata=h,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},n.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},n.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=g4(),this._state=t,this._notifyObservers()}},n.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(n.prototype,"snapshot",{get:function(){var t=IP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),n.prototype.on=function(t,e,r,i){var u=this,h=new kY(e,r,i);return this._addObserver(h),function(){u._removeObserver(h)}},n.prototype.then=function(t,e){return this._promise.then(t,e)},n.prototype.catch=function(t){return this.then(null,t)},n.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},n.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},n.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(r){t._notifyObserver(r)})},n.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(IP(this._state)){case yu.SUCCESS:gC(this._resolve.bind(null,this.snapshot))();break;case yu.CANCELED:case yu.ERROR:gC(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},n.prototype._notifyObserver=function(t){switch(IP(this._state)){case yu.RUNNING:case yu.PAUSED:t.next&&gC(t.next.bind(t,this.snapshot))();break;case yu.SUCCESS:t.complete&&gC(t.complete.bind(t))();break;default:t.error&&gC(t.error.bind(t,this._error))()}},n.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},n.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},n.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},n}(),ZA=function(){function n(t,e){this._service=t,this._location=e instanceof _d?e:_d.makeFromUrl(e,t.host)}return n.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},n.prototype._newRef=function(t,e){return new n(t,e)},Object.defineProperty(n.prototype,"root",{get:function(){var t=new _d(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return T4(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=function(n){if(0===n.length)return null;var t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;var e=new _d(this._location.bucket,t);return new n(this._service,e)},enumerable:!1,configurable:!0}),n.prototype._throwIfRoot=function(t){if(""===this._location.path)throw v4(t)},n}();function OY(n){var t={prefixes:[],items:[]};return x4(n,t).then(function(){return t})}function x4(n,t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return[4,O4(n,{pageToken:e})];case 1:return i=_.sent(),(u=t.prefixes).push.apply(u,i.prefixes),(h=t.items).push.apply(h,i.items),null==i.nextPageToken?[3,3]:[4,x4(n,t,i.nextPageToken)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}function O4(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&MP("options.maxResults",1,1e3,t.maxResults),r=EY(n.storage,n._location,"/",(e=t||{}).pageToken,e.maxResults),[4,n.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function LY(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return n._throwIfRoot("getDownloadURL"),t=function(n,t,e){var i=H_(t.fullServerUrl(),n.host),h=n.maxOperationRetryTime,_=new wg(i,"GET",function(n,t){return function(r,i){var u=S4(n,i,t);return Of(null!==u),function(n,t,e){var r=NP(t);if(null===r||!zA(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var u=encodeURIComponent;return i.split(",").map(function(b){var M=n.fullPath;return H_("/b/"+u(n.bucket)+"/o/"+u(M),e)+D4({alt:"media",token:b})})[0]}(u,i,n.host)}}(n,e),h);return _.errorHandler=KA(t),_}(n.storage,n._location,WA()),[4,n.storage.makeRequestWithTokens(t)];case 1:return[2,e.sent().getPromise().then(function(r){if(null===r)throw new Oo("no-download-url","The given file does not have any download URLs.");return r})]}})})}function P4(n,t){var e=function(n,t){var e=t.split("/").filter(function(r){return r.length>0}).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new _d(n._location.bucket,e);return new ZA(n.storage,r)}function OP(n){return/^[A-Za-z]+:\/\//.test(n)}function F4(n,t){if(n instanceof XA){var e=n;if(null==e._bucket)throw new Oo("no-default-bucket","No default bucket found. Did you set the '"+p4+"' property when initializing the app?");var r=new ZA(e,e._bucket);return null!=t?F4(r,t):r}return void 0!==t?P4(n,t):n}function UY(n,t){if(t&&OP(t)){if(n instanceof XA)return function(n,t){return new ZA(n,t)}(n,t);throw fC("To use ref(service, url), the first argument must be a Storage instance.")}return F4(n,t)}function L4(n,t){var e=null==t?void 0:t[p4];return null==e?null:_d.makeFromBucketSpec(e,n)}var XA=function(){function n(t,e,r,i,u,h){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._pool=i,this._url=u,this._firebaseVersion=h,this._bucket=null,this._host=f4,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=u?_d.makeFromBucketSpec(u,this._host):L4(this._host,this.app.options)}return Object.defineProperty(n.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?_d.makeFromBucketSpec(this._url,t):L4(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){MP("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){MP("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),n.prototype._getAuthToken=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=r.sent()))return[2,e.accessToken];r.label=2;case 2:return[2,null]}})})},n.prototype._getAppCheckToken=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,r.sent().token];case 2:return[2,null]}})})},n.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},n.prototype._makeStorageReference=function(t){return new ZA(this,t)},n.prototype._makeRequest=function(t,e,r){var i=this;if(this._deleted)return new ZW(_4());var u=function(n,t,e,r,i,u){var h=D4(n.urlParams),_=n.url+h,b=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(b,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(b,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(b,u),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(b,r),new rY(_,n.method,b,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,e,r,this._pool,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(function(){return i._requests.delete(u)},function(){return i._requests.delete(u)}),u},n.prototype.makeRequestWithTokens=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=u.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},n}();function V4(n,t){return UY(n=(0,At.getModularInstance)(n),t)}var JA=function(){function n(t,e,r){this._delegate=t,this.task=e,this.ref=r}return Object.defineProperty(n.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),n}(),B4=function(){function n(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(n.prototype,"snapshot",{get:function(){return new JA(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),n.prototype.then=function(t,e){var r=this;return this._delegate.then(function(i){if(t)return t(new JA(i,r,r._ref))},e)},n.prototype.on=function(t,e,r,i){var u=this,h=void 0;return e&&(h="function"==typeof e?function(_){return e(new JA(_,u,u._ref))}:{next:e.next?function(_){return e.next(new JA(_,u,u._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,h,r||void 0,i||void 0)},n}(),U4=function(){function n(t,e){this._delegate=t,this._service=e}return Object.defineProperty(n.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new dT(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new dT(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),n}(),dT=function(){function n(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(n.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this._delegate.toString()},n.prototype.child=function(t){var e=function(n,t){return P4(n,t)}(this._delegate,t);return new n(e,this.storage)},Object.defineProperty(n.prototype,"root",{get:function(){return new n(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new n(t,this.storage)},enumerable:!1,configurable:!0}),n.prototype.put=function(t,e){return this._throwIfRoot("put"),new B4(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new k4(n,new RP(t),e)}(n=(0,At.getModularInstance)(n),t,e)}(this._delegate,t,e),this)},n.prototype.putString=function(t,e,r){void 0===e&&(e=md.RAW),this._throwIfRoot("putString");var i=y4(e,t),u=(0,F.__assign)({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new B4(new k4(this._delegate,new RP(i.data,!0),u),this)},n.prototype.listAll=function(){var t=this;return function(n){return OY(n=(0,At.getModularInstance)(n))}(this._delegate).then(function(e){return new U4(e,t.storage)})},n.prototype.list=function(t){var e=this;return function(n,t){return O4(n=(0,At.getModularInstance)(n),t)}(this._delegate,t||void 0).then(function(r){return new U4(r,e.storage)})},n.prototype.getMetadata=function(){return function(n){return function(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return n._throwIfRoot("getMetadata"),t=M4(n.storage,n._location,WA()),[4,n.storage.makeRequestWithTokens(t)];case 1:return[2,e.sent().getPromise()]}})})}(n=(0,At.getModularInstance)(n))}(this._delegate)},n.prototype.updateMetadata=function(t){return function(n,t){return function(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return n._throwIfRoot("updateMetadata"),e=function(n,t,e,r){var u=H_(t.fullServerUrl(),n.host),_=kP(e,r),D=n.maxOperationRetryTime,M=new wg(u,"PATCH",YA(n,r),D);return M.headers={"Content-Type":"application/json; charset=utf-8"},M.body=_,M.errorHandler=KA(t),M}(n.storage,n._location,t,WA()),[4,n.storage.makeRequestWithTokens(e)];case 1:return[2,r.sent().getPromise()]}})})}(n=(0,At.getModularInstance)(n),t)}(this._delegate,t)},n.prototype.getDownloadURL=function(){return function(n){return LY(n=(0,At.getModularInstance)(n))}(this._delegate)},n.prototype.delete=function(){return this._throwIfRoot("delete"),function(n){return function(n){return(0,F.__awaiter)(this,void 0,void 0,function(){var t;return(0,F.__generator)(this,function(e){switch(e.label){case 0:return n._throwIfRoot("deleteObject"),t=function(n,t){var r=H_(t.fullServerUrl(),n.host),_=new wg(r,"DELETE",function(b,D){},n.maxOperationRetryTime);return _.successCodes=[200,204],_.errorHandler=KA(t),_}(n.storage,n._location),[4,n.storage.makeRequestWithTokens(t)];case 1:return[2,e.sent().getPromise()]}})})}(n=(0,At.getModularInstance)(n))}(this._delegate)},n.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw v4(t)},n}(),ZY=function(){function n(t,e){this.app=t,this._delegate=e}return Object.defineProperty(n.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),n.prototype.ref=function(t){if(OP(t))throw fC("ref() expected a child path but got a URL, use refFromURL instead.");return new dT(V4(this._delegate,t),this)},n.prototype.refFromURL=function(t){if(!OP(t))throw fC("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_d.makeFromUrl(t,this._delegate.host)}catch(e){throw fC("refFromUrl() expected a valid full URL but got an invalid one.")}return new dT(V4(this._delegate,t),this)},n.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},n.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},n.prototype.useEmulator=function(t,e,r){void 0===r&&(r={}),function(n,t,e,r){void 0===r&&(r={}),function(n,t,e,r){void 0===r&&(r={}),n.host="http://"+t+":"+e;var i=r.mockUserToken;i&&(n._overrideAuthToken="string"==typeof i?i:(0,At.createMockUserToken)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)},n}();function t7(n,t){var e=t.instanceIdentifier,r=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),u=n.getProvider("app-check-internal");return new ZY(r,new XA(r,i,u,new QW,e,ll.default.SDK_VERSION))}!function(n){var t={TaskState:yu,TaskEvent:WW,StringFormat:md,Storage:XA,Reference:dT};n.INTERNAL.registerComponent(new vg.Component("storage",t7,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage","0.7.0")}(ll.default);var ia,PP="FB-PERF-TRACE-MEASURE",W4="@firebase/performance/config",Y4="@firebase/performance/configexpire",K4="Performance",u7=((ia={})["trace started"]="Trace {$traceName} was started before.",ia["trace stopped"]="Trace {$traceName} is not running.",ia["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",ia["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",ia["no window"]="Window is not available.",ia["no app id"]="App id is not available.",ia["no project id"]="Project id is not available.",ia["no api key"]="Api key is not available.",ia["invalid cc log"]="Attempted to queue invalid cc event",ia["FB not default"]="Performance can only start when Firebase app instance is the default one.",ia["RC response not ok"]="RC response is not ok",ia["invalid attribute name"]="Attribute name {$attributeName} is invalid.",ia["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",ia["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",ia["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",ia),Oa=new At.ErrorFactory("performance",K4,u7),Cg=new fu.Logger(K4);Cg.logLevel=fu.LogLevel.INFO;var FP,Q4,Pa=function(){function n(t){if(this.window=t,!t)throw Oa.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return n.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},n.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},n.prototype.measure=function(t,e,r){!this.performance||!this.performance.measure||this.performance.measure(t,e,r)},n.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},n.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},n.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},n.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,At.isIndexedDBAvailable)()||(Cg.info("IndexedDB is not supported by current browswer"),!1):(Cg.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},n.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(i){for(var u=0,h=i.getEntries();u<h.length;u++)e(h[u])}).observe({entryTypes:[t]})},n.getInstance=function(){return void 0===FP&&(FP=new n(Q4)),FP},n}();function Z4(n,t){var e=n.length-t.length;if(e<0||e>1)throw Oa.create("invalid String merger input");for(var r=[],i=0;i<n.length;i++)r.push(n.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var LP,X4,Jo=function(){function n(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Z4("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Z4("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return n.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Oa.create("no app id");return t},n.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Oa.create("no project id");return t},n.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Oa.create("no api key");return t},n.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},n.getInstance=function(){return void 0===LP&&(LP=new n),LP},n}();function VP(){return X4}var l0=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(l0||(l0={})),l0))(),h7=["firebase_","google_","ga_"],f7=new RegExp("^[a-zA-Z]\\w*$");function m7(){var n=Pa.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function J4(){switch(Pa.getInstance().document.visibilityState){case"visible":return l0.VISIBLE;case"hidden":return l0.HIDDEN;default:return l0.UNKNOWN}}function _7(){var t=Pa.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var S7="Could not fetch config, will use default configs";function eH(n){if(!n)return n;var t=Jo.getInstance(),e=n.entries||{};return t.loggingEnabled=void 0===e.fpr_enabled||"true"===String(e.fpr_enabled),e.fpr_log_source&&(t.logSource=Number(e.fpr_log_source)),e.fpr_log_endpoint_url&&(t.logEndPointUrl=e.fpr_log_endpoint_url),e.fpr_log_transport_key&&(t.transportKey=e.fpr_log_transport_key),void 0!==e.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(e.fpr_vc_network_request_sampling_rate)),void 0!==e.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(e.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=tH(t.tracesSamplingRate),t.logNetworkAfterSampling=tH(t.networkRequestsSamplingRate),n}function tH(n){return Math.random()<=n}var UP,BP=1;function nH(){return BP=2,UP=UP||function(){var n=Pa.getInstance().document;return new Promise(function(t){if(n&&"complete"!==n.readyState){var e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())};n.addEventListener("readystatechange",e)}else t()})}().then(function(){return function(){var n=Jo.getInstance().installationsService.getId();return n.then(function(t){X4=t}),n}()}).then(function(n){return function(n){var t=function(){var n=Pa.getInstance().localStorage;if(n){var t=n.getItem(Y4);if(t&&function(n){return Number(n)>Date.now()}(t)){var e=n.getItem(W4);if(e)try{return JSON.parse(e)}catch(i){return}}}}();return t?(eH(t),Promise.resolve()):function(n){return function(){var n=Jo.getInstance().installationsService.getToken();return n.then(function(t){}),n}().then(function(t){var r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Jo.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Jo.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:Jo.getInstance().getAppId(),app_version:"0.4.18",sdk_version:"0.0.1"})});return fetch(i).then(function(u){if(u.ok)return u.json();throw Oa.create("RC response not ok")})}).catch(function(){Cg.info(S7)})}(n).then(eH).then(function(e){return function(n){var t=Pa.getInstance().localStorage;!n||!t||(t.setItem(W4,JSON.stringify(n)),t.setItem(Y4,String(Date.now()+60*Jo.getInstance().configTimeToLive*60*1e3)))}(e)},function(){})}(n)}).then(function(){return rH()},function(){return rH()}),UP}function rH(){BP=3}var HP,eM=3,G_=[],oH=!1;function tM(n){setTimeout(function(){if(0!==eM){if(!G_.length)return tM(1e4);!function(){var n=G_.splice(0,1e3),t=n.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}});(function(n,t){return function(n){var t=Jo.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(n)})}(n).then(function(e){return e.ok||Cg.info("Call to Firebase backend failed."),e.json()}).then(function(e){var r=Number(e.nextRequestWaitMillis),i=1e4;isNaN(r)||(i=Math.max(r,i));var u=e.logResponseDetails;Array.isArray(u)&&u.length>0&&"RETRY_REQUEST_LATER"===u[0].responseAction&&(G_=(0,F.__spreadArray)((0,F.__spreadArray)([],t),G_),Cg.info("Retry transport request later.")),eM=3,tM(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Jo.getInstance().logSource,log_event:t},n).catch(function(){G_=(0,F.__spreadArray)((0,F.__spreadArray)([],n),G_),eM--,Cg.info("Tries left: "+eM+"."),tM(1e4)})}()}},n)}function V7(n){if(!n.eventTime||!n.message)throw Oa.create("invalid cc log");G_=(0,F.__spreadArray)((0,F.__spreadArray)([],G_),[n])}function sH(n,t){HP||(HP=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];V7({message:n.apply(void 0,t),eventTime:Date.now()})}}(j7)),HP(n,t)}function nM(n){var t=Jo.getInstance();!t.instrumentationEnabled&&n.isAuto||!t.dataCollectionEnabled&&!n.isAuto||!Pa.getInstance().requiredApisAvailable()||n.isAuto&&J4()!==l0.VISIBLE||(3===BP?GP(n):nH().then(function(){return GP(n)},function(){return GP(n)}))}function GP(n){if(VP()){var t=Jo.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return sH(n,1)},0)}}function j7(n,t){return 0===t?function(n){var t={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},e={application_info:aH(),network_request_metric:t};return JSON.stringify(e)}(n):function(n){var t={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(t.counters=n.counters);var e=n.getAttributes();0!==Object.keys(e).length&&(t.custom_attributes=e);var r={application_info:aH(),trace_metric:t};return JSON.stringify(r)}(n)}function aH(){return{google_app_id:Jo.getInstance().getAppId(),app_instance_id:VP(),web_app_info:{sdk_version:"0.4.18",page_url:Pa.getInstance().getUrl(),service_worker_status:m7(),visibility_state:J4(),effective_connection_type:_7()},application_process_state:0}}var q7=["_fp","_fcp","_fid"],hT=function(){function n(t,e,r){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Pa.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=r||PP+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return n.prototype.start=function(){if(1!==this.state)throw Oa.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},n.prototype.stop=function(){if(2!==this.state)throw Oa.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),nM(this)},n.prototype.record=function(t,e,r){if(t<=0)throw Oa.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Oa.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),r&&r.attributes&&(this.customAttributes=(0,F.__assign)({},r.attributes)),r&&r.metrics)for(var i=0,u=Object.keys(r.metrics);i<u.length;i++){var h=u[i];isNaN(Number(r.metrics[h]))||(this.counters[h]=Number(Math.floor(r.metrics[h])))}nM(this)},n.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},n.prototype.putMetric=function(t,e){if(!function(n,t){return!(0===n.length||n.length>100)&&(t&&t.startsWith("_wt_")&&q7.indexOf(n)>-1||!n.startsWith("_"))}(t,this.name))throw Oa.create("invalid custom metric name",{customMetricName:t});this.counters[t]=function(n){var t=Math.floor(n);return t<n&&Cg.info("Metric value should be an Integer, setting the value as : "+t+"."),t}(e)},n.prototype.getMetric=function(t){return this.counters[t]||0},n.prototype.putAttribute=function(t,e){var r=function(n){return!(0===n.length||n.length>40||h7.some(function(e){return n.startsWith(e)})||!n.match(f7))}(t),i=function(n){return 0!==n.length&&n.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Oa.create("invalid attribute name",{attributeName:t});if(!i)throw Oa.create("invalid attribute value",{attributeValue:e})}},n.prototype.getAttribute=function(t){return this.customAttributes[t]},n.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},n.prototype.getAttributes=function(){return(0,F.__assign)({},this.customAttributes)},n.prototype.setStartTime=function(t){this.startTimeUs=t},n.prototype.setDuration=function(t){this.durationUs=t},n.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},n.createOobTrace=function(t,e,r){var i=Pa.getInstance().getUrl();if(i){var u=new n("_wt_"+i,!0),h=Math.floor(1e3*Pa.getInstance().getTimeOrigin());if(u.setStartTime(h),t&&t[0]&&(u.setDuration(Math.floor(1e3*t[0].duration)),u.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),u.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),u.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var D=e.find(function(x){return"first-paint"===x.name});D&&D.startTime&&u.putMetric("_fp",Math.floor(1e3*D.startTime));var M=e.find(function(x){return"first-contentful-paint"===x.name});M&&M.startTime&&u.putMetric("_fcp",Math.floor(1e3*M.startTime)),r&&u.putMetric("_fid",Math.floor(1e3*r))}nM(u)}},n.createUserTimingTrace=function(t){nM(new n(t,!1,t))},n}();function uH(n){var t=n;if(t&&void 0!==t.responseStart){var e=Pa.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+e)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,u=Math.floor(1e3*(t.responseEnd-t.startTime));!function(n){var t=Jo.getInstance();if(t.instrumentationEnabled){var e=n.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];e===r||e===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return sH(n,0)},0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:u})}}function lH(){!VP()||(setTimeout(function(){return function(){var n=Pa.getInstance(),t=n.getEntriesByType("navigation"),e=n.getEntriesByType("paint");if(n.onFirstInputDelay){var r=setTimeout(function(){hT.createOobTrace(t,e),r=void 0},5e3);n.onFirstInputDelay(function(i){r&&(clearTimeout(r),hT.createOobTrace(t,e,i))})}else hT.createOobTrace(t,e)}()},0),setTimeout(function(){return function(){for(var n=Pa.getInstance(),e=0,r=n.getEntriesByType("resource");e<r.length;e++)uH(r[e]);n.setupObserver("resource",uH)}()},0),setTimeout(function(){return function(){for(var n=Pa.getInstance(),e=0,r=n.getEntriesByType("measure");e<r.length;e++)cH(r[e]);n.setupObserver("measure",cH)}()},0))}function cH(n){var t=n.name;t.substring(0,PP.length)!==PP&&hT.createUserTimingTrace(t)}var J7=function(){function n(t){this.app=t,Pa.getInstance().requiredApisAvailable()&&(0,At.validateIndexedDBOpenable)().then(function(e){e&&(oH||(tM(5500),oH=!0),nH().then(lH,lH))}).catch(function(e){Cg.info("Environment doesn't support IndexedDB: "+e)})}return n.prototype.trace=function(t){return new hT(t)},Object.defineProperty(n.prototype,"instrumentationEnabled",{get:function(){return Jo.getInstance().instrumentationEnabled},set:function(t){Jo.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataCollectionEnabled",{get:function(){return Jo.getInstance().dataCollectionEnabled},set:function(t){Jo.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),n}();!function(n){n.INTERNAL.registerComponent(new vg.Component("performance",function(e){return function(e,r){if("[DEFAULT]"!==e.name)throw Oa.create("FB not default");if("undefined"==typeof window)throw Oa.create("no window");return function(n){Q4=n}(window),Jo.getInstance().firebaseAppInstance=e,Jo.getInstance().installationsService=r,new J7(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC")),n.registerVersion("@firebase/performance","0.4.18")}(ll.default);var dH="https://www.googletagmanager.com/gtag/js",oa=(()=>(function(n){n.EVENT="event",n.SET="set",n.CONFIG="config"}(oa||(oa={})),oa))(),rM=(()=>(function(n){n.ADD_SHIPPING_INFO="add_shipping_info",n.ADD_PAYMENT_INFO="add_payment_info",n.ADD_TO_CART="add_to_cart",n.ADD_TO_WISHLIST="add_to_wishlist",n.BEGIN_CHECKOUT="begin_checkout",n.CHECKOUT_PROGRESS="checkout_progress",n.EXCEPTION="exception",n.GENERATE_LEAD="generate_lead",n.LOGIN="login",n.PAGE_VIEW="page_view",n.PURCHASE="purchase",n.REFUND="refund",n.REMOVE_FROM_CART="remove_from_cart",n.SCREEN_VIEW="screen_view",n.SEARCH="search",n.SELECT_CONTENT="select_content",n.SELECT_ITEM="select_item",n.SELECT_PROMOTION="select_promotion",n.SET_CHECKOUT_OPTION="set_checkout_option",n.SHARE="share",n.SIGN_UP="sign_up",n.TIMING_COMPLETE="timing_complete",n.VIEW_CART="view_cart",n.VIEW_ITEM="view_item",n.VIEW_ITEM_LIST="view_item_list",n.VIEW_PROMOTION="view_promotion",n.VIEW_SEARCH_RESULTS="view_search_results"}(rM||(rM={})),rM))(),sa=new fu.Logger("@firebase/analytics");function fK(n,t,e,r,i,u){return(0,F.__awaiter)(this,void 0,void 0,function(){var h,_,b,D;return(0,F.__generator)(this,function(M){switch(M.label){case 0:h=r[i],M.label=1;case 1:return M.trys.push([1,7,,8]),h?[4,t[h]]:[3,3];case 2:return M.sent(),[3,6];case 3:return[4,Promise.all(e)];case 4:return _=M.sent(),(b=_.find(function(x){return x.measurementId===i}))?[4,t[b.appId]]:[3,6];case 5:M.sent(),M.label=6;case 6:return[3,8];case 7:return D=M.sent(),sa.error(D),[3,8];case 8:return n(oa.CONFIG,i,u),[2]}})})}function pK(n,t,e,r,i){return(0,F.__awaiter)(this,void 0,void 0,function(){var u,h,_,b,D,M,z;return(0,F.__generator)(this,function(W){switch(W.label){case 0:return W.trys.push([0,4,,5]),u=[],i&&i.send_to?(h=i.send_to,Array.isArray(h)||(h=[h]),[4,Promise.all(e)]):[3,2];case 1:for(_=W.sent(),b=function(ne){var fe=_.find(function(xe){return xe.measurementId===ne}),Se=fe&&t[fe.appId];if(!Se)return u=[],"break";u.push(Se)},D=0,M=h;D<M.length&&"break"!==b(M[D]);D++);W.label=2;case 2:return 0===u.length&&(u=Object.values(t)),[4,Promise.all(u)];case 3:return W.sent(),n(oa.EVENT,r,i||{}),[3,5];case 4:return z=W.sent(),sa.error(z),[3,5];case 5:return[2]}})})}var Ah,vK=((Ah={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Ah["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Ah["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Ah["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ah["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ah["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Ah["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Ah["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Ah["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Ah),vd=new At.ErrorFactory("analytics","Analytics",vK),wK=function(){function n(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return n.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},n.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},n.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},n}(),hH=new wK;function CK(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function EK(n){var t;return(0,F.__awaiter)(this,void 0,void 0,function(){var e,i,u,h,_,b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return e=n.appId,i={method:"GET",headers:CK(n.apiKey)},u="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",e),[4,fetch(u,i)];case 1:if(200===(h=D.sent()).status||304===h.status)return[3,6];_="",D.label=2;case 2:return D.trys.push([2,4,,5]),[4,h.json()];case 3:return b=D.sent(),(null===(t=b.error)||void 0===t?void 0:t.message)&&(_=b.error.message),[3,5];case 4:return D.sent(),[3,5];case 5:throw vd.create("config-fetch-failed",{httpStatus:h.status,responseMessage:_});case 6:return[2,h.json()]}})})}function fH(n,t,e,r){var i=t.throttleEndTimeMillis,u=t.backoffCount;return void 0===r&&(r=hH),(0,F.__awaiter)(this,void 0,void 0,function(){var h,_,b,D,M,x,L;return(0,F.__generator)(this,function(z){switch(z.label){case 0:h=n.appId,_=n.measurementId,z.label=1;case 1:return z.trys.push([1,3,,4]),[4,TK(e,i)];case 2:return z.sent(),[3,4];case 3:if(b=z.sent(),_)return sa.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+_+' provided in the "measurementId" field in the local Firebase config. ['+b.message+"]"),[2,{appId:h,measurementId:_}];throw b;case 4:return z.trys.push([4,6,,7]),[4,EK(n)];case 5:return D=z.sent(),r.deleteThrottleMetadata(h),[2,D];case 6:if(!function(n){if(!(n instanceof At.FirebaseError&&n.customData))return!1;var t=Number(n.customData.httpStatus);return 429===t||500===t||503===t||504===t}(M=z.sent())){if(r.deleteThrottleMetadata(h),_)return sa.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+_+' provided in the "measurementId" field in the local Firebase config. ['+M.message+"]"),[2,{appId:h,measurementId:_}];throw M}return x=503===Number(M.customData.httpStatus)?(0,At.calculateBackoffMillis)(u,r.intervalMillis,30):(0,At.calculateBackoffMillis)(u,r.intervalMillis),L={throttleEndTimeMillis:Date.now()+x,backoffCount:u+1},r.setThrottleMetadata(h,L),sa.debug("Calling attemptFetch again in "+x+" millis"),[2,fH(n,L,e,r)];case 7:return[2]}})})}function TK(n,t){return new Promise(function(e,r){var i=Math.max(t-Date.now(),0),u=setTimeout(e,i);n.addEventListener(function(){clearTimeout(u),r(vd.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}var IK=function(){function n(){this.listeners=[]}return n.prototype.addEventListener=function(t){this.listeners.push(t)},n.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},n}();var gH,pT,Mh={},iM=[],pH={},fT="dataLayer",zP="gtag",oM=!1;function RK(n){if(oM)throw vd.create("already-initialized");n.dataLayerName&&(fT=n.dataLayerName),n.gtagName&&(zP=n.gtagName)}function kK(n,t){!function(){var n=[];if((0,At.isBrowserExtension)()&&n.push("This is a browser extension environment."),(0,At.areCookiesEnabled)()||n.push("Cookies are not available."),n.length>0){var t=n.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),e=vd.create("invalid-analytics-context",{errorInfo:t});sa.warn(e.message)}}();var e=n.options.appId;if(!e)throw vd.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw vd.create("no-api-key");sa.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+n.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Mh[e])throw vd.create("already-exists",{id:e});if(!oM){!function(n){var t=[];Array.isArray(window[n])?t=window[n]:window[n]=t}(fT);var r=function(n,t,e,r,i){var u=function(){for(var h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(u=window[i]),window[i]=function(n,t,e,r){return function(u,h,_){return(0,F.__awaiter)(this,void 0,void 0,function(){var b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:return D.trys.push([0,6,,7]),u!==oa.EVENT?[3,2]:[4,pK(n,t,e,h,_)];case 1:return D.sent(),[3,5];case 2:return u!==oa.CONFIG?[3,4]:[4,fK(n,t,e,r,h,_)];case 3:return D.sent(),[3,5];case 4:n(oa.SET,h),D.label=5;case 5:return[3,7];case 6:return b=D.sent(),sa.error(b),[3,7];case 7:return[2]}})})}}(u,n,t,e),{gtagCore:u,wrappedGtag:window[i]}}(Mh,iM,pH,fT,zP);pT=r.wrappedGtag,gH=r.gtagCore,oM=!0}Mh[e]=function(n,t,e,r,i,u){return(0,F.__awaiter)(this,void 0,void 0,function(){var h,_,b,D,M,x,L;return(0,F.__generator)(this,function(z){switch(z.label){case 0:return h=function(n,t,e){return void 0===t&&(t=hH),(0,F.__awaiter)(this,void 0,void 0,function(){var r,i,u,h,_,b,D=this;return(0,F.__generator)(this,function(M){if(u=(r=n.options).apiKey,h=r.measurementId,!(i=r.appId))throw vd.create("no-app-id");if(!u){if(h)return[2,{measurementId:h,appId:i}];throw vd.create("no-api-key")}return _=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},b=new IK,setTimeout(function(){return(0,F.__awaiter)(D,void 0,void 0,function(){return(0,F.__generator)(this,function(x){return b.abort(),[2]})})},6e4),[2,fH({appId:i,apiKey:u,measurementId:h},_,b,t)]})})}(n),h.then(function(W){e[W.measurementId]=W.appId,n.options.measurementId&&W.measurementId!==n.options.measurementId&&sa.warn("The measurement ID in the local Firebase config ("+n.options.measurementId+") does not match the measurement ID fetched from the server ("+W.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(W){return sa.error(W)}),t.push(h),_=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var n;return(0,F.__generator)(this,function(t){switch(t.label){case 0:return(0,At.isIndexedDBAvailable)()?[3,1]:(sa.warn(vd.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,At.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),sa.warn(vd.create("indexeddb-unavailable",{errorInfo:n}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(W){if(W)return r.getId()}),[4,Promise.all([h,_])];case 1:return b=z.sent(),D=b[0],M=b[1],function(){for(var n=window.document.getElementsByTagName("script"),t=0,e=Object.values(n);t<e.length;t++){var r=e[t];if(r.src&&r.src.includes(dH))return r}return null}()||function(n,t){var e=document.createElement("script");e.src=dH+"?l="+n+"&id="+t,e.async=!0,document.head.appendChild(e)}(u,D.measurementId),i("js",new Date),(L={}).origin="firebase",L.update=!0,x=L,null!=M&&(x.firebase_id=M),i(oa.CONFIG,D.measurementId,x),[2,D.measurementId]}})})}(n,iM,pH,t,gH,fT);var h={app:n,logEvent:function(_,b,D){(function(n,t,e,r,i){return(0,F.__awaiter)(this,void 0,void 0,function(){var u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return i&&i.global?(n(oa.EVENT,e,r),[2]):[3,1];case 1:return[4,t];case 2:u=_.sent(),h=(0,F.__assign)((0,F.__assign)({},r),{send_to:u}),n(oa.EVENT,e,h),_.label=3;case 3:return[2]}})})})(pT,Mh[e],_,b,D).catch(function(M){return sa.error(M)})},setCurrentScreen:function(_,b){(function(n,t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return r&&r.global?(n(oa.SET,{screen_name:e}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=u.sent(),n(oa.CONFIG,i,{update:!0,screen_name:e}),u.label=3;case 3:return[2]}})})})(pT,Mh[e],_,b).catch(function(D){return sa.error(D)})},setUserId:function(_,b){(function(n,t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return r&&r.global?(n(oa.SET,{user_id:e}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=u.sent(),n(oa.CONFIG,i,{update:!0,user_id:e}),u.label=3;case 3:return[2]}})})})(pT,Mh[e],_,b).catch(function(D){return sa.error(D)})},setUserProperties:function(_,b){(function(n,t,e,r){return(0,F.__awaiter)(this,void 0,void 0,function(){var i,u,h,_,b;return(0,F.__generator)(this,function(D){switch(D.label){case 0:if(!r||!r.global)return[3,1];for(i={},u=0,h=Object.keys(e);u<h.length;u++)i["user_properties."+(_=h[u])]=e[_];return n(oa.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:b=D.sent(),n(oa.CONFIG,b,{update:!0,user_properties:e}),D.label=3;case 3:return[2]}})})})(pT,Mh[e],_,b).catch(function(D){return sa.error(D)})},setAnalyticsCollectionEnabled:function(_){(function(n,t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,n];case 1:return e=r.sent(),window["ga-disable-"+e]=!t,[2]}})})})(Mh[e],_).catch(function(b){return sa.error(b)})},INTERNAL:{delete:function(){return delete Mh[e],Promise.resolve()}}};return h}var mH="analytics";function FK(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:if((0,At.isBrowserExtension)())return[2,!1];if(!(0,At.areCookiesEnabled)())return[2,!1];if(!(0,At.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,At.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(n){n.INTERNAL.registerComponent(new vg.Component(mH,function(e){return kK(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:RK,EventName:rM,isSupported:FK})),n.INTERNAL.registerComponent(new vg.Component("analytics-internal",function(e){try{return{logEvent:e.getProvider(mH).getImmediate().logEvent}}catch(i){throw vd.create("interop-component-reg-failed",{reason:i})}},"PRIVATE")),n.registerVersion("@firebase/analytics","0.6.18")}(ll.default);var wu,LK=function(){function n(t,e,r,i){this.client=t,this.storage=e,this.storageCache=r,this.logger=i}return n.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-e,i=r<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+r+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+i+"."),i},n.prototype.fetch=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=_.sent(),r=e[0],(i=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return u=_.sent(),h=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===u.status&&h.push(this.storage.setLastSuccessfulFetchResponse(u)),[4,Promise.all(h)];case 3:return _.sent(),[2,u]}})})},n}(),VK=((wu={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",wu["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",wu["registration-api-key"]="Undefined API key. Check Firebase app initialization.",wu["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",wu["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",wu["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",wu["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",wu["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",wu["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",wu["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',wu["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',wu["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",wu["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",wu),yd=new At.ErrorFactory("remoteconfig","Remote Config",VK);function UK(n){return void 0===n&&(n=navigator),n.languages&&n.languages[0]||n.language}var jK=function(){function n(t,e,r,i,u,h){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=r,this.projectId=i,this.apiKey=u,this.appId=h}return n.prototype.fetch=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,u,h,_,b,D,M,x,L,z,W,ne,fe,Se,xe,qe,ct;return(0,F.__generator)(this,function(ut){switch(ut.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=ut.sent(),u=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",h=u+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,_={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},b={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:UK()},D={method:"POST",headers:_,body:JSON.stringify(b)},M=fetch(h,D),x=new Promise(function(Bt,wn){t.signal.addEventListener(function(){var pr=new Error("The operation was aborted.");pr.name="AbortError",wn(pr)})}),ut.label=2;case 2:return ut.trys.push([2,5,,6]),[4,Promise.race([M,x])];case 3:return ut.sent(),[4,M];case 4:return L=ut.sent(),[3,6];case 5:throw z=ut.sent(),W="fetch-client-network","AbortError"===z.name&&(W="fetch-timeout"),yd.create(W,{originalErrorMessage:z.message});case 6:if(ne=L.status,fe=L.headers.get("ETag")||void 0,200!==L.status)return[3,11];qe=void 0,ut.label=7;case 7:return ut.trys.push([7,9,,10]),[4,L.json()];case 8:return qe=ut.sent(),[3,10];case 9:throw ct=ut.sent(),yd.create("fetch-client-parse",{originalErrorMessage:ct.message});case 10:Se=qe.entries,xe=qe.state,ut.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===xe?ne=500:"NO_CHANGE"===xe?ne=304:("NO_TEMPLATE"===xe||"EMPTY_CONFIG"===xe)&&(Se={}),304!==ne&&200!==ne)throw yd.create("fetch-status",{httpStatus:ne});return[2,{status:ne,eTag:fe,config:Se}]}})})},n}(),HK=function(){function n(){this.listeners=[]}return n.prototype.addEventListener=function(t){this.listeners.push(t)},n.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},n}(),$K=["1","true","t","yes","y","on"],$P=function(){function n(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return n.prototype.asString=function(){return this._value},n.prototype.asBoolean=function(){return"static"!==this._source&&$K.indexOf(this._value.toLowerCase())>=0},n.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},n.prototype.getSource=function(){return this._source},n}(),YK=function(){function n(t,e,r,i,u){this.app=t,this._client=e,this._storageCache=r,this._storage=i,this._logger=u,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return n.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=fu.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=fu.LogLevel.SILENT;break;default:this._logger.logLevel=fu.LogLevel.ERROR}},Object.defineProperty(n.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),n.prototype.activate=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),r=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return i.sent(),[2,!0]}})})},n.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},n.prototype.fetch=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i=this;return(0,F.__generator)(this,function(u){switch(u.label){case 0:t=new HK,setTimeout(function(){return(0,F.__awaiter)(i,void 0,void 0,function(){return(0,F.__generator)(this,function(h){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),u.label=1;case 1:return u.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return u.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return u.sent(),[3,6];case 4:return e=u.sent(),r=function(n,t){return n instanceof At.FirebaseError&&-1!==n.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw u.sent(),e;case 6:return[2]}})})},n.prototype.fetchAndActivate=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){return(0,F.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},n.prototype.getAll=function(){var t=this;return function(n,t){return void 0===n&&(n={}),void 0===t&&(t={}),Object.keys((0,F.__assign)((0,F.__assign)({},n),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(e,r){return e[r]=t.getValue(r),e},{})},n.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},n.prototype.getNumber=function(t){return this.getValue(t).asNumber()},n.prototype.getString=function(t){return this.getValue(t).asString()},n.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new $P("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new $P("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new $P("static"))},n}();function sM(n,t){var e=n.target.error||void 0;return yd.create(t,{originalErrorMessage:e&&e.message})}var c0="app_namespace_store",JK=function(){function n(t,e,r,i){void 0===i&&(i=new Promise(function(n,t){var e=indexedDB.open("firebase_remote_config",1);e.onerror=function(r){t(sM(r,"storage-open"))},e.onsuccess=function(r){n(r.target.result)},e.onupgradeneeded=function(r){0===r.oldVersion&&r.target.result.createObjectStore(c0,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=r,this.openDbPromise=i}return n.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},n.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},n.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},n.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},n.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},n.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},n.prototype.getActiveConfig=function(){return this.get("active_config")},n.prototype.setActiveConfig=function(t){return this.set("active_config",t)},n.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},n.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},n.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},n.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},n.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},n.prototype.get=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r=this;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise(function(u,h){var b=e.transaction([c0],"readonly").objectStore(c0),D=r.createCompositeKey(t);try{var M=b.get(D);M.onerror=function(x){h(sM(x,"storage-get"))},M.onsuccess=function(x){var L=x.target.result;u(L?L.value:void 0)}}catch(x){h(yd.create("storage-get",{originalErrorMessage:x&&x.message}))}})]}})})},n.prototype.set=function(t,e){return(0,F.__awaiter)(this,void 0,void 0,function(){var r,i=this;return(0,F.__generator)(this,function(u){switch(u.label){case 0:return[4,this.openDbPromise];case 1:return r=u.sent(),[2,new Promise(function(h,_){var D=r.transaction([c0],"readwrite").objectStore(c0),M=i.createCompositeKey(t);try{var x=D.put({compositeKey:M,value:e});x.onerror=function(L){_(sM(L,"storage-set"))},x.onsuccess=function(){h()}}catch(L){_(yd.create("storage-set",{originalErrorMessage:L&&L.message}))}})]}})})},n.prototype.delete=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e,r=this;return(0,F.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise(function(u,h){var b=e.transaction([c0],"readwrite").objectStore(c0),D=r.createCompositeKey(t);try{var M=b.delete(D);M.onerror=function(x){h(sM(x,"storage-delete"))},M.onsuccess=function(){u()}}catch(x){h(yd.create("storage-delete",{originalErrorMessage:x&&x.message}))}})]}})})},n.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},n}(),e9=function(){function n(t){this.storage=t}return n.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},n.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},n.prototype.getActiveConfig=function(){return this.activeConfig},n.prototype.loadFromStorage=function(){return(0,F.__awaiter)(this,void 0,void 0,function(){var t,e,r,i,u,h;return(0,F.__generator)(this,function(_){switch(_.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return(i=_.sent())&&(this.lastFetchStatus=i),[4,e];case 2:return(u=_.sent())&&(this.lastSuccessfulFetchTimestampMillis=u),[4,r];case 3:return(h=_.sent())&&(this.activeConfig=h),[2]}})})},n.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},n.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},n.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},n}();function t9(n,t){return new Promise(function(e,r){var i=Math.max(t-Date.now(),0),u=setTimeout(e,i);n.addEventListener(function(){clearTimeout(u),r(yd.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}var r9=function(){function n(t,e){this.client=t,this.storage=e}return n.prototype.fetch=function(t){return(0,F.__awaiter)(this,void 0,void 0,function(){var e;return(0,F.__generator)(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},n.prototype.attemptFetch=function(t,e){var r=e.throttleEndTimeMillis,i=e.backoffCount;return(0,F.__awaiter)(this,void 0,void 0,function(){var u,h,_;return(0,F.__generator)(this,function(b){switch(b.label){case 0:return[4,t9(t.signal,r)];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return u=b.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return b.sent(),[2,u];case 5:if(!function(n){if(!(n instanceof At.FirebaseError&&n.customData))return!1;var t=Number(n.customData.httpStatus);return 429===t||500===t||503===t||504===t}(h=b.sent()))throw h;return _={throttleEndTimeMillis:Date.now()+(0,At.calculateBackoffMillis)(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(_)];case 6:return b.sent(),[2,this.attemptFetch(t,_)];case 7:return[2]}})})},n}(),vH="@firebase/remote-config";!function(n){n.INTERNAL.registerComponent(new vg.Component("remoteConfig",function(e,r){var i=r.instanceIdentifier,u=e.getProvider("app").getImmediate(),h=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw yd.create("registration-window");var _=u.options,b=_.projectId,D=_.apiKey,M=_.appId;if(!b)throw yd.create("registration-project-id");if(!D)throw yd.create("registration-api-key");if(!M)throw yd.create("registration-app-id");var x=new JK(M,u.name,i=i||"firebase"),L=new e9(x),z=new fu.Logger(vH);z.logLevel=fu.LogLevel.ERROR;var W=new jK(h,n.SDK_VERSION,i,b,D,M),ne=new r9(W,x),fe=new LK(ne,x,L,z),Se=new YK(u,fe,L,x,z);return Se.ensureInitialized(),Se},"PUBLIC").setMultipleInstances(!0)),n.registerVersion(vH,"0.1.43")}(ll.default),J(5229),ll.default.registerVersion("firebase","8.10.0","app"),ll.default.SDK_VERSION="8.10.0",console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),ll.default.registerVersion("firebase","8.10.0");let mC=(()=>{class n{constructor(e,r,i){this.afAuth=e,this.route=r,this.userService=i,this.user$=e.authState}login(){let e=this.route.snapshot.queryParamMap.get("returnUrl")||"/";localStorage.setItem("returnUrl",e),this.afAuth.signInWithRedirect(new ll.default.auth.GoogleAuthProvider)}logout(){this.afAuth.signOut()}get appUser$(){return this.user$.pipe(Er(e=>e?this.userService.get(e.uid):Et(null)))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(eP),c.LFG(ii),c.LFG(BA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bH(n,t,e,r,i,u,h){try{var _=n[u](h),b=_.value}catch(D){return void e(D)}_.done?t(b):Promise.resolve(b).then(r,i)}function c9(n,t){1&n&&(c.TgZ(0,"li",7),c.TgZ(1,"a",12),c._uU(2,"Login"),c.qZA(),c.qZA())}function d9(n,t){1&n&&(c.ynx(0),c.TgZ(1,"a",19),c._uU(2,"Manage Artists"),c.qZA(),c.TgZ(3,"a",20),c._uU(4,"Manage Music"),c.qZA(),c.BQk())}function h9(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"li",13),c.TgZ(1,"a",14),c._uU(2),c.qZA(),c.TgZ(3,"div",15),c.TgZ(4,"a",16),c._uU(5,"My Collection"),c.qZA(),c.YNc(6,d9,5,0,"ng-container",17),c.TgZ(7,"a",18),c.NdJ("click",function(){return c.CHM(e),c.oxw().logout()}),c._uU(8,"Log Out"),c.qZA(),c.qZA(),c.qZA()}if(2&n){const e=c.oxw();c.xp6(2),c.Oqu(e.appUser.name),c.xp6(4),c.Q6J("ngIf",e.appUser.isAdmin)}}let f9=(()=>{class n{constructor(e){this.auth=e}ngOnInit(){var e=this;return function(n){return function(){var t=this,e=arguments;return new Promise(function(r,i){var u=n.apply(t,e);function h(b){bH(u,r,i,h,_,"next",b)}function _(b){bH(u,r,i,h,_,"throw",b)}h(void 0)})}}(function*(){e.auth.appUser$.subscribe(r=>e.appUser=r)})()}logout(){this.auth.logout()}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(mC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["bs-navbar"]],decls:17,vars:2,consts:[[1,"navbar","navbar-expand-md","navbar-light","fixed-top","bg-light"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-md-0"],[1,"nav-item"],["routerLink","/artists",1,"nav-link"],["routerLink","/music",1,"nav-link"],["anonymousUser",""],["ngbDropdown","","class","nav-item dropdown",4,"ngIf","ngIfElse"],["routerLink","/login",1,"nav-link"],["ngbDropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","","id","dropdown01","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdown01",1,"dropdown-menu"],["routerLink","/my/collection",1,"dropdown-item"],[4,"ngIf"],[1,"dropdown-item",3,"click"],["routerLink","/admin/artists",1,"dropdown-item"],["routerLink","/admin/music",1,"dropdown-item"]],template:function(e,r){if(1&e&&(c.TgZ(0,"nav",0),c.TgZ(1,"div",1),c.TgZ(2,"a",2),c._uU(3,"Music Library"),c.qZA(),c.TgZ(4,"button",3),c._UZ(5,"span",4),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"ul",6),c.TgZ(8,"li",7),c.TgZ(9,"a",8),c._uU(10," Artists "),c.qZA(),c.qZA(),c.TgZ(11,"li",7),c.TgZ(12,"a",9),c._uU(13," Music "),c.qZA(),c.qZA(),c.YNc(14,c9,3,0,"ng-template",null,10,c.W1O),c.YNc(16,h9,9,2,"li",11),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const i=c.MAs(15);c.xp6(16),c.Q6J("ngIf",r.appUser)("ngIfElse",i)}},directives:[KC,eh,Yt,iy,b1,Sb],styles:[".dropdown-toggle[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),p9=(()=>{class n{constructor(e,r,i){this.userService=e,this.auth=r,this.title="StoreApp",r.user$.subscribe(u=>{if(!u)return;e.save(u);let h=localStorage.getItem("returnUrl");!h||(localStorage.removeItem("returnUrl"),i.navigateByUrl(h))})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(BA),c.Y36(mC),c.Y36(Gi))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"container"]],template:function(e,r){1&e&&(c._UZ(0,"bs-navbar"),c.TgZ(1,"main",0),c._UZ(2,"router-outlet"),c.qZA(),c._UZ(3,"bs-navbar"),c.TgZ(4,"main",0),c._UZ(5,"router-outlet"),c.qZA())},directives:[f9,Kc],styles:[".bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}"]}),n})(),g9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(e,r){1&e&&(c.TgZ(0,"p"),c._uU(1,"home works!"),c.qZA())},styles:[""]}),n})(),m9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-artist"]],decls:2,vars:0,template:function(e,r){1&e&&(c.TgZ(0,"p"),c._uU(1,"artist works!"),c.qZA())},styles:[""]}),n})(),_9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-music"]],decls:2,vars:0,template:function(e,r){1&e&&(c.TgZ(0,"p"),c._uU(1,"music works!"),c.qZA())},styles:[""]}),n})(),v9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-mycollection"]],decls:2,vars:0,template:function(e,r){1&e&&(c.TgZ(0,"p"),c._uU(1,"mycollection works!"),c.qZA())},styles:[""]}),n})(),y9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-admin-music"]],decls:2,vars:0,template:function(e,r){1&e&&(c.TgZ(0,"p"),c._uU(1,"admin-music works!"),c.qZA())},styles:[""]}),n})(),b9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-admin-artist"]],decls:2,vars:0,template:function(e,r){1&e&&(c.TgZ(0,"p"),c._uU(1,"admin-artist works!"),c.qZA())},styles:[""]}),n})(),w9=(()=>{class n{constructor(e){this.auth=e}ngOnInit(){}login(){this.auth.login()}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(mC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:2,vars:0,consts:[[1,"btn","btn-primary",3,"click"]],template:function(e,r){1&e&&(c.TgZ(0,"button",0),c.NdJ("click",function(){return r.login()}),c._uU(1,"Login with Google"),c.qZA())},styles:[""]}),n})(),aM=(()=>{class n{constructor(e,r){this.auth=e,this.router=r}canActivate(e,r){return this.auth.user$.pipe((0,Nt.U)(i=>!!i||(this.router.navigate(["/login"],{queryParams:{returnUrl:r.url}}),!1)))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(mC),c.LFG(Gi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qP=(()=>{class n{constructor(e,r){this.auth=e,this.userService=r}canActivate(){return this.auth.appUser$.pipe((0,Nt.U)(e=>e.isAdmin))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(mC),c.LFG(BA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[p9]}),n.\u0275inj=c.cJS({providers:[mC,BA,aM,qP],imports:[[da,U$,bf,Xm,Mo.hO.initializeApp(Oj_firebase),k$,V$,O6,V6,NG,$.forRoot([{path:"",component:g9},{path:"artists",component:m9},{path:"music",component:_9},{path:"login",component:w9},{path:"my/collection",component:v9,canActivate:[aM]},{path:"admin/music",component:y9,canActivate:[aM,qP]},{path:"admin/artists",component:b9,canActivate:[aM,qP]}]),VN]]}),n})();(0,c.G48)(),os().bootstrapModule(C9).catch(n=>console.error(n))},9162:(_t,Ve,J)=>{"use strict";function Ae(ee,ce,j,he){return new(j||(j=Promise))(function(ie,Be){function We(st){try{Je(he.next(st))}catch(rt){Be(rt)}}function bt(st){try{Je(he.throw(st))}catch(rt){Be(rt)}}function Je(st){st.done?ie(st.value):function(ie){return ie instanceof j?ie:new j(function(Be){Be(ie)})}(st.value).then(We,bt)}Je((he=he.apply(ee,ce||[])).next())})}function Re(ee){return this instanceof Re?(this.v=ee,this):new Re(ee)}function be(ee,ce,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,he=j.apply(ee,ce||[]),ie=[];return De={},Be("next"),Be("throw"),Be("return"),De[Symbol.asyncIterator]=function(){return this},De;function Be(Ye){he[Ye]&&(De[Ye]=function(It){return new Promise(function(Ut,Xt){ie.push([Ye,It,Ut,Xt])>1||We(Ye,It)})})}function We(Ye,It){try{!function(Ye){Ye.value instanceof Re?Promise.resolve(Ye.value.v).then(Je,st):rt(ie[0][2],Ye)}(he[Ye](It))}catch(Ut){rt(ie[0][3],Ut)}}function Je(Ye){We("next",Ye)}function st(Ye){We("throw",Ye)}function rt(Ye,It){Ye(It),ie.shift(),ie.length&&We(ie[0][0],ie[0][1])}}function nt(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,ce=ee[Symbol.asyncIterator];return ce?ce.call(ee):(ee=function(ee){var ce="function"==typeof Symbol&&Symbol.iterator,j=ce&&ee[ce],he=0;if(j)return j.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&he>=ee.length&&(ee=void 0),{value:ee&&ee[he++],done:!ee}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),j={},he("next"),he("throw"),he("return"),j[Symbol.asyncIterator]=function(){return this},j);function he(ie){j[ie]=ee[ie]&&function(Be){return new Promise(function(We,bt){!function(ie,Be,We,bt){Promise.resolve(bt).then(function(Je){ie({value:Je,done:We})},Be)}(We,bt,(Be=ee[ie](Be)).done,Be.value)})}}}J.d(Ve,{mG:()=>Ae,qq:()=>Re,FC:()=>be,KL:()=>nt})},4762:(_t,Ve,J)=>{"use strict";J.r(Ve),J.d(Ve,{__extends:()=>H,__assign:()=>B,__rest:()=>ge,__decorate:()=>Pe,__param:()=>Ue,__metadata:()=>we,__awaiter:()=>Ae,__generator:()=>Ie,__createBinding:()=>Y,__exportStar:()=>_e,__values:()=>pe,__read:()=>Me,__spread:()=>ve,__spreadArrays:()=>Ge,__spreadArray:()=>ot,__await:()=>Re,__asyncGenerator:()=>be,__asyncDelegator:()=>Oe,__asyncValues:()=>nt,__makeTemplateObject:()=>ze,__importStar:()=>Qe,__importDefault:()=>je,__classPrivateFieldGet:()=>gt,__classPrivateFieldSet:()=>Ct});var c=function(ee,ce){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,he){j.__proto__=he}||function(j,he){for(var De in he)Object.prototype.hasOwnProperty.call(he,De)&&(j[De]=he[De])})(ee,ce)};function H(ee,ce){if("function"!=typeof ce&&null!==ce)throw new TypeError("Class extends value "+String(ce)+" is not a constructor or null");function j(){this.constructor=ee}c(ee,ce),ee.prototype=null===ce?Object.create(ce):(j.prototype=ce.prototype,new j)}var B=function(){return B=Object.assign||function(ce){for(var j,he=1,De=arguments.length;he<De;he++)for(var ie in j=arguments[he])Object.prototype.hasOwnProperty.call(j,ie)&&(ce[ie]=j[ie]);return ce},B.apply(this,arguments)};function ge(ee,ce){var j={};for(var he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&ce.indexOf(he)<0&&(j[he]=ee[he]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(he=Object.getOwnPropertySymbols(ee);De<he.length;De++)ce.indexOf(he[De])<0&&Object.prototype.propertyIsEnumerable.call(ee,he[De])&&(j[he[De]]=ee[he[De]])}return j}function Pe(ee,ce,j,he){var Be,De=arguments.length,ie=De<3?ce:null===he?he=Object.getOwnPropertyDescriptor(ce,j):he;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ie=Reflect.decorate(ee,ce,j,he);else for(var We=ee.length-1;We>=0;We--)(Be=ee[We])&&(ie=(De<3?Be(ie):De>3?Be(ce,j,ie):Be(ce,j))||ie);return De>3&&ie&&Object.defineProperty(ce,j,ie),ie}function Ue(ee,ce){return function(j,he){ce(j,he,ee)}}function we(ee,ce){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ee,ce)}function Ae(ee,ce,j,he){return new(j||(j=Promise))(function(ie,Be){function We(st){try{Je(he.next(st))}catch(rt){Be(rt)}}function bt(st){try{Je(he.throw(st))}catch(rt){Be(rt)}}function Je(st){st.done?ie(st.value):function(ie){return ie instanceof j?ie:new j(function(Be){Be(ie)})}(st.value).then(We,bt)}Je((he=he.apply(ee,ce||[])).next())})}function Ie(ee,ce){var he,De,ie,Be,j={label:0,sent:function(){if(1&ie[0])throw ie[1];return ie[1]},trys:[],ops:[]};return Be={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(Be[Symbol.iterator]=function(){return this}),Be;function We(Je){return function(st){return function(Je){if(he)throw new TypeError("Generator is already executing.");for(;j;)try{if(he=1,De&&(ie=2&Je[0]?De.return:Je[0]?De.throw||((ie=De.return)&&ie.call(De),0):De.next)&&!(ie=ie.call(De,Je[1])).done)return ie;switch(De=0,ie&&(Je=[2&Je[0],ie.value]),Je[0]){case 0:case 1:ie=Je;break;case 4:return j.label++,{value:Je[1],done:!1};case 5:j.label++,De=Je[1],Je=[0];continue;case 7:Je=j.ops.pop(),j.trys.pop();continue;default:if(!(ie=(ie=j.trys).length>0&&ie[ie.length-1])&&(6===Je[0]||2===Je[0])){j=0;continue}if(3===Je[0]&&(!ie||Je[1]>ie[0]&&Je[1]<ie[3])){j.label=Je[1];break}if(6===Je[0]&&j.label<ie[1]){j.label=ie[1],ie=Je;break}if(ie&&j.label<ie[2]){j.label=ie[2],j.ops.push(Je);break}ie[2]&&j.ops.pop(),j.trys.pop();continue}Je=ce.call(ee,j)}catch(st){Je=[6,st],De=0}finally{he=ie=0}if(5&Je[0])throw Je[1];return{value:Je[0]?Je[1]:void 0,done:!0}}([Je,st])}}}var Y=Object.create?function(ee,ce,j,he){void 0===he&&(he=j),Object.defineProperty(ee,he,{enumerable:!0,get:function(){return ce[j]}})}:function(ee,ce,j,he){void 0===he&&(he=j),ee[he]=ce[j]};function _e(ee,ce){for(var j in ee)"default"!==j&&!Object.prototype.hasOwnProperty.call(ce,j)&&Y(ce,ee,j)}function pe(ee){var ce="function"==typeof Symbol&&Symbol.iterator,j=ce&&ee[ce],he=0;if(j)return j.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&he>=ee.length&&(ee=void 0),{value:ee&&ee[he++],done:!ee}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(ee,ce){var j="function"==typeof Symbol&&ee[Symbol.iterator];if(!j)return ee;var De,Be,he=j.call(ee),ie=[];try{for(;(void 0===ce||ce-- >0)&&!(De=he.next()).done;)ie.push(De.value)}catch(We){Be={error:We}}finally{try{De&&!De.done&&(j=he.return)&&j.call(he)}finally{if(Be)throw Be.error}}return ie}function ve(){for(var ee=[],ce=0;ce<arguments.length;ce++)ee=ee.concat(Me(arguments[ce]));return ee}function Ge(){for(var ee=0,ce=0,j=arguments.length;ce<j;ce++)ee+=arguments[ce].length;var he=Array(ee),De=0;for(ce=0;ce<j;ce++)for(var ie=arguments[ce],Be=0,We=ie.length;Be<We;Be++,De++)he[De]=ie[Be];return he}function ot(ee,ce,j){if(j||2===arguments.length)for(var ie,he=0,De=ce.length;he<De;he++)(ie||!(he in ce))&&(ie||(ie=Array.prototype.slice.call(ce,0,he)),ie[he]=ce[he]);return ee.concat(ie||Array.prototype.slice.call(ce))}function Re(ee){return this instanceof Re?(this.v=ee,this):new Re(ee)}function be(ee,ce,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,he=j.apply(ee,ce||[]),ie=[];return De={},Be("next"),Be("throw"),Be("return"),De[Symbol.asyncIterator]=function(){return this},De;function Be(Ye){he[Ye]&&(De[Ye]=function(It){return new Promise(function(Ut,Xt){ie.push([Ye,It,Ut,Xt])>1||We(Ye,It)})})}function We(Ye,It){try{!function(Ye){Ye.value instanceof Re?Promise.resolve(Ye.value.v).then(Je,st):rt(ie[0][2],Ye)}(he[Ye](It))}catch(Ut){rt(ie[0][3],Ut)}}function Je(Ye){We("next",Ye)}function st(Ye){We("throw",Ye)}function rt(Ye,It){Ye(It),ie.shift(),ie.length&&We(ie[0][0],ie[0][1])}}function Oe(ee){var ce,j;return ce={},he("next"),he("throw",function(De){throw De}),he("return"),ce[Symbol.iterator]=function(){return this},ce;function he(De,ie){ce[De]=ee[De]?function(Be){return(j=!j)?{value:Re(ee[De](Be)),done:"return"===De}:ie?ie(Be):Be}:ie}}function nt(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,ce=ee[Symbol.asyncIterator];return ce?ce.call(ee):(ee=pe(ee),j={},he("next"),he("throw"),he("return"),j[Symbol.asyncIterator]=function(){return this},j);function he(ie){j[ie]=ee[ie]&&function(Be){return new Promise(function(We,bt){!function(ie,Be,We,bt){Promise.resolve(bt).then(function(Je){ie({value:Je,done:We})},Be)}(We,bt,(Be=ee[ie](Be)).done,Be.value)})}}}function ze(ee,ce){return Object.defineProperty?Object.defineProperty(ee,"raw",{value:ce}):ee.raw=ce,ee}var Ke=Object.create?function(ee,ce){Object.defineProperty(ee,"default",{enumerable:!0,value:ce})}:function(ee,ce){ee.default=ce};function Qe(ee){if(ee&&ee.__esModule)return ee;var ce={};if(null!=ee)for(var j in ee)"default"!==j&&Object.prototype.hasOwnProperty.call(ee,j)&&Y(ce,ee,j);return Ke(ce,ee),ce}function je(ee){return ee&&ee.__esModule?ee:{default:ee}}function gt(ee,ce,j,he){if("a"===j&&!he)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof ce?ee!==ce||!he:!ce.has(ee))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===j?he:"a"===j?he.call(ee):he?he.value:ce.get(ee)}function Ct(ee,ce,j,he,De){if("m"===he)throw new TypeError("Private method is not writable");if("a"===he&&!De)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof ce?ee!==ce||!De:!ce.has(ee))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===he?De.call(ee,j):De?De.value=j:ce.set(ee,j),j}},3668:(_t,Ve,J)=>{"use strict";J.d(Ve,{deG:()=>Al,tb:()=>og,AFp:()=>FE,ip1:()=>s_,CZH:()=>a_,hGG:()=>uk,z2F:()=>c_,sBO:()=>sg,Sil:()=>UE,_Vd:()=>uy,EJc:()=>ES,SBq:()=>ud,qLn:()=>ps,vpe:()=>sl,gxx:()=>Jl,tBr:()=>_i,XFs:()=>ft,OlP:()=>sr,zs3:()=>ar,ZZ4:()=>cw,aQg:()=>dw,soG:()=>by,YKP:()=>$1,h0i:()=>If,PXZ:()=>VN,R0b:()=>Ia,FiY:()=>vi,Lbi:()=>du,g9A:()=>pN,Qsj:()=>NR,FYo:()=>Mb,JOm:()=>Ea,Tiy:()=>dE,q3G:()=>hr,tp0:()=>_o,Rgc:()=>n_,dDg:()=>zE,q4F:()=>Rb,GfV:()=>FR,s_b:()=>EE,ifc:()=>yt,eFA:()=>VS,G48:()=>OS,Gpc:()=>_e,f3M:()=>xg,X6Q:()=>qE,_c5:()=>eL,VLi:()=>kN,c2e:()=>CS,zSh:()=>Hp,wAp:()=>Ht,vHH:()=>Ge,EiD:()=>zs,mCW:()=>tu,qzn:()=>Xa,JVY:()=>$u,pB0:()=>Ll,eBb:()=>Fl,L6k:()=>np,LAX:()=>rp,cg1:()=>m1,Tjo:()=>YN,kL8:()=>_1,yhl:()=>zu,dqk:()=>In,sIi:()=>Wp,CqO:()=>FC,QGY:()=>Kp,F4k:()=>zi,RDi:()=>Ig,AaK:()=>Ae,z3N:()=>ii,qOj:()=>Gv,TTD:()=>Uo,_Bn:()=>uE,xp6:()=>Ap,uIk:()=>jm,Tol:()=>KT,DjV:()=>$M,ekj:()=>xi,Suo:()=>qb,Xpm:()=>et,lG2:()=>Lr,Yz7:()=>Xt,cJS:()=>Yn,oAB:()=>gr,Yjl:()=>Fo,Y36:()=>sd,_UZ:()=>xC,GkF:()=>NM,BQk:()=>PC,ynx:()=>OC,qZA:()=>sb,TgZ:()=>kC,EpF:()=>LT,n5z:()=>wt,Ikx:()=>g1,SDv:()=>iE,QtT:()=>oE,pQV:()=>Ib,LFG:()=>Vn,$8M:()=>as,$Z:()=>FT,NdJ:()=>LC,CRH:()=>nS,oxw:()=>cb,ALo:()=>Fb,lcZ:()=>mE,Hsn:()=>xM,F$t:()=>BC,Q6J:()=>ob,s9C:()=>db,MGl:()=>hb,VKq:()=>GR,WLB:()=>fE,kEZ:()=>zR,iGM:()=>fy,MAs:()=>ST,CHM:()=>qr,LSH:()=>wo,kYT:()=>ao,Udp:()=>gb,YNc:()=>TT,W1O:()=>iS,_uU:()=>Xp,Oqu:()=>Kv,hij:()=>yb,Gf:()=>tS});var c=J(273),H=J(7908),B=J(2047),ge=J(3719),Pe=J(3174);function Ue(o){for(let s in o)if(o[s]===Ue)return s;throw Error("Could not find renamed property on target object.")}function we(o,s){for(const l in s)s.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=s[l])}function Ae(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(Ae).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const s=o.toString();if(null==s)return""+s;const l=s.indexOf("\n");return-1===l?s:s.substring(0,l)}function Ie(o,s){return null==o||""===o?null===s?"":s:null==s||""===s?o:o+" "+s}const Y=Ue({__forward_ref__:Ue});function _e(o){return o.__forward_ref__=_e,o.toString=function(){return Ae(this())},o}function pe(o){return Me(o)?o():o}function Me(o){return"function"==typeof o&&o.hasOwnProperty(Y)&&o.__forward_ref__===_e}class Ge extends Error{constructor(s,l){super(function(o,s){return`${o?`NG0${o}: `:""}${s}`}(s,l)),this.code=s}}function be(o){return"string"==typeof o?o:null==o?"":String(o)}function Oe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():be(o)}function Qe(o,s){const l=s?` in ${s}`:"";throw new Ge("201",`No provider for ${Oe(o)} found${l}`)}function rt(o,s,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${s} <=Actual]`))}function Xt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Yn(o){return{providers:o.providers||[],imports:o.imports||[]}}function tr(o){return oo(o,un)||oo(o,Gr)}function oo(o,s){return o.hasOwnProperty(s)?o[s]:null}function Cu(o){return o&&(o.hasOwnProperty($t)||o.hasOwnProperty(jn))?o[$t]:null}const un=Ue({\u0275prov:Ue}),$t=Ue({\u0275inj:Ue}),Gr=Ue({ngInjectableDef:Ue}),jn=Ue({ngInjectorDef:Ue});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let hn;function Rn(o){const s=hn;return hn=o,s}function aa(o,s,l){const d=tr(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&ft.Optional?null:void 0!==s?s:void Qe(Ae(o),"Injector")}function so(o){return{toString:o}.toString()}var Ar=(()=>((Ar=Ar||{})[Ar.OnPush=0]="OnPush",Ar[Ar.Default=1]="Default",Ar))(),yt=(()=>{return(o=yt||(yt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",yt;var o})();const zt="undefined"!=typeof globalThis&&globalThis,Nn="undefined"!=typeof window&&window,Po="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,In=zt||"undefined"!=typeof global&&global||Nn||Po,kn={},ue=[],se=Ue({\u0275cmp:Ue}),ye=Ue({\u0275dir:Ue}),X=Ue({\u0275pipe:Ue}),te=Ue({\u0275mod:Ue}),de=Ue({\u0275fac:Ue}),Te=Ue({__NG_ELEMENT_ID__:Ue});let $e=0;function et(o){return so(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Ar.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||ue,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||yt.Emulated,id:"c",styles:o.styles||ue,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.directives,y=o.features,E=o.pipes;return d.id+=$e++,d.inputs=ua(o.inputs,l),d.outputs=ua(o.outputs),y&&y.forEach(T=>T(d)),d.directiveDefs=m?()=>("function"==typeof m?m():m).map(en):null,d.pipeDefs=E?()=>("function"==typeof E?E():E).map(En):null,d})}function en(o){return Hn(o)||function(o){return o[ye]||null}(o)}function En(o){return function(o){return o[X]||null}(o)}const _n={};function gr(o){return so(()=>{const s={type:o.type,bootstrap:o.bootstrap||ue,declarations:o.declarations||ue,imports:o.imports||ue,exports:o.exports||ue,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(_n[o.id]=o.type),s})}function ao(o,s){return so(()=>{const l=Rr(o,!0);l.declarations=s.declarations||ue,l.imports=s.imports||ue,l.exports=s.exports||ue})}function ua(o,s){if(null==o)return kn;const l={};for(const d in o)if(o.hasOwnProperty(d)){let m=o[d],y=m;Array.isArray(m)&&(y=m[1],m=m[0]),l[m]=d,s&&(s[m]=y)}return l}const Lr=et;function Fo(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function Hn(o){return o[se]||null}function Rr(o,s){const l=o[te]||null;if(!l&&!0===s)throw new Error(`Type ${Ae(o)} does not have '\u0275mod' property.`);return l}function Tn(o){return Array.isArray(o)&&"object"==typeof o[1]}function Ot(o){return Array.isArray(o)&&!0===o[1]}function Ei(o){return 0!=(8&o.flags)}function mc(o){return 2==(2&o.flags)}function _c(o){return 1==(1&o.flags)}function kr(o){return null!==o.template}function co(o){return 0!=(512&o[2])}function Di(o,s){return o.hasOwnProperty(de)?o[de]:null}class Dd{constructor(s,l,d){this.previousValue=s,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Uo(){return Td}function Td(o){return o.type.prototype.ngOnChanges&&(o.setInput=Vr),p0}function p0(){const o=xh(this),s=null==o?void 0:o.current;if(s){const l=o.previous;if(l===kn)o.previous=s;else for(let d in s)l[d]=s[d];o.current=null,this.ngOnChanges(s)}}function Vr(o,s,l,d){const m=xh(o)||function(o,s){return o[Sd]=s}(o,{previous:kn,current:null}),y=m.current||(m.current={}),E=m.previous,T=this.declaredInputs[l],R=E[T];y[T]=new Dd(R&&R.currentValue,s,E===kn),o[d]=s}Uo.ngInherit=!0;const Sd="__ngSimpleChanges__";function xh(o){return o[Sd]||null}let Qn;function Ig(o){Qn=o}function Bf(){return void 0!==Qn?Qn:"undefined"!=typeof document?document:void 0}function mr(o){return!!o.listen}const yc={createRenderer:(o,s)=>Bf()};function Fn(o){for(;Array.isArray(o);)o=o[0];return o}function Au(o,s){return Fn(s[o])}function Ki(o,s){return Fn(s[o.index])}function Ba(o,s){return o.data[s]}function Mu(o,s){return o[s]}function Si(o,s){const l=s[o];return Tn(l)?l:l[0]}function Ms(o){return 4==(4&o[2])}function yl(o){return 128==(128&o[2])}function $r(o,s){return null==s?null:o[s]}function Ag(o){o[18]=0}function jf(o,s){o[5]+=s;let l=o,d=o[3];for(;null!==d&&(1===s&&1===l[5]||-1===s&&0===l[5]);)d[5]+=s,l=d,d=d[3]}const Pt={lFrame:qf(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Hf(){return Pt.bindingsEnabled}function Ze(){return Pt.lFrame.lView}function mn(){return Pt.lFrame.tView}function qr(o){return Pt.lFrame.contextLView=o,o[8]}function Cr(){let o=wc();for(;null!==o&&64===o.type;)o=o.parent;return o}function wc(){return Pt.lFrame.currentTNode}function Rs(){const o=Pt.lFrame,s=o.currentTNode;return o.isParent?s:s.parent}function Vi(o,s){const l=Pt.lFrame;l.currentTNode=o,l.isParent=s}function Ns(){return Pt.lFrame.isParent}function Cc(){Pt.lFrame.isParent=!1}function ks(){return Pt.isInCheckNoChangesMode}function Dc(o){Pt.isInCheckNoChangesMode=o}function Br(){const o=Pt.lFrame;let s=o.bindingRootIndex;return-1===s&&(s=o.bindingRootIndex=o.tView.bindingStartIndex),s}function Ho(){return Pt.lFrame.bindingIndex}function di(){return Pt.lFrame.bindingIndex++}function Bi(o){const s=Pt.lFrame,l=s.bindingIndex;return s.bindingIndex=s.bindingIndex+o,l}function Ru(o){Pt.lFrame.inI18n=o}function _r(o,s){const l=Pt.lFrame;l.bindingIndex=l.bindingRootIndex=o,Ii(s)}function Ii(o){Pt.lFrame.currentDirectiveIndex=o}function Sc(){return Pt.lFrame.currentQueryIndex}function hi(o){Pt.lFrame.currentQueryIndex=o}function $f(o){const s=o[1];return 2===s.type?s.declTNode:1===s.type?o[6]:null}function El(o,s,l){if(l&ft.SkipSelf){let m=s,y=o;for(;!(m=m.parent,null!==m||l&ft.Host||(m=$f(y),null===m||(y=y[15],10&m.type))););if(null===m)return!1;s=m,o=y}const d=Pt.lFrame=Mg();return d.currentTNode=s,d.lView=o,!0}function Dl(o){const s=Mg(),l=o[1];Pt.lFrame=s,s.currentTNode=l.firstChild,s.lView=o,s.tView=l,s.contextLView=o,s.bindingIndex=l.bindingStartIndex,s.inI18n=!1}function Mg(){const o=Pt.lFrame,s=null===o?null:o.child;return null===s?qf(o):s}function qf(o){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=s),s}function Md(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Ua=Md;function fi(){const o=Md();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Ur(){return Pt.lFrame.selectedIndex}function ja(o){Pt.lFrame.selectedIndex=o}function vr(){const o=Pt.lFrame;return Ba(o.tView,o.selectedIndex)}function Vh(o,s){for(let l=s.directiveStart,d=s.directiveEnd;l<d;l++){const y=o.data[l].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:T,ngAfterViewInit:R,ngAfterViewChecked:O,ngOnDestroy:V}=y;E&&(o.contentHooks||(o.contentHooks=[])).push(-l,E),T&&((o.contentHooks||(o.contentHooks=[])).push(l,T),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,T)),R&&(o.viewHooks||(o.viewHooks=[])).push(-l,R),O&&((o.viewHooks||(o.viewHooks=[])).push(l,O),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,O)),null!=V&&(o.destroyHooks||(o.destroyHooks=[])).push(l,V)}}function Ai(o,s,l){Bh(o,s,3,l)}function ho(o,s,l,d){(3&o[2])===l&&Bh(o,s,l,d)}function Os(o,s){let l=o[2];(3&l)===s&&(l&=2047,l+=1,o[2]=l)}function Bh(o,s,l,d){const y=null!=d?d:-1,E=s.length-1;let T=0;for(let R=void 0!==d?65535&o[18]:0;R<E;R++)if("number"==typeof s[R+1]){if(T=s[R],null!=d&&T>=d)break}else s[R]<0&&(o[18]+=65536),(T<y||-1==y)&&(Rg(o,l,s,R),o[18]=(4294901760&o[18])+R+2),R++}function Rg(o,s,l,d){const m=l[d]<0,y=l[d+1],T=o[m?-l[d]:l[d]];if(m){if(o[2]>>11<o[18]>>16&&(3&o[2])===s){o[2]+=2048;try{y.call(T)}finally{}}}else try{y.call(T)}finally{}}class os{constructor(s,l,d){this.factory=s,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Nc(o,s,l){const d=mr(o);let m=0;for(;m<l.length;){const y=l[m];if("number"==typeof y){if(0!==y)break;m++;const E=l[m++],T=l[m++],R=l[m++];d?o.setAttribute(s,T,R,E):s.setAttributeNS(E,T,R)}else{const E=y,T=l[++m];fo(E)?d&&o.setProperty(s,E,T):d?o.setAttribute(s,E,T):s.setAttribute(E,T),m++}}return m}function ss(o){return 3===o||4===o||6===o}function fo(o){return 64===o.charCodeAt(0)}function kc(o,s){if(null!==s&&0!==s.length)if(null===o||0===o.length)o=s.slice();else{let l=-1;for(let d=0;d<s.length;d++){const m=s[d];"number"==typeof m?l=m:0===l||Y_(o,l,m,null,-1===l||2===l?s[++d]:null)}}return o}function Y_(o,s,l,d,m){let y=0,E=o.length;if(-1===s)E=-1;else for(;y<o.length;){const T=o[y++];if("number"==typeof T){if(T===s){E=-1;break}if(T>s){E=y-1;break}}}for(;y<o.length;){const T=o[y];if("number"==typeof T)break;if(T===l){if(null===d)return void(null!==m&&(o[y+1]=m));if(d===o[y+1])return void(o[y+2]=m)}y++,null!==d&&y++,null!==m&&y++}-1!==E&&(o.splice(E,0,s),y=E+1),o.splice(y++,0,l),null!==d&&o.splice(y++,0,d),null!==m&&o.splice(y++,0,m)}function Uh(o){return-1!==o}function Tl(o){return 32767&o}function Oc(o,s){let l=function(o){return o>>16}(o),d=s;for(;l>0;)d=d[15],l--;return d}let xu=!0;function ti(o){const s=xu;return xu=o,s}let Nd=0;function ni(o,s){const l=on(o,s);if(-1!==l)return l;const d=s[1];d.firstCreatePass&&(o.injectorIndex=s.length,Et(d.data,o),Et(s,null),Et(d.blueprint,null));const m=$n(o,s),y=o.injectorIndex;if(Uh(m)){const E=Tl(m),T=Oc(m,s),R=T[1].data;for(let O=0;O<8;O++)s[y+O]=T[E+O]|R[E+O]}return s[y+8]=m,y}function Et(o,s){o.push(0,0,0,0,0,0,0,0,s)}function on(o,s){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===s[o.injectorIndex+8]?-1:o.injectorIndex}function $n(o,s){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,m=s;for(;null!==m;){const y=m[1],E=y.type;if(d=2===E?y.declTNode:1===E?m[6]:null,null===d)return-1;if(l++,m=m[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Ln(o,s,l){!function(o,s,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Te)&&(d=l[Te]),null==d&&(d=l[Te]=Nd++);const m=255&d;s.data[o+(m>>5)]|=1<<m}(o,s,l)}function Kf(o,s,l){if(l&ft.Optional)return o;Qe(s,"NodeInjector")}function ha(o,s,l,d){if(l&ft.Optional&&void 0===d&&(d=null),0==(l&(ft.Self|ft.Host))){const m=o[9],y=Rn(void 0);try{return m?m.get(s,d,l&ft.Optional):aa(s,d,l&ft.Optional)}finally{Rn(y)}}return Kf(d,s,l)}function Pc(o,s,l,d=ft.Default,m){if(null!==o){const y=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const s=o.hasOwnProperty(Te)?o[Te]:void 0;return"number"==typeof s?s>=0?255&s:kd:s}(l);if("function"==typeof y){if(!El(s,o,d))return d&ft.Host?Kf(m,l,d):ha(s,l,d,m);try{const E=y(d);if(null!=E||d&ft.Optional)return E;Qe(l)}finally{Ua()}}else if("number"==typeof y){let E=null,T=on(o,s),R=-1,O=d&ft.Host?s[16][6]:null;for((-1===T||d&ft.SkipSelf)&&(R=-1===T?$n(o,s):s[T+8],-1!==R&&Lc(d,!1)?(E=s[1],T=Tl(R),s=Oc(R,s)):T=-1);-1!==T;){const V=s[1];if(Ou(y,T,V.data)){const q=Sl(T,s,l,E,d,O);if(q!==Qf)return q}R=s[T+8],-1!==R&&Lc(d,s[1].data[T+8]===O)&&Ou(y,T,s)?(E=V,T=Tl(R),s=Oc(R,s)):T=-1}}}return ha(s,l,d,m)}const Qf={};function kd(){return new qn(Cr(),Ze())}function Sl(o,s,l,d,m,y){const E=s[1],T=E.data[o+8],V=Nt(T,E,l,null==d?mc(T)&&xu:d!=E&&0!=(3&T.type),m&ft.Host&&y===T);return null!==V?Fc(s,E,V,T):Qf}function Nt(o,s,l,d,m){const y=o.providerIndexes,E=s.data,T=1048575&y,R=o.directiveStart,V=y>>20,K=m?T+V:o.directiveEnd;for(let le=d?T:T+V;le<K;le++){const me=E[le];if(le<R&&l===me||le>=R&&me.type===l)return le}if(m){const le=E[R];if(le&&kr(le)&&le.type===l)return R}return null}function Fc(o,s,l,d){let m=o[l];const y=s.data;if(function(o){return o instanceof os}(m)){const E=m;E.resolving&&function(o,s){throw new Ge("200",`Circular dependency in DI detected for ${o}`)}(Oe(y[l]));const T=ti(E.canSeeViewProviders);E.resolving=!0;const R=E.injectImpl?Rn(E.injectImpl):null;El(o,d,ft.Default);try{m=o[l]=E.factory(void 0,y,o,d),s.firstCreatePass&&l>=d.directiveStart&&function(o,s,l){const{ngOnChanges:d,ngOnInit:m,ngDoCheck:y}=s.type.prototype;if(d){const E=Td(s);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,E),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,E)}m&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,m),y&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,y))}(l,y[l],s)}finally{null!==R&&Rn(R),ti(T),E.resolving=!1,Ua()}}return m}function Ou(o,s,l){return!!(l[s+(o>>5)]&1<<o)}function Lc(o,s){return!(o&ft.Self||o&ft.Host&&s)}class qn{constructor(s,l){this._tNode=s,this._lView=l}get(s,l,d){return Pc(this._tNode,this._lView,s,d,l)}}function wt(o){return so(()=>{const s=o.prototype.constructor,l=s[de]||jr(s),d=Object.prototype;let m=Object.getPrototypeOf(o.prototype).constructor;for(;m&&m!==d;){const y=m[de]||jr(m);if(y&&y!==l)return y;m=Object.getPrototypeOf(m)}return y=>new y})}function jr(o){return Me(o)?()=>{const s=jr(pe(o));return s&&s()}:Di(o)}function as(o){return function(o,s){if("class"===s)return o.classes;if("style"===s)return o.styles;const l=o.attrs;if(l){const d=l.length;let m=0;for(;m<d;){const y=l[m];if(ss(y))break;if(0===y)m+=2;else if("number"==typeof y)for(m++;m<d&&"string"==typeof l[m];)m++;else{if(y===s)return l[m+1];m+=2}}}return null}(Cr(),o)}const Vc="__parameters__";function us(o,s,l){return so(()=>{const d=function(o){return function(...l){if(o){const d=o(...l);for(const m in d)this[m]=d[m]}}}(s);function m(...y){if(this instanceof m)return d.apply(this,y),this;const E=new m(...y);return T.annotation=E,T;function T(R,O,V){const q=R.hasOwnProperty(Vc)?R[Vc]:Object.defineProperty(R,Vc,{value:[]})[Vc];for(;q.length<=V;)q.push(null);return(q[V]=q[V]||[]).push(E),R}}return l&&(m.prototype=Object.create(l.prototype)),m.prototype.ngMetadataName=o,m.annotationCls=m,m})}class sr{constructor(s,l){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Xt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Al=new sr("AnalyzeForEntryComponents");function Ri(o,s){void 0===s&&(s=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(s===o&&(s=o.slice(0,l)),Ri(d,s)):s!==o&&s.push(d)}return s}function $o(o,s){o.forEach(l=>Array.isArray(l)?$o(l,s):s(l))}function pa(o,s,l){s>=o.length?o.push(l):o.splice(s,0,l)}function yr(o,s){return s>=o.length-1?o.pop():o.splice(s,1)[0]}function Fu(o,s){const l=[];for(let d=0;d<o;d++)l.push(s);return l}function go(o,s,l){let d=Ya(o,s);return d>=0?o[1|d]=l:(d=~d,function(o,s,l,d){let m=o.length;if(m==s)o.push(l,d);else if(1===m)o.push(d,o[0]),o[0]=l;else{for(m--,o.push(o[m-1],o[m]);m>s;)o[m]=o[m-2],m--;o[s]=l,o[s+1]=d}}(o,d,s,l)),d}function Xf(o,s){const l=Ya(o,s);if(l>=0)return o[1|l]}function Ya(o,s){return function(o,s,l){let d=0,m=o.length>>l;for(;m!==d;){const y=d+(m-d>>1),E=o[y<<l];if(s===E)return y<<l;E>s?m=y:d=y+1}return~(m<<l)}(o,s,1)}const Ka={},Vu="__NG_DI_FLAG__",Us="ngTempTokenPath",Nl=/\n/gm,Hc="__source",Fd=Ue({provide:String,useValue:Ue});let Bu;function mo(o){const s=Bu;return Bu=o,s}function mi(o,s=ft.Default){if(void 0===Bu)throw new Error("inject() must be called from an injection context");return null===Bu?aa(o,void 0,s):Bu.get(o,s&ft.Optional?null:void 0,s)}function Vn(o,s=ft.Default){return(hn||mi)(pe(o),s)}const xg=Vn;function _a(o){const s=[];for(let l=0;l<o.length;l++){const d=pe(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let m,y=ft.Default;for(let E=0;E<d.length;E++){const T=d[E],R=kl(T);"number"==typeof R?-1===R?m=T.token:y|=R:m=T}s.push(Vn(m,y))}else s.push(Vn(d))}return s}function Hs(o,s){return o[Vu]=s,o.prototype[Vu]=s,o}function kl(o){return o[Vu]}function Uu(o,s,l,d){const m=o[Us];throw s[Hc]&&m.unshift(s[Hc]),o.message=function(o,s,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let m=Ae(s);if(Array.isArray(s))m=s.map(Ae).join(" -> ");else if("object"==typeof s){let y=[];for(let E in s)if(s.hasOwnProperty(E)){let T=s[E];y.push(E+":"+("string"==typeof T?JSON.stringify(T):Ae(T)))}m=`{${y.join(", ")}}`}return`${l}${d?"("+d+")":""}[${m}]: ${o.replace(Nl,"\n  ")}`}("\n"+o.message,m,l,d),o.ngTokenPath=m,o[Us]=null,o}const _i=Hs(us("Inject",o=>({token:o})),-1),vi=Hs(us("Optional"),8),_o=Hs(us("SkipSelf"),4);let Ol;function Ni(o){var s;return(null==(s=function(){if(void 0===Ol&&(Ol=null,In.trustedTypes))try{Ol=In.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Ol}())?void 0:s.createHTML(o))||o}class Yr{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class cs extends Yr{getTypeName(){return"HTML"}}class $c extends Yr{getTypeName(){return"Style"}}class jd extends Yr{getTypeName(){return"Script"}}class qc extends Yr{getTypeName(){return"URL"}}class qh extends Yr{getTypeName(){return"ResourceURL"}}function ii(o){return o instanceof Yr?o.changingThisBreaksApplicationSecurity:o}function Xa(o,s){const l=zu(o);if(null!=l&&l!==s){if("ResourceURL"===l&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===s}function zu(o){return o instanceof Yr&&o.getTypeName()||null}function $u(o){return new cs(o)}function np(o){return new $c(o)}function Fl(o){return new jd(o)}function rp(o){return new qc(o)}function Ll(o){return new qh(o)}function Ja(o){const s=new eu(o);return function(){try{return!!(new window.DOMParser).parseFromString(Ni(""),"text/html")}catch(o){return!1}}()?new Z_(s):s}class Z_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const l=(new window.DOMParser).parseFromString(Ni(s),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(s):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class eu{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(s){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Ni(s),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Ni(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(s){const l=s.attributes;for(let m=l.length-1;0<m;m--){const E=l.item(m).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&s.removeAttribute(E)}let d=s.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Pg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tu(o){return(o=String(o)).match(Pg)||o.match(Gd)?o:"unsafe:"+o}function zd(o){return(o=String(o)).split(",").map(s=>tu(s.trim())).join(", ")}function qo(o){const s={};for(const l of o.split(","))s[l]=!0;return s}function Gs(...o){const s={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(s[d]=!0);return s}const $d=qo("area,br,col,hr,img,wbr"),Zi=qo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qd=qo("rp,rt"),wa=Gs($d,Gs(Zi,qo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gs(qd,qo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Gs(qd,Zi)),ru=qo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ds=qo("srcset"),op=Gs(ru,ds,qo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lg=qo("script,style,template");class Vg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let l=s.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let m=this.checkClobberedElement(l,l.nextSibling);if(m){l=m;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(s){const l=s.nodeName.toLowerCase();if(!wa.hasOwnProperty(l))return this.sanitizedSomething=!0,!Lg.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=s.attributes;for(let m=0;m<d.length;m++){const y=d.item(m),E=y.name,T=E.toLowerCase();if(!op.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let R=y.value;ru[T]&&(R=tu(R)),ds[T]&&(R=zd(R)),this.buf.push(" ",E,'="',hs(R),'"')}return this.buf.push(">"),!0}endElement(s){const l=s.nodeName.toLowerCase();wa.hasOwnProperty(l)&&!$d.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(s){this.buf.push(hs(s))}checkClobberedElement(s,l){if(l&&(s.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return l}}const Bg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bl=/([^\#-~ |!])/g;function hs(o){return o.replace(/&/g,"&amp;").replace(Bg,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Bl,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ul;function zs(o,s){let l=null;try{Ul=Ul||Ja(o);let d=s?String(s):"";l=Ul.getInertBodyElement(d);let m=5,y=d;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,d=y,y=l.innerHTML,l=Ul.getInertBodyElement(d)}while(d!==y);return Ni((new Vg).sanitizeChildren(Wh(l)||l))}finally{if(l){const d=Wh(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Wh(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var hr=(()=>((hr=hr||{})[hr.NONE=0]="NONE",hr[hr.HTML=1]="HTML",hr[hr.STYLE=2]="STYLE",hr[hr.SCRIPT=3]="SCRIPT",hr[hr.URL=4]="URL",hr[hr.RESOURCE_URL=5]="RESOURCE_URL",hr))();function wo(o){const s=function(){const o=Ze();return o&&o[12]}();return s?s.sanitize(hr.URL,o)||"":Xa(o,"URL")?ii(o):tu(be(o))}const Hl="__ngContext__";function Or(o,s){o[Hl]=s}function ap(o){const s=function(o){return o[Hl]||null}(o);return s?Array.isArray(s)?s:s.lView:null}function Zd(o){return o.ngOriginalError}function Gg(o,...s){o.error(...s)}class ps{constructor(){this._console=console}handleError(s){const l=this._findOriginalError(s),d=this._findContext(s),m=(o=s)&&o.ngErrorLogger||Gg;var o;m(this._console,"ERROR",s),l&&m(this._console,"ORIGINAL ERROR",l),d&&m(this._console,"ERROR CONTEXT",d)}_findContext(s){return s?s.ngDebugContext||this._findContext(Zd(s)):null}_findOriginalError(s){let l=s&&Zd(s);for(;l&&Zd(l);)l=Zd(l);return l||null}}const Jd=/^>|^->|<!--|-->|--!>|<!-$/g,Co=/(<|>)/;const Wg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(In))();function eo(o){return o instanceof Function?o():o}var Ea=(()=>((Ea=Ea||{})[Ea.Important=1]="Important",Ea[Ea.DashCase=2]="DashCase",Ea))();let Zh;function Kg(o,s){return Zh(o,s)}function td(o){const s=o[3];return Ot(s)?s[3]:s}function yp(o){return Xg(o[13])}function bp(o){return Xg(o[4])}function Xg(o){for(;null!==o&&!Ot(o);)o=o[4];return o}function Ku(o,s,l,d,m){if(null!=d){let y,E=!1;Ot(d)?y=d:Tn(d)&&(E=!0,d=d[0]);const T=Fn(d);0===o&&null!==l?null==m?Tp(s,l,T):sn(s,l,T,m||null,!0):1===o&&null!==l?sn(s,l,T,m||null,!0):2===o?ae(s,T,E):3===o&&s.destroyNode(T),null!=y&&function(o,s,l,d,m){const y=l[7];y!==Fn(l)&&Ku(s,o,d,y,m);for(let T=10;T<l.length;T++){const R=l[T];Fe(R[1],R,o,s,d,y)}}(s,o,y,l,m)}}function Gl(o,s){return mr(o)?o.createText(s):o.createTextNode(s)}function wp(o,s,l){mr(o)?o.setValue(s,l):s.textContent=l}function zl(o,s){return o.createComment(function(o){return o.replace(Jd,s=>s.replace(Co,"\u200b$1\u200b"))}(s))}function Qu(o,s,l){return mr(o)?o.createElement(s,l):null===l?o.createElement(s):o.createElementNS(l,s)}function tm(o,s){const l=o[9],d=l.indexOf(s),m=s[3];1024&s[2]&&(s[2]&=-1025,jf(m,-1)),l.splice(d,1)}function Ep(o,s){if(o.length<=10)return;const l=10+s,d=o[l];if(d){const m=d[17];null!==m&&m!==o&&tm(m,d),s>0&&(o[l-1][4]=d[4]);const y=yr(o,10+s);!function(o,s){Fe(o,s,s[11],2,null,null),s[0]=null,s[6]=null}(d[1],d);const E=y[19];null!==E&&E.detachView(y[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Gi(o,s){if(!(256&s[2])){const l=s[11];mr(l)&&l.destroyNode&&Fe(o,s,l,3,null,null),function(o){let s=o[13];if(!s)return Xh(o[1],o);for(;s;){let l=null;if(Tn(s))l=s[13];else{const d=s[10];d&&(l=d)}if(!l){for(;s&&!s[4]&&s!==o;)Tn(s)&&Xh(s[1],s),s=s[3];null===s&&(s=o),Tn(s)&&Xh(s[1],s),l=s&&s[4]}s=l}}(s)}}function Xh(o,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(o,s){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const m=s[l[d]];if(!(m instanceof os)){const y=l[d+1];if(Array.isArray(y))for(let E=0;E<y.length;E+=2){const T=m[y[E]],R=y[E+1];try{R.call(T)}finally{}}else try{y.call(m)}finally{}}}}(o,s),function(o,s){const l=o.cleanup,d=s[7];let m=-1;if(null!==l)for(let y=0;y<l.length-1;y+=2)if("string"==typeof l[y]){const E=l[y+1],T="function"==typeof E?E(s):Fn(s[E]),R=d[m=l[y+2]],O=l[y+3];"boolean"==typeof O?T.removeEventListener(l[y],R,O):O>=0?d[m=O]():d[m=-O].unsubscribe(),y+=2}else{const E=d[m=l[y+1]];l[y].call(E)}if(null!==d){for(let y=m+1;y<d.length;y++)d[y]();s[7]=null}}(o,s),1===s[1].type&&mr(s[11])&&s[11].destroy();const l=s[17];if(null!==l&&Ot(s[3])){l!==s[3]&&tm(l,s);const d=s[19];null!==d&&d.detachView(o)}}}function eh(o,s,l){return $l(o,s.parent,l)}function $l(o,s,l){let d=s;for(;null!==d&&40&d.type;)d=(s=d).parent;if(null===d)return l[0];if(2&d.flags){const m=o.data[d.directiveStart].encapsulation;if(m===yt.None||m===yt.Emulated)return null}return Ki(d,l)}function sn(o,s,l,d,m){mr(o)?o.insertBefore(s,l,d,m):s.insertBefore(l,d,m)}function Tp(o,s,l){mr(o)?o.appendChild(s,l):s.appendChild(l)}function th(o,s,l,d,m){null!==d?sn(o,s,l,d,m):Tp(o,s,l)}function nh(o,s){return mr(o)?o.parentNode(s):s.parentNode}function p(o,s,l){return C(o,s,l)}function v(o,s,l){return 40&o.type?Ki(o,l):null}let I,C=v;function N(o,s){C=o,I=s}function P(o,s,l,d){const m=eh(o,d,s),y=s[11],T=p(d.parent||s[6],d,s);if(null!=m)if(Array.isArray(l))for(let R=0;R<l.length;R++)th(y,m,l[R],T,!1);else th(y,m,l,T,!1);void 0!==I&&I(y,d,s,l,m)}function $(o,s){if(null!==s){const l=s.type;if(3&l)return Ki(s,o);if(4&l)return re(-1,o[s.index]);if(8&l){const d=s.child;if(null!==d)return $(o,d);{const m=o[s.index];return Ot(m)?re(-1,m):Fn(m)}}if(32&l)return Kg(s,o)()||Fn(o[s.index]);{const d=Q(o,s);return null!==d?Array.isArray(d)?d[0]:$(td(o[16]),d):$(o,s.next)}}return null}function Q(o,s){return null!==s?o[16][6].projection[s.projection]:null}function re(o,s){const l=10+o+1;if(l<s.length){const d=s[l],m=d[1].firstChild;if(null!==m)return $(d,m)}return s[7]}function ae(o,s,l){const d=nh(o,s);d&&function(o,s,l,d){mr(o)?o.removeChild(s,l,d):s.removeChild(l)}(o,d,s,l)}function Ee(o,s,l,d,m,y,E){for(;null!=l;){const T=d[l.index],R=l.type;if(E&&0===s&&(T&&Or(Fn(T),d),l.flags|=4),64!=(64&l.flags))if(8&R)Ee(o,s,l.child,d,m,y,!1),Ku(s,o,m,T,y);else if(32&R){const O=Kg(l,d);let V;for(;V=O();)Ku(s,o,m,V,y);Ku(s,o,m,T,y)}else 16&R?dt(o,s,d,l,m,y):Ku(s,o,m,T,y);l=E?l.projectionNext:l.next}}function Fe(o,s,l,d,m,y){Ee(l,d,o.firstChild,s,m,y,!1)}function dt(o,s,l,d,m,y){const E=l[16],R=E[6].projection[d.projection];if(Array.isArray(R))for(let O=0;O<R.length;O++)Ku(s,o,m,R[O],y);else Ee(o,s,R,E[3],m,y,!0)}function tn(o,s,l){mr(o)?o.setAttribute(s,"style",l):s.style.cssText=l}function Dr(o,s,l){mr(o)?""===l?o.removeAttribute(s,"class"):o.setAttribute(s,"class",l):s.className=l}function ms(o,s,l){let d=o.length;for(;;){const m=o.indexOf(s,l);if(-1===m)return m;if(0===m||o.charCodeAt(m-1)<=32){const y=s.length;if(m+y===d||o.charCodeAt(m+y)<=32)return m}l=m+1}}const rh="ng-template";function ef(o,s,l){let d=0;for(;d<o.length;){let m=o[d++];if(l&&"class"===m){if(m=o[d],-1!==ms(m.toLowerCase(),s,0))return!0}else if(1===m){for(;d<o.length&&"string"==typeof(m=o[d++]);)if(m.toLowerCase()===s)return!0;return!1}}return!1}function Sp(o){return 4===o.type&&o.value!==rh}function y0(o,s,l){return s===(4!==o.type||l?o.value:rh)}function si(o,s,l){let d=4;const m=o.attrs||[],y=function(o){for(let s=0;s<o.length;s++)if(ss(o[s]))return s;return o.length}(m);let E=!1;for(let T=0;T<s.length;T++){const R=s[T];if("number"!=typeof R){if(!E)if(4&d){if(d=2|1&d,""!==R&&!y0(o,R,l)||""===R&&1===s.length){if($s(d))return!1;E=!0}}else{const O=8&d?R:s[++T];if(8&d&&null!==o.attrs){if(!ef(o.attrs,O,l)){if($s(d))return!1;E=!0}continue}const q=ov(8&d?"class":R,m,Sp(o),l);if(-1===q){if($s(d))return!1;E=!0;continue}if(""!==O){let K;K=q>y?"":m[q+1].toLowerCase();const le=8&d?K:null;if(le&&-1!==ms(le,O,0)||2&d&&O!==K){if($s(d))return!1;E=!0}}}}else{if(!E&&!$s(d)&&!$s(R))return!1;if(E&&$s(R))continue;E=!1,d=R|1&d}}return $s(d)||E}function $s(o){return 0==(1&o)}function ov(o,s,l,d){if(null===s)return-1;let m=0;if(d||!l){let y=!1;for(;m<s.length;){const E=s[m];if(E===o)return m;if(3===E||6===E)y=!0;else{if(1===E||2===E){let T=s[++m];for(;"string"==typeof T;)T=s[++m];continue}if(4===E)break;if(0===E){m+=4;continue}}m+=y?1:2}return-1}return function(o,s){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===s)return l;l++}return-1}(s,o)}function b0(o,s,l=!1){for(let d=0;d<s.length;d++)if(si(o,s[d],l))return!0;return!1}function sv(o,s){e:for(let l=0;l<s.length;l++){const d=s[l];if(o.length===d.length){for(let m=0;m<o.length;m++)if(o[m]!==d[m])continue e;return!0}}return!1}function ql(o,s){return o?":not("+s.trim()+")":s}function Ip(o){let s=o[0],l=1,d=2,m="",y=!1;for(;l<o.length;){let E=o[l];if("string"==typeof E)if(2&d){const T=o[++l];m+="["+E+(T.length>0?'="'+T+'"':"")+"]"}else 8&d?m+="."+E:4&d&&(m+=" "+E);else""!==m&&!$s(E)&&(s+=ql(y,m),m=""),d=E,y=y||!$s(d);l++}return""!==m&&(s+=ql(y,m)),s}const nn={};function Ap(o){im(mn(),Ze(),Ur()+o,ks())}function im(o,s,l,d){if(!d)if(3==(3&s[2])){const y=o.preOrderCheckHooks;null!==y&&Ai(s,y,l)}else{const y=o.preOrderHooks;null!==y&&ho(s,y,0,l)}ja(l)}function ou(o,s){return o<<17|s<<2}function to(o){return o>>17&32767}function nd(o){return 2|o}function su(o){return(131068&o)>>2}function nf(o,s){return-131069&o|s<<2}function lv(o){return 1|o}function pv(o,s){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const m=l[d],y=l[d+1];if(-1!==y){const E=o.data[y];hi(m),E.contentQueries(2,s[y],y)}}}function Kr(o,s,l,d,m,y,E,T,R,O){const V=s.blueprint.slice();return V[0]=m,V[2]=140|d,Ag(V),V[3]=V[15]=o,V[8]=l,V[10]=E||o&&o[10],V[11]=T||o&&o[11],V[12]=R||o&&o[12]||null,V[9]=O||o&&o[9]||null,V[6]=y,V[16]=2==s.type?o[16]:V,V}function _s(o,s,l,d,m){let y=o.data[s];if(null===y)y=kp(o,s,l,d,m),Pt.lFrame.inI18n&&(y.flags|=64);else if(64&y.type){y.type=l,y.value=d,y.attrs=m;const E=Rs();y.injectorIndex=null===E?-1:E.injectorIndex}return Vi(y,!0),y}function kp(o,s,l,d,m){const y=wc(),E=Ns(),R=o.data[s]=function(o,s,l,d,m,y){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?y:y&&y.parent,l,s,d,m);return null===o.firstChild&&(o.firstChild=R),null!==y&&(E?null==y.child&&null!==R.parent&&(y.child=R):null===y.next&&(y.next=R)),R}function cf(o,s,l,d){if(0===l)return-1;const m=s.length;for(let y=0;y<l;y++)s.push(d),o.blueprint.push(d),o.data.push(null);return m}function ah(o,s,l){Dl(s);try{const d=o.viewQuery;null!==d&&mf(1,d,l);const m=o.template;null!==m&&mm(o,s,m,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&pv(o,s),o.staticViewQueries&&mf(2,o.viewQuery,l);const y=o.components;null!==y&&function(o,s){for(let l=0;l<s.length;l++)EC(o,s[l])}(s,y)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{s[2]&=-5,fi()}}function rd(o,s,l,d){const m=s[2];if(256==(256&m))return;Dl(s);const y=ks();try{Ag(s),function(o){Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&mm(o,s,l,2,d);const E=3==(3&m);if(!y)if(E){const O=o.preOrderCheckHooks;null!==O&&Ai(s,O,null)}else{const O=o.preOrderHooks;null!==O&&ho(s,O,0,null),Os(s,0)}if(function(o){for(let s=yp(o);null!==s;s=bp(s)){if(!s[2])continue;const l=s[9];for(let d=0;d<l.length;d++){const m=l[d],y=m[3];0==(1024&m[2])&&jf(y,1),m[2]|=1024}}}(s),function(o){for(let s=yp(o);null!==s;s=bp(s))for(let l=10;l<s.length;l++){const d=s[l],m=d[1];yl(d)&&rd(m,d,m.template,d[8])}}(s),null!==o.contentQueries&&pv(o,s),!y)if(E){const O=o.contentCheckHooks;null!==O&&Ai(s,O)}else{const O=o.contentHooks;null!==O&&ho(s,O,1),Os(s,1)}!function(o,s){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const m=l[d];if(m<0)ja(~m);else{const y=m,E=l[++d],T=l[++d];_r(E,y),T(2,s[y])}}}finally{ja(-1)}}(o,s);const T=o.components;null!==T&&function(o,s){for(let l=0;l<s.length;l++)uh(o,s[l])}(s,T);const R=o.viewQuery;if(null!==R&&mf(2,R,d),!y)if(E){const O=o.viewCheckHooks;null!==O&&Ai(s,O)}else{const O=o.viewHooks;null!==O&&ho(s,O,2),Os(s,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),y||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,jf(s[3],-1))}finally{fi()}}function yC(o,s,l,d){const m=s[10],y=!ks(),E=Ms(s);try{y&&!E&&m.begin&&m.begin(),E&&ah(o,s,d),rd(o,s,l,d)}finally{y&&!E&&m.end&&m.end()}}function mm(o,s,l,d,m){const y=Ur(),E=2&d;try{ja(-1),E&&s.length>20&&im(o,s,20,ks()),l(d,m)}finally{ja(y)}}function df(o,s,l){if(Ei(s)){const m=s.directiveEnd;for(let y=s.directiveStart;y<m;y++){const E=o.data[y];E.contentQueries&&E.contentQueries(1,l[y],y)}}}function xp(o,s,l){!Hf()||(function(o,s,l,d){const m=l.directiveStart,y=l.directiveEnd;o.firstCreatePass||ni(l,s),Or(d,s);const E=l.initialInputs;for(let T=m;T<y;T++){const R=o.data[T],O=kr(R);O&&Ql(s,l,R);const V=Fc(s,o,T,l);Or(V,s),null!==E&&Up(0,T-m,V,R,0,E),O&&(Si(l.index,s)[8]=V)}}(o,s,l,Ki(l,s)),128==(128&l.flags)&&function(o,s,l){const d=l.directiveStart,m=l.directiveEnd,E=l.index,T=Pt.lFrame.currentDirectiveIndex;try{ja(E);for(let R=d;R<m;R++){const O=o.data[R],V=s[R];Ii(R),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&B0(O,V)}}finally{ja(-1),Ii(T)}}(o,s,l))}function hf(o,s,l=Ki){const d=s.localNames;if(null!==d){let m=s.index+1;for(let y=0;y<d.length;y+=2){const E=d[y+1],T=-1===E?l(s,o):o[E];o[m++]=T}}}function gv(o){const s=o.tView;return null===s||s.incompleteFirstPass?o.tView=Op(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):s}function Op(o,s,l,d,m,y,E,T,R,O){const V=20+d,q=V+m,K=function(o,s){const l=[];for(let d=0;d<s;d++)l.push(d<o?null:nn);return l}(V,q),le="function"==typeof O?O():O;return K[1]={type:o,blueprint:K,template:l,queries:null,viewQuery:T,declTNode:s,data:K.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:R,consts:le,incompleteFirstPass:!1}}function _m(o,s,l,d){const m=Zl(s);null===l?m.push(d):(m.push(l),o.firstCreatePass&&_f(o).push(d,m.length-1))}function Pp(o,s,l){for(let d in o)if(o.hasOwnProperty(d)){const m=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(s,m):l[d]=[s,m]}return l}function Do(o,s,l,d,m,y,E,T){const R=Ki(s,l);let V,O=s.inputs;!T&&null!=O&&(V=O[d])?(Sm(o,l,V,d,m),mc(s)&&function(o,s){const l=Si(s,o);16&l[2]||(l[2]|=64)}(l,s.index)):3&s.type&&(d=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),m=null!=E?E(m,s.value||"",d):m,mr(y)?y.setProperty(R,d,m):fo(d)||(R.setProperty?R.setProperty(d,m):R[d]=m))}function Fp(o,s,l,d){let m=!1;if(Hf()){const y=function(o,s,l){const d=o.directiveRegistry;let m=null;if(d)for(let y=0;y<d.length;y++){const E=d[y];b0(l,E.selectors,!1)&&(m||(m=[]),Ln(ni(l,s),o,E.type),kr(E)?(pf(o,l),m.unshift(E)):m.push(E))}return m}(o,s,l),E=null===d?null:{"":-1};if(null!==y){m=!0,id(l,o.data.length,y.length);for(let V=0;V<y.length;V++){const q=y[V];q.providersResolver&&q.providersResolver(q)}let T=!1,R=!1,O=cf(o,s,y.length,null);for(let V=0;V<y.length;V++){const q=y[V];l.mergedAttrs=kc(l.mergedAttrs,q.hostAttrs),Bp(o,l,s,O,q),Vp(O,q,E),null!==q.contentQueries&&(l.flags|=8),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(l.flags|=128);const K=q.type.prototype;!T&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),T=!0),!R&&(K.ngOnChanges||K.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),R=!0),O++}!function(o,s){const d=s.directiveEnd,m=o.data,y=s.attrs,E=[];let T=null,R=null;for(let O=s.directiveStart;O<d;O++){const V=m[O],q=V.inputs,K=null===y||Sp(s)?null:wm(q,y);E.push(K),T=Pp(q,O,T),R=Pp(V.outputs,O,R)}null!==T&&(T.hasOwnProperty("class")&&(s.flags|=16),T.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=E,s.inputs=T,s.outputs=R}(o,l)}E&&function(o,s,l){if(s){const d=o.localNames=[];for(let m=0;m<s.length;m+=2){const y=l[s[m+1]];if(null==y)throw new Ge("301",`Export of name '${s[m+1]}' not found!`);d.push(s[m],y)}}}(l,d,E)}return l.mergedAttrs=kc(l.mergedAttrs,l.attrs),m}function yv(o,s,l,d,m,y){const E=y.hostBindings;if(E){let T=o.hostBindingOpCodes;null===T&&(T=o.hostBindingOpCodes=[]);const R=~s.index;(function(o){let s=o.length;for(;s>0;){const l=o[--s];if("number"==typeof l&&l<0)return l}return 0})(T)!=R&&T.push(R),T.push(d,m,E)}}function B0(o,s){null!==o.hostBindings&&o.hostBindings(1,s)}function pf(o,s){s.flags|=2,(o.components||(o.components=[])).push(s.index)}function Vp(o,s,l){if(l){if(s.exportAs)for(let d=0;d<s.exportAs.length;d++)l[s.exportAs[d]]=o;kr(s)&&(l[""]=o)}}function id(o,s,l){o.flags|=1,o.directiveStart=s,o.directiveEnd=s+l,o.providerIndexes=s}function Bp(o,s,l,d,m){o.data[d]=m;const y=m.factory||(m.factory=Di(m.type)),E=new os(y,kr(m),null);o.blueprint[d]=E,l[d]=E,yv(o,s,0,d,cf(o,l,m.hostVars,nn),m)}function Ql(o,s,l){const d=Ki(s,o),m=gv(l),y=o[10],E=el(o,Kr(o,m,null,l.onPush?64:16,d,s,y,y.createRenderer(d,l),null,null));o[s.index]=E}function bv(o,s,l,d,m,y,E){if(null==y)mr(o)?o.removeAttribute(s,m,l):s.removeAttribute(m);else{const T=null==E?be(y):E(y,d||"",m);mr(o)?o.setAttribute(s,m,T,l):l?s.setAttributeNS(l,m,T):s.setAttribute(m,T)}}function Up(o,s,l,d,m,y){const E=y[s];if(null!==E){const T=d.setInput;for(let R=0;R<E.length;){const O=E[R++],V=E[R++],q=E[R++];null!==T?d.setInput(l,q,O,V):l[V]=q}}}function wm(o,s){let l=null,d=0;for(;d<s.length;){const m=s[d];if(0!==m)if(5!==m){if("number"==typeof m)break;o.hasOwnProperty(m)&&(null===l&&(l=[]),l.push(m,o[m],s[d+1])),d+=2}else d+=2;else d+=4}return l}function Cm(o,s,l,d){return new Array(o,!0,!1,s,null,0,d,l,null,null)}function uh(o,s){const l=Si(s,o);if(yl(l)){const d=l[1];80&l[2]?rd(d,l,d.template,l[8]):l[5]>0&&jp(l)}}function jp(o){for(let d=yp(o);null!==d;d=bp(d))for(let m=10;m<d.length;m++){const y=d[m];if(1024&y[2]){const E=y[1];rd(E,y,E.template,y[8])}else y[5]>0&&jp(y)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const m=Si(l[d],o);yl(m)&&m[5]>0&&jp(m)}}function EC(o,s){const l=Si(s,o),d=l[1];(function(o,s){for(let l=s.length;l<o.blueprint.length;l++)s.push(o.blueprint[l])})(d,l),ah(d,l,l[8])}function el(o,s){return o[13]?o[14][4]=s:o[13]=s,o[14]=s,s}function lh(o){for(;o;){o[2]|=64;const s=td(o);if(co(o)&&!s)return o;o=s}return null}function Dm(o,s,l){const d=s[10];d.begin&&d.begin();try{rd(o,s,o.template,l)}catch(m){throw Tm(s,m),m}finally{d.end&&d.end()}}function Dv(o){!function(o){for(let s=0;s<o.components.length;s++){const l=o.components[s],d=ap(l),m=d[1];yC(m,d,m.template,l)}}(o[8])}function mf(o,s,l){hi(0),s(o,l)}const G0=(()=>Promise.resolve(null))();function Zl(o){return o[7]||(o[7]=[])}function _f(o){return o.cleanup||(o.cleanup=[])}function Tm(o,s){const l=o[9],d=l?l.get(ps,null):null;d&&d.handleError(s)}function Sm(o,s,l,d,m){for(let y=0;y<l.length;){const E=l[y++],T=l[y++],R=s[E],O=o.data[E];null!==O.setInput?O.setInput(R,m,d,T):R[T]=m}}function ch(o,s,l){let d=l?o.styles:null,m=l?o.classes:null,y=0;if(null!==s)for(let E=0;E<s.length;E++){const T=s[E];"number"==typeof T?y=T:1==y?m=Ie(m,T):2==y&&(d=Ie(d,T+": "+s[++E]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=m:o.classesWithoutHost=m}const Jl=new sr("INJECTOR",-1);class Da{get(s,l=Ka){if(l===Ka){const d=new Error(`NullInjectorError: No provider for ${Ae(s)}!`);throw d.name="NullInjectorError",d}return l}}const Hp=new sr("Set Injector scope."),vf={},Im={};let ec;function Iv(){return void 0===ec&&(ec=new Da),ec}function Av(o,s=null,l=null,d){return new Mm(o,l,s||Iv(),d)}class Mm{constructor(s,l,d,m=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];l&&$o(l,T=>this.processProvider(T,s,l)),$o([s],T=>this.processInjectorType(T,[],y)),this.records.set(Jl,dh(void 0,this));const E=this.records.get(Hp);this.scope=null!=E?E.value:null,this.source=m||("object"==typeof s?null:Ae(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,l=Ka,d=ft.Default){this.assertNotDestroyed();const m=mo(this),y=Rn(void 0);try{if(!(d&ft.SkipSelf)){let T=this.records.get(s);if(void 0===T){const R=("function"==typeof(o=s)||"object"==typeof o&&o instanceof sr)&&tr(s);T=R&&this.injectableDefInScope(R)?dh(Qr(s),vf):null,this.records.set(s,T)}if(null!=T)return this.hydrate(s,T)}return(d&ft.Self?Iv():this.parent).get(s,l=d&ft.Optional&&l===Ka?null:l)}catch(E){if("NullInjectorError"===E.name){if((E[Us]=E[Us]||[]).unshift(Ae(s)),m)throw E;return Uu(E,s,"R3InjectorError",this.source)}throw E}finally{Rn(y),mo(m)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((d,m)=>s.push(Ae(m))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,l,d){if(!(s=pe(s)))return!1;let m=Cu(s);const y=null==m&&s.ngModule||void 0,E=void 0===y?s:y,T=-1!==d.indexOf(E);if(void 0!==y&&(m=Cu(y)),null==m)return!1;if(null!=m.imports&&!T){let V;d.push(E);try{$o(m.imports,q=>{this.processInjectorType(q,l,d)&&(void 0===V&&(V=[]),V.push(q))})}finally{}if(void 0!==V)for(let q=0;q<V.length;q++){const{ngModule:K,providers:le}=V[q];$o(le,me=>this.processProvider(me,K,le||ue))}}this.injectorDefTypes.add(E);const R=Di(E)||(()=>new E);this.records.set(E,dh(R,vf));const O=m.providers;if(null!=O&&!T){const V=s;$o(O,q=>this.processProvider(q,V,O))}return void 0!==y&&void 0!==s.providers}processProvider(s,l,d){let m=yf(s=pe(s))?s:pe(s&&s.provide);const y=(o=s,q0(o)?dh(void 0,o.useValue):dh($0(o),vf));var o;if(yf(s)||!0!==s.multi)this.records.get(m);else{let E=this.records.get(m);E||(E=dh(void 0,vf,!0),E.factory=()=>_a(E.multi),this.records.set(m,E)),m=s,E.multi.push(s)}this.records.set(m,y)}hydrate(s,l){return l.value===vf&&(l.value=Im,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(o=l.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var o}injectableDefInScope(s){if(!s.providedIn)return!1;const l=pe(s.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Qr(o){const s=tr(o),l=null!==s?s.factory:Di(o);if(null!==l)return l;if(o instanceof sr)throw new Error(`Token ${Ae(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const s=o.length;if(s>0){const d=Fu(s,"?");throw new Error(`Can't resolve all parameters for ${Ae(o)}: (${d.join(", ")}).`)}const l=function(o){const s=o&&(o[un]||o[Gr]);if(s){const l=function(o){if(o.hasOwnProperty("name"))return o.name;const s=(""+o).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),s}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Error("unreachable")}function $0(o,s,l){let d;if(yf(o)){const m=pe(o);return Di(m)||Qr(m)}if(q0(o))d=()=>pe(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(..._a(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))d=()=>Vn(pe(o.useExisting));else{const m=pe(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return Di(m)||Qr(m);d=()=>new m(..._a(o.deps))}return d}function dh(o,s,l=!1){return{factory:o,value:s,multi:l?[]:void 0}}function q0(o){return null!==o&&"object"==typeof o&&Fd in o}function yf(o){return"function"==typeof o}const Nm=function(o,s,l){return function(o,s=null,l=null,d){const m=Av(o,s,l,d);return m._resolveInjectorDefTypes(),m}({name:l},s,o,l)};let ar=(()=>{class o{static create(l,d){return Array.isArray(l)?Nm(l,d,""):Nm(l.providers,l.parent,l.name||"")}}return o.THROW_IF_NOT_FOUND=Ka,o.NULL=new Da,o.\u0275prov=Xt({token:o,providedIn:"any",factory:()=>Vn(Jl)}),o.__NG_ELEMENT_ID__=-1,o})();function eb(o,s){Vh(ap(o)[1],Cr())}function Gv(o){let s=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;s;){let m;if(kr(o))m=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");m=s.\u0275dir}if(m){if(l){d.push(m);const E=o;E.inputs=Cf(o.inputs),E.declaredInputs=Cf(o.declaredInputs),E.outputs=Cf(o.outputs);const T=m.hostBindings;T&&nb(o,T);const R=m.viewQuery,O=m.contentQueries;if(R&&$v(o,R),O&&tb(o,O),we(o.inputs,m.inputs),we(o.declaredInputs,m.declaredInputs),we(o.outputs,m.outputs),kr(m)&&m.data.animation){const V=o.data;V.animation=(V.animation||[]).concat(m.data.animation)}}const y=m.features;if(y)for(let E=0;E<y.length;E++){const T=y[E];T&&T.ngInherit&&T(o),T===Gv&&(l=!1)}}s=Object.getPrototypeOf(s)}!function(o){let s=0,l=null;for(let d=o.length-1;d>=0;d--){const m=o[d];m.hostVars=s+=m.hostVars,m.hostAttrs=kc(m.hostAttrs,l=kc(l,m.hostAttrs))}}(d)}function Cf(o){return o===kn?{}:o===ue?[]:o}function $v(o,s){const l=o.viewQuery;o.viewQuery=l?(d,m)=>{s(d,m),l(d,m)}:s}function tb(o,s){const l=o.contentQueries;o.contentQueries=l?(d,m,y)=>{s(d,m,y),l(d,m,y)}:s}function nb(o,s){const l=o.hostBindings;o.hostBindings=l?(d,m)=>{s(d,m),l(d,m)}:s}let tc=null;function Yo(){if(!tc){const o=In.Symbol;if(o&&o.iterator)tc=o.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<s.length;++l){const d=s[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(tc=d)}}}return tc}function Wp(o){return!!Um(o)&&(Array.isArray(o)||!(o instanceof Map)&&Yo()in o)}function Um(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ko(o,s,l){return o[s]=l}function no(o,s,l){return!Object.is(o[s],l)&&(o[s]=l,!0)}function il(o,s,l,d){const m=no(o,s,l);return no(o,s+1,d)||m}function jm(o,s,l,d){const m=Ze();return no(m,di(),s)&&(mn(),function(o,s,l,d,m,y){const E=Ki(o,s);bv(s[11],E,y,o.value,l,d,m)}(vr(),m,o,s,l,d)),jm}function gh(o,s,l,d){return no(o,di(),l)?s+be(l)+d:nn}function f(o,s,l,d,m,y,E,T,R,O){const q=function(o,s,l,d,m,y){const E=il(o,s,l,d);return il(o,s+2,m,y)||E}(o,Ho(),l,m,E,R);return Bi(4),q?s+be(l)+d+be(m)+y+be(E)+T+be(R)+O:nn}function TT(o,s,l,d,m,y,E,T){const R=Ze(),O=mn(),V=o+20,q=O.firstCreatePass?function(o,s,l,d,m,y,E,T,R){const O=s.consts,V=_s(s,o,4,E||null,$r(O,T));Fp(s,l,V,$r(O,R)),Vh(s,V);const q=V.tViews=Op(2,V,d,m,y,s.directiveRegistry,s.pipeRegistry,null,s.schemas,O);return null!==s.queries&&(s.queries.template(s,V),q.queries=s.queries.embeddedTView(V)),V}(V,O,R,s,l,d,m,y,E):O.data[V];Vi(q,!1);const K=R[11].createComment("");P(O,R,K,q),Or(K,R),el(R,R[V]=Cm(K,R,K,q)),_c(q)&&xp(O,R,q),null!=E&&hf(R,q,T)}function ST(o){return Mu(Pt.lFrame.contextLView,20+o)}function sd(o,s=ft.Default){const l=Ze();return null===l?Vn(o,s):Pc(Cr(),l,pe(o),s)}function FT(){throw new Error("invalid")}function ob(o,s,l){const d=Ze();return no(d,di(),s)&&Do(mn(),vr(),d,o,s,d[11],l,!1),ob}function NC(o,s,l,d,m){const E=m?"class":"style";Sm(o,l,s.inputs[E],E,d)}function kC(o,s,l,d){const m=Ze(),y=mn(),E=20+o,T=m[11],R=m[E]=Qu(T,s,Pt.lFrame.currentNamespace),O=y.firstCreatePass?function(o,s,l,d,m,y,E){const T=s.consts,O=_s(s,o,2,m,$r(T,y));return Fp(s,l,O,$r(T,E)),null!==O.attrs&&ch(O,O.attrs,!1),null!==O.mergedAttrs&&ch(O,O.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,O),O}(E,y,m,0,s,l,d):y.data[E];Vi(O,!0);const V=O.mergedAttrs;null!==V&&Nc(T,R,V);const q=O.classes;null!==q&&Dr(T,R,q);const K=O.styles;null!==K&&tn(T,R,K),64!=(64&O.flags)&&P(y,m,R,O),0===Pt.lFrame.elementDepthCount&&Or(R,m),Pt.lFrame.elementDepthCount++,_c(O)&&(xp(y,m,O),df(y,O,m)),null!==d&&hf(m,O)}function sb(){let o=Cr();Ns()?Cc():(o=o.parent,Vi(o,!1));const s=o;Pt.lFrame.elementDepthCount--;const l=mn();l.firstCreatePass&&(Vh(l,o),Ei(o)&&l.queries.elementEnd(o)),null!=s.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(s)&&NC(l,s,Ze(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(s)&&NC(l,s,Ze(),s.stylesWithoutHost,!1)}function xC(o,s,l,d){kC(o,s,l,d),sb()}function OC(o,s,l){const d=Ze(),m=mn(),y=o+20,E=m.firstCreatePass?function(o,s,l,d,m){const y=s.consts,E=$r(y,d),T=_s(s,o,8,"ng-container",E);return null!==E&&ch(T,E,!0),Fp(s,l,T,$r(y,m)),null!==s.queries&&s.queries.elementStart(s,T),T}(y,m,d,s,l):m.data[y];Vi(E,!0);const T=d[y]=d[11].createComment("");P(m,d,T,E),Or(T,d),_c(E)&&(xp(m,d,E),df(m,E,d)),null!=l&&hf(d,E)}function PC(){let o=Cr();const s=mn();Ns()?Cc():(o=o.parent,Vi(o,!1)),s.firstCreatePass&&(Vh(s,o),Ei(o)&&s.queries.elementEnd(o))}function NM(o,s,l){OC(o,s,l),PC()}function LT(){return Ze()}function Kp(o){return!!o&&"function"==typeof o.then}function zi(o){return!!o&&"function"==typeof o.subscribe}const FC=zi;function LC(o,s,l,d){const m=Ze(),y=mn(),E=Cr();return function(o,s,l,d,m,y,E,T){const R=_c(d),V=o.firstCreatePass&&_f(o),q=s[8],K=Zl(s);let le=!0;if(3&d.type||T){const Ce=Ki(d,s),at=T?T(Ce):Ce,He=K.length,xt=T?Zt=>T(Fn(Zt[d.index])):d.index;if(mr(l)){let Zt=null;if(!T&&R&&(Zt=function(o,s,l,d){const m=o.cleanup;if(null!=m)for(let y=0;y<m.length-1;y+=2){const E=m[y];if(E===l&&m[y+1]===d){const T=s[7],R=m[y+2];return T.length>R?T[R]:null}"string"==typeof E&&(y+=2)}return null}(o,s,m,d.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=y,Zt.__ngLastListenerFn__=y,le=!1;else{y=lb(d,s,q,y,!1);const Mn=l.listen(at,m,y);K.push(y,Mn),V&&V.push(m,xt,He,He+1)}}else y=lb(d,s,q,y,!0),at.addEventListener(m,y,E),K.push(y),V&&V.push(m,xt,He,E)}else y=lb(d,s,q,y,!1);const me=d.outputs;let Ne;if(le&&null!==me&&(Ne=me[m])){const Ce=Ne.length;if(Ce)for(let at=0;at<Ce;at+=2){const Ao=s[Ne[at]][Ne[at+1]].subscribe(y),ac=K.length;K.push(y,Ao),V&&V.push(m,d.index,ac,-(ac+1))}}}(y,m,m[11],E,o,s,!!l,d),LC}function VC(o,s,l,d){try{return!1!==l(d)}catch(m){return Tm(o,m),!1}}function lb(o,s,l,d,m){return function y(E){if(E===Function)return d;const T=2&o.flags?Si(o.index,s):s;0==(32&s[2])&&lh(T);let R=VC(s,0,d,E),O=y.__ngNextListenerFn__;for(;O;)R=VC(s,0,O,E)&&R,O=O.__ngNextListenerFn__;return m&&!1===R&&(E.preventDefault(),E.returnValue=!1),R}}function cb(o=1){return function(o){return(Pt.lFrame.contextLView=function(o,s){for(;o>0;)s=s[15],o--;return s}(o,Pt.lFrame.contextLView))[8]}(o)}function VT(o,s){let l=null;const d=function(o){const s=o.attrs;if(null!=s){const l=s.indexOf(5);if(0==(1&l))return s[l+1]}return null}(o);for(let m=0;m<s.length;m++){const y=s[m];if("*"!==y){if(null===d?b0(o,y,!0):sv(d,y))return m}else l=m}return l}function BC(o){const s=Ze()[16][6];if(!s.projection){const d=s.projection=Fu(o?o.length:1,null),m=d.slice();let y=s.child;for(;null!==y;){const E=o?VT(y,o):0;null!==E&&(m[E]?m[E].projectionNext=y:d[E]=y,m[E]=y),y=y.next}}}function xM(o,s=0,l){const d=Ze(),m=mn(),y=_s(m,20+o,16,null,l||null);null===y.projection&&(y.projection=s),Cc(),64!=(64&y.flags)&&function(o,s,l){dt(s[11],0,s,l,eh(o,l,s),p(l.parent||s[6],l,s))}(m,d,y)}function db(o,s,l){return hb(o,"",s,"",l),db}function hb(o,s,l,d,m){const y=Ze(),E=gh(y,s,l,d);return E!==nn&&Do(mn(),vr(),y,o,E,y[11],m,!1),hb}function mh(o,s,l,d,m){const y=o[l+1],E=null===s;let T=d?to(y):su(y),R=!1;for(;0!==T&&(!1===R||E);){const V=o[T+1];zT(o[T],s)&&(R=!0,o[T+1]=d?lv(V):nd(V)),T=d?to(V):su(V)}R&&(o[l+1]=d?nd(y):lv(y))}function zT(o,s){return null===o||null==s||(Array.isArray(o)?o[1]:o)===s||!(!Array.isArray(o)||"string"!=typeof s)&&Ya(o,s)>=0}const Io={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qm(o){return o.substring(Io.key,Io.keyEnd)}function FM(o,s){const l=Io.textEnd;return l===s?-1:(s=Io.keyEnd=function(o,s,l){for(;s<l&&o.charCodeAt(s)>32;)s++;return s}(o,Io.key=s,l),Qp(o,s,l))}function Qp(o,s,l){for(;s<l&&o.charCodeAt(s)<=32;)s++;return s}function gb(o,s,l){return rc(o,s,l,!1),gb}function xi(o,s){return rc(o,s,null,!0),xi}function KT(o){vs(go,lu,o,!0)}function lu(o,s){for(let l=function(o){return function(o){Io.key=0,Io.keyEnd=0,Io.value=0,Io.valueEnd=0,Io.textEnd=o.length}(o),FM(o,Qp(o,0,Io.textEnd))}(s);l>=0;l=FM(s,l))go(o,qm(s),!0)}function rc(o,s,l,d){const m=Ze(),y=mn(),E=Bi(2);y.firstUpdatePass&&QT(y,o,E,d),s!==nn&&no(m,E,s)&&XT(y,y.data[Ur()],m,m[11],o,m[E+1]=function(o,s){return null==o||("string"==typeof s?o+=s:"object"==typeof o&&(o=Ae(ii(o)))),o}(s,l),d,E)}function vs(o,s,l,d){const m=mn(),y=Bi(2);m.firstUpdatePass&&QT(m,null,y,d);const E=Ze();if(l!==nn&&no(E,y,l)){const T=m.data[Ur()];if(vb(T,d)&&!HC(m,y)){let R=d?T.classesWithoutHost:T.stylesWithoutHost;null!==R&&(l=Ie(R,l||"")),NC(m,T,E,l,d)}else!function(o,s,l,d,m,y,E,T){m===nn&&(m=ue);let R=0,O=0,V=0<m.length?m[0]:null,q=0<y.length?y[0]:null;for(;null!==V||null!==q;){const K=R<m.length?m[R+1]:void 0,le=O<y.length?y[O+1]:void 0;let Ne,me=null;V===q?(R+=2,O+=2,K!==le&&(me=q,Ne=le)):null===q||null!==V&&V<q?(R+=2,me=V):(O+=2,me=q,Ne=le),null!==me&&XT(o,s,l,d,me,Ne,E,T),V=R<m.length?m[R]:null,q=O<y.length?y[O]:null}}(m,T,E,E[11],E[y+1],E[y+1]=function(o,s,l){if(null==l||""===l)return ue;const d=[],m=ii(l);if(Array.isArray(m))for(let y=0;y<m.length;y++)o(d,m[y],!0);else if("object"==typeof m)for(const y in m)m.hasOwnProperty(y)&&o(d,y,m[y]);else"string"==typeof m&&s(d,m);return d}(o,s,l),d,y)}}function HC(o,s){return s>=o.expandoStartIndex}function QT(o,s,l,d){const m=o.data;if(null===m[l+1]){const y=m[Ur()],E=HC(o,l);vb(y,d)&&null===s&&!E&&(s=!1),s=function(o,s,l,d){const m=function(o){const s=Pt.lFrame.currentDirectiveIndex;return-1===s?null:o[s]}(o);let y=d?s.residualClasses:s.residualStyles;if(null===m)0===(d?s.classBindings:s.styleBindings)&&(l=Yv(l=zC(null,o,s,l,d),s.attrs,d),y=null);else{const E=s.directiveStylingLast;if(-1===E||o[E]!==m)if(l=zC(m,o,s,l,d),null===y){let R=function(o,s,l){const d=l?s.classBindings:s.styleBindings;if(0!==su(d))return o[to(d)]}(o,s,d);void 0!==R&&Array.isArray(R)&&(R=zC(null,o,s,R[1],d),R=Yv(R,s.attrs,d),function(o,s,l,d){o[to(l?s.classBindings:s.styleBindings)]=d}(o,s,d,R))}else y=function(o,s,l){let d;const m=s.directiveEnd;for(let y=1+s.directiveStylingLast;y<m;y++)d=Yv(d,o[y].hostAttrs,l);return Yv(d,s.attrs,l)}(o,s,d)}return void 0!==y&&(d?s.residualClasses=y:s.residualStyles=y),l}(m,y,s,d),function(o,s,l,d,m,y){let E=y?s.classBindings:s.styleBindings,T=to(E),R=su(E);o[d]=l;let V,O=!1;if(Array.isArray(l)){const q=l;V=q[1],(null===V||Ya(q,V)>0)&&(O=!0)}else V=l;if(m)if(0!==R){const K=to(o[T+1]);o[d+1]=ou(K,T),0!==K&&(o[K+1]=nf(o[K+1],d)),o[T+1]=function(o,s){return 131071&o|s<<17}(o[T+1],d)}else o[d+1]=ou(T,0),0!==T&&(o[T+1]=nf(o[T+1],d)),T=d;else o[d+1]=ou(R,0),0===T?T=d:o[R+1]=nf(o[R+1],d),R=d;O&&(o[d+1]=nd(o[d+1])),mh(o,V,d,!0),mh(o,V,d,!1),function(o,s,l,d,m){const y=m?o.residualClasses:o.residualStyles;null!=y&&"string"==typeof s&&Ya(y,s)>=0&&(l[d+1]=lv(l[d+1]))}(s,V,o,d,y),E=ou(T,R),y?s.classBindings=E:s.styleBindings=E}(m,y,s,l,E,d)}}function zC(o,s,l,d,m){let y=null;const E=l.directiveEnd;let T=l.directiveStylingLast;for(-1===T?T=l.directiveStart:T++;T<E&&(y=s[T],d=Yv(d,y.hostAttrs,m),y!==o);)T++;return null!==o&&(l.directiveStylingLast=T),d}function Yv(o,s,l){const d=l?1:2;let m=-1;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?m=E:m===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),go(o,E,!!l||s[++y]))}return void 0===o?null:o}function XT(o,s,l,d,m,y,E,T){if(!(3&s.type))return;const R=o.data,O=R[T+1];ad(function(o){return 1==(1&o)}(O)?JT(R,s,l,m,su(O),E):void 0)||(ad(y)||function(o){return 2==(2&o)}(O)&&(y=JT(R,null,l,m,T,E)),function(o,s,l,d,m){const y=mr(o);if(s)m?y?o.addClass(l,d):l.classList.add(d):y?o.removeClass(l,d):l.classList.remove(d);else{let E=-1===d.indexOf("-")?void 0:Ea.DashCase;if(null==m)y?o.removeStyle(l,d,E):l.style.removeProperty(d);else{const T="string"==typeof m&&m.endsWith("!important");T&&(m=m.slice(0,-10),E|=Ea.Important),y?o.setStyle(l,d,m,E):l.style.setProperty(d,m,T?"important":"")}}}(d,E,Au(Ur(),l),m,y))}function JT(o,s,l,d,m,y){const E=null===s;let T;for(;m>0;){const R=o[m],O=Array.isArray(R),V=O?R[1]:R,q=null===V;let K=l[m+1];K===nn&&(K=q?ue:void 0);let le=q?Xf(K,d):V===d?K:void 0;if(O&&!ad(le)&&(le=Xf(R,d)),ad(le)&&(T=le,E))return T;const me=o[m+1];m=E?to(me):su(me)}if(null!==s){let R=y?s.residualClasses:s.residualStyles;null!=R&&(T=Xf(R,d))}return T}function ad(o){return void 0!==o}function vb(o,s){return 0!=(o.flags&(s?16:32))}function Xp(o,s=""){const l=Ze(),d=mn(),m=o+20,y=d.firstCreatePass?_s(d,m,1,s,null):d.data[m],E=l[m]=Gl(l[11],s);P(d,l,E,y),Vi(y,!1)}function Kv(o){return yb("",o,""),Kv}function yb(o,s,l){const d=Ze(),m=gh(d,o,s,l);return m!==nn&&function(o,s,l){const d=Au(s,o);wp(o[11],d,l)}(d,Ur(),m),yb}function $M(o,s,l,d,m,y,E,T,R){vs(go,lu,f(Ze(),o,s,l,d,m,y,E,T,R),!0)}function g1(o,s,l){const d=Ze();return no(d,di(),s)&&Do(mn(),vr(),d,o,s,d[11],l,!0),g1}const Wm=void 0;var sF=["en",[["a","p"],["AM","PM"],Wm],[["AM","PM"],Wm,Wm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wm,"{1} 'at' {0}",Wm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Xv={};function m1(o){const s=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=rR(s);if(l)return l;const d=s.split("-")[0];if(l=rR(d),l)return l;if("en"===d)return sF;throw new Error(`Missing locale data for the locale "${o}".`)}function _1(o){return m1(o)[Ht.PluralCase]}function rR(o){return o in Xv||(Xv[o]=In.ng&&In.ng.common&&In.ng.common.locales&&In.ng.common.locales[o]),Xv[o]}var Ht=(()=>((Ht=Ht||{})[Ht.LocaleId=0]="LocaleId",Ht[Ht.DayPeriodsFormat=1]="DayPeriodsFormat",Ht[Ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ht[Ht.DaysFormat=3]="DaysFormat",Ht[Ht.DaysStandalone=4]="DaysStandalone",Ht[Ht.MonthsFormat=5]="MonthsFormat",Ht[Ht.MonthsStandalone=6]="MonthsStandalone",Ht[Ht.Eras=7]="Eras",Ht[Ht.FirstDayOfWeek=8]="FirstDayOfWeek",Ht[Ht.WeekendRange=9]="WeekendRange",Ht[Ht.DateFormat=10]="DateFormat",Ht[Ht.TimeFormat=11]="TimeFormat",Ht[Ht.DateTimeFormat=12]="DateTimeFormat",Ht[Ht.NumberSymbols=13]="NumberSymbols",Ht[Ht.NumberFormats=14]="NumberFormats",Ht[Ht.CurrencyCode=15]="CurrencyCode",Ht[Ht.CurrencySymbol=16]="CurrencySymbol",Ht[Ht.CurrencyName=17]="CurrencyName",Ht[Ht.Currencies=18]="Currencies",Ht[Ht.Directionality=19]="Directionality",Ht[Ht.PluralCase=20]="PluralCase",Ht[Ht.ExtraData=21]="ExtraData",Ht))();const uF=["zero","one","two","few","many"],Jv="en-US",Ta={marker:"element"},Tr={marker:"ICU"};var Jr=(()=>((Jr=Jr||{})[Jr.SHIFT=2]="SHIFT",Jr[Jr.APPEND_EAGERLY=1]="APPEND_EAGERLY",Jr[Jr.COMMENT=2]="COMMENT",Jr))();let Cb=Jv;function Eb(o,s,l){const d=s.insertBeforeIndex,m=Array.isArray(d)?d[0]:d;return null===m?v(o,0,l):Fn(l[m])}function aR(o,s,l,d,m){const y=s.insertBeforeIndex;if(Array.isArray(y)){let E=d,T=null;if(3&s.type||(T=E,E=m),null!==E&&0==(2&s.flags))for(let R=1;R<y.length;R++)sn(o,E,l[y[R]],T,!1)}}function Ym(o,s){if(o.push(s),o.length>1)for(let l=o.length-2;l>=0;l--){const d=o[l];ey(d)||v1(d,s)&&null===uR(d)&&lR(d,s.index)}}function ey(o){return!(64&o.type)}function v1(o,s){return ey(s)||o.index>s.index}function uR(o){const s=o.insertBeforeIndex;return Array.isArray(s)?s[0]:s}function lR(o,s){const l=o.insertBeforeIndex;Array.isArray(l)?l[0]=s:(N(Eb,aR),o.insertBeforeIndex=s)}function ty(o,s){const l=o.data[s];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function Jp(o,s,l){const d=kp(o,l,64,null,null);return Ym(s,d),d}function Df(o,s){const l=s[o.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function ny(o){return o>>>17}function WC(o){return(131070&o)>>>1}let Qm=0,Db=0;function dR(o,s,l,d){const m=l[11];let E,y=null;for(let T=0;T<s.length;T++){const R=s[T];if("string"==typeof R){const O=s[++T];null===l[O]&&(l[O]=Gl(m,R))}else if("number"==typeof R)switch(1&R){case 0:const O=ny(R);let V,q;if(null===y&&(y=O,E=nh(m,d)),O===y?(V=d,q=E):(V=null,q=Fn(l[O])),null!==q){const Ne=WC(R);sn(m,q,l[Ne],V,!1);const at=ty(o,Ne);if(null!==at&&"object"==typeof at){const He=Df(at,l);null!==He&&dR(o,at.create[He],l,l[at.anchorIdx])}}break;case 1:const le=s[++T],me=s[++T];bv(m,Au(R>>>1,l),null,null,le,me,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${R}"`)}else switch(R){case Tr:const O=s[++T],V=s[++T];null===l[V]&&Or(l[V]=zl(m,O),l);break;case Ta:const q=s[++T],K=s[++T];null===l[K]&&Or(l[K]=Qu(m,q,null),l)}}}function hR(o,s,l,d,m){for(let y=0;y<l.length;y++){const E=l[y],T=l[++y];if(E&m){let R="";for(let O=y+1;O<=y+T;O++){const V=l[O];if("string"==typeof V)R+=V;else if("number"==typeof V)if(V<0)R+=be(s[d-V]);else{const q=V>>>2;switch(3&V){case 1:const K=l[++O],le=l[++O],me=o.data[q];"string"==typeof me?bv(s[11],s[q],null,me,K,R,le):Do(o,me,s,K,R,s[11],le,!1);break;case 0:const Ne=s[q];null!==Ne&&wp(s[11],Ne,R);break;case 2:pF(o,ty(o,q),s,R);break;case 3:fR(o,ty(o,q),d,s)}}}}else{const R=l[y+1];if(R>0&&3==(3&R)){const V=ty(o,R>>>2);s[V.currentCaseLViewIndex]<0&&fR(o,V,d,s)}}y+=T}}function fR(o,s,l,d){let m=d[s.currentCaseLViewIndex];if(null!==m){let y=Qm;m<0&&(m=d[s.currentCaseLViewIndex]=~m,y=-1),hR(o,d,s.update[m],l,y)}}function pF(o,s,l,d){const m=function(o,s){let l=o.cases.indexOf(s);if(-1===l)switch(o.type){case 1:{const d=function(o,s){const l=_1(s)(parseInt(o,10)),d=uF[l];return void 0!==d?d:"other"}(s,Cb);l=o.cases.indexOf(d),-1===l&&"other"!==d&&(l=o.cases.indexOf("other"));break}case 0:l=o.cases.indexOf("other")}return-1===l?null:l}(s,d);if(Df(s,l)!==m&&(pR(o,s,l),l[s.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const E=l[s.anchorIdx];E&&dR(o,s.create[m],l,E)}}function pR(o,s,l){let d=Df(s,l);if(null!==d){const m=s.remove[d];for(let y=0;y<m.length;y++){const E=m[y];if(E>0){const T=Au(E,l);null!==T&&ae(l[11],T)}else pR(o,ty(o,~E),l)}}}function mF(){const o=[];let l,d,s=-1;function y(T,R){s=0;const O=Df(T,R);d=null!==O?T.remove[O]:ue}function E(){if(s<d.length){const T=d[s++];return T>0?l[T]:(o.push(s,d),y(l[1].data[~T],l),E())}return 0===o.length?null:(d=o.pop(),s=o.pop(),E())}return function(T,R){for(l=R;o.length;)o.pop();return y(T.value,R),E}}const Tb=/\ufffd(\d+):?\d*\ufffd/gi,y1=/\ufffd(\d+)\ufffd/,Sb=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,b1=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,iy=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,_F=/\uE500/g;function Sf(o,s,l,d,m,y,E){const T=cf(o,d,1,null);let R=T<<Jr.SHIFT,O=Rs();s===O&&(O=null),null===O&&(R|=Jr.APPEND_EAGERLY),E&&(R|=Jr.COMMENT,function(o){void 0===Zh&&(Zh=o())}(mF)),m.push(R,null===y?"":y);const V=kp(o,T,E?32:1,null===y?"":y,null);Ym(l,V);const q=V.index;return Vi(V,!1),null!==O&&s!==O&&function(o,s){let l=o.insertBeforeIndex;null===l?(N(Eb,aR),l=o.insertBeforeIndex=[null,s]):(function(o,s,l){o!=s&&rt(l,o,s,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(s))}(O,q),V}function QC(o,s,l,d,m,y,E){const T=E.match(Tb),R=Sf(o,s,l,y,d,T?null:E,!1);T&&oy(m,E,R.index,null,0,null)}function oy(o,s,l,d,m,y){const E=o.length,T=E+1;o.push(null,null);const R=E+2,O=s.split(Tb);let V=0;for(let q=0;q<O.length;q++){const K=O[q];if(1&q){const le=m+parseInt(K,10);o.push(-1-le),V|=D1(le)}else""!==K&&o.push(K)}return o.push(l<<2|(d?1:0)),d&&o.push(d,y),o[E]=V,o[T]=o.length-R,V}function D1(o){return 1<<Math.min(o,31)}function S1(o){let s,y,l="",d=0,m=!1;for(;null!==(s=b1.exec(o));)m?s[0]===`\ufffd/*${y}\ufffd`&&(d=s.index,m=!1):(l+=o.substring(d,s.index+s[0].length),y=s[1],m=!0);return l+=o.substr(d),l}function I1(o,s,l,d,m,y){let E=0;const T={type:m.type,currentCaseLViewIndex:cf(o,s,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function(o,s,l){o.push(D1(s.mainBinding),2,-1-s.mainBinding,l<<2|2)})(l,m,y),function(o,s,l){const d=o.data[s];null===d?o.data[s]=l:d.value=l}(o,y,T);const R=m.values;for(let O=0;O<R.length;O++){const V=R[O],q=[];for(let K=0;K<V.length;K++){const le=V[K];if("string"!=typeof le){const me=q.push(le)-1;V[K]=`\x3c!--\ufffd${me}\ufffd--\x3e`}}E=M1(o,T,s,l,d,m.cases[O],V.join(""),q)|E}E&&function(o,s,l){o.push(s,1,l<<2|3)}(l,E,y)}function A1(o){const s=[],l=[];let d=1,m=0;const y=ZC(o=o.replace(Sb,function(E,T,R){return d="select"===R?0:1,m=parseInt(T.substr(1),10),""}));for(let E=0;E<y.length;){let T=y[E++].trim();1===d&&(T=T.replace(/\s*(?:=)?(\w+)\s*/,"$1")),T.length&&s.push(T);const R=ZC(y[E++]);s.length>l.length&&l.push(R)}return{type:d,mainBinding:m,cases:s,values:l}}function ZC(o){if(!o)return[];let s=0;const l=[],d=[],m=/[{}]/g;let y;for(m.lastIndex=0;y=m.exec(o);){const T=y.index;if("}"==y[0]){if(l.pop(),0==l.length){const R=o.substring(s,T);Sb.test(R)?d.push(A1(R)):d.push(R),s=T+1}}else{if(0==l.length){const R=o.substring(s,T);d.push(R),s=T+1}l.push("{")}}const E=o.substring(s);return d.push(E),d}function M1(o,s,l,d,m,y,E,T){const R=[],O=[],V=[];s.cases.push(y),s.create.push(R),s.remove.push(O),s.update.push(V);const K=Ja(Bf()).getInertBodyElement(E),le=Wh(K)||K;return le?R1(o,s,l,d,R,O,V,le,m,T,0):0}function R1(o,s,l,d,m,y,E,T,R,O,V){let q=0,K=T.firstChild;for(;K;){const le=cf(o,l,1,null);switch(K.nodeType){case Node.ELEMENT_NODE:const me=K,Ne=me.tagName.toLowerCase();if(wa.hasOwnProperty(Ne)){ay(m,Ta,Ne,R,le),o.data[le]=Ne;const xt=me.attributes;for(let Zt=0;Zt<xt.length;Zt++){const Mn=xt.item(Zt),Ao=Mn.name.toLowerCase();Mn.value.match(Tb)?op.hasOwnProperty(Ao)&&oy(E,Mn.value,le,Mn.name,0,ru[Ao]?tu:ds[Ao]?zd:null):JC(m,le,Mn)}q=R1(o,s,l,d,m,y,E,K,le,O,V+1)|q,XC(y,le,V)}break;case Node.TEXT_NODE:const Ce=K.textContent||"",at=Ce.match(Tb);ay(m,null,at?"":Ce,R,le),XC(y,le,V),at&&(q=oy(E,Ce,le,null,0,null)|q);break;case Node.COMMENT_NODE:const He=y1.exec(K.textContent||"");if(He){const Zt=O[parseInt(He[1],10)];ay(m,Tr,"",R,le),I1(o,l,d,R,Zt,le),vF(y,le,V)}}K=K.nextSibling}return q}function XC(o,s,l){0===l&&o.push(s)}function vF(o,s,l){0===l&&(o.push(~s),o.push(s))}function ay(o,s,l,d,m){null!==s&&o.push(s),o.push(l,m,function(o,s,l){return 0|s<<17|l<<1}(0,d,m))}function JC(o,s,l){o.push(s<<1|1,l.name,l.value)}function nE(o,s,l=-1){const d=mn(),m=Ze(),y=20+o,E=$r(d.consts,s),T=Rs();d.firstCreatePass&&function(o,s,l,d,m,y){const E=Rs(),T=[],R=[],O=[[]];m=function(o,s){if(function(o){return-1===o}(s))return S1(o);{const l=o.indexOf(`:${s}\ufffd`)+2+s.toString().length,d=o.search(new RegExp(`\ufffd\\/\\*\\d+:${s}\ufffd`));return S1(o.substring(l,d))}}(m,y);const V=function(o){return o.replace(_F," ")}(m).split(iy);for(let q=0;q<V.length;q++){let K=V[q];if(0==(1&q)){const le=ZC(K);for(let me=0;me<le.length;me++){let Ne=le[me];if(0==(1&me)){const Ce=Ne;""!==Ce&&QC(o,E,O[0],T,R,l,Ce)}else{const Ce=Ne;if("object"!=typeof Ce)throw new Error(`Unable to parse ICU expression in "${m}" message.`);I1(o,l,R,s,Ce,Sf(o,E,O[0],l,T,"",!0).index)}}}else{const le=47===K.charCodeAt(0),Ne=(K.charCodeAt(le?1:0),20+Number.parseInt(K.substring(le?2:1)));if(le)O.shift(),Vi(Rs(),!1);else{const Ce=Jp(o,O[0],Ne);O.unshift([]),Vi(Ce,!0)}}}o.data[d]={create:T,update:R}}(d,null===T?0:T.index,m,y,E,l);const R=d.data[y],V=$l(d,T===m[6]?null:T,m);(function(o,s,l,d){const m=o[11];for(let y=0;y<s.length;y++){const E=s[y++],T=s[y],R=(E&Jr.COMMENT)===Jr.COMMENT,O=(E&Jr.APPEND_EAGERLY)===Jr.APPEND_EAGERLY,V=E>>>Jr.SHIFT;let q=o[V];null===q&&(q=o[V]=R?m.createComment(T):Gl(m,T)),O&&null!==l&&sn(m,l,q,d,!1)}})(m,R.create,V,T&&8&T.type?m[T.index]:null),Ru(!0)}function iE(o,s,l){nE(o,s,l),Ru(!1)}function Ib(o){return function(o){o&&(Qm|=1<<Math.min(Db,31)),Db++}(no(Ze(),di(),o)),Ib}function oE(o){!function(o,s,l){if(Db>0){const d=o.data[l];hR(o,s,Array.isArray(d)?d:d.update,Ho()-Db-1,Qm)}Qm=0,Db=0}(mn(),Ze(),o+20)}function Ab(o,s,l,d,m){if(o=pe(o),Array.isArray(o))for(let y=0;y<o.length;y++)Ab(o[y],s,l,d,m);else{const y=mn(),E=Ze();let T=yf(o)?o:pe(o.provide),R=$0(o);const O=Cr(),V=1048575&O.providerIndexes,q=O.directiveStart,K=O.providerIndexes>>20;if(yf(o)||!o.multi){const le=new os(R,m,sd),me=aE(T,s,m?V:V+K,q);-1===me?(Ln(ni(O,E),y,T),sE(y,o,s.length),s.push(T),O.directiveStart++,O.directiveEnd++,m&&(O.providerIndexes+=1048576),l.push(le),E.push(le)):(l[me]=le,E[me]=le)}else{const le=aE(T,s,V+K,q),me=aE(T,s,V,V+K),Ne=le>=0&&l[le],Ce=me>=0&&l[me];if(m&&!Ce||!m&&!Ne){Ln(ni(O,E),y,T);const at=function(o,s,l,d,m){const y=new os(o,l,sd);return y.multi=[],y.index=s,y.componentProviders=0,P1(y,m,d&&!l),y}(m?F1:CR,l.length,m,d,R);!m&&Ce&&(l[me].providerFactory=at),sE(y,o,s.length,0),s.push(T),O.directiveStart++,O.directiveEnd++,m&&(O.providerIndexes+=1048576),l.push(at),E.push(at)}else sE(y,o,le>-1?le:me,P1(l[m?me:le],R,!m&&d));!m&&d&&Ce&&l[me].componentProviders++}}}function sE(o,s,l,d){const m=yf(s);if(m||function(o){return!!o.useClass}(s)){const E=(s.useClass||s).prototype.ngOnDestroy;if(E){const T=o.destroyHooks||(o.destroyHooks=[]);if(!m&&s.multi){const R=T.indexOf(l);-1===R?T.push(l,[d,E]):T[R+1].push(d,E)}else T.push(l,E)}}}function P1(o,s,l){return l&&o.componentProviders++,o.multi.push(s)-1}function aE(o,s,l,d){for(let m=l;m<d;m++)if(s[m]===o)return m;return-1}function CR(o,s,l,d){return L1(this.multi,[])}function F1(o,s,l,d){const m=this.multi;let y;if(this.providerFactory){const E=this.providerFactory.componentProviders,T=Fc(l,l[1],this.providerFactory.index,d);y=T.slice(0,E),L1(m,y);for(let R=E;R<T.length;R++)y.push(T[R])}else y=[],L1(m,y);return y}function L1(o,s){for(let l=0;l<o.length;l++)s.push((0,o[l])());return s}function uE(o,s=[]){return l=>{l.providersResolver=(d,m)=>function(o,s,l){const d=mn();if(d.firstCreatePass){const m=kr(o);Ab(l,d.data,d.blueprint,m,!0),Ab(s,d.data,d.blueprint,m,!1)}}(d,m?m(o):o,s)}}class V1{}const TR="ngComponent";class IR{resolveComponentFactory(s){throw function(o){const s=Error(`No component factory found for ${Ae(o)}. Did you add it to @NgModule.entryComponents?`);return s[TR]=o,s}(s)}}let uy=(()=>{class o{}return o.NULL=new IR,o})();function cE(...o){}function tg(o,s){return new ud(Ki(o,s))}const j1=function(){return tg(Cr(),Ze())};let ud=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=j1,o})();function H1(o){return o instanceof ud?o.nativeElement:o}class Mb{}let NR=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>xR(),o})();const xR=function(){const o=Ze(),l=Si(Cr().index,o);return function(o){return o[11]}(Tn(l)?l:o)};let dE=(()=>{class o{}return o.\u0275prov=Xt({token:o,providedIn:"root",factory:()=>null}),o})();class FR{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Rb=new FR("13.0.2"),Zm={};function Nb(o,s,l,d,m=!1){for(;null!==l;){const y=s[l.index];if(null!==y&&d.push(Fn(y)),Ot(y))for(let T=10;T<y.length;T++){const R=y[T],O=R[1].firstChild;null!==O&&Nb(R[1],R,O,d)}const E=l.type;if(8&E)Nb(o,s,l.child,d);else if(32&E){const T=Kg(l,s);let R;for(;R=T();)d.push(R)}else if(16&E){const T=Q(s,l);if(Array.isArray(T))d.push(...T);else{const R=td(s[16]);Nb(R[1],R,T,d,!0)}}l=m?l.projectionNext:l.next}return d}class ly{constructor(s,l){this._lView=s,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,l=s[1];return Nb(l,s,l.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ot(s)){const l=s[8],d=l?l.indexOf(this):-1;d>-1&&(Ep(s,d),yr(l,d))}this._attachedToViewContainer=!1}Gi(this._lView[1],this._lView)}onDestroy(s){_m(this._lView[1],this._lView,null,s)}markForCheck(){lh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Dm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,s,l){Dc(!0);try{Dm(o,s,l)}finally{Dc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Fe(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class EF extends ly{constructor(s){super(s),this._view=s}detectChanges(){Dv(this._view)}checkNoChanges(){!function(o){Dc(!0);try{Dv(o)}finally{Dc(!1)}}(this._view)}get context(){return null}}class hE extends uy{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const l=Hn(s);return new kb(l,this.ngModule)}}function G1(o){const s=[];for(let l in o)o.hasOwnProperty(l)&&s.push({propName:o[l],templateName:l});return s}const z1=new sr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Wg});class kb extends V1{constructor(s,l){super(),this.componentDef=s,this.ngModule=l,this.componentType=s.type,this.selector=s.selectors.map(Ip).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return G1(this.componentDef.inputs)}get outputs(){return G1(this.componentDef.outputs)}create(s,l,d,m){const y=(m=m||this.ngModule)?function(o,s){return{get:(l,d,m)=>{const y=o.get(l,Zm,m);return y!==Zm||d===Zm?y:s.get(l,d,m)}}}(s,m.injector):s,E=y.get(Mb,yc),T=y.get(dE,null),R=E.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",V=d?function(o,s,l){if(mr(o))return o.selectRootElement(s,l===yt.ShadowDom);let d="string"==typeof s?o.querySelector(s):s;return d.textContent="",d}(R,d,this.componentDef.encapsulation):Qu(E.createRenderer(null,this.componentDef),O,function(o){const s=o.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(O)),q=this.componentDef.onPush?576:528,K=function(o,s){return{components:[],scheduler:o||Wg,clean:G0,playerHandler:s||null,flags:0}}(),le=Op(0,null,null,1,0,null,null,null,null,null),me=Kr(null,le,K,q,null,null,E,R,T,y);let Ne,Ce;Dl(me);try{const at=function(o,s,l,d,m,y){const E=l[1];l[20]=o;const R=_s(E,20,2,"#host",null),O=R.mergedAttrs=s.hostAttrs;null!==O&&(ch(R,O,!0),null!==o&&(Nc(m,o,O),null!==R.classes&&Dr(m,o,R.classes),null!==R.styles&&tn(m,o,R.styles)));const V=d.createRenderer(o,s),q=Kr(l,gv(s),null,s.onPush?64:16,l[20],R,d,V,y||null,null);return E.firstCreatePass&&(Ln(ni(R,l),E,s.type),pf(E,R),id(R,l.length,1)),el(l,q),l[20]=q}(V,this.componentDef,me,E,R);if(V)if(d)Nc(R,V,["ng-version",Rb.full]);else{const{attrs:He,classes:xt}=function(o){const s=[],l=[];let d=1,m=2;for(;d<o.length;){let y=o[d];if("string"==typeof y)2===m?""!==y&&s.push(y,o[++d]):8===m&&l.push(y);else{if(!$s(m))break;m=y}d++}return{attrs:s,classes:l}}(this.componentDef.selectors[0]);He&&Nc(R,V,He),xt&&xt.length>0&&Dr(R,V,xt.join(" "))}if(Ce=Ba(le,20),void 0!==l){const He=Ce.projection=[];for(let xt=0;xt<this.ngContentSelectors.length;xt++){const Zt=l[xt];He.push(null!=Zt?Array.from(Zt):null)}}Ne=function(o,s,l,d,m){const y=l[1],E=function(o,s,l){const d=Cr();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Bp(o,d,s,cf(o,s,1,null),l));const m=Fc(s,o,d.directiveStart,d);Or(m,s);const y=Ki(d,s);return y&&Or(y,s),m}(y,l,s);if(d.components.push(E),o[8]=E,m&&m.forEach(R=>R(E,s)),s.contentQueries){const R=Cr();s.contentQueries(1,E,R.directiveStart)}const T=Cr();return!y.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ja(T.index),yv(l[1],T,0,T.directiveStart,T.directiveEnd,s),B0(s,E)),E}(at,this.componentDef,me,K,[eb]),ah(le,me,null)}finally{fi()}return new UR(this.componentType,Ne,tg(Ce,me),me,Ce)}}class UR extends class{}{constructor(s,l,d,m,y){super(),this.location=d,this._rootLView=m,this._tNode=y,this.instance=l,this.hostView=this.changeDetectorRef=new EF(m),this.componentType=s}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class If{}class $1{}const Xm=new Map;class ro extends If{constructor(s,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hE(this);const d=Rr(s);this._bootstrapComponents=eo(d.bootstrap),this._r3Injector=Av(s,l,[{provide:If,useValue:this},{provide:uy,useValue:this.componentFactoryResolver}],Ae(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,l=ar.THROW_IF_NOT_FOUND,d=ft.Default){return s===ar||s===If||s===Jl?this:this._r3Injector.get(s,l,d)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class ng extends $1{constructor(s){super(),this.moduleType=s,null!==Rr(s)&&function(o){const s=new Set;!function l(d){const m=Rr(d,!0),y=m.id;null!==y&&(function(o,s,l){if(s&&s!==l)throw new Error(`Duplicate module registered for ${o} - ${Ae(s)} vs ${Ae(s.name)}`)}(y,Xm.get(y),d),Xm.set(y,d));const E=eo(m.imports);for(const T of E)s.has(T)||(s.add(T),l(T))}(o)}(s)}create(s){return new ro(this.moduleType,s)}}function GR(o,s,l,d){return xb(Ze(),Br(),o,s,l,d)}function fE(o,s,l,d,m){return function(o,s,l,d,m,y,E){const T=s+l;return il(o,T,m,y)?Ko(o,T+2,E?d.call(E,m,y):d(m,y)):e_(o,T+2)}(Ze(),Br(),o,s,l,d,m)}function zR(o,s,l,d,m,y){return function(o,s,l,d,m,y,E,T){const R=s+l;return function(o,s,l,d,m){const y=il(o,s,l,d);return no(o,s+2,m)||y}(o,R,m,y,E)?Ko(o,R+3,T?d.call(T,m,y,E):d(m,y,E)):e_(o,R+3)}(Ze(),Br(),o,s,l,d,m,y)}function e_(o,s){const l=o[s];return l===nn?void 0:l}function xb(o,s,l,d,m,y){const E=s+l;return no(o,E,m)?Ko(o,E+1,y?d.call(y,m):d(m)):e_(o,E+1)}function Fb(o,s){const l=mn();let d;const m=o+20;l.firstCreatePass?(d=function(o,s){if(s)for(let l=s.length-1;l>=0;l--){const d=s[l];if(o===d.name)return d}throw new Ge("302",`The pipe '${o}' could not be found!`)}(s,l.pipeRegistry),l.data[m]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(m,d.onDestroy)):d=l.data[m];const y=d.factory||(d.factory=Di(d.type)),E=Rn(sd);try{const T=ti(!1),R=y();return ti(T),function(o,s,l,d){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),s[l]=d}(l,Ze(),m,R),R}finally{Rn(E)}}function mE(o,s,l){const d=o+20,m=Ze(),y=Mu(m,d);return function(o,s){return o[1].data[s].pure}(m,d)?xb(m,Br(),s,y.transform,l,y):y.transform(l)}function Lb(o){return s=>{setTimeout(o,void 0,s)}}const sl=class extends c.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,l,d){var R,O,V;let m=s,y=l||(()=>null),E=d;if(s&&"object"==typeof s){const q=s;m=null==(R=q.next)?void 0:R.bind(q),y=null==(O=q.error)?void 0:O.bind(q),E=null==(V=q.complete)?void 0:V.bind(q)}this.__isAsync&&(y=Lb(y),m&&(m=Lb(m)),E&&(E=Lb(E)));const T=super.subscribe({next:m,error:y,complete:E});return s instanceof H.w0&&s.add(T),T}};function $R(){return this._results[Yo()]()}class t_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Yo(),d=t_.prototype;d[l]||(d[l]=$R)}get changes(){return this._changes||(this._changes=new sl)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,l){return this._results.reduce(s,l)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,l){const d=this;d.dirty=!1;const m=Ri(s);(this._changesDetected=!function(o,s,l){if(o.length!==s.length)return!1;for(let d=0;d<o.length;d++){let m=o[d],y=s[d];if(l&&(m=l(m),y=l(y)),y!==m)return!1}return!0}(d._results,m,l))&&(d._results=m,d.length=m.length,d.last=m[this.length-1],d.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const J1=function(){return Vb(Cr(),Ze())};let n_=(()=>{class o{}return o.__NG_ELEMENT_ID__=J1,o})();const bE=n_,qR=class extends bE{constructor(s,l,d){super(),this._declarationLView=s,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(s){const l=this._declarationTContainer.tViews,d=Kr(this._declarationLView,l,s,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(l)),ah(l,d,s),new ly(d)}};function Vb(o,s){return 4&o.type?new qR(s,o,tg(o,s)):null}const IF=function(){return Hb(Cr(),Ze())};let EE=(()=>{class o{}return o.__NG_ELEMENT_ID__=IF,o})();const Ub=EE,DE=class extends Ub{constructor(s,l,d){super(),this._lContainer=s,this._hostTNode=l,this._hostLView=d}get element(){return tg(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){const s=$n(this._hostTNode,this._hostLView);if(Uh(s)){const l=Oc(s,this._hostLView),d=Tl(s);return new qn(l[1].data[d+8],l)}return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const l=jb(this._lContainer);return null!==l&&l[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,l,d){const m=s.createEmbeddedView(l||{});return this.insert(m,d),m}createComponent(s,l,d,m,y){const E=s&&!("function"==typeof s);let T;if(E)T=l;else{const q=l||{};T=q.index,d=q.injector,m=q.projectableNodes,y=q.ngModuleRef}const R=E?s:new kb(Hn(s)),O=d||this.parentInjector;if(!y&&null==R.ngModule&&O){const q=O.get(If,null);q&&(y=q)}const V=R.create(O,m,void 0,y);return this.insert(V.hostView,T),V}insert(s,l){const d=s._lView,m=d[1];if(Ot(d[3])){const V=this.indexOf(s);if(-1!==V)this.detach(V);else{const q=d[3],K=new DE(q,q[6],q[3]);K.detach(K.indexOf(s))}}const y=this._adjustIndex(l),E=this._lContainer;!function(o,s,l,d){const m=10+d,y=l.length;d>0&&(l[m-1][4]=s),d<y-10?(s[4]=l[m],pa(l,10+d,s)):(l.push(s),s[4]=null),s[3]=l;const E=s[17];null!==E&&l!==E&&function(o,s){const l=o[9];s[16]!==s[3][3][16]&&(o[2]=!0),null===l?o[9]=[s]:l.push(s)}(E,s);const T=s[19];null!==T&&T.insertView(o),s[2]|=128}(m,d,E,y);const T=re(y,E),R=d[11],O=nh(R,E[7]);return null!==O&&function(o,s,l,d,m,y){d[0]=m,d[6]=s,Fe(o,d,l,1,m,y)}(m,E[6],R,d,O,T),s.attachToViewContainerRef(),pa(bh(E),y,s),s}move(s,l){return this.insert(s,l)}indexOf(s){const l=jb(this._lContainer);return null!==l?l.indexOf(s):-1}remove(s){const l=this._adjustIndex(s,-1),d=Ep(this._lContainer,l);d&&(yr(bh(this._lContainer),l),Gi(d[1],d))}detach(s){const l=this._adjustIndex(s,-1),d=Ep(this._lContainer,l);return d&&null!=yr(bh(this._lContainer),l)?new ly(d):null}_adjustIndex(s,l=0){return null==s?this.length+l:s}};function jb(o){return o[8]}function bh(o){return o[8]||(o[8]=[])}function Hb(o,s){let l;const d=s[o.index];if(Ot(d))l=d;else{let m;if(8&o.type)m=Fn(d);else{const y=s[11];m=y.createComment("");const E=Ki(o,s);sn(y,nh(y,E),m,function(o,s){return mr(o)?o.nextSibling(s):s.nextSibling}(y,E),!1)}s[o.index]=l=Cm(d,s,m,o),el(s,l)}return new DE(l,o,s)}class zb{constructor(s){this.queryList=s,this.matches=null}clone(){return new zb(this.queryList)}setDirty(){this.queryList.setDirty()}}class ld{constructor(s=[]){this.queries=s}createEmbeddedView(s){const l=s.queries;if(null!==l){const d=null!==s.contentQueries?s.contentQueries[0]:l.length,m=[];for(let y=0;y<d;y++){const E=l.getByIndex(y);m.push(this.queries[E.indexInDeclarationView].clone())}return new ld(m)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let l=0;l<this.queries.length;l++)null!==py(s,l).matches&&this.queries[l].setDirty()}}class TE{constructor(s,l,d=null){this.predicate=s,this.flags=l,this.read=d}}class $b{constructor(s=[]){this.queries=s}elementStart(s,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(s,l)}elementEnd(s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(s)}embeddedTView(s){let l=null;for(let d=0;d<this.length;d++){const m=null!==l?l.length:0,y=this.getByIndex(d).embeddedTView(s,m);y&&(y.indexInDeclarationView=d,null!==l?l.push(y):l=[y])}return null!==l?new $b(l):null}template(s,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(s,l)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class al{constructor(s,l=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(s,l){this.isApplyingToNode(l)&&this.matchTNode(s,l)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,l){this.elementStart(s,l)}embeddedTView(s,l){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,l),new al(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=s.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(s,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let m=0;m<d.length;m++){const y=d[m];this.matchTNodeWithReadOption(s,l,ig(l,y)),this.matchTNodeWithReadOption(s,l,Nt(l,s,y,!1,!1))}else d===n_?4&l.type&&this.matchTNodeWithReadOption(s,l,-1):this.matchTNodeWithReadOption(s,l,Nt(l,s,d,!1,!1))}matchTNodeWithReadOption(s,l,d){if(null!==d){const m=this.metadata.read;if(null!==m)if(m===ud||m===EE||m===n_&&4&l.type)this.addMatch(l.index,-2);else{const y=Nt(l,s,m,!1,!1);null!==y&&this.addMatch(l.index,y)}else this.addMatch(l.index,d)}}addMatch(s,l){null===this.matches?this.matches=[s,l]:this.matches.push(s,l)}}function ig(o,s){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===s)return l[d+1];return null}function YR(o,s,l,d){return-1===l?function(o,s){return 11&o.type?tg(o,s):4&o.type?Vb(o,s):null}(s,o):-2===l?function(o,s,l){return l===ud?tg(s,o):l===n_?Vb(s,o):l===EE?Hb(s,o):void 0}(o,s,d):Fc(o,o[1],l,s)}function IE(o,s,l,d){const m=s[19].queries[d];if(null===m.matches){const y=o.data,E=l.matches,T=[];for(let R=0;R<E.length;R+=2){const O=E[R];T.push(O<0?null:YR(s,y[O],E[R+1],l.metadata.read))}m.matches=T}return m.matches}function r_(o,s,l,d){const m=o.queries.getByIndex(l),y=m.matches;if(null!==y){const E=IE(o,s,m,l);for(let T=0;T<y.length;T+=2){const R=y[T];if(R>0)d.push(E[T/2]);else{const O=y[T+1],V=s[-R];for(let q=10;q<V.length;q++){const K=V[q];K[17]===K[3]&&r_(K[1],K,O,d)}if(null!==V[9]){const q=V[9];for(let K=0;K<q.length;K++){const le=q[K];r_(le[1],le,O,d)}}}}}return d}function fy(o){const s=Ze(),l=mn(),d=Sc();hi(d+1);const m=py(l,d);if(o.dirty&&Ms(s)===(2==(2&m.metadata.flags))){if(null===m.matches)o.reset([]);else{const y=m.crossesNgTemplate?r_(l,s,d,[]):IE(l,s,m,d);o.reset(y,H1),o.notifyOnChanges()}return!0}return!1}function tS(o,s,l){const d=mn();d.firstCreatePass&&(Sa(d,new TE(o,s,l),-1),2==(2&s)&&(d.staticViewQueries=!0)),AE(d,Ze(),s)}function qb(o,s,l,d){const m=mn();if(m.firstCreatePass){const y=Cr();Sa(m,new TE(s,l,d),y.index),function(o,s){const l=o.contentQueries||(o.contentQueries=[]);s!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,s)}(m,o),2==(2&l)&&(m.staticContentQueries=!0)}AE(m,Ze(),l)}function nS(){return o=Ze(),s=Sc(),o[19].queries[s].queryList;var o,s}function AE(o,s,l){const d=new t_(4==(4&l));_m(o,s,d,d.destroy),null===s[19]&&(s[19]=new ld),s[19].queries.push(new zb(d))}function Sa(o,s,l){null===o.queries&&(o.queries=new $b),o.queries.track(new al(s,l))}function py(o,s){return o.queries.getByIndex(s)}function iS(o,s){return Vb(o,s)}const s_=new sr("Application Initializer");let a_=(()=>{class o{constructor(l){this.appInits=l,this.resolve=cE,this.reject=cE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,m)=>{this.resolve=d,this.reject=m})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const y=this.appInits[m]();if(Kp(y))l.push(y);else if(FC(y)){const E=new Promise((T,R)=>{y.subscribe({complete:T,error:R})});l.push(E)}}Promise.all(l).then(()=>{d()}).catch(m=>{this.reject(m)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(Vn(s_,8))},o.\u0275prov=Xt({token:o,factory:o.\u0275fac}),o})();const FE=new sr("AppId"),wS={provide:FE,useFactory:function(){return`${u_()}${u_()}${u_()}`},deps:[]};function u_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pN=new sr("Platform Initializer"),du=new sr("Platform ID"),og=new sr("appBootstrapListener");let CS=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Xt({token:o,factory:o.\u0275fac}),o})();const by=new sr("LocaleId"),ES=new sr("DefaultCurrencyCode");class vN{constructor(s,l){this.ngModuleFactory=s,this.componentFactories=l}}const VE=function(o){return new ng(o)},wN=VE,EN=function(o){return Promise.resolve(VE(o))},nw=function(o){const s=VE(o),d=eo(Rr(o).declarations).reduce((m,y)=>{const E=Hn(y);return E&&m.push(new kb(E)),m},[]);return new vN(s,d)},SS=nw,TN=function(o){return Promise.resolve(nw(o))};let UE=(()=>{class o{constructor(){this.compileModuleSync=wN,this.compileModuleAsync=EN,this.compileModuleAndAllComponentsSync=SS,this.compileModuleAndAllComponentsAsync=TN}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Xt({token:o,factory:o.\u0275fac}),o})();const IN=(()=>Promise.resolve(0))();function jE(o){"undefined"==typeof Zone?IN.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ia{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sl(!1),this.onMicrotaskEmpty=new sl(!1),this.onStable=new sl(!1),this.onError=new sl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!d&&l,m.shouldCoalesceRunChangeDetection=d,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function(){let o=In.requestAnimationFrame,s=In.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&s){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=s[Zone.__symbol__("OriginalDelegate")];d&&(s=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(o){const s=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(In,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,NS(o),o.isCheckStableRunning=!0,HE(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),NS(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,m,y,E,T)=>{try{return GE(o),l.invokeTask(m,y,E,T)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||o.shouldCoalesceRunChangeDetection)&&s(),kS(o)}},onInvoke:(l,d,m,y,E,T,R)=>{try{return GE(o),l.invoke(m,y,E,T,R)}finally{o.shouldCoalesceRunChangeDetection&&s(),kS(o)}},onHasTask:(l,d,m,y)=>{l.hasTask(m,y),d===m&&("microTask"==y.change?(o._hasPendingMicrotasks=y.microTask,NS(o),HE(o)):"macroTask"==y.change&&(o.hasPendingMacrotasks=y.macroTask))},onHandleError:(l,d,m,y)=>(l.handleError(m,y),o.runOutsideAngular(()=>o.onError.emit(y)),!1)})}(m)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ia.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ia.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,l,d){return this._inner.run(s,l,d)}runTask(s,l,d,m){const y=this._inner,E=y.scheduleEventTask("NgZoneEvent: "+m,s,AN,cE,cE);try{return y.runTask(E,l,d)}finally{y.cancelTask(E)}}runGuarded(s,l,d){return this._inner.runGuarded(s,l,d)}runOutsideAngular(s){return this._outer.run(s)}}const AN={};function HE(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function NS(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function GE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function kS(o){o._nesting--,HE(o)}class RN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sl,this.onMicrotaskEmpty=new sl,this.onStable=new sl,this.onError=new sl}run(s,l,d){return s.apply(l,d)}runGuarded(s,l,d){return s.apply(l,d)}runOutsideAngular(s){return s()}runTask(s,l,d,m){return s.apply(l,d)}}let zE=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ia.assertNotInAngularZone(),jE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jE(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,m){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==y),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:y,updateCb:m})}whenStable(l,d,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,m){return[]}}return o.\u0275fac=function(l){return new(l||o)(Vn(Ia))},o.\u0275prov=Xt({token:o,factory:o.\u0275fac}),o})(),xS=(()=>{class o{constructor(){this._applications=new Map,rw.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return rw.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Xt({token:o,factory:o.\u0275fac}),o})();class NN{addToWindow(s){}findTestabilityInTree(s,l,d){return null}}function kN(o){rw=o}let rw=new NN,wy=!0,$E=!1;function qE(){return $E=!0,wy}function OS(){if($E)throw new Error("Cannot enable prod mode after platform setup.");wy=!1}let ic;const LS=new sr("AllowMultipleToken");class VN{constructor(s,l){this.name=s,this.token=l}}function VS(o,s,l=[]){const d=`Platform: ${s}`,m=new sr(d);return(y=[])=>{let E=jN();if(!E||E.injector.get(LS,!1))if(o)o(l.concat(y).concat({provide:m,useValue:!0}));else{const T=l.concat(y).concat({provide:m,useValue:!0},{provide:Hp,useValue:"platform"});!function(o){if(ic&&!ic.destroyed&&!ic.injector.get(LS,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ic=o.get(l_);const s=o.get(pN,null);s&&s.forEach(l=>l())}(ar.create({providers:T,name:d}))}return function(o){const s=jN();if(!s)throw new Error("No platform exists!");if(!s.injector.get(o,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(m)}}function jN(){return ic&&!ic.destroyed?ic:null}let l_=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const T=function(o,s){let l;return l="noop"===o?new RN:("zone.js"===o?void 0:o)||new Ia({enableLongStackTrace:qE(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),R=[{provide:Ia,useValue:T}];return T.run(()=>{const O=ar.create({providers:R,parent:this.injector,name:l.moduleType.name}),V=l.create(O),q=V.injector.get(ps,null);if(!q)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return T.runOutsideAngular(()=>{const K=T.onError.subscribe({next:le=>{q.handleError(le)}});V.onDestroy(()=>{wi(this._modules,V),K.unsubscribe()})}),function(o,s,l){try{const d=l();return Kp(d)?d.catch(m=>{throw s.runOutsideAngular(()=>o.handleError(m)),m}):d}catch(d){throw s.runOutsideAngular(()=>o.handleError(d)),d}}(q,T,()=>{const K=V.injector.get(a_);return K.runInitializers(),K.donePromise.then(()=>(function(o){(function(o,s){null==o&&rt(s,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(Cb=o.toLowerCase().replace(/_/g,"-"))}(V.injector.get(by,Jv)||Jv),this._moduleDoBootstrap(V),V))})})}bootstrapModule(l,d=[]){const m=BS({},d);return function(o,s,l){const d=new ng(l);return Promise.resolve(d)}(0,0,l).then(y=>this.bootstrapModuleFactory(y,m))}_moduleDoBootstrap(l){const d=l.injector.get(c_);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(m=>d.bootstrap(m));else{if(!l.instance.ngDoBootstrap)throw new Error(`The module ${Ae(l.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(Vn(ar))},o.\u0275prov=Xt({token:o,factory:o.\u0275fac}),o})();function BS(o,s){return Array.isArray(s)?s.reduce(BS,o):St(St({},o),s)}let c_=(()=>{class o{constructor(l,d,m,y,E){this._zone=l,this._injector=d,this._exceptionHandler=m,this._componentFactoryResolver=y,this._initStatus=E,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new B.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),R=new B.y(O=>{let V;this._zone.runOutsideAngular(()=>{V=this._zone.onStable.subscribe(()=>{Ia.assertNotInAngularZone(),jE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{Ia.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{V.unsubscribe(),q.unsubscribe()}});this.isStable=(0,ge.T)(T,R.pipe((0,Pe.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let m;m=l instanceof V1?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(m.componentType);const y=function(o){return o.isBoundToModule}(m)?void 0:this._injector.get(If),T=m.create(ar.NULL,[],d||m.selector,y),R=T.location.nativeElement,O=T.injector.get(zE,null),V=O&&T.injector.get(xS);return O&&V&&V.registerApplication(R,O),T.onDestroy(()=>{this.detachView(T.hostView),wi(this.components,T),V&&V.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;wi(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(og,[]).concat(this._bootstrapListeners).forEach(m=>m(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(Vn(Ia),Vn(ar),Vn(ps),Vn(uy),Vn(a_))},o.\u0275prov=Xt({token:o,factory:o.\u0275fac}),o})();function wi(o,s){const l=o.indexOf(s);l>-1&&o.splice(l,1)}const WE=function(o){return function(o,s,l){if(mc(o)&&!l){const d=Si(o.index,s);return new ly(d,d)}return 47&o.type?new ly(s[16],s):null}(Cr(),Ze(),16==(16&o))};let sg=(()=>{class o{}return o.__NG_ELEMENT_ID__=WE,o})();const YN=function(o){return null};class YS{constructor(){}supports(s){return Wp(s)}create(s){return new YF(s)}}const QN=(o,s)=>s;class YF{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||QN}forEachItem(s){let l;for(l=this._itHead;null!==l;l=l._next)s(l)}forEachOperation(s){let l=this._itHead,d=this._removalsHead,m=0,y=null;for(;l||d;){const E=!d||l&&l.currentIndex<JN(d,m,y)?l:d,T=JN(E,m,y),R=E.currentIndex;if(E===d)m--,d=d._nextRemoved;else if(l=l._next,null==E.previousIndex)m++;else{y||(y=[]);const O=T-m,V=R-m;if(O!=V){for(let K=0;K<O;K++){const le=K<y.length?y[K]:y[K]=0,me=le+K;V<=me&&me<O&&(y[K]=le+1)}y[E.previousIndex]=V-O}}T!==R&&s(E,T,R)}}forEachPreviousItem(s){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)s(l)}forEachAddedItem(s){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)s(l)}forEachMovedItem(s){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)s(l)}forEachRemovedItem(s){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)s(l)}forEachIdentityChange(s){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)s(l)}diff(s){if(null==s&&(s=[]),!Wp(s))throw new Error(`Error trying to diff '${Ae(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let m,y,E,l=this._itHead,d=!1;if(Array.isArray(s)){this.length=s.length;for(let T=0;T<this.length;T++)y=s[T],E=this._trackByFn(T,y),null!==l&&Object.is(l.trackById,E)?(d&&(l=this._verifyReinsertion(l,y,E,T)),Object.is(l.item,y)||this._addIdentityChange(l,y)):(l=this._mismatch(l,y,E,T),d=!0),l=l._next}else m=0,function(o,s){if(Array.isArray(o))for(let l=0;l<o.length;l++)s(o[l]);else{const l=o[Yo()]();let d;for(;!(d=l.next()).done;)s(d.value)}}(s,T=>{E=this._trackByFn(m,T),null!==l&&Object.is(l.trackById,E)?(d&&(l=this._verifyReinsertion(l,T,E,m)),Object.is(l.item,T)||this._addIdentityChange(l,T)):(l=this._mismatch(l,T,E,m),d=!0),l=l._next,m++}),this.length=m;return this._truncate(l),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,l,d,m){let y;return null===s?y=this._itTail:(y=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(s.item,l)||this._addIdentityChange(s,l),this._reinsertAfter(s,y,m)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(d,m))?(Object.is(s.item,l)||this._addIdentityChange(s,l),this._moveAfter(s,y,m)):s=this._addAfter(new ZN(l,d),y,m),s}_verifyReinsertion(s,l,d,m){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?s=this._reinsertAfter(y,s._prev,m):s.currentIndex!=m&&(s.currentIndex=m,this._addToMoves(s,m)),s}_truncate(s){for(;null!==s;){const l=s._next;this._addToRemovals(this._unlink(s)),s=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const m=s._prevRemoved,y=s._nextRemoved;return null===m?this._removalsHead=y:m._nextRemoved=y,null===y?this._removalsTail=m:y._prevRemoved=m,this._insertAfter(s,l,d),this._addToMoves(s,d),s}_moveAfter(s,l,d){return this._unlink(s),this._insertAfter(s,l,d),this._addToMoves(s,d),s}_addAfter(s,l,d){return this._insertAfter(s,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,l,d){const m=null===l?this._itHead:l._next;return s._next=m,s._prev=l,null===m?this._itTail=s:m._prev=s,null===l?this._itHead=s:l._next=s,null===this._linkedRecords&&(this._linkedRecords=new XN),this._linkedRecords.put(s),s.currentIndex=d,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const l=s._prev,d=s._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,s}_addToMoves(s,l){return s.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new XN),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,l){return s.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class ZN{constructor(s,l){this.item=s,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KS{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,s))return d;return null}remove(s){const l=s._prevDup,d=s._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class XN{constructor(){this.map=new Map}put(s){const l=s.trackById;let d=this.map.get(l);d||(d=new KS,this.map.set(l,d)),d.add(s)}get(s,l){const m=this.map.get(s);return m?m.get(s,l):null}remove(s){const l=s.trackById;return this.map.get(l).remove(s)&&this.map.delete(l),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JN(o,s,l){const d=o.previousIndex;if(null===d)return d;let m=0;return l&&d<l.length&&(m=l[d]),d+s+m}class ek{constructor(){}supports(s){return s instanceof Map||Um(s)}create(){return new KF}}class KF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let l;for(l=this._mapHead;null!==l;l=l._next)s(l)}forEachPreviousItem(s){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)s(l)}forEachChangedItem(s){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)s(l)}forEachAddedItem(s){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)s(l)}forEachRemovedItem(s){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)s(l)}diff(s){if(s){if(!(s instanceof Map||Um(s)))throw new Error(`Error trying to diff '${Ae(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(s,(d,m)=>{if(l&&l.key===m)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const y=this._getOrCreateRecordForKey(m,d);l=this._insertBeforeOrAppend(l,y)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,l){if(s){const d=s._prev;return l._next=s,l._prev=d,s._prev=l,d&&(d._next=l),s===this._mapHead&&(this._mapHead=l),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(s,l){if(this._records.has(s)){const m=this._records.get(s);this._maybeAddToChanges(m,l);const y=m._prev,E=m._next;return y&&(y._next=E),E&&(E._prev=y),m._next=null,m._prev=null,m}const d=new QF(s);return this._records.set(s,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,l){Object.is(l,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=l,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,l){s instanceof Map?s.forEach(l):Object.keys(s).forEach(d=>l(s[d],d))}}class QF{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tk(){return new cw([new YS])}let cw=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const m=d.factories.slice();l=l.concat(m)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||tk()),deps:[[o,new _o,new vi]]}}find(l){const d=this.factories.find(m=>m.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(o){return o.name||typeof o}(l)}'`)}}return o.\u0275prov=Xt({token:o,providedIn:"root",factory:tk}),o})();function rk(){return new dw([new ek])}let dw=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const m=d.factories.slice();l=l.concat(m)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||rk()),deps:[[o,new _o,new vi]]}}find(l){const d=this.factories.find(m=>m.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return o.\u0275prov=Xt({token:o,providedIn:"root",factory:rk}),o})();const tD=[new ek],XF=new cw([new YS]),JF=new dw(tD),eL=VS(null,"core",[{provide:du,useValue:"unknown"},{provide:l_,deps:[ar]},{provide:xS,deps:[]},{provide:CS,deps:[]}]),sk=[{provide:c_,useClass:c_,deps:[Ia,ar,ps,uy,a_]},{provide:z1,deps:[Ia],useFactory:function(o){let s=[];return o.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(l){s.push(l)}}},{provide:a_,useClass:a_,deps:[[new vi,s_]]},{provide:UE,useClass:UE,deps:[]},wS,{provide:cw,useFactory:function(){return XF},deps:[]},{provide:dw,useFactory:function(){return JF},deps:[]},{provide:by,useFactory:function(o){return o||"undefined"!=typeof $localize&&$localize.locale||Jv},deps:[[new _i(by),new vi,new _o]]},{provide:ES,useValue:"USD"}];let uk=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(Vn(c_))},o.\u0275mod=gr({type:o}),o.\u0275inj=Yn({providers:sk}),o})()}},_t=>{_t(_t.s=6321)}]);